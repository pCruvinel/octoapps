function Ux(r,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const i in a)if(i!=="default"&&!(i in r)){const l=Object.getOwnPropertyDescriptor(a,i);l&&Object.defineProperty(r,i,l.get?l:{enumerable:!0,get:()=>a[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();function Ic(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function bC(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(a){var i=Object.getOwnPropertyDescriptor(r,a);Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:function(){return r[a]}})}),t}var Xd={exports:{}},si={},Qd={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function _C(){if(Jg)return Xe;Jg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.iterator;function w(A){return A===null||typeof A!="object"?null:(A=m&&A[m]||A["@@iterator"],typeof A=="function"?A:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,_={};function C(A,M,T){this.props=A,this.context=M,this.refs=_,this.updater=T||y}C.prototype.isReactComponent={},C.prototype.setState=function(A,M){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,M,"setState")},C.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function S(){}S.prototype=C.prototype;function E(A,M,T){this.props=A,this.context=M,this.refs=_,this.updater=T||y}var N=E.prototype=new S;N.constructor=E,j(N,C.prototype),N.isPureReactComponent=!0;var D=Array.isArray,R=Object.prototype.hasOwnProperty,O={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function F(A,M,T){var $,Q={},pe=null,J=null;if(M!=null)for($ in M.ref!==void 0&&(J=M.ref),M.key!==void 0&&(pe=""+M.key),M)R.call(M,$)&&!B.hasOwnProperty($)&&(Q[$]=M[$]);var q=arguments.length-2;if(q===1)Q.children=T;else if(1<q){for(var le=Array(q),de=0;de<q;de++)le[de]=arguments[de+2];Q.children=le}if(A&&A.defaultProps)for($ in q=A.defaultProps,q)Q[$]===void 0&&(Q[$]=q[$]);return{$$typeof:r,type:A,key:pe,ref:J,props:Q,_owner:O.current}}function H(A,M){return{$$typeof:r,type:A.type,key:M,ref:A.ref,props:A.props,_owner:A._owner}}function Z(A){return typeof A=="object"&&A!==null&&A.$$typeof===r}function ae(A){var M={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(T){return M[T]})}var ue=/\/+/g;function z(A,M){return typeof A=="object"&&A!==null&&A.key!=null?ae(""+A.key):M.toString(36)}function V(A,M,T,$,Q){var pe=typeof A;(pe==="undefined"||pe==="boolean")&&(A=null);var J=!1;if(A===null)J=!0;else switch(pe){case"string":case"number":J=!0;break;case"object":switch(A.$$typeof){case r:case e:J=!0}}if(J)return J=A,Q=Q(J),A=$===""?"."+z(J,0):$,D(Q)?(T="",A!=null&&(T=A.replace(ue,"$&/")+"/"),V(Q,M,T,"",function(de){return de})):Q!=null&&(Z(Q)&&(Q=H(Q,T+(!Q.key||J&&J.key===Q.key?"":(""+Q.key).replace(ue,"$&/")+"/")+A)),M.push(Q)),1;if(J=0,$=$===""?".":$+":",D(A))for(var q=0;q<A.length;q++){pe=A[q];var le=$+z(pe,q);J+=V(pe,M,T,le,Q)}else if(le=w(A),typeof le=="function")for(A=le.call(A),q=0;!(pe=A.next()).done;)pe=pe.value,le=$+z(pe,q++),J+=V(pe,M,T,le,Q);else if(pe==="object")throw M=String(A),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return J}function se(A,M,T){if(A==null)return A;var $=[],Q=0;return V(A,$,"","",function(pe){return M.call(T,pe,Q++)}),$}function X(A){if(A._status===-1){var M=A._result;M=M(),M.then(function(T){(A._status===0||A._status===-1)&&(A._status=1,A._result=T)},function(T){(A._status===0||A._status===-1)&&(A._status=2,A._result=T)}),A._status===-1&&(A._status=0,A._result=M)}if(A._status===1)return A._result.default;throw A._result}var re={current:null},U={transition:null},I={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:U,ReactCurrentOwner:O};function P(){throw Error("act(...) is not supported in production builds of React.")}return Xe.Children={map:se,forEach:function(A,M,T){se(A,function(){M.apply(this,arguments)},T)},count:function(A){var M=0;return se(A,function(){M++}),M},toArray:function(A){return se(A,function(M){return M})||[]},only:function(A){if(!Z(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Xe.Component=C,Xe.Fragment=t,Xe.Profiler=i,Xe.PureComponent=E,Xe.StrictMode=a,Xe.Suspense=h,Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,Xe.act=P,Xe.cloneElement=function(A,M,T){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var $=j({},A.props),Q=A.key,pe=A.ref,J=A._owner;if(M!=null){if(M.ref!==void 0&&(pe=M.ref,J=O.current),M.key!==void 0&&(Q=""+M.key),A.type&&A.type.defaultProps)var q=A.type.defaultProps;for(le in M)R.call(M,le)&&!B.hasOwnProperty(le)&&($[le]=M[le]===void 0&&q!==void 0?q[le]:M[le])}var le=arguments.length-2;if(le===1)$.children=T;else if(1<le){q=Array(le);for(var de=0;de<le;de++)q[de]=arguments[de+2];$.children=q}return{$$typeof:r,type:A.type,key:Q,ref:pe,props:$,_owner:J}},Xe.createContext=function(A){return A={$$typeof:u,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:l,_context:A},A.Consumer=A},Xe.createElement=F,Xe.createFactory=function(A){var M=F.bind(null,A);return M.type=A,M},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(A){return{$$typeof:d,render:A}},Xe.isValidElement=Z,Xe.lazy=function(A){return{$$typeof:g,_payload:{_status:-1,_result:A},_init:X}},Xe.memo=function(A,M){return{$$typeof:p,type:A,compare:M===void 0?null:M}},Xe.startTransition=function(A){var M=U.transition;U.transition={};try{A()}finally{U.transition=M}},Xe.unstable_act=P,Xe.useCallback=function(A,M){return re.current.useCallback(A,M)},Xe.useContext=function(A){return re.current.useContext(A)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(A){return re.current.useDeferredValue(A)},Xe.useEffect=function(A,M){return re.current.useEffect(A,M)},Xe.useId=function(){return re.current.useId()},Xe.useImperativeHandle=function(A,M,T){return re.current.useImperativeHandle(A,M,T)},Xe.useInsertionEffect=function(A,M){return re.current.useInsertionEffect(A,M)},Xe.useLayoutEffect=function(A,M){return re.current.useLayoutEffect(A,M)},Xe.useMemo=function(A,M){return re.current.useMemo(A,M)},Xe.useReducer=function(A,M,T){return re.current.useReducer(A,M,T)},Xe.useRef=function(A){return re.current.useRef(A)},Xe.useState=function(A){return re.current.useState(A)},Xe.useSyncExternalStore=function(A,M,T){return re.current.useSyncExternalStore(A,M,T)},Xe.useTransition=function(){return re.current.useTransition()},Xe.version="18.3.1",Xe}var Yg;function Mc(){return Yg||(Yg=1,Qd.exports=_C()),Qd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg;function jC(){if(Xg)return si;Xg=1;var r=Mc(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(d,h,p){var g,m={},w=null,y=null;p!==void 0&&(w=""+p),h.key!==void 0&&(w=""+h.key),h.ref!==void 0&&(y=h.ref);for(g in h)a.call(h,g)&&!l.hasOwnProperty(g)&&(m[g]=h[g]);if(d&&d.defaultProps)for(g in h=d.defaultProps,h)m[g]===void 0&&(m[g]=h[g]);return{$$typeof:e,type:d,key:w,ref:y,props:m,_owner:i.current}}return si.Fragment=t,si.jsx=u,si.jsxs=u,si}var Qg;function CC(){return Qg||(Qg=1,Xd.exports=jC()),Xd.exports}var o=CC(),Vl={},Zd={exports:{}},br={},eh={exports:{}},th={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function SC(){return Zg||(Zg=1,(function(r){function e(U,I){var P=U.length;U.push(I);e:for(;0<P;){var A=P-1>>>1,M=U[A];if(0<i(M,I))U[A]=I,U[P]=M,P=A;else break e}}function t(U){return U.length===0?null:U[0]}function a(U){if(U.length===0)return null;var I=U[0],P=U.pop();if(P!==I){U[0]=P;e:for(var A=0,M=U.length,T=M>>>1;A<T;){var $=2*(A+1)-1,Q=U[$],pe=$+1,J=U[pe];if(0>i(Q,P))pe<M&&0>i(J,Q)?(U[A]=J,U[pe]=P,A=pe):(U[A]=Q,U[$]=P,A=$);else if(pe<M&&0>i(J,P))U[A]=J,U[pe]=P,A=pe;else break e}}return I}function i(U,I){var P=U.sortIndex-I.sortIndex;return P!==0?P:U.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();r.unstable_now=function(){return u.now()-d}}var h=[],p=[],g=1,m=null,w=3,y=!1,j=!1,_=!1,C=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(U){for(var I=t(p);I!==null;){if(I.callback===null)a(p);else if(I.startTime<=U)a(p),I.sortIndex=I.expirationTime,e(h,I);else break;I=t(p)}}function D(U){if(_=!1,N(U),!j)if(t(h)!==null)j=!0,X(R);else{var I=t(p);I!==null&&re(D,I.startTime-U)}}function R(U,I){j=!1,_&&(_=!1,S(F),F=-1),y=!0;var P=w;try{for(N(I),m=t(h);m!==null&&(!(m.expirationTime>I)||U&&!ae());){var A=m.callback;if(typeof A=="function"){m.callback=null,w=m.priorityLevel;var M=A(m.expirationTime<=I);I=r.unstable_now(),typeof M=="function"?m.callback=M:m===t(h)&&a(h),N(I)}else a(h);m=t(h)}if(m!==null)var T=!0;else{var $=t(p);$!==null&&re(D,$.startTime-I),T=!1}return T}finally{m=null,w=P,y=!1}}var O=!1,B=null,F=-1,H=5,Z=-1;function ae(){return!(r.unstable_now()-Z<H)}function ue(){if(B!==null){var U=r.unstable_now();Z=U;var I=!0;try{I=B(!0,U)}finally{I?z():(O=!1,B=null)}}else O=!1}var z;if(typeof E=="function")z=function(){E(ue)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,se=V.port2;V.port1.onmessage=ue,z=function(){se.postMessage(null)}}else z=function(){C(ue,0)};function X(U){B=U,O||(O=!0,z())}function re(U,I){F=C(function(){U(r.unstable_now())},I)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(U){U.callback=null},r.unstable_continueExecution=function(){j||y||(j=!0,X(R))},r.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<U?Math.floor(1e3/U):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(U){switch(w){case 1:case 2:case 3:var I=3;break;default:I=w}var P=w;w=I;try{return U()}finally{w=P}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(U,I){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var P=w;w=U;try{return I()}finally{w=P}},r.unstable_scheduleCallback=function(U,I,P){var A=r.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?A+P:A):P=A,U){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=P+M,U={id:g++,callback:I,priorityLevel:U,startTime:P,expirationTime:M,sortIndex:-1},P>A?(U.sortIndex=P,e(p,U),t(h)===null&&U===t(p)&&(_?(S(F),F=-1):_=!0,re(D,P-A))):(U.sortIndex=M,e(h,U),j||y||(j=!0,X(R))),U},r.unstable_shouldYield=ae,r.unstable_wrapCallback=function(U){var I=w;return function(){var P=w;w=I;try{return U.apply(this,arguments)}finally{w=P}}}})(th)),th}var ev;function EC(){return ev||(ev=1,eh.exports=SC()),eh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv;function kC(){if(tv)return br;tv=1;var r=Mc(),e=EC();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,c=1;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,i={};function l(n,s){u(n,s),u(n+"Capture",s)}function u(n,s){for(i[n]=s,n=0;n<s.length;n++)a.add(s[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},m={};function w(n){return h.call(m,n)?!0:h.call(g,n)?!1:p.test(n)?m[n]=!0:(g[n]=!0,!1)}function y(n,s,c,f){if(c!==null&&c.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function j(n,s,c,f){if(s===null||typeof s>"u"||y(n,s,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function _(n,s,c,f,v,b,k){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=f,this.attributeNamespace=v,this.mustUseProperty=c,this.propertyName=n,this.type=s,this.sanitizeURL=b,this.removeEmptyString=k}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){C[n]=new _(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];C[s]=new _(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){C[n]=new _(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){C[n]=new _(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){C[n]=new _(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){C[n]=new _(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){C[n]=new _(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){C[n]=new _(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){C[n]=new _(n,5,!1,n.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function E(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(S,E);C[s]=new _(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(S,E);C[s]=new _(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(S,E);C[s]=new _(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){C[n]=new _(n,1,!1,n.toLowerCase(),null,!1,!1)}),C.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){C[n]=new _(n,1,!1,n.toLowerCase(),null,!0,!0)});function N(n,s,c,f){var v=C.hasOwnProperty(s)?C[s]:null;(v!==null?v.type!==0:f||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(j(s,c,v,f)&&(c=null),f||v===null?w(s)&&(c===null?n.removeAttribute(s):n.setAttribute(s,""+c)):v.mustUseProperty?n[v.propertyName]=c===null?v.type===3?!1:"":c:(s=v.attributeName,f=v.attributeNamespace,c===null?n.removeAttribute(s):(v=v.type,c=v===3||v===4&&c===!0?"":""+c,f?n.setAttributeNS(f,s,c):n.setAttribute(s,c))))}var D=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),O=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),Z=Symbol.for("react.provider"),ae=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),U=Symbol.iterator;function I(n){return n===null||typeof n!="object"?null:(n=U&&n[U]||n["@@iterator"],typeof n=="function"?n:null)}var P=Object.assign,A;function M(n){if(A===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);A=s&&s[1]||""}return`
`+A+n}var T=!1;function $(n,s){if(!n||T)return"";T=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(ne){var f=ne}Reflect.construct(n,[],s)}else{try{s.call()}catch(ne){f=ne}n.call(s.prototype)}else{try{throw Error()}catch(ne){f=ne}n()}}catch(ne){if(ne&&f&&typeof ne.stack=="string"){for(var v=ne.stack.split(`
`),b=f.stack.split(`
`),k=v.length-1,L=b.length-1;1<=k&&0<=L&&v[k]!==b[L];)L--;for(;1<=k&&0<=L;k--,L--)if(v[k]!==b[L]){if(k!==1||L!==1)do if(k--,L--,0>L||v[k]!==b[L]){var W=`
`+v[k].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=k&&0<=L);break}}}finally{T=!1,Error.prepareStackTrace=c}return(n=n?n.displayName||n.name:"")?M(n):""}function Q(n){switch(n.tag){case 5:return M(n.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return n=$(n.type,!1),n;case 11:return n=$(n.type.render,!1),n;case 1:return n=$(n.type,!0),n;default:return""}}function pe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case B:return"Fragment";case O:return"Portal";case H:return"Profiler";case F:return"StrictMode";case z:return"Suspense";case V:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ae:return(n.displayName||"Context")+".Consumer";case Z:return(n._context.displayName||"Context")+".Provider";case ue:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case se:return s=n.displayName||null,s!==null?s:pe(n.type)||"Memo";case X:s=n._payload,n=n._init;try{return pe(n(s))}catch{}}return null}function J(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(s);case 8:return s===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function q(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function le(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function de(n){var s=le(n)?"checked":"value",c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),f=""+n[s];if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,b=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return v.call(this)},set:function(k){f=""+k,b.call(this,k)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function we(n){n._valueTracker||(n._valueTracker=de(n))}function je(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var c=s.getValue(),f="";return n&&(f=le(n)?n.checked?"true":"false":n.value),n=f,n!==c?(s.setValue(n),!0):!1}function ye(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ae(n,s){var c=s.checked;return P({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??n._wrapperState.initialChecked})}function ze(n,s){var c=s.defaultValue==null?"":s.defaultValue,f=s.checked!=null?s.checked:s.defaultChecked;c=q(s.value!=null?s.value:c),n._wrapperState={initialChecked:f,initialValue:c,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function $e(n,s){s=s.checked,s!=null&&N(n,"checked",s,!1)}function Ge(n,s){$e(n,s);var c=q(s.value),f=s.type;if(c!=null)f==="number"?(c===0&&n.value===""||n.value!=c)&&(n.value=""+c):n.value!==""+c&&(n.value=""+c);else if(f==="submit"||f==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?st(n,s.type,c):s.hasOwnProperty("defaultValue")&&st(n,s.type,q(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Ct(n,s,c){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var f=s.type;if(!(f!=="submit"&&f!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,c||s===n.value||(n.value=s),n.defaultValue=s}c=n.name,c!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,c!==""&&(n.name=c)}function st(n,s,c){(s!=="number"||ye(n.ownerDocument)!==n)&&(c==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+c&&(n.defaultValue=""+c))}var bt=Array.isArray;function Vt(n,s,c,f){if(n=n.options,s){s={};for(var v=0;v<c.length;v++)s["$"+c[v]]=!0;for(c=0;c<n.length;c++)v=s.hasOwnProperty("$"+n[c].value),n[c].selected!==v&&(n[c].selected=v),v&&f&&(n[c].defaultSelected=!0)}else{for(c=""+q(c),s=null,v=0;v<n.length;v++){if(n[v].value===c){n[v].selected=!0,f&&(n[v].defaultSelected=!0);return}s!==null||n[v].disabled||(s=n[v])}s!==null&&(s.selected=!0)}}function at(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return P({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function It(n,s){var c=s.value;if(c==null){if(c=s.children,s=s.defaultValue,c!=null){if(s!=null)throw Error(t(92));if(bt(c)){if(1<c.length)throw Error(t(93));c=c[0]}s=c}s==null&&(s=""),c=s}n._wrapperState={initialValue:q(c)}}function Ar(n,s){var c=q(s.value),f=q(s.defaultValue);c!=null&&(c=""+c,c!==n.value&&(n.value=c),s.defaultValue==null&&n.defaultValue!==c&&(n.defaultValue=c)),f!=null&&(n.defaultValue=""+f)}function Ca(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Wn(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zr(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Wn(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var hr,Br=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,c,f,v){MSApp.execUnsafeLocalFunction(function(){return n(s,c,f,v)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(hr=hr||document.createElement("div"),hr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=hr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function lr(n,s){if(s){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=s;return}}n.textContent=s}var Jt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zr=["Webkit","ms","Moz","O"];Object.keys(Jt).forEach(function(n){Zr.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Jt[s]=Jt[n]})});function Sa(n,s,c){return s==null||typeof s=="boolean"||s===""?"":c||typeof s!="number"||s===0||Jt.hasOwnProperty(n)&&Jt[n]?(""+s).trim():s+"px"}function Ea(n,s){n=n.style;for(var c in s)if(s.hasOwnProperty(c)){var f=c.indexOf("--")===0,v=Sa(c,s[c],f);c==="float"&&(c="cssFloat"),f?n.setProperty(c,v):n[c]=v}}var co=P({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hn(n,s){if(s){if(co[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Wo(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vn=null;function fr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ho=null,xn=null,vt=null;function Mt(n){if(n=Ws(n)){if(typeof Ho!="function")throw Error(t(280));var s=n.stateNode;s&&(s=ol(s),Ho(n.stateNode,n.type,s))}}function Te(n){xn?vt?vt.push(n):vt=[n]:xn=n}function dt(){if(xn){var n=xn,s=vt;if(vt=xn=null,Mt(n),s)for(n=0;n<s.length;n++)Mt(s[n])}}function ct(n,s){return n(s)}function ht(){}var Ft=!1;function gt(n,s,c){if(Ft)return n(s,c);Ft=!0;try{return ct(n,s,c)}finally{Ft=!1,(xn!==null||vt!==null)&&(ht(),dt())}}function Ze(n,s){var c=n.stateNode;if(c===null)return null;var f=ol(c);if(f===null)return null;c=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(t(231,s,typeof c));return c}var Yt=!1;if(d)try{var mt={};Object.defineProperty(mt,"passive",{get:function(){Yt=!0}}),window.addEventListener("test",mt,mt),window.removeEventListener("test",mt,mt)}catch{Yt=!1}function Et(n,s,c,f,v,b,k,L,W){var ne=Array.prototype.slice.call(arguments,3);try{s.apply(c,ne)}catch(me){this.onError(me)}}var pr=!1,qt=null,mr=!1,Gn=null,Es={onError:function(n){pr=!0,qt=n}};function P_(n,s,c,f,v,b,k,L,W){pr=!1,qt=null,Et.apply(Es,arguments)}function R_(n,s,c,f,v,b,k,L,W){if(P_.apply(this,arguments),pr){if(pr){var ne=qt;pr=!1,qt=null}else throw Error(t(198));mr||(mr=!0,Gn=ne)}}function Go(n){var s=n,c=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(c=s.return),n=s.return;while(n)}return s.tag===3?c:null}function xp(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function yp(n){if(Go(n)!==n)throw Error(t(188))}function A_(n){var s=n.alternate;if(!s){if(s=Go(n),s===null)throw Error(t(188));return s!==n?null:n}for(var c=n,f=s;;){var v=c.return;if(v===null)break;var b=v.alternate;if(b===null){if(f=v.return,f!==null){c=f;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===c)return yp(v),n;if(b===f)return yp(v),s;b=b.sibling}throw Error(t(188))}if(c.return!==f.return)c=v,f=b;else{for(var k=!1,L=v.child;L;){if(L===c){k=!0,c=v,f=b;break}if(L===f){k=!0,f=v,c=b;break}L=L.sibling}if(!k){for(L=b.child;L;){if(L===c){k=!0,c=b,f=v;break}if(L===f){k=!0,f=b,c=v;break}L=L.sibling}if(!k)throw Error(t(189))}}if(c.alternate!==f)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?n:s}function wp(n){return n=A_(n),n!==null?bp(n):null}function bp(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=bp(n);if(s!==null)return s;n=n.sibling}return null}var _p=e.unstable_scheduleCallback,jp=e.unstable_cancelCallback,T_=e.unstable_shouldYield,O_=e.unstable_requestPaint,At=e.unstable_now,D_=e.unstable_getCurrentPriorityLevel,vu=e.unstable_ImmediatePriority,Cp=e.unstable_UserBlockingPriority,$i=e.unstable_NormalPriority,I_=e.unstable_LowPriority,Sp=e.unstable_IdlePriority,Li=null,yn=null;function M_(n){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Li,n,void 0,(n.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:L_,F_=Math.log,$_=Math.LN2;function L_(n){return n>>>=0,n===0?32:31-(F_(n)/$_|0)|0}var zi=64,Bi=4194304;function ks(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ui(n,s){var c=n.pendingLanes;if(c===0)return 0;var f=0,v=n.suspendedLanes,b=n.pingedLanes,k=c&268435455;if(k!==0){var L=k&~v;L!==0?f=ks(L):(b&=k,b!==0&&(f=ks(b)))}else k=c&~v,k!==0?f=ks(k):b!==0&&(f=ks(b));if(f===0)return 0;if(s!==0&&s!==f&&(s&v)===0&&(v=f&-f,b=s&-s,v>=b||v===16&&(b&4194240)!==0))return s;if((f&4)!==0&&(f|=c&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=f;0<s;)c=31-en(s),v=1<<c,f|=n[c],s&=~v;return f}function z_(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function B_(n,s){for(var c=n.suspendedLanes,f=n.pingedLanes,v=n.expirationTimes,b=n.pendingLanes;0<b;){var k=31-en(b),L=1<<k,W=v[k];W===-1?((L&c)===0||(L&f)!==0)&&(v[k]=z_(L,s)):W<=s&&(n.expiredLanes|=L),b&=~L}}function xu(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ep(){var n=zi;return zi<<=1,(zi&4194240)===0&&(zi=64),n}function yu(n){for(var s=[],c=0;31>c;c++)s.push(n);return s}function Ns(n,s,c){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-en(s),n[s]=c}function U_(n,s){var c=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var f=n.eventTimes;for(n=n.expirationTimes;0<c;){var v=31-en(c),b=1<<v;s[v]=0,f[v]=-1,n[v]=-1,c&=~b}}function wu(n,s){var c=n.entangledLanes|=s;for(n=n.entanglements;c;){var f=31-en(c),v=1<<f;v&s|n[f]&s&&(n[f]|=s),c&=~v}}var pt=0;function kp(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Np,bu,Pp,Rp,Ap,_u=!1,Vi=[],uo=null,ho=null,fo=null,Ps=new Map,Rs=new Map,po=[],V_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tp(n,s){switch(n){case"focusin":case"focusout":uo=null;break;case"dragenter":case"dragleave":ho=null;break;case"mouseover":case"mouseout":fo=null;break;case"pointerover":case"pointerout":Ps.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rs.delete(s.pointerId)}}function As(n,s,c,f,v,b){return n===null||n.nativeEvent!==b?(n={blockedOn:s,domEventName:c,eventSystemFlags:f,nativeEvent:b,targetContainers:[v]},s!==null&&(s=Ws(s),s!==null&&bu(s)),n):(n.eventSystemFlags|=f,s=n.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),n)}function q_(n,s,c,f,v){switch(s){case"focusin":return uo=As(uo,n,s,c,f,v),!0;case"dragenter":return ho=As(ho,n,s,c,f,v),!0;case"mouseover":return fo=As(fo,n,s,c,f,v),!0;case"pointerover":var b=v.pointerId;return Ps.set(b,As(Ps.get(b)||null,n,s,c,f,v)),!0;case"gotpointercapture":return b=v.pointerId,Rs.set(b,As(Rs.get(b)||null,n,s,c,f,v)),!0}return!1}function Op(n){var s=Ko(n.target);if(s!==null){var c=Go(s);if(c!==null){if(s=c.tag,s===13){if(s=xp(c),s!==null){n.blockedOn=s,Ap(n.priority,function(){Pp(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function qi(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var c=Cu(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(c===null){c=n.nativeEvent;var f=new c.constructor(c.type,c);vn=f,c.target.dispatchEvent(f),vn=null}else return s=Ws(c),s!==null&&bu(s),n.blockedOn=c,!1;s.shift()}return!0}function Dp(n,s,c){qi(n)&&c.delete(s)}function W_(){_u=!1,uo!==null&&qi(uo)&&(uo=null),ho!==null&&qi(ho)&&(ho=null),fo!==null&&qi(fo)&&(fo=null),Ps.forEach(Dp),Rs.forEach(Dp)}function Ts(n,s){n.blockedOn===s&&(n.blockedOn=null,_u||(_u=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,W_)))}function Os(n){function s(v){return Ts(v,n)}if(0<Vi.length){Ts(Vi[0],n);for(var c=1;c<Vi.length;c++){var f=Vi[c];f.blockedOn===n&&(f.blockedOn=null)}}for(uo!==null&&Ts(uo,n),ho!==null&&Ts(ho,n),fo!==null&&Ts(fo,n),Ps.forEach(s),Rs.forEach(s),c=0;c<po.length;c++)f=po[c],f.blockedOn===n&&(f.blockedOn=null);for(;0<po.length&&(c=po[0],c.blockedOn===null);)Op(c),c.blockedOn===null&&po.shift()}var ka=D.ReactCurrentBatchConfig,Wi=!0;function H_(n,s,c,f){var v=pt,b=ka.transition;ka.transition=null;try{pt=1,ju(n,s,c,f)}finally{pt=v,ka.transition=b}}function G_(n,s,c,f){var v=pt,b=ka.transition;ka.transition=null;try{pt=4,ju(n,s,c,f)}finally{pt=v,ka.transition=b}}function ju(n,s,c,f){if(Wi){var v=Cu(n,s,c,f);if(v===null)Bu(n,s,f,Hi,c),Tp(n,f);else if(q_(v,n,s,c,f))f.stopPropagation();else if(Tp(n,f),s&4&&-1<V_.indexOf(n)){for(;v!==null;){var b=Ws(v);if(b!==null&&Np(b),b=Cu(n,s,c,f),b===null&&Bu(n,s,f,Hi,c),b===v)break;v=b}v!==null&&f.stopPropagation()}else Bu(n,s,f,null,c)}}var Hi=null;function Cu(n,s,c,f){if(Hi=null,n=fr(f),n=Ko(n),n!==null)if(s=Go(n),s===null)n=null;else if(c=s.tag,c===13){if(n=xp(s),n!==null)return n;n=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Hi=n,null}function Ip(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(D_()){case vu:return 1;case Cp:return 4;case $i:case I_:return 16;case Sp:return 536870912;default:return 16}default:return 16}}var mo=null,Su=null,Gi=null;function Mp(){if(Gi)return Gi;var n,s=Su,c=s.length,f,v="value"in mo?mo.value:mo.textContent,b=v.length;for(n=0;n<c&&s[n]===v[n];n++);var k=c-n;for(f=1;f<=k&&s[c-f]===v[b-f];f++);return Gi=v.slice(n,1<f?1-f:void 0)}function Ki(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Ji(){return!0}function Fp(){return!1}function Tr(n){function s(c,f,v,b,k){this._reactName=c,this._targetInst=v,this.type=f,this.nativeEvent=b,this.target=k,this.currentTarget=null;for(var L in n)n.hasOwnProperty(L)&&(c=n[L],this[L]=c?c(b):b[L]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Ji:Fp,this.isPropagationStopped=Fp,this}return P(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ji)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ji)},persist:function(){},isPersistent:Ji}),s}var Na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eu=Tr(Na),Ds=P({},Na,{view:0,detail:0}),K_=Tr(Ds),ku,Nu,Is,Yi=P({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ru,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Is&&(Is&&n.type==="mousemove"?(ku=n.screenX-Is.screenX,Nu=n.screenY-Is.screenY):Nu=ku=0,Is=n),ku)},movementY:function(n){return"movementY"in n?n.movementY:Nu}}),$p=Tr(Yi),J_=P({},Yi,{dataTransfer:0}),Y_=Tr(J_),X_=P({},Ds,{relatedTarget:0}),Pu=Tr(X_),Q_=P({},Na,{animationName:0,elapsedTime:0,pseudoElement:0}),Z_=Tr(Q_),ej=P({},Na,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),tj=Tr(ej),rj=P({},Na,{data:0}),Lp=Tr(rj),nj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sj(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=aj[n])?!!s[n]:!1}function Ru(){return sj}var ij=P({},Ds,{key:function(n){if(n.key){var s=nj[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ki(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?oj[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ru,charCode:function(n){return n.type==="keypress"?Ki(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ki(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),lj=Tr(ij),cj=P({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zp=Tr(cj),uj=P({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ru}),dj=Tr(uj),hj=P({},Na,{propertyName:0,elapsedTime:0,pseudoElement:0}),fj=Tr(hj),pj=P({},Yi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),mj=Tr(pj),gj=[9,13,27,32],Au=d&&"CompositionEvent"in window,Ms=null;d&&"documentMode"in document&&(Ms=document.documentMode);var vj=d&&"TextEvent"in window&&!Ms,Bp=d&&(!Au||Ms&&8<Ms&&11>=Ms),Up=" ",Vp=!1;function qp(n,s){switch(n){case"keyup":return gj.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Pa=!1;function xj(n,s){switch(n){case"compositionend":return Wp(s);case"keypress":return s.which!==32?null:(Vp=!0,Up);case"textInput":return n=s.data,n===Up&&Vp?null:n;default:return null}}function yj(n,s){if(Pa)return n==="compositionend"||!Au&&qp(n,s)?(n=Mp(),Gi=Su=mo=null,Pa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Bp&&s.locale!=="ko"?null:s.data;default:return null}}var wj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!wj[n.type]:s==="textarea"}function Gp(n,s,c,f){Te(f),s=tl(s,"onChange"),0<s.length&&(c=new Eu("onChange","change",null,c,f),n.push({event:c,listeners:s}))}var Fs=null,$s=null;function bj(n){dm(n,0)}function Xi(n){var s=Da(n);if(je(s))return n}function _j(n,s){if(n==="change")return s}var Kp=!1;if(d){var Tu;if(d){var Ou="oninput"in document;if(!Ou){var Jp=document.createElement("div");Jp.setAttribute("oninput","return;"),Ou=typeof Jp.oninput=="function"}Tu=Ou}else Tu=!1;Kp=Tu&&(!document.documentMode||9<document.documentMode)}function Yp(){Fs&&(Fs.detachEvent("onpropertychange",Xp),$s=Fs=null)}function Xp(n){if(n.propertyName==="value"&&Xi($s)){var s=[];Gp(s,$s,n,fr(n)),gt(bj,s)}}function jj(n,s,c){n==="focusin"?(Yp(),Fs=s,$s=c,Fs.attachEvent("onpropertychange",Xp)):n==="focusout"&&Yp()}function Cj(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Xi($s)}function Sj(n,s){if(n==="click")return Xi(s)}function Ej(n,s){if(n==="input"||n==="change")return Xi(s)}function kj(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var tn=typeof Object.is=="function"?Object.is:kj;function Ls(n,s){if(tn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var c=Object.keys(n),f=Object.keys(s);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var v=c[f];if(!h.call(s,v)||!tn(n[v],s[v]))return!1}return!0}function Qp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Zp(n,s){var c=Qp(n);n=0;for(var f;c;){if(c.nodeType===3){if(f=n+c.textContent.length,n<=s&&f>=s)return{node:c,offset:s-n};n=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Qp(c)}}function em(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?em(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function tm(){for(var n=window,s=ye();s instanceof n.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)n=s.contentWindow;else break;s=ye(n.document)}return s}function Du(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Nj(n){var s=tm(),c=n.focusedElem,f=n.selectionRange;if(s!==c&&c&&c.ownerDocument&&em(c.ownerDocument.documentElement,c)){if(f!==null&&Du(c)){if(s=f.start,n=f.end,n===void 0&&(n=s),"selectionStart"in c)c.selectionStart=s,c.selectionEnd=Math.min(n,c.value.length);else if(n=(s=c.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var v=c.textContent.length,b=Math.min(f.start,v);f=f.end===void 0?b:Math.min(f.end,v),!n.extend&&b>f&&(v=f,f=b,b=v),v=Zp(c,b);var k=Zp(c,f);v&&k&&(n.rangeCount!==1||n.anchorNode!==v.node||n.anchorOffset!==v.offset||n.focusNode!==k.node||n.focusOffset!==k.offset)&&(s=s.createRange(),s.setStart(v.node,v.offset),n.removeAllRanges(),b>f?(n.addRange(s),n.extend(k.node,k.offset)):(s.setEnd(k.node,k.offset),n.addRange(s)))}}for(s=[],n=c;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<s.length;c++)n=s[c],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Pj=d&&"documentMode"in document&&11>=document.documentMode,Ra=null,Iu=null,zs=null,Mu=!1;function rm(n,s,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Mu||Ra==null||Ra!==ye(f)||(f=Ra,"selectionStart"in f&&Du(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),zs&&Ls(zs,f)||(zs=f,f=tl(Iu,"onSelect"),0<f.length&&(s=new Eu("onSelect","select",null,s,c),n.push({event:s,listeners:f}),s.target=Ra)))}function Qi(n,s){var c={};return c[n.toLowerCase()]=s.toLowerCase(),c["Webkit"+n]="webkit"+s,c["Moz"+n]="moz"+s,c}var Aa={animationend:Qi("Animation","AnimationEnd"),animationiteration:Qi("Animation","AnimationIteration"),animationstart:Qi("Animation","AnimationStart"),transitionend:Qi("Transition","TransitionEnd")},Fu={},nm={};d&&(nm=document.createElement("div").style,"AnimationEvent"in window||(delete Aa.animationend.animation,delete Aa.animationiteration.animation,delete Aa.animationstart.animation),"TransitionEvent"in window||delete Aa.transitionend.transition);function Zi(n){if(Fu[n])return Fu[n];if(!Aa[n])return n;var s=Aa[n],c;for(c in s)if(s.hasOwnProperty(c)&&c in nm)return Fu[n]=s[c];return n}var om=Zi("animationend"),am=Zi("animationiteration"),sm=Zi("animationstart"),im=Zi("transitionend"),lm=new Map,cm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function go(n,s){lm.set(n,s),l(s,[n])}for(var $u=0;$u<cm.length;$u++){var Lu=cm[$u],Rj=Lu.toLowerCase(),Aj=Lu[0].toUpperCase()+Lu.slice(1);go(Rj,"on"+Aj)}go(om,"onAnimationEnd"),go(am,"onAnimationIteration"),go(sm,"onAnimationStart"),go("dblclick","onDoubleClick"),go("focusin","onFocus"),go("focusout","onBlur"),go(im,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bs));function um(n,s,c){var f=n.type||"unknown-event";n.currentTarget=c,R_(f,s,void 0,n),n.currentTarget=null}function dm(n,s){s=(s&4)!==0;for(var c=0;c<n.length;c++){var f=n[c],v=f.event;f=f.listeners;e:{var b=void 0;if(s)for(var k=f.length-1;0<=k;k--){var L=f[k],W=L.instance,ne=L.currentTarget;if(L=L.listener,W!==b&&v.isPropagationStopped())break e;um(v,L,ne),b=W}else for(k=0;k<f.length;k++){if(L=f[k],W=L.instance,ne=L.currentTarget,L=L.listener,W!==b&&v.isPropagationStopped())break e;um(v,L,ne),b=W}}}if(mr)throw n=Gn,mr=!1,Gn=null,n}function _t(n,s){var c=s[Gu];c===void 0&&(c=s[Gu]=new Set);var f=n+"__bubble";c.has(f)||(hm(s,n,2,!1),c.add(f))}function zu(n,s,c){var f=0;s&&(f|=4),hm(c,n,f,s)}var el="_reactListening"+Math.random().toString(36).slice(2);function Us(n){if(!n[el]){n[el]=!0,a.forEach(function(c){c!=="selectionchange"&&(Tj.has(c)||zu(c,!1,n),zu(c,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[el]||(s[el]=!0,zu("selectionchange",!1,s))}}function hm(n,s,c,f){switch(Ip(s)){case 1:var v=H_;break;case 4:v=G_;break;default:v=ju}c=v.bind(null,s,c,n),v=void 0,!Yt||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),f?v!==void 0?n.addEventListener(s,c,{capture:!0,passive:v}):n.addEventListener(s,c,!0):v!==void 0?n.addEventListener(s,c,{passive:v}):n.addEventListener(s,c,!1)}function Bu(n,s,c,f,v){var b=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var L=f.stateNode.containerInfo;if(L===v||L.nodeType===8&&L.parentNode===v)break;if(k===4)for(k=f.return;k!==null;){var W=k.tag;if((W===3||W===4)&&(W=k.stateNode.containerInfo,W===v||W.nodeType===8&&W.parentNode===v))return;k=k.return}for(;L!==null;){if(k=Ko(L),k===null)return;if(W=k.tag,W===5||W===6){f=b=k;continue e}L=L.parentNode}}f=f.return}gt(function(){var ne=b,me=fr(c),ge=[];e:{var he=lm.get(n);if(he!==void 0){var be=Eu,Ce=n;switch(n){case"keypress":if(Ki(c)===0)break e;case"keydown":case"keyup":be=lj;break;case"focusin":Ce="focus",be=Pu;break;case"focusout":Ce="blur",be=Pu;break;case"beforeblur":case"afterblur":be=Pu;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=$p;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=Y_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=dj;break;case om:case am:case sm:be=Z_;break;case im:be=fj;break;case"scroll":be=K_;break;case"wheel":be=mj;break;case"copy":case"cut":case"paste":be=tj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=zp}var Ne=(s&4)!==0,Tt=!Ne&&n==="scroll",Y=Ne?he!==null?he+"Capture":null:he;Ne=[];for(var G=ne,te;G!==null;){te=G;var ve=te.stateNode;if(te.tag===5&&ve!==null&&(te=ve,Y!==null&&(ve=Ze(G,Y),ve!=null&&Ne.push(Vs(G,ve,te)))),Tt)break;G=G.return}0<Ne.length&&(he=new be(he,Ce,null,c,me),ge.push({event:he,listeners:Ne}))}}if((s&7)===0){e:{if(he=n==="mouseover"||n==="pointerover",be=n==="mouseout"||n==="pointerout",he&&c!==vn&&(Ce=c.relatedTarget||c.fromElement)&&(Ko(Ce)||Ce[Kn]))break e;if((be||he)&&(he=me.window===me?me:(he=me.ownerDocument)?he.defaultView||he.parentWindow:window,be?(Ce=c.relatedTarget||c.toElement,be=ne,Ce=Ce?Ko(Ce):null,Ce!==null&&(Tt=Go(Ce),Ce!==Tt||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(be=null,Ce=ne),be!==Ce)){if(Ne=$p,ve="onMouseLeave",Y="onMouseEnter",G="mouse",(n==="pointerout"||n==="pointerover")&&(Ne=zp,ve="onPointerLeave",Y="onPointerEnter",G="pointer"),Tt=be==null?he:Da(be),te=Ce==null?he:Da(Ce),he=new Ne(ve,G+"leave",be,c,me),he.target=Tt,he.relatedTarget=te,ve=null,Ko(me)===ne&&(Ne=new Ne(Y,G+"enter",Ce,c,me),Ne.target=te,Ne.relatedTarget=Tt,ve=Ne),Tt=ve,be&&Ce)t:{for(Ne=be,Y=Ce,G=0,te=Ne;te;te=Ta(te))G++;for(te=0,ve=Y;ve;ve=Ta(ve))te++;for(;0<G-te;)Ne=Ta(Ne),G--;for(;0<te-G;)Y=Ta(Y),te--;for(;G--;){if(Ne===Y||Y!==null&&Ne===Y.alternate)break t;Ne=Ta(Ne),Y=Ta(Y)}Ne=null}else Ne=null;be!==null&&fm(ge,he,be,Ne,!1),Ce!==null&&Tt!==null&&fm(ge,Tt,Ce,Ne,!0)}}e:{if(he=ne?Da(ne):window,be=he.nodeName&&he.nodeName.toLowerCase(),be==="select"||be==="input"&&he.type==="file")var Pe=_j;else if(Hp(he))if(Kp)Pe=Ej;else{Pe=Cj;var De=jj}else(be=he.nodeName)&&be.toLowerCase()==="input"&&(he.type==="checkbox"||he.type==="radio")&&(Pe=Sj);if(Pe&&(Pe=Pe(n,ne))){Gp(ge,Pe,c,me);break e}De&&De(n,he,ne),n==="focusout"&&(De=he._wrapperState)&&De.controlled&&he.type==="number"&&st(he,"number",he.value)}switch(De=ne?Da(ne):window,n){case"focusin":(Hp(De)||De.contentEditable==="true")&&(Ra=De,Iu=ne,zs=null);break;case"focusout":zs=Iu=Ra=null;break;case"mousedown":Mu=!0;break;case"contextmenu":case"mouseup":case"dragend":Mu=!1,rm(ge,c,me);break;case"selectionchange":if(Pj)break;case"keydown":case"keyup":rm(ge,c,me)}var Ie;if(Au)e:{switch(n){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Pa?qp(n,c)&&(Fe="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(Fe="onCompositionStart");Fe&&(Bp&&c.locale!=="ko"&&(Pa||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Pa&&(Ie=Mp()):(mo=me,Su="value"in mo?mo.value:mo.textContent,Pa=!0)),De=tl(ne,Fe),0<De.length&&(Fe=new Lp(Fe,n,null,c,me),ge.push({event:Fe,listeners:De}),Ie?Fe.data=Ie:(Ie=Wp(c),Ie!==null&&(Fe.data=Ie)))),(Ie=vj?xj(n,c):yj(n,c))&&(ne=tl(ne,"onBeforeInput"),0<ne.length&&(me=new Lp("onBeforeInput","beforeinput",null,c,me),ge.push({event:me,listeners:ne}),me.data=Ie))}dm(ge,s)})}function Vs(n,s,c){return{instance:n,listener:s,currentTarget:c}}function tl(n,s){for(var c=s+"Capture",f=[];n!==null;){var v=n,b=v.stateNode;v.tag===5&&b!==null&&(v=b,b=Ze(n,c),b!=null&&f.unshift(Vs(n,b,v)),b=Ze(n,s),b!=null&&f.push(Vs(n,b,v))),n=n.return}return f}function Ta(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function fm(n,s,c,f,v){for(var b=s._reactName,k=[];c!==null&&c!==f;){var L=c,W=L.alternate,ne=L.stateNode;if(W!==null&&W===f)break;L.tag===5&&ne!==null&&(L=ne,v?(W=Ze(c,b),W!=null&&k.unshift(Vs(c,W,L))):v||(W=Ze(c,b),W!=null&&k.push(Vs(c,W,L)))),c=c.return}k.length!==0&&n.push({event:s,listeners:k})}var Oj=/\r\n?/g,Dj=/\u0000|\uFFFD/g;function pm(n){return(typeof n=="string"?n:""+n).replace(Oj,`
`).replace(Dj,"")}function rl(n,s,c){if(s=pm(s),pm(n)!==s&&c)throw Error(t(425))}function nl(){}var Uu=null,Vu=null;function qu(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Wu=typeof setTimeout=="function"?setTimeout:void 0,Ij=typeof clearTimeout=="function"?clearTimeout:void 0,mm=typeof Promise=="function"?Promise:void 0,Mj=typeof queueMicrotask=="function"?queueMicrotask:typeof mm<"u"?function(n){return mm.resolve(null).then(n).catch(Fj)}:Wu;function Fj(n){setTimeout(function(){throw n})}function Hu(n,s){var c=s,f=0;do{var v=c.nextSibling;if(n.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(f===0){n.removeChild(v),Os(s);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=v}while(c);Os(s)}function vo(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function gm(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return n;s--}else c==="/$"&&s++}n=n.previousSibling}return null}var Oa=Math.random().toString(36).slice(2),wn="__reactFiber$"+Oa,qs="__reactProps$"+Oa,Kn="__reactContainer$"+Oa,Gu="__reactEvents$"+Oa,$j="__reactListeners$"+Oa,Lj="__reactHandles$"+Oa;function Ko(n){var s=n[wn];if(s)return s;for(var c=n.parentNode;c;){if(s=c[Kn]||c[wn]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(n=gm(n);n!==null;){if(c=n[wn])return c;n=gm(n)}return s}n=c,c=n.parentNode}return null}function Ws(n){return n=n[wn]||n[Kn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Da(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function ol(n){return n[qs]||null}var Ku=[],Ia=-1;function xo(n){return{current:n}}function jt(n){0>Ia||(n.current=Ku[Ia],Ku[Ia]=null,Ia--)}function xt(n,s){Ia++,Ku[Ia]=n.current,n.current=s}var yo={},tr=xo(yo),gr=xo(!1),Jo=yo;function Ma(n,s){var c=n.type.contextTypes;if(!c)return yo;var f=n.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===s)return f.__reactInternalMemoizedMaskedChildContext;var v={},b;for(b in c)v[b]=s[b];return f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=v),v}function vr(n){return n=n.childContextTypes,n!=null}function al(){jt(gr),jt(tr)}function vm(n,s,c){if(tr.current!==yo)throw Error(t(168));xt(tr,s),xt(gr,c)}function xm(n,s,c){var f=n.stateNode;if(s=s.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var v in f)if(!(v in s))throw Error(t(108,J(n)||"Unknown",v));return P({},c,f)}function sl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||yo,Jo=tr.current,xt(tr,n),xt(gr,gr.current),!0}function ym(n,s,c){var f=n.stateNode;if(!f)throw Error(t(169));c?(n=xm(n,s,Jo),f.__reactInternalMemoizedMergedChildContext=n,jt(gr),jt(tr),xt(tr,n)):jt(gr),xt(gr,c)}var Jn=null,il=!1,Ju=!1;function wm(n){Jn===null?Jn=[n]:Jn.push(n)}function zj(n){il=!0,wm(n)}function wo(){if(!Ju&&Jn!==null){Ju=!0;var n=0,s=pt;try{var c=Jn;for(pt=1;n<c.length;n++){var f=c[n];do f=f(!0);while(f!==null)}Jn=null,il=!1}catch(v){throw Jn!==null&&(Jn=Jn.slice(n+1)),_p(vu,wo),v}finally{pt=s,Ju=!1}}return null}var Fa=[],$a=0,ll=null,cl=0,Ur=[],Vr=0,Yo=null,Yn=1,Xn="";function Xo(n,s){Fa[$a++]=cl,Fa[$a++]=ll,ll=n,cl=s}function bm(n,s,c){Ur[Vr++]=Yn,Ur[Vr++]=Xn,Ur[Vr++]=Yo,Yo=n;var f=Yn;n=Xn;var v=32-en(f)-1;f&=~(1<<v),c+=1;var b=32-en(s)+v;if(30<b){var k=v-v%5;b=(f&(1<<k)-1).toString(32),f>>=k,v-=k,Yn=1<<32-en(s)+v|c<<v|f,Xn=b+n}else Yn=1<<b|c<<v|f,Xn=n}function Yu(n){n.return!==null&&(Xo(n,1),bm(n,1,0))}function Xu(n){for(;n===ll;)ll=Fa[--$a],Fa[$a]=null,cl=Fa[--$a],Fa[$a]=null;for(;n===Yo;)Yo=Ur[--Vr],Ur[Vr]=null,Xn=Ur[--Vr],Ur[Vr]=null,Yn=Ur[--Vr],Ur[Vr]=null}var Or=null,Dr=null,St=!1,rn=null;function _m(n,s){var c=Gr(5,null,null,0);c.elementType="DELETED",c.stateNode=s,c.return=n,s=n.deletions,s===null?(n.deletions=[c],n.flags|=16):s.push(c)}function jm(n,s){switch(n.tag){case 5:var c=n.type;return s=s.nodeType!==1||c.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Or=n,Dr=vo(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Or=n,Dr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(c=Yo!==null?{id:Yn,overflow:Xn}:null,n.memoizedState={dehydrated:s,treeContext:c,retryLane:1073741824},c=Gr(18,null,null,0),c.stateNode=s,c.return=n,n.child=c,Or=n,Dr=null,!0):!1;default:return!1}}function Qu(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Zu(n){if(St){var s=Dr;if(s){var c=s;if(!jm(n,s)){if(Qu(n))throw Error(t(418));s=vo(c.nextSibling);var f=Or;s&&jm(n,s)?_m(f,c):(n.flags=n.flags&-4097|2,St=!1,Or=n)}}else{if(Qu(n))throw Error(t(418));n.flags=n.flags&-4097|2,St=!1,Or=n}}}function Cm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Or=n}function ul(n){if(n!==Or)return!1;if(!St)return Cm(n),St=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!qu(n.type,n.memoizedProps)),s&&(s=Dr)){if(Qu(n))throw Sm(),Error(t(418));for(;s;)_m(n,s),s=vo(s.nextSibling)}if(Cm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"){if(s===0){Dr=vo(n.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++}n=n.nextSibling}Dr=null}}else Dr=Or?vo(n.stateNode.nextSibling):null;return!0}function Sm(){for(var n=Dr;n;)n=vo(n.nextSibling)}function La(){Dr=Or=null,St=!1}function ed(n){rn===null?rn=[n]:rn.push(n)}var Bj=D.ReactCurrentBatchConfig;function Hs(n,s,c){if(n=c.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var f=c.stateNode}if(!f)throw Error(t(147,n));var v=f,b=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===b?s.ref:(s=function(k){var L=v.refs;k===null?delete L[b]:L[b]=k},s._stringRef=b,s)}if(typeof n!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,n))}return n}function dl(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Em(n){var s=n._init;return s(n._payload)}function km(n){function s(Y,G){if(n){var te=Y.deletions;te===null?(Y.deletions=[G],Y.flags|=16):te.push(G)}}function c(Y,G){if(!n)return null;for(;G!==null;)s(Y,G),G=G.sibling;return null}function f(Y,G){for(Y=new Map;G!==null;)G.key!==null?Y.set(G.key,G):Y.set(G.index,G),G=G.sibling;return Y}function v(Y,G){return Y=No(Y,G),Y.index=0,Y.sibling=null,Y}function b(Y,G,te){return Y.index=te,n?(te=Y.alternate,te!==null?(te=te.index,te<G?(Y.flags|=2,G):te):(Y.flags|=2,G)):(Y.flags|=1048576,G)}function k(Y){return n&&Y.alternate===null&&(Y.flags|=2),Y}function L(Y,G,te,ve){return G===null||G.tag!==6?(G=Wd(te,Y.mode,ve),G.return=Y,G):(G=v(G,te),G.return=Y,G)}function W(Y,G,te,ve){var Pe=te.type;return Pe===B?me(Y,G,te.props.children,ve,te.key):G!==null&&(G.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===X&&Em(Pe)===G.type)?(ve=v(G,te.props),ve.ref=Hs(Y,G,te),ve.return=Y,ve):(ve=Il(te.type,te.key,te.props,null,Y.mode,ve),ve.ref=Hs(Y,G,te),ve.return=Y,ve)}function ne(Y,G,te,ve){return G===null||G.tag!==4||G.stateNode.containerInfo!==te.containerInfo||G.stateNode.implementation!==te.implementation?(G=Hd(te,Y.mode,ve),G.return=Y,G):(G=v(G,te.children||[]),G.return=Y,G)}function me(Y,G,te,ve,Pe){return G===null||G.tag!==7?(G=aa(te,Y.mode,ve,Pe),G.return=Y,G):(G=v(G,te),G.return=Y,G)}function ge(Y,G,te){if(typeof G=="string"&&G!==""||typeof G=="number")return G=Wd(""+G,Y.mode,te),G.return=Y,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case R:return te=Il(G.type,G.key,G.props,null,Y.mode,te),te.ref=Hs(Y,null,G),te.return=Y,te;case O:return G=Hd(G,Y.mode,te),G.return=Y,G;case X:var ve=G._init;return ge(Y,ve(G._payload),te)}if(bt(G)||I(G))return G=aa(G,Y.mode,te,null),G.return=Y,G;dl(Y,G)}return null}function he(Y,G,te,ve){var Pe=G!==null?G.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return Pe!==null?null:L(Y,G,""+te,ve);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case R:return te.key===Pe?W(Y,G,te,ve):null;case O:return te.key===Pe?ne(Y,G,te,ve):null;case X:return Pe=te._init,he(Y,G,Pe(te._payload),ve)}if(bt(te)||I(te))return Pe!==null?null:me(Y,G,te,ve,null);dl(Y,te)}return null}function be(Y,G,te,ve,Pe){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return Y=Y.get(te)||null,L(G,Y,""+ve,Pe);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case R:return Y=Y.get(ve.key===null?te:ve.key)||null,W(G,Y,ve,Pe);case O:return Y=Y.get(ve.key===null?te:ve.key)||null,ne(G,Y,ve,Pe);case X:var De=ve._init;return be(Y,G,te,De(ve._payload),Pe)}if(bt(ve)||I(ve))return Y=Y.get(te)||null,me(G,Y,ve,Pe,null);dl(G,ve)}return null}function Ce(Y,G,te,ve){for(var Pe=null,De=null,Ie=G,Fe=G=0,Gt=null;Ie!==null&&Fe<te.length;Fe++){Ie.index>Fe?(Gt=Ie,Ie=null):Gt=Ie.sibling;var ut=he(Y,Ie,te[Fe],ve);if(ut===null){Ie===null&&(Ie=Gt);break}n&&Ie&&ut.alternate===null&&s(Y,Ie),G=b(ut,G,Fe),De===null?Pe=ut:De.sibling=ut,De=ut,Ie=Gt}if(Fe===te.length)return c(Y,Ie),St&&Xo(Y,Fe),Pe;if(Ie===null){for(;Fe<te.length;Fe++)Ie=ge(Y,te[Fe],ve),Ie!==null&&(G=b(Ie,G,Fe),De===null?Pe=Ie:De.sibling=Ie,De=Ie);return St&&Xo(Y,Fe),Pe}for(Ie=f(Y,Ie);Fe<te.length;Fe++)Gt=be(Ie,Y,Fe,te[Fe],ve),Gt!==null&&(n&&Gt.alternate!==null&&Ie.delete(Gt.key===null?Fe:Gt.key),G=b(Gt,G,Fe),De===null?Pe=Gt:De.sibling=Gt,De=Gt);return n&&Ie.forEach(function(Po){return s(Y,Po)}),St&&Xo(Y,Fe),Pe}function Ne(Y,G,te,ve){var Pe=I(te);if(typeof Pe!="function")throw Error(t(150));if(te=Pe.call(te),te==null)throw Error(t(151));for(var De=Pe=null,Ie=G,Fe=G=0,Gt=null,ut=te.next();Ie!==null&&!ut.done;Fe++,ut=te.next()){Ie.index>Fe?(Gt=Ie,Ie=null):Gt=Ie.sibling;var Po=he(Y,Ie,ut.value,ve);if(Po===null){Ie===null&&(Ie=Gt);break}n&&Ie&&Po.alternate===null&&s(Y,Ie),G=b(Po,G,Fe),De===null?Pe=Po:De.sibling=Po,De=Po,Ie=Gt}if(ut.done)return c(Y,Ie),St&&Xo(Y,Fe),Pe;if(Ie===null){for(;!ut.done;Fe++,ut=te.next())ut=ge(Y,ut.value,ve),ut!==null&&(G=b(ut,G,Fe),De===null?Pe=ut:De.sibling=ut,De=ut);return St&&Xo(Y,Fe),Pe}for(Ie=f(Y,Ie);!ut.done;Fe++,ut=te.next())ut=be(Ie,Y,Fe,ut.value,ve),ut!==null&&(n&&ut.alternate!==null&&Ie.delete(ut.key===null?Fe:ut.key),G=b(ut,G,Fe),De===null?Pe=ut:De.sibling=ut,De=ut);return n&&Ie.forEach(function(wC){return s(Y,wC)}),St&&Xo(Y,Fe),Pe}function Tt(Y,G,te,ve){if(typeof te=="object"&&te!==null&&te.type===B&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case R:e:{for(var Pe=te.key,De=G;De!==null;){if(De.key===Pe){if(Pe=te.type,Pe===B){if(De.tag===7){c(Y,De.sibling),G=v(De,te.props.children),G.return=Y,Y=G;break e}}else if(De.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===X&&Em(Pe)===De.type){c(Y,De.sibling),G=v(De,te.props),G.ref=Hs(Y,De,te),G.return=Y,Y=G;break e}c(Y,De);break}else s(Y,De);De=De.sibling}te.type===B?(G=aa(te.props.children,Y.mode,ve,te.key),G.return=Y,Y=G):(ve=Il(te.type,te.key,te.props,null,Y.mode,ve),ve.ref=Hs(Y,G,te),ve.return=Y,Y=ve)}return k(Y);case O:e:{for(De=te.key;G!==null;){if(G.key===De)if(G.tag===4&&G.stateNode.containerInfo===te.containerInfo&&G.stateNode.implementation===te.implementation){c(Y,G.sibling),G=v(G,te.children||[]),G.return=Y,Y=G;break e}else{c(Y,G);break}else s(Y,G);G=G.sibling}G=Hd(te,Y.mode,ve),G.return=Y,Y=G}return k(Y);case X:return De=te._init,Tt(Y,G,De(te._payload),ve)}if(bt(te))return Ce(Y,G,te,ve);if(I(te))return Ne(Y,G,te,ve);dl(Y,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,G!==null&&G.tag===6?(c(Y,G.sibling),G=v(G,te),G.return=Y,Y=G):(c(Y,G),G=Wd(te,Y.mode,ve),G.return=Y,Y=G),k(Y)):c(Y,G)}return Tt}var za=km(!0),Nm=km(!1),hl=xo(null),fl=null,Ba=null,td=null;function rd(){td=Ba=fl=null}function nd(n){var s=hl.current;jt(hl),n._currentValue=s}function od(n,s,c){for(;n!==null;){var f=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),n===c)break;n=n.return}}function Ua(n,s){fl=n,td=Ba=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(xr=!0),n.firstContext=null)}function qr(n){var s=n._currentValue;if(td!==n)if(n={context:n,memoizedValue:s,next:null},Ba===null){if(fl===null)throw Error(t(308));Ba=n,fl.dependencies={lanes:0,firstContext:n}}else Ba=Ba.next=n;return s}var Qo=null;function ad(n){Qo===null?Qo=[n]:Qo.push(n)}function Pm(n,s,c,f){var v=s.interleaved;return v===null?(c.next=c,ad(s)):(c.next=v.next,v.next=c),s.interleaved=c,Qn(n,f)}function Qn(n,s){n.lanes|=s;var c=n.alternate;for(c!==null&&(c.lanes|=s),c=n,n=n.return;n!==null;)n.childLanes|=s,c=n.alternate,c!==null&&(c.childLanes|=s),c=n,n=n.return;return c.tag===3?c.stateNode:null}var bo=!1;function sd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Zn(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function _o(n,s,c){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(it&2)!==0){var v=f.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),f.pending=s,Qn(n,c)}return v=f.interleaved,v===null?(s.next=s,ad(f)):(s.next=v.next,v.next=s),f.interleaved=s,Qn(n,c)}function pl(n,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194240)!==0)){var f=s.lanes;f&=n.pendingLanes,c|=f,s.lanes=c,wu(n,c)}}function Am(n,s){var c=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var v=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var k={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};b===null?v=b=k:b=b.next=k,c=c.next}while(c!==null);b===null?v=b=s:b=b.next=s}else v=b=s;c={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:f.shared,effects:f.effects},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=s:n.next=s,c.lastBaseUpdate=s}function ml(n,s,c,f){var v=n.updateQueue;bo=!1;var b=v.firstBaseUpdate,k=v.lastBaseUpdate,L=v.shared.pending;if(L!==null){v.shared.pending=null;var W=L,ne=W.next;W.next=null,k===null?b=ne:k.next=ne,k=W;var me=n.alternate;me!==null&&(me=me.updateQueue,L=me.lastBaseUpdate,L!==k&&(L===null?me.firstBaseUpdate=ne:L.next=ne,me.lastBaseUpdate=W))}if(b!==null){var ge=v.baseState;k=0,me=ne=W=null,L=b;do{var he=L.lane,be=L.eventTime;if((f&he)===he){me!==null&&(me=me.next={eventTime:be,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var Ce=n,Ne=L;switch(he=s,be=c,Ne.tag){case 1:if(Ce=Ne.payload,typeof Ce=="function"){ge=Ce.call(be,ge,he);break e}ge=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Ne.payload,he=typeof Ce=="function"?Ce.call(be,ge,he):Ce,he==null)break e;ge=P({},ge,he);break e;case 2:bo=!0}}L.callback!==null&&L.lane!==0&&(n.flags|=64,he=v.effects,he===null?v.effects=[L]:he.push(L))}else be={eventTime:be,lane:he,tag:L.tag,payload:L.payload,callback:L.callback,next:null},me===null?(ne=me=be,W=ge):me=me.next=be,k|=he;if(L=L.next,L===null){if(L=v.shared.pending,L===null)break;he=L,L=he.next,he.next=null,v.lastBaseUpdate=he,v.shared.pending=null}}while(!0);if(me===null&&(W=ge),v.baseState=W,v.firstBaseUpdate=ne,v.lastBaseUpdate=me,s=v.shared.interleaved,s!==null){v=s;do k|=v.lane,v=v.next;while(v!==s)}else b===null&&(v.shared.lanes=0);ta|=k,n.lanes=k,n.memoizedState=ge}}function Tm(n,s,c){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var f=n[s],v=f.callback;if(v!==null){if(f.callback=null,f=c,typeof v!="function")throw Error(t(191,v));v.call(f)}}}var Gs={},bn=xo(Gs),Ks=xo(Gs),Js=xo(Gs);function Zo(n){if(n===Gs)throw Error(t(174));return n}function id(n,s){switch(xt(Js,s),xt(Ks,n),xt(bn,Gs),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:zr(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=zr(s,n)}jt(bn),xt(bn,s)}function Va(){jt(bn),jt(Ks),jt(Js)}function Om(n){Zo(Js.current);var s=Zo(bn.current),c=zr(s,n.type);s!==c&&(xt(Ks,n),xt(bn,c))}function ld(n){Ks.current===n&&(jt(bn),jt(Ks))}var kt=xo(0);function gl(n){for(var s=n;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var cd=[];function ud(){for(var n=0;n<cd.length;n++)cd[n]._workInProgressVersionPrimary=null;cd.length=0}var vl=D.ReactCurrentDispatcher,dd=D.ReactCurrentBatchConfig,ea=0,Nt=null,$t=null,Wt=null,xl=!1,Ys=!1,Xs=0,Uj=0;function rr(){throw Error(t(321))}function hd(n,s){if(s===null)return!1;for(var c=0;c<s.length&&c<n.length;c++)if(!tn(n[c],s[c]))return!1;return!0}function fd(n,s,c,f,v,b){if(ea=b,Nt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,vl.current=n===null||n.memoizedState===null?Hj:Gj,n=c(f,v),Ys){b=0;do{if(Ys=!1,Xs=0,25<=b)throw Error(t(301));b+=1,Wt=$t=null,s.updateQueue=null,vl.current=Kj,n=c(f,v)}while(Ys)}if(vl.current=bl,s=$t!==null&&$t.next!==null,ea=0,Wt=$t=Nt=null,xl=!1,s)throw Error(t(300));return n}function pd(){var n=Xs!==0;return Xs=0,n}function _n(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?Nt.memoizedState=Wt=n:Wt=Wt.next=n,Wt}function Wr(){if($t===null){var n=Nt.alternate;n=n!==null?n.memoizedState:null}else n=$t.next;var s=Wt===null?Nt.memoizedState:Wt.next;if(s!==null)Wt=s,$t=n;else{if(n===null)throw Error(t(310));$t=n,n={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Wt===null?Nt.memoizedState=Wt=n:Wt=Wt.next=n}return Wt}function Qs(n,s){return typeof s=="function"?s(n):s}function md(n){var s=Wr(),c=s.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=n;var f=$t,v=f.baseQueue,b=c.pending;if(b!==null){if(v!==null){var k=v.next;v.next=b.next,b.next=k}f.baseQueue=v=b,c.pending=null}if(v!==null){b=v.next,f=f.baseState;var L=k=null,W=null,ne=b;do{var me=ne.lane;if((ea&me)===me)W!==null&&(W=W.next={lane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),f=ne.hasEagerState?ne.eagerState:n(f,ne.action);else{var ge={lane:me,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null};W===null?(L=W=ge,k=f):W=W.next=ge,Nt.lanes|=me,ta|=me}ne=ne.next}while(ne!==null&&ne!==b);W===null?k=f:W.next=L,tn(f,s.memoizedState)||(xr=!0),s.memoizedState=f,s.baseState=k,s.baseQueue=W,c.lastRenderedState=f}if(n=c.interleaved,n!==null){v=n;do b=v.lane,Nt.lanes|=b,ta|=b,v=v.next;while(v!==n)}else v===null&&(c.lanes=0);return[s.memoizedState,c.dispatch]}function gd(n){var s=Wr(),c=s.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=n;var f=c.dispatch,v=c.pending,b=s.memoizedState;if(v!==null){c.pending=null;var k=v=v.next;do b=n(b,k.action),k=k.next;while(k!==v);tn(b,s.memoizedState)||(xr=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),c.lastRenderedState=b}return[b,f]}function Dm(){}function Im(n,s){var c=Nt,f=Wr(),v=s(),b=!tn(f.memoizedState,v);if(b&&(f.memoizedState=v,xr=!0),f=f.queue,vd($m.bind(null,c,f,n),[n]),f.getSnapshot!==s||b||Wt!==null&&Wt.memoizedState.tag&1){if(c.flags|=2048,Zs(9,Fm.bind(null,c,f,v,s),void 0,null),Ht===null)throw Error(t(349));(ea&30)!==0||Mm(c,s,v)}return v}function Mm(n,s,c){n.flags|=16384,n={getSnapshot:s,value:c},s=Nt.updateQueue,s===null?(s={lastEffect:null,stores:null},Nt.updateQueue=s,s.stores=[n]):(c=s.stores,c===null?s.stores=[n]:c.push(n))}function Fm(n,s,c,f){s.value=c,s.getSnapshot=f,Lm(s)&&zm(n)}function $m(n,s,c){return c(function(){Lm(s)&&zm(n)})}function Lm(n){var s=n.getSnapshot;n=n.value;try{var c=s();return!tn(n,c)}catch{return!0}}function zm(n){var s=Qn(n,1);s!==null&&sn(s,n,1,-1)}function Bm(n){var s=_n();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:n},s.queue=n,n=n.dispatch=Wj.bind(null,Nt,n),[s.memoizedState,n]}function Zs(n,s,c,f){return n={tag:n,create:s,destroy:c,deps:f,next:null},s=Nt.updateQueue,s===null?(s={lastEffect:null,stores:null},Nt.updateQueue=s,s.lastEffect=n.next=n):(c=s.lastEffect,c===null?s.lastEffect=n.next=n:(f=c.next,c.next=n,n.next=f,s.lastEffect=n)),n}function Um(){return Wr().memoizedState}function yl(n,s,c,f){var v=_n();Nt.flags|=n,v.memoizedState=Zs(1|s,c,void 0,f===void 0?null:f)}function wl(n,s,c,f){var v=Wr();f=f===void 0?null:f;var b=void 0;if($t!==null){var k=$t.memoizedState;if(b=k.destroy,f!==null&&hd(f,k.deps)){v.memoizedState=Zs(s,c,b,f);return}}Nt.flags|=n,v.memoizedState=Zs(1|s,c,b,f)}function Vm(n,s){return yl(8390656,8,n,s)}function vd(n,s){return wl(2048,8,n,s)}function qm(n,s){return wl(4,2,n,s)}function Wm(n,s){return wl(4,4,n,s)}function Hm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Gm(n,s,c){return c=c!=null?c.concat([n]):null,wl(4,4,Hm.bind(null,s,n),c)}function xd(){}function Km(n,s){var c=Wr();s=s===void 0?null:s;var f=c.memoizedState;return f!==null&&s!==null&&hd(s,f[1])?f[0]:(c.memoizedState=[n,s],n)}function Jm(n,s){var c=Wr();s=s===void 0?null:s;var f=c.memoizedState;return f!==null&&s!==null&&hd(s,f[1])?f[0]:(n=n(),c.memoizedState=[n,s],n)}function Ym(n,s,c){return(ea&21)===0?(n.baseState&&(n.baseState=!1,xr=!0),n.memoizedState=c):(tn(c,s)||(c=Ep(),Nt.lanes|=c,ta|=c,n.baseState=!0),s)}function Vj(n,s){var c=pt;pt=c!==0&&4>c?c:4,n(!0);var f=dd.transition;dd.transition={};try{n(!1),s()}finally{pt=c,dd.transition=f}}function Xm(){return Wr().memoizedState}function qj(n,s,c){var f=Eo(n);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},Qm(n))Zm(s,c);else if(c=Pm(n,s,c,f),c!==null){var v=ur();sn(c,n,f,v),eg(c,s,f)}}function Wj(n,s,c){var f=Eo(n),v={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(Qm(n))Zm(s,v);else{var b=n.alternate;if(n.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var k=s.lastRenderedState,L=b(k,c);if(v.hasEagerState=!0,v.eagerState=L,tn(L,k)){var W=s.interleaved;W===null?(v.next=v,ad(s)):(v.next=W.next,W.next=v),s.interleaved=v;return}}catch{}finally{}c=Pm(n,s,v,f),c!==null&&(v=ur(),sn(c,n,f,v),eg(c,s,f))}}function Qm(n){var s=n.alternate;return n===Nt||s!==null&&s===Nt}function Zm(n,s){Ys=xl=!0;var c=n.pending;c===null?s.next=s:(s.next=c.next,c.next=s),n.pending=s}function eg(n,s,c){if((c&4194240)!==0){var f=s.lanes;f&=n.pendingLanes,c|=f,s.lanes=c,wu(n,c)}}var bl={readContext:qr,useCallback:rr,useContext:rr,useEffect:rr,useImperativeHandle:rr,useInsertionEffect:rr,useLayoutEffect:rr,useMemo:rr,useReducer:rr,useRef:rr,useState:rr,useDebugValue:rr,useDeferredValue:rr,useTransition:rr,useMutableSource:rr,useSyncExternalStore:rr,useId:rr,unstable_isNewReconciler:!1},Hj={readContext:qr,useCallback:function(n,s){return _n().memoizedState=[n,s===void 0?null:s],n},useContext:qr,useEffect:Vm,useImperativeHandle:function(n,s,c){return c=c!=null?c.concat([n]):null,yl(4194308,4,Hm.bind(null,s,n),c)},useLayoutEffect:function(n,s){return yl(4194308,4,n,s)},useInsertionEffect:function(n,s){return yl(4,2,n,s)},useMemo:function(n,s){var c=_n();return s=s===void 0?null:s,n=n(),c.memoizedState=[n,s],n},useReducer:function(n,s,c){var f=_n();return s=c!==void 0?c(s):s,f.memoizedState=f.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},f.queue=n,n=n.dispatch=qj.bind(null,Nt,n),[f.memoizedState,n]},useRef:function(n){var s=_n();return n={current:n},s.memoizedState=n},useState:Bm,useDebugValue:xd,useDeferredValue:function(n){return _n().memoizedState=n},useTransition:function(){var n=Bm(!1),s=n[0];return n=Vj.bind(null,n[1]),_n().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,c){var f=Nt,v=_n();if(St){if(c===void 0)throw Error(t(407));c=c()}else{if(c=s(),Ht===null)throw Error(t(349));(ea&30)!==0||Mm(f,s,c)}v.memoizedState=c;var b={value:c,getSnapshot:s};return v.queue=b,Vm($m.bind(null,f,b,n),[n]),f.flags|=2048,Zs(9,Fm.bind(null,f,b,c,s),void 0,null),c},useId:function(){var n=_n(),s=Ht.identifierPrefix;if(St){var c=Xn,f=Yn;c=(f&~(1<<32-en(f)-1)).toString(32)+c,s=":"+s+"R"+c,c=Xs++,0<c&&(s+="H"+c.toString(32)),s+=":"}else c=Uj++,s=":"+s+"r"+c.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Gj={readContext:qr,useCallback:Km,useContext:qr,useEffect:vd,useImperativeHandle:Gm,useInsertionEffect:qm,useLayoutEffect:Wm,useMemo:Jm,useReducer:md,useRef:Um,useState:function(){return md(Qs)},useDebugValue:xd,useDeferredValue:function(n){var s=Wr();return Ym(s,$t.memoizedState,n)},useTransition:function(){var n=md(Qs)[0],s=Wr().memoizedState;return[n,s]},useMutableSource:Dm,useSyncExternalStore:Im,useId:Xm,unstable_isNewReconciler:!1},Kj={readContext:qr,useCallback:Km,useContext:qr,useEffect:vd,useImperativeHandle:Gm,useInsertionEffect:qm,useLayoutEffect:Wm,useMemo:Jm,useReducer:gd,useRef:Um,useState:function(){return gd(Qs)},useDebugValue:xd,useDeferredValue:function(n){var s=Wr();return $t===null?s.memoizedState=n:Ym(s,$t.memoizedState,n)},useTransition:function(){var n=gd(Qs)[0],s=Wr().memoizedState;return[n,s]},useMutableSource:Dm,useSyncExternalStore:Im,useId:Xm,unstable_isNewReconciler:!1};function nn(n,s){if(n&&n.defaultProps){s=P({},s),n=n.defaultProps;for(var c in n)s[c]===void 0&&(s[c]=n[c]);return s}return s}function yd(n,s,c,f){s=n.memoizedState,c=c(f,s),c=c==null?s:P({},s,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var _l={isMounted:function(n){return(n=n._reactInternals)?Go(n)===n:!1},enqueueSetState:function(n,s,c){n=n._reactInternals;var f=ur(),v=Eo(n),b=Zn(f,v);b.payload=s,c!=null&&(b.callback=c),s=_o(n,b,v),s!==null&&(sn(s,n,v,f),pl(s,n,v))},enqueueReplaceState:function(n,s,c){n=n._reactInternals;var f=ur(),v=Eo(n),b=Zn(f,v);b.tag=1,b.payload=s,c!=null&&(b.callback=c),s=_o(n,b,v),s!==null&&(sn(s,n,v,f),pl(s,n,v))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var c=ur(),f=Eo(n),v=Zn(c,f);v.tag=2,s!=null&&(v.callback=s),s=_o(n,v,f),s!==null&&(sn(s,n,f,c),pl(s,n,f))}};function tg(n,s,c,f,v,b,k){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,b,k):s.prototype&&s.prototype.isPureReactComponent?!Ls(c,f)||!Ls(v,b):!0}function rg(n,s,c){var f=!1,v=yo,b=s.contextType;return typeof b=="object"&&b!==null?b=qr(b):(v=vr(s)?Jo:tr.current,f=s.contextTypes,b=(f=f!=null)?Ma(n,v):yo),s=new s(c,b),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=_l,n.stateNode=s,s._reactInternals=n,f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=v,n.__reactInternalMemoizedMaskedChildContext=b),s}function ng(n,s,c,f){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,f),s.state!==n&&_l.enqueueReplaceState(s,s.state,null)}function wd(n,s,c,f){var v=n.stateNode;v.props=c,v.state=n.memoizedState,v.refs={},sd(n);var b=s.contextType;typeof b=="object"&&b!==null?v.context=qr(b):(b=vr(s)?Jo:tr.current,v.context=Ma(n,b)),v.state=n.memoizedState,b=s.getDerivedStateFromProps,typeof b=="function"&&(yd(n,s,b,c),v.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(s=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),s!==v.state&&_l.enqueueReplaceState(v,v.state,null),ml(n,c,v,f),v.state=n.memoizedState),typeof v.componentDidMount=="function"&&(n.flags|=4194308)}function qa(n,s){try{var c="",f=s;do c+=Q(f),f=f.return;while(f);var v=c}catch(b){v=`
Error generating stack: `+b.message+`
`+b.stack}return{value:n,source:s,stack:v,digest:null}}function bd(n,s,c){return{value:n,source:null,stack:c??null,digest:s??null}}function _d(n,s){try{console.error(s.value)}catch(c){setTimeout(function(){throw c})}}var Jj=typeof WeakMap=="function"?WeakMap:Map;function og(n,s,c){c=Zn(-1,c),c.tag=3,c.payload={element:null};var f=s.value;return c.callback=function(){Pl||(Pl=!0,Fd=f),_d(n,s)},c}function ag(n,s,c){c=Zn(-1,c),c.tag=3;var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var v=s.value;c.payload=function(){return f(v)},c.callback=function(){_d(n,s)}}var b=n.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(c.callback=function(){_d(n,s),typeof f!="function"&&(Co===null?Co=new Set([this]):Co.add(this));var k=s.stack;this.componentDidCatch(s.value,{componentStack:k!==null?k:""})}),c}function sg(n,s,c){var f=n.pingCache;if(f===null){f=n.pingCache=new Jj;var v=new Set;f.set(s,v)}else v=f.get(s),v===void 0&&(v=new Set,f.set(s,v));v.has(c)||(v.add(c),n=cC.bind(null,n,s,c),s.then(n,n))}function ig(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function lg(n,s,c,f,v){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(s=Zn(-1,1),s.tag=2,_o(c,s,1))),c.lanes|=1),n):(n.flags|=65536,n.lanes=v,n)}var Yj=D.ReactCurrentOwner,xr=!1;function cr(n,s,c,f){s.child=n===null?Nm(s,null,c,f):za(s,n.child,c,f)}function cg(n,s,c,f,v){c=c.render;var b=s.ref;return Ua(s,v),f=fd(n,s,c,f,b,v),c=pd(),n!==null&&!xr?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~v,eo(n,s,v)):(St&&c&&Yu(s),s.flags|=1,cr(n,s,f,v),s.child)}function ug(n,s,c,f,v){if(n===null){var b=c.type;return typeof b=="function"&&!qd(b)&&b.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(s.tag=15,s.type=b,dg(n,s,b,f,v)):(n=Il(c.type,null,f,s,s.mode,v),n.ref=s.ref,n.return=s,s.child=n)}if(b=n.child,(n.lanes&v)===0){var k=b.memoizedProps;if(c=c.compare,c=c!==null?c:Ls,c(k,f)&&n.ref===s.ref)return eo(n,s,v)}return s.flags|=1,n=No(b,f),n.ref=s.ref,n.return=s,s.child=n}function dg(n,s,c,f,v){if(n!==null){var b=n.memoizedProps;if(Ls(b,f)&&n.ref===s.ref)if(xr=!1,s.pendingProps=f=b,(n.lanes&v)!==0)(n.flags&131072)!==0&&(xr=!0);else return s.lanes=n.lanes,eo(n,s,v)}return jd(n,s,c,f,v)}function hg(n,s,c){var f=s.pendingProps,v=f.children,b=n!==null?n.memoizedState:null;if(f.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(Ha,Ir),Ir|=c;else{if((c&1073741824)===0)return n=b!==null?b.baseLanes|c:c,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,xt(Ha,Ir),Ir|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=b!==null?b.baseLanes:c,xt(Ha,Ir),Ir|=f}else b!==null?(f=b.baseLanes|c,s.memoizedState=null):f=c,xt(Ha,Ir),Ir|=f;return cr(n,s,v,c),s.child}function fg(n,s){var c=s.ref;(n===null&&c!==null||n!==null&&n.ref!==c)&&(s.flags|=512,s.flags|=2097152)}function jd(n,s,c,f,v){var b=vr(c)?Jo:tr.current;return b=Ma(s,b),Ua(s,v),c=fd(n,s,c,f,b,v),f=pd(),n!==null&&!xr?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~v,eo(n,s,v)):(St&&f&&Yu(s),s.flags|=1,cr(n,s,c,v),s.child)}function pg(n,s,c,f,v){if(vr(c)){var b=!0;sl(s)}else b=!1;if(Ua(s,v),s.stateNode===null)Cl(n,s),rg(s,c,f),wd(s,c,f,v),f=!0;else if(n===null){var k=s.stateNode,L=s.memoizedProps;k.props=L;var W=k.context,ne=c.contextType;typeof ne=="object"&&ne!==null?ne=qr(ne):(ne=vr(c)?Jo:tr.current,ne=Ma(s,ne));var me=c.getDerivedStateFromProps,ge=typeof me=="function"||typeof k.getSnapshotBeforeUpdate=="function";ge||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(L!==f||W!==ne)&&ng(s,k,f,ne),bo=!1;var he=s.memoizedState;k.state=he,ml(s,f,k,v),W=s.memoizedState,L!==f||he!==W||gr.current||bo?(typeof me=="function"&&(yd(s,c,me,f),W=s.memoizedState),(L=bo||tg(s,c,L,f,he,W,ne))?(ge||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(s.flags|=4194308)):(typeof k.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=W),k.props=f,k.state=W,k.context=ne,f=L):(typeof k.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{k=s.stateNode,Rm(n,s),L=s.memoizedProps,ne=s.type===s.elementType?L:nn(s.type,L),k.props=ne,ge=s.pendingProps,he=k.context,W=c.contextType,typeof W=="object"&&W!==null?W=qr(W):(W=vr(c)?Jo:tr.current,W=Ma(s,W));var be=c.getDerivedStateFromProps;(me=typeof be=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(L!==ge||he!==W)&&ng(s,k,f,W),bo=!1,he=s.memoizedState,k.state=he,ml(s,f,k,v);var Ce=s.memoizedState;L!==ge||he!==Ce||gr.current||bo?(typeof be=="function"&&(yd(s,c,be,f),Ce=s.memoizedState),(ne=bo||tg(s,c,ne,f,he,Ce,W)||!1)?(me||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(f,Ce,W),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(f,Ce,W)),typeof k.componentDidUpdate=="function"&&(s.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof k.componentDidUpdate!="function"||L===n.memoizedProps&&he===n.memoizedState||(s.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||L===n.memoizedProps&&he===n.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=Ce),k.props=f,k.state=Ce,k.context=W,f=ne):(typeof k.componentDidUpdate!="function"||L===n.memoizedProps&&he===n.memoizedState||(s.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||L===n.memoizedProps&&he===n.memoizedState||(s.flags|=1024),f=!1)}return Cd(n,s,c,f,b,v)}function Cd(n,s,c,f,v,b){fg(n,s);var k=(s.flags&128)!==0;if(!f&&!k)return v&&ym(s,c,!1),eo(n,s,b);f=s.stateNode,Yj.current=s;var L=k&&typeof c.getDerivedStateFromError!="function"?null:f.render();return s.flags|=1,n!==null&&k?(s.child=za(s,n.child,null,b),s.child=za(s,null,L,b)):cr(n,s,L,b),s.memoizedState=f.state,v&&ym(s,c,!0),s.child}function mg(n){var s=n.stateNode;s.pendingContext?vm(n,s.pendingContext,s.pendingContext!==s.context):s.context&&vm(n,s.context,!1),id(n,s.containerInfo)}function gg(n,s,c,f,v){return La(),ed(v),s.flags|=256,cr(n,s,c,f),s.child}var Sd={dehydrated:null,treeContext:null,retryLane:0};function Ed(n){return{baseLanes:n,cachePool:null,transitions:null}}function vg(n,s,c){var f=s.pendingProps,v=kt.current,b=!1,k=(s.flags&128)!==0,L;if((L=k)||(L=n!==null&&n.memoizedState===null?!1:(v&2)!==0),L?(b=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(v|=1),xt(kt,v&1),n===null)return Zu(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(k=f.children,n=f.fallback,b?(f=s.mode,b=s.child,k={mode:"hidden",children:k},(f&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=k):b=Ml(k,f,0,null),n=aa(n,f,c,null),b.return=s,n.return=s,b.sibling=n,s.child=b,s.child.memoizedState=Ed(c),s.memoizedState=Sd,n):kd(s,k));if(v=n.memoizedState,v!==null&&(L=v.dehydrated,L!==null))return Xj(n,s,k,f,L,v,c);if(b){b=f.fallback,k=s.mode,v=n.child,L=v.sibling;var W={mode:"hidden",children:f.children};return(k&1)===0&&s.child!==v?(f=s.child,f.childLanes=0,f.pendingProps=W,s.deletions=null):(f=No(v,W),f.subtreeFlags=v.subtreeFlags&14680064),L!==null?b=No(L,b):(b=aa(b,k,c,null),b.flags|=2),b.return=s,f.return=s,f.sibling=b,s.child=f,f=b,b=s.child,k=n.child.memoizedState,k=k===null?Ed(c):{baseLanes:k.baseLanes|c,cachePool:null,transitions:k.transitions},b.memoizedState=k,b.childLanes=n.childLanes&~c,s.memoizedState=Sd,f}return b=n.child,n=b.sibling,f=No(b,{mode:"visible",children:f.children}),(s.mode&1)===0&&(f.lanes=c),f.return=s,f.sibling=null,n!==null&&(c=s.deletions,c===null?(s.deletions=[n],s.flags|=16):c.push(n)),s.child=f,s.memoizedState=null,f}function kd(n,s){return s=Ml({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function jl(n,s,c,f){return f!==null&&ed(f),za(s,n.child,null,c),n=kd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Xj(n,s,c,f,v,b,k){if(c)return s.flags&256?(s.flags&=-257,f=bd(Error(t(422))),jl(n,s,k,f)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(b=f.fallback,v=s.mode,f=Ml({mode:"visible",children:f.children},v,0,null),b=aa(b,v,k,null),b.flags|=2,f.return=s,b.return=s,f.sibling=b,s.child=f,(s.mode&1)!==0&&za(s,n.child,null,k),s.child.memoizedState=Ed(k),s.memoizedState=Sd,b);if((s.mode&1)===0)return jl(n,s,k,null);if(v.data==="$!"){if(f=v.nextSibling&&v.nextSibling.dataset,f)var L=f.dgst;return f=L,b=Error(t(419)),f=bd(b,f,void 0),jl(n,s,k,f)}if(L=(k&n.childLanes)!==0,xr||L){if(f=Ht,f!==null){switch(k&-k){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(f.suspendedLanes|k))!==0?0:v,v!==0&&v!==b.retryLane&&(b.retryLane=v,Qn(n,v),sn(f,n,v,-1))}return Vd(),f=bd(Error(t(421))),jl(n,s,k,f)}return v.data==="$?"?(s.flags|=128,s.child=n.child,s=uC.bind(null,n),v._reactRetry=s,null):(n=b.treeContext,Dr=vo(v.nextSibling),Or=s,St=!0,rn=null,n!==null&&(Ur[Vr++]=Yn,Ur[Vr++]=Xn,Ur[Vr++]=Yo,Yn=n.id,Xn=n.overflow,Yo=s),s=kd(s,f.children),s.flags|=4096,s)}function xg(n,s,c){n.lanes|=s;var f=n.alternate;f!==null&&(f.lanes|=s),od(n.return,s,c)}function Nd(n,s,c,f,v){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:v}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=f,b.tail=c,b.tailMode=v)}function yg(n,s,c){var f=s.pendingProps,v=f.revealOrder,b=f.tail;if(cr(n,s,f.children,c),f=kt.current,(f&2)!==0)f=f&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&xg(n,c,s);else if(n.tag===19)xg(n,c,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}if(xt(kt,f),(s.mode&1)===0)s.memoizedState=null;else switch(v){case"forwards":for(c=s.child,v=null;c!==null;)n=c.alternate,n!==null&&gl(n)===null&&(v=c),c=c.sibling;c=v,c===null?(v=s.child,s.child=null):(v=c.sibling,c.sibling=null),Nd(s,!1,v,c,b);break;case"backwards":for(c=null,v=s.child,s.child=null;v!==null;){if(n=v.alternate,n!==null&&gl(n)===null){s.child=v;break}n=v.sibling,v.sibling=c,c=v,v=n}Nd(s,!0,c,null,b);break;case"together":Nd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Cl(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function eo(n,s,c){if(n!==null&&(s.dependencies=n.dependencies),ta|=s.lanes,(c&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,c=No(n,n.pendingProps),s.child=c,c.return=s;n.sibling!==null;)n=n.sibling,c=c.sibling=No(n,n.pendingProps),c.return=s;c.sibling=null}return s.child}function Qj(n,s,c){switch(s.tag){case 3:mg(s),La();break;case 5:Om(s);break;case 1:vr(s.type)&&sl(s);break;case 4:id(s,s.stateNode.containerInfo);break;case 10:var f=s.type._context,v=s.memoizedProps.value;xt(hl,f._currentValue),f._currentValue=v;break;case 13:if(f=s.memoizedState,f!==null)return f.dehydrated!==null?(xt(kt,kt.current&1),s.flags|=128,null):(c&s.child.childLanes)!==0?vg(n,s,c):(xt(kt,kt.current&1),n=eo(n,s,c),n!==null?n.sibling:null);xt(kt,kt.current&1);break;case 19:if(f=(c&s.childLanes)!==0,(n.flags&128)!==0){if(f)return yg(n,s,c);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),xt(kt,kt.current),f)break;return null;case 22:case 23:return s.lanes=0,hg(n,s,c)}return eo(n,s,c)}var wg,Pd,bg,_g;wg=function(n,s){for(var c=s.child;c!==null;){if(c.tag===5||c.tag===6)n.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Pd=function(){},bg=function(n,s,c,f){var v=n.memoizedProps;if(v!==f){n=s.stateNode,Zo(bn.current);var b=null;switch(c){case"input":v=Ae(n,v),f=Ae(n,f),b=[];break;case"select":v=P({},v,{value:void 0}),f=P({},f,{value:void 0}),b=[];break;case"textarea":v=at(n,v),f=at(n,f),b=[];break;default:typeof v.onClick!="function"&&typeof f.onClick=="function"&&(n.onclick=nl)}Hn(c,f);var k;c=null;for(ne in v)if(!f.hasOwnProperty(ne)&&v.hasOwnProperty(ne)&&v[ne]!=null)if(ne==="style"){var L=v[ne];for(k in L)L.hasOwnProperty(k)&&(c||(c={}),c[k]="")}else ne!=="dangerouslySetInnerHTML"&&ne!=="children"&&ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&ne!=="autoFocus"&&(i.hasOwnProperty(ne)?b||(b=[]):(b=b||[]).push(ne,null));for(ne in f){var W=f[ne];if(L=v?.[ne],f.hasOwnProperty(ne)&&W!==L&&(W!=null||L!=null))if(ne==="style")if(L){for(k in L)!L.hasOwnProperty(k)||W&&W.hasOwnProperty(k)||(c||(c={}),c[k]="");for(k in W)W.hasOwnProperty(k)&&L[k]!==W[k]&&(c||(c={}),c[k]=W[k])}else c||(b||(b=[]),b.push(ne,c)),c=W;else ne==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,L=L?L.__html:void 0,W!=null&&L!==W&&(b=b||[]).push(ne,W)):ne==="children"?typeof W!="string"&&typeof W!="number"||(b=b||[]).push(ne,""+W):ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&(i.hasOwnProperty(ne)?(W!=null&&ne==="onScroll"&&_t("scroll",n),b||L===W||(b=[])):(b=b||[]).push(ne,W))}c&&(b=b||[]).push("style",c);var ne=b;(s.updateQueue=ne)&&(s.flags|=4)}},_g=function(n,s,c,f){c!==f&&(s.flags|=4)};function ei(n,s){if(!St)switch(n.tailMode){case"hidden":s=n.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function nr(n){var s=n.alternate!==null&&n.alternate.child===n.child,c=0,f=0;if(s)for(var v=n.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags&14680064,f|=v.flags&14680064,v.return=n,v=v.sibling;else for(v=n.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=n,v=v.sibling;return n.subtreeFlags|=f,n.childLanes=c,s}function Zj(n,s,c){var f=s.pendingProps;switch(Xu(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nr(s),null;case 1:return vr(s.type)&&al(),nr(s),null;case 3:return f=s.stateNode,Va(),jt(gr),jt(tr),ud(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(ul(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,rn!==null&&(zd(rn),rn=null))),Pd(n,s),nr(s),null;case 5:ld(s);var v=Zo(Js.current);if(c=s.type,n!==null&&s.stateNode!=null)bg(n,s,c,f,v),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!f){if(s.stateNode===null)throw Error(t(166));return nr(s),null}if(n=Zo(bn.current),ul(s)){f=s.stateNode,c=s.type;var b=s.memoizedProps;switch(f[wn]=s,f[qs]=b,n=(s.mode&1)!==0,c){case"dialog":_t("cancel",f),_t("close",f);break;case"iframe":case"object":case"embed":_t("load",f);break;case"video":case"audio":for(v=0;v<Bs.length;v++)_t(Bs[v],f);break;case"source":_t("error",f);break;case"img":case"image":case"link":_t("error",f),_t("load",f);break;case"details":_t("toggle",f);break;case"input":ze(f,b),_t("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!b.multiple},_t("invalid",f);break;case"textarea":It(f,b),_t("invalid",f)}Hn(c,b),v=null;for(var k in b)if(b.hasOwnProperty(k)){var L=b[k];k==="children"?typeof L=="string"?f.textContent!==L&&(b.suppressHydrationWarning!==!0&&rl(f.textContent,L,n),v=["children",L]):typeof L=="number"&&f.textContent!==""+L&&(b.suppressHydrationWarning!==!0&&rl(f.textContent,L,n),v=["children",""+L]):i.hasOwnProperty(k)&&L!=null&&k==="onScroll"&&_t("scroll",f)}switch(c){case"input":we(f),Ct(f,b,!0);break;case"textarea":we(f),Ca(f);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(f.onclick=nl)}f=v,s.updateQueue=f,f!==null&&(s.flags|=4)}else{k=v.nodeType===9?v:v.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Wn(c)),n==="http://www.w3.org/1999/xhtml"?c==="script"?(n=k.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof f.is=="string"?n=k.createElement(c,{is:f.is}):(n=k.createElement(c),c==="select"&&(k=n,f.multiple?k.multiple=!0:f.size&&(k.size=f.size))):n=k.createElementNS(n,c),n[wn]=s,n[qs]=f,wg(n,s,!1,!1),s.stateNode=n;e:{switch(k=Wo(c,f),c){case"dialog":_t("cancel",n),_t("close",n),v=f;break;case"iframe":case"object":case"embed":_t("load",n),v=f;break;case"video":case"audio":for(v=0;v<Bs.length;v++)_t(Bs[v],n);v=f;break;case"source":_t("error",n),v=f;break;case"img":case"image":case"link":_t("error",n),_t("load",n),v=f;break;case"details":_t("toggle",n),v=f;break;case"input":ze(n,f),v=Ae(n,f),_t("invalid",n);break;case"option":v=f;break;case"select":n._wrapperState={wasMultiple:!!f.multiple},v=P({},f,{value:void 0}),_t("invalid",n);break;case"textarea":It(n,f),v=at(n,f),_t("invalid",n);break;default:v=f}Hn(c,v),L=v;for(b in L)if(L.hasOwnProperty(b)){var W=L[b];b==="style"?Ea(n,W):b==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,W!=null&&Br(n,W)):b==="children"?typeof W=="string"?(c!=="textarea"||W!=="")&&lr(n,W):typeof W=="number"&&lr(n,""+W):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(i.hasOwnProperty(b)?W!=null&&b==="onScroll"&&_t("scroll",n):W!=null&&N(n,b,W,k))}switch(c){case"input":we(n),Ct(n,f,!1);break;case"textarea":we(n),Ca(n);break;case"option":f.value!=null&&n.setAttribute("value",""+q(f.value));break;case"select":n.multiple=!!f.multiple,b=f.value,b!=null?Vt(n,!!f.multiple,b,!1):f.defaultValue!=null&&Vt(n,!!f.multiple,f.defaultValue,!0);break;default:typeof v.onClick=="function"&&(n.onclick=nl)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return nr(s),null;case 6:if(n&&s.stateNode!=null)_g(n,s,n.memoizedProps,f);else{if(typeof f!="string"&&s.stateNode===null)throw Error(t(166));if(c=Zo(Js.current),Zo(bn.current),ul(s)){if(f=s.stateNode,c=s.memoizedProps,f[wn]=s,(b=f.nodeValue!==c)&&(n=Or,n!==null))switch(n.tag){case 3:rl(f.nodeValue,c,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&rl(f.nodeValue,c,(n.mode&1)!==0)}b&&(s.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[wn]=s,s.stateNode=f}return nr(s),null;case 13:if(jt(kt),f=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(St&&Dr!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Sm(),La(),s.flags|=98560,b=!1;else if(b=ul(s),f!==null&&f.dehydrated!==null){if(n===null){if(!b)throw Error(t(318));if(b=s.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(t(317));b[wn]=s}else La(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;nr(s),b=!1}else rn!==null&&(zd(rn),rn=null),b=!0;if(!b)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=c,s):(f=f!==null,f!==(n!==null&&n.memoizedState!==null)&&f&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(kt.current&1)!==0?Lt===0&&(Lt=3):Vd())),s.updateQueue!==null&&(s.flags|=4),nr(s),null);case 4:return Va(),Pd(n,s),n===null&&Us(s.stateNode.containerInfo),nr(s),null;case 10:return nd(s.type._context),nr(s),null;case 17:return vr(s.type)&&al(),nr(s),null;case 19:if(jt(kt),b=s.memoizedState,b===null)return nr(s),null;if(f=(s.flags&128)!==0,k=b.rendering,k===null)if(f)ei(b,!1);else{if(Lt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(k=gl(n),k!==null){for(s.flags|=128,ei(b,!1),f=k.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),s.subtreeFlags=0,f=c,c=s.child;c!==null;)b=c,n=f,b.flags&=14680066,k=b.alternate,k===null?(b.childLanes=0,b.lanes=n,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=k.childLanes,b.lanes=k.lanes,b.child=k.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=k.memoizedProps,b.memoizedState=k.memoizedState,b.updateQueue=k.updateQueue,b.type=k.type,n=k.dependencies,b.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),c=c.sibling;return xt(kt,kt.current&1|2),s.child}n=n.sibling}b.tail!==null&&At()>Ga&&(s.flags|=128,f=!0,ei(b,!1),s.lanes=4194304)}else{if(!f)if(n=gl(k),n!==null){if(s.flags|=128,f=!0,c=n.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),ei(b,!0),b.tail===null&&b.tailMode==="hidden"&&!k.alternate&&!St)return nr(s),null}else 2*At()-b.renderingStartTime>Ga&&c!==1073741824&&(s.flags|=128,f=!0,ei(b,!1),s.lanes=4194304);b.isBackwards?(k.sibling=s.child,s.child=k):(c=b.last,c!==null?c.sibling=k:s.child=k,b.last=k)}return b.tail!==null?(s=b.tail,b.rendering=s,b.tail=s.sibling,b.renderingStartTime=At(),s.sibling=null,c=kt.current,xt(kt,f?c&1|2:c&1),s):(nr(s),null);case 22:case 23:return Ud(),f=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==f&&(s.flags|=8192),f&&(s.mode&1)!==0?(Ir&1073741824)!==0&&(nr(s),s.subtreeFlags&6&&(s.flags|=8192)):nr(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function eC(n,s){switch(Xu(s),s.tag){case 1:return vr(s.type)&&al(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Va(),jt(gr),jt(tr),ud(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return ld(s),null;case 13:if(jt(kt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));La()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return jt(kt),null;case 4:return Va(),null;case 10:return nd(s.type._context),null;case 22:case 23:return Ud(),null;case 24:return null;default:return null}}var Sl=!1,or=!1,tC=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Wa(n,s){var c=n.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){Rt(n,s,f)}else c.current=null}function Rd(n,s,c){try{c()}catch(f){Rt(n,s,f)}}var jg=!1;function rC(n,s){if(Uu=Wi,n=tm(),Du(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var v=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var k=0,L=-1,W=-1,ne=0,me=0,ge=n,he=null;t:for(;;){for(var be;ge!==c||v!==0&&ge.nodeType!==3||(L=k+v),ge!==b||f!==0&&ge.nodeType!==3||(W=k+f),ge.nodeType===3&&(k+=ge.nodeValue.length),(be=ge.firstChild)!==null;)he=ge,ge=be;for(;;){if(ge===n)break t;if(he===c&&++ne===v&&(L=k),he===b&&++me===f&&(W=k),(be=ge.nextSibling)!==null)break;ge=he,he=ge.parentNode}ge=be}c=L===-1||W===-1?null:{start:L,end:W}}else c=null}c=c||{start:0,end:0}}else c=null;for(Vu={focusedElem:n,selectionRange:c},Wi=!1,_e=s;_e!==null;)if(s=_e,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,_e=n;else for(;_e!==null;){s=_e;try{var Ce=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var Ne=Ce.memoizedProps,Tt=Ce.memoizedState,Y=s.stateNode,G=Y.getSnapshotBeforeUpdate(s.elementType===s.type?Ne:nn(s.type,Ne),Tt);Y.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var te=s.stateNode.containerInfo;te.nodeType===1?te.textContent="":te.nodeType===9&&te.documentElement&&te.removeChild(te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ve){Rt(s,s.return,ve)}if(n=s.sibling,n!==null){n.return=s.return,_e=n;break}_e=s.return}return Ce=jg,jg=!1,Ce}function ti(n,s,c){var f=s.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var v=f=f.next;do{if((v.tag&n)===n){var b=v.destroy;v.destroy=void 0,b!==void 0&&Rd(s,c,b)}v=v.next}while(v!==f)}}function El(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&n)===n){var f=c.create;c.destroy=f()}c=c.next}while(c!==s)}}function Ad(n){var s=n.ref;if(s!==null){var c=n.stateNode;switch(n.tag){case 5:n=c;break;default:n=c}typeof s=="function"?s(n):s.current=n}}function Cg(n){var s=n.alternate;s!==null&&(n.alternate=null,Cg(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[wn],delete s[qs],delete s[Gu],delete s[$j],delete s[Lj])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Sg(n){return n.tag===5||n.tag===3||n.tag===4}function Eg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Sg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Td(n,s,c){var f=n.tag;if(f===5||f===6)n=n.stateNode,s?c.nodeType===8?c.parentNode.insertBefore(n,s):c.insertBefore(n,s):(c.nodeType===8?(s=c.parentNode,s.insertBefore(n,c)):(s=c,s.appendChild(n)),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=nl));else if(f!==4&&(n=n.child,n!==null))for(Td(n,s,c),n=n.sibling;n!==null;)Td(n,s,c),n=n.sibling}function Od(n,s,c){var f=n.tag;if(f===5||f===6)n=n.stateNode,s?c.insertBefore(n,s):c.appendChild(n);else if(f!==4&&(n=n.child,n!==null))for(Od(n,s,c),n=n.sibling;n!==null;)Od(n,s,c),n=n.sibling}var Xt=null,on=!1;function jo(n,s,c){for(c=c.child;c!==null;)kg(n,s,c),c=c.sibling}function kg(n,s,c){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Li,c)}catch{}switch(c.tag){case 5:or||Wa(c,s);case 6:var f=Xt,v=on;Xt=null,jo(n,s,c),Xt=f,on=v,Xt!==null&&(on?(n=Xt,c=c.stateNode,n.nodeType===8?n.parentNode.removeChild(c):n.removeChild(c)):Xt.removeChild(c.stateNode));break;case 18:Xt!==null&&(on?(n=Xt,c=c.stateNode,n.nodeType===8?Hu(n.parentNode,c):n.nodeType===1&&Hu(n,c),Os(n)):Hu(Xt,c.stateNode));break;case 4:f=Xt,v=on,Xt=c.stateNode.containerInfo,on=!0,jo(n,s,c),Xt=f,on=v;break;case 0:case 11:case 14:case 15:if(!or&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){v=f=f.next;do{var b=v,k=b.destroy;b=b.tag,k!==void 0&&((b&2)!==0||(b&4)!==0)&&Rd(c,s,k),v=v.next}while(v!==f)}jo(n,s,c);break;case 1:if(!or&&(Wa(c,s),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(L){Rt(c,s,L)}jo(n,s,c);break;case 21:jo(n,s,c);break;case 22:c.mode&1?(or=(f=or)||c.memoizedState!==null,jo(n,s,c),or=f):jo(n,s,c);break;default:jo(n,s,c)}}function Ng(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var c=n.stateNode;c===null&&(c=n.stateNode=new tC),s.forEach(function(f){var v=dC.bind(null,n,f);c.has(f)||(c.add(f),f.then(v,v))})}}function an(n,s){var c=s.deletions;if(c!==null)for(var f=0;f<c.length;f++){var v=c[f];try{var b=n,k=s,L=k;e:for(;L!==null;){switch(L.tag){case 5:Xt=L.stateNode,on=!1;break e;case 3:Xt=L.stateNode.containerInfo,on=!0;break e;case 4:Xt=L.stateNode.containerInfo,on=!0;break e}L=L.return}if(Xt===null)throw Error(t(160));kg(b,k,v),Xt=null,on=!1;var W=v.alternate;W!==null&&(W.return=null),v.return=null}catch(ne){Rt(v,s,ne)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Pg(s,n),s=s.sibling}function Pg(n,s){var c=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(an(s,n),jn(n),f&4){try{ti(3,n,n.return),El(3,n)}catch(Ne){Rt(n,n.return,Ne)}try{ti(5,n,n.return)}catch(Ne){Rt(n,n.return,Ne)}}break;case 1:an(s,n),jn(n),f&512&&c!==null&&Wa(c,c.return);break;case 5:if(an(s,n),jn(n),f&512&&c!==null&&Wa(c,c.return),n.flags&32){var v=n.stateNode;try{lr(v,"")}catch(Ne){Rt(n,n.return,Ne)}}if(f&4&&(v=n.stateNode,v!=null)){var b=n.memoizedProps,k=c!==null?c.memoizedProps:b,L=n.type,W=n.updateQueue;if(n.updateQueue=null,W!==null)try{L==="input"&&b.type==="radio"&&b.name!=null&&$e(v,b),Wo(L,k);var ne=Wo(L,b);for(k=0;k<W.length;k+=2){var me=W[k],ge=W[k+1];me==="style"?Ea(v,ge):me==="dangerouslySetInnerHTML"?Br(v,ge):me==="children"?lr(v,ge):N(v,me,ge,ne)}switch(L){case"input":Ge(v,b);break;case"textarea":Ar(v,b);break;case"select":var he=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!b.multiple;var be=b.value;be!=null?Vt(v,!!b.multiple,be,!1):he!==!!b.multiple&&(b.defaultValue!=null?Vt(v,!!b.multiple,b.defaultValue,!0):Vt(v,!!b.multiple,b.multiple?[]:"",!1))}v[qs]=b}catch(Ne){Rt(n,n.return,Ne)}}break;case 6:if(an(s,n),jn(n),f&4){if(n.stateNode===null)throw Error(t(162));v=n.stateNode,b=n.memoizedProps;try{v.nodeValue=b}catch(Ne){Rt(n,n.return,Ne)}}break;case 3:if(an(s,n),jn(n),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Os(s.containerInfo)}catch(Ne){Rt(n,n.return,Ne)}break;case 4:an(s,n),jn(n);break;case 13:an(s,n),jn(n),v=n.child,v.flags&8192&&(b=v.memoizedState!==null,v.stateNode.isHidden=b,!b||v.alternate!==null&&v.alternate.memoizedState!==null||(Md=At())),f&4&&Ng(n);break;case 22:if(me=c!==null&&c.memoizedState!==null,n.mode&1?(or=(ne=or)||me,an(s,n),or=ne):an(s,n),jn(n),f&8192){if(ne=n.memoizedState!==null,(n.stateNode.isHidden=ne)&&!me&&(n.mode&1)!==0)for(_e=n,me=n.child;me!==null;){for(ge=_e=me;_e!==null;){switch(he=_e,be=he.child,he.tag){case 0:case 11:case 14:case 15:ti(4,he,he.return);break;case 1:Wa(he,he.return);var Ce=he.stateNode;if(typeof Ce.componentWillUnmount=="function"){f=he,c=he.return;try{s=f,Ce.props=s.memoizedProps,Ce.state=s.memoizedState,Ce.componentWillUnmount()}catch(Ne){Rt(f,c,Ne)}}break;case 5:Wa(he,he.return);break;case 22:if(he.memoizedState!==null){Tg(ge);continue}}be!==null?(be.return=he,_e=be):Tg(ge)}me=me.sibling}e:for(me=null,ge=n;;){if(ge.tag===5){if(me===null){me=ge;try{v=ge.stateNode,ne?(b=v.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(L=ge.stateNode,W=ge.memoizedProps.style,k=W!=null&&W.hasOwnProperty("display")?W.display:null,L.style.display=Sa("display",k))}catch(Ne){Rt(n,n.return,Ne)}}}else if(ge.tag===6){if(me===null)try{ge.stateNode.nodeValue=ne?"":ge.memoizedProps}catch(Ne){Rt(n,n.return,Ne)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===n)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===n)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===n)break e;me===ge&&(me=null),ge=ge.return}me===ge&&(me=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:an(s,n),jn(n),f&4&&Ng(n);break;case 21:break;default:an(s,n),jn(n)}}function jn(n){var s=n.flags;if(s&2){try{e:{for(var c=n.return;c!==null;){if(Sg(c)){var f=c;break e}c=c.return}throw Error(t(160))}switch(f.tag){case 5:var v=f.stateNode;f.flags&32&&(lr(v,""),f.flags&=-33);var b=Eg(n);Od(n,b,v);break;case 3:case 4:var k=f.stateNode.containerInfo,L=Eg(n);Td(n,L,k);break;default:throw Error(t(161))}}catch(W){Rt(n,n.return,W)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function nC(n,s,c){_e=n,Rg(n)}function Rg(n,s,c){for(var f=(n.mode&1)!==0;_e!==null;){var v=_e,b=v.child;if(v.tag===22&&f){var k=v.memoizedState!==null||Sl;if(!k){var L=v.alternate,W=L!==null&&L.memoizedState!==null||or;L=Sl;var ne=or;if(Sl=k,(or=W)&&!ne)for(_e=v;_e!==null;)k=_e,W=k.child,k.tag===22&&k.memoizedState!==null?Og(v):W!==null?(W.return=k,_e=W):Og(v);for(;b!==null;)_e=b,Rg(b),b=b.sibling;_e=v,Sl=L,or=ne}Ag(n)}else(v.subtreeFlags&8772)!==0&&b!==null?(b.return=v,_e=b):Ag(n)}}function Ag(n){for(;_e!==null;){var s=_e;if((s.flags&8772)!==0){var c=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:or||El(5,s);break;case 1:var f=s.stateNode;if(s.flags&4&&!or)if(c===null)f.componentDidMount();else{var v=s.elementType===s.type?c.memoizedProps:nn(s.type,c.memoizedProps);f.componentDidUpdate(v,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var b=s.updateQueue;b!==null&&Tm(s,b,f);break;case 3:var k=s.updateQueue;if(k!==null){if(c=null,s.child!==null)switch(s.child.tag){case 5:c=s.child.stateNode;break;case 1:c=s.child.stateNode}Tm(s,k,c)}break;case 5:var L=s.stateNode;if(c===null&&s.flags&4){c=L;var W=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":W.autoFocus&&c.focus();break;case"img":W.src&&(c.src=W.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var ne=s.alternate;if(ne!==null){var me=ne.memoizedState;if(me!==null){var ge=me.dehydrated;ge!==null&&Os(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}or||s.flags&512&&Ad(s)}catch(he){Rt(s,s.return,he)}}if(s===n){_e=null;break}if(c=s.sibling,c!==null){c.return=s.return,_e=c;break}_e=s.return}}function Tg(n){for(;_e!==null;){var s=_e;if(s===n){_e=null;break}var c=s.sibling;if(c!==null){c.return=s.return,_e=c;break}_e=s.return}}function Og(n){for(;_e!==null;){var s=_e;try{switch(s.tag){case 0:case 11:case 15:var c=s.return;try{El(4,s)}catch(W){Rt(s,c,W)}break;case 1:var f=s.stateNode;if(typeof f.componentDidMount=="function"){var v=s.return;try{f.componentDidMount()}catch(W){Rt(s,v,W)}}var b=s.return;try{Ad(s)}catch(W){Rt(s,b,W)}break;case 5:var k=s.return;try{Ad(s)}catch(W){Rt(s,k,W)}}}catch(W){Rt(s,s.return,W)}if(s===n){_e=null;break}var L=s.sibling;if(L!==null){L.return=s.return,_e=L;break}_e=s.return}}var oC=Math.ceil,kl=D.ReactCurrentDispatcher,Dd=D.ReactCurrentOwner,Hr=D.ReactCurrentBatchConfig,it=0,Ht=null,Ot=null,Qt=0,Ir=0,Ha=xo(0),Lt=0,ri=null,ta=0,Nl=0,Id=0,ni=null,yr=null,Md=0,Ga=1/0,to=null,Pl=!1,Fd=null,Co=null,Rl=!1,So=null,Al=0,oi=0,$d=null,Tl=-1,Ol=0;function ur(){return(it&6)!==0?At():Tl!==-1?Tl:Tl=At()}function Eo(n){return(n.mode&1)===0?1:(it&2)!==0&&Qt!==0?Qt&-Qt:Bj.transition!==null?(Ol===0&&(Ol=Ep()),Ol):(n=pt,n!==0||(n=window.event,n=n===void 0?16:Ip(n.type)),n)}function sn(n,s,c,f){if(50<oi)throw oi=0,$d=null,Error(t(185));Ns(n,c,f),((it&2)===0||n!==Ht)&&(n===Ht&&((it&2)===0&&(Nl|=c),Lt===4&&ko(n,Qt)),wr(n,f),c===1&&it===0&&(s.mode&1)===0&&(Ga=At()+500,il&&wo()))}function wr(n,s){var c=n.callbackNode;B_(n,s);var f=Ui(n,n===Ht?Qt:0);if(f===0)c!==null&&jp(c),n.callbackNode=null,n.callbackPriority=0;else if(s=f&-f,n.callbackPriority!==s){if(c!=null&&jp(c),s===1)n.tag===0?zj(Ig.bind(null,n)):wm(Ig.bind(null,n)),Mj(function(){(it&6)===0&&wo()}),c=null;else{switch(kp(f)){case 1:c=vu;break;case 4:c=Cp;break;case 16:c=$i;break;case 536870912:c=Sp;break;default:c=$i}c=Vg(c,Dg.bind(null,n))}n.callbackPriority=s,n.callbackNode=c}}function Dg(n,s){if(Tl=-1,Ol=0,(it&6)!==0)throw Error(t(327));var c=n.callbackNode;if(Ka()&&n.callbackNode!==c)return null;var f=Ui(n,n===Ht?Qt:0);if(f===0)return null;if((f&30)!==0||(f&n.expiredLanes)!==0||s)s=Dl(n,f);else{s=f;var v=it;it|=2;var b=Fg();(Ht!==n||Qt!==s)&&(to=null,Ga=At()+500,na(n,s));do try{iC();break}catch(L){Mg(n,L)}while(!0);rd(),kl.current=b,it=v,Ot!==null?s=0:(Ht=null,Qt=0,s=Lt)}if(s!==0){if(s===2&&(v=xu(n),v!==0&&(f=v,s=Ld(n,v))),s===1)throw c=ri,na(n,0),ko(n,f),wr(n,At()),c;if(s===6)ko(n,f);else{if(v=n.current.alternate,(f&30)===0&&!aC(v)&&(s=Dl(n,f),s===2&&(b=xu(n),b!==0&&(f=b,s=Ld(n,b))),s===1))throw c=ri,na(n,0),ko(n,f),wr(n,At()),c;switch(n.finishedWork=v,n.finishedLanes=f,s){case 0:case 1:throw Error(t(345));case 2:oa(n,yr,to);break;case 3:if(ko(n,f),(f&130023424)===f&&(s=Md+500-At(),10<s)){if(Ui(n,0)!==0)break;if(v=n.suspendedLanes,(v&f)!==f){ur(),n.pingedLanes|=n.suspendedLanes&v;break}n.timeoutHandle=Wu(oa.bind(null,n,yr,to),s);break}oa(n,yr,to);break;case 4:if(ko(n,f),(f&4194240)===f)break;for(s=n.eventTimes,v=-1;0<f;){var k=31-en(f);b=1<<k,k=s[k],k>v&&(v=k),f&=~b}if(f=v,f=At()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*oC(f/1960))-f,10<f){n.timeoutHandle=Wu(oa.bind(null,n,yr,to),f);break}oa(n,yr,to);break;case 5:oa(n,yr,to);break;default:throw Error(t(329))}}}return wr(n,At()),n.callbackNode===c?Dg.bind(null,n):null}function Ld(n,s){var c=ni;return n.current.memoizedState.isDehydrated&&(na(n,s).flags|=256),n=Dl(n,s),n!==2&&(s=yr,yr=c,s!==null&&zd(s)),n}function zd(n){yr===null?yr=n:yr.push.apply(yr,n)}function aC(n){for(var s=n;;){if(s.flags&16384){var c=s.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var v=c[f],b=v.getSnapshot;v=v.value;try{if(!tn(b(),v))return!1}catch{return!1}}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ko(n,s){for(s&=~Id,s&=~Nl,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var c=31-en(s),f=1<<c;n[c]=-1,s&=~f}}function Ig(n){if((it&6)!==0)throw Error(t(327));Ka();var s=Ui(n,0);if((s&1)===0)return wr(n,At()),null;var c=Dl(n,s);if(n.tag!==0&&c===2){var f=xu(n);f!==0&&(s=f,c=Ld(n,f))}if(c===1)throw c=ri,na(n,0),ko(n,s),wr(n,At()),c;if(c===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,oa(n,yr,to),wr(n,At()),null}function Bd(n,s){var c=it;it|=1;try{return n(s)}finally{it=c,it===0&&(Ga=At()+500,il&&wo())}}function ra(n){So!==null&&So.tag===0&&(it&6)===0&&Ka();var s=it;it|=1;var c=Hr.transition,f=pt;try{if(Hr.transition=null,pt=1,n)return n()}finally{pt=f,Hr.transition=c,it=s,(it&6)===0&&wo()}}function Ud(){Ir=Ha.current,jt(Ha)}function na(n,s){n.finishedWork=null,n.finishedLanes=0;var c=n.timeoutHandle;if(c!==-1&&(n.timeoutHandle=-1,Ij(c)),Ot!==null)for(c=Ot.return;c!==null;){var f=c;switch(Xu(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&al();break;case 3:Va(),jt(gr),jt(tr),ud();break;case 5:ld(f);break;case 4:Va();break;case 13:jt(kt);break;case 19:jt(kt);break;case 10:nd(f.type._context);break;case 22:case 23:Ud()}c=c.return}if(Ht=n,Ot=n=No(n.current,null),Qt=Ir=s,Lt=0,ri=null,Id=Nl=ta=0,yr=ni=null,Qo!==null){for(s=0;s<Qo.length;s++)if(c=Qo[s],f=c.interleaved,f!==null){c.interleaved=null;var v=f.next,b=c.pending;if(b!==null){var k=b.next;b.next=v,f.next=k}c.pending=f}Qo=null}return n}function Mg(n,s){do{var c=Ot;try{if(rd(),vl.current=bl,xl){for(var f=Nt.memoizedState;f!==null;){var v=f.queue;v!==null&&(v.pending=null),f=f.next}xl=!1}if(ea=0,Wt=$t=Nt=null,Ys=!1,Xs=0,Dd.current=null,c===null||c.return===null){Lt=1,ri=s,Ot=null;break}e:{var b=n,k=c.return,L=c,W=s;if(s=Qt,L.flags|=32768,W!==null&&typeof W=="object"&&typeof W.then=="function"){var ne=W,me=L,ge=me.tag;if((me.mode&1)===0&&(ge===0||ge===11||ge===15)){var he=me.alternate;he?(me.updateQueue=he.updateQueue,me.memoizedState=he.memoizedState,me.lanes=he.lanes):(me.updateQueue=null,me.memoizedState=null)}var be=ig(k);if(be!==null){be.flags&=-257,lg(be,k,L,b,s),be.mode&1&&sg(b,ne,s),s=be,W=ne;var Ce=s.updateQueue;if(Ce===null){var Ne=new Set;Ne.add(W),s.updateQueue=Ne}else Ce.add(W);break e}else{if((s&1)===0){sg(b,ne,s),Vd();break e}W=Error(t(426))}}else if(St&&L.mode&1){var Tt=ig(k);if(Tt!==null){(Tt.flags&65536)===0&&(Tt.flags|=256),lg(Tt,k,L,b,s),ed(qa(W,L));break e}}b=W=qa(W,L),Lt!==4&&(Lt=2),ni===null?ni=[b]:ni.push(b),b=k;do{switch(b.tag){case 3:b.flags|=65536,s&=-s,b.lanes|=s;var Y=og(b,W,s);Am(b,Y);break e;case 1:L=W;var G=b.type,te=b.stateNode;if((b.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(Co===null||!Co.has(te)))){b.flags|=65536,s&=-s,b.lanes|=s;var ve=ag(b,L,s);Am(b,ve);break e}}b=b.return}while(b!==null)}Lg(c)}catch(Pe){s=Pe,Ot===c&&c!==null&&(Ot=c=c.return);continue}break}while(!0)}function Fg(){var n=kl.current;return kl.current=bl,n===null?bl:n}function Vd(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),Ht===null||(ta&268435455)===0&&(Nl&268435455)===0||ko(Ht,Qt)}function Dl(n,s){var c=it;it|=2;var f=Fg();(Ht!==n||Qt!==s)&&(to=null,na(n,s));do try{sC();break}catch(v){Mg(n,v)}while(!0);if(rd(),it=c,kl.current=f,Ot!==null)throw Error(t(261));return Ht=null,Qt=0,Lt}function sC(){for(;Ot!==null;)$g(Ot)}function iC(){for(;Ot!==null&&!T_();)$g(Ot)}function $g(n){var s=Ug(n.alternate,n,Ir);n.memoizedProps=n.pendingProps,s===null?Lg(n):Ot=s,Dd.current=null}function Lg(n){var s=n;do{var c=s.alternate;if(n=s.return,(s.flags&32768)===0){if(c=Zj(c,s,Ir),c!==null){Ot=c;return}}else{if(c=eC(c,s),c!==null){c.flags&=32767,Ot=c;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Lt=6,Ot=null;return}}if(s=s.sibling,s!==null){Ot=s;return}Ot=s=n}while(s!==null);Lt===0&&(Lt=5)}function oa(n,s,c){var f=pt,v=Hr.transition;try{Hr.transition=null,pt=1,lC(n,s,c,f)}finally{Hr.transition=v,pt=f}return null}function lC(n,s,c,f){do Ka();while(So!==null);if((it&6)!==0)throw Error(t(327));c=n.finishedWork;var v=n.finishedLanes;if(c===null)return null;if(n.finishedWork=null,n.finishedLanes=0,c===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var b=c.lanes|c.childLanes;if(U_(n,b),n===Ht&&(Ot=Ht=null,Qt=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Rl||(Rl=!0,Vg($i,function(){return Ka(),null})),b=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||b){b=Hr.transition,Hr.transition=null;var k=pt;pt=1;var L=it;it|=4,Dd.current=null,rC(n,c),Pg(c,n),Nj(Vu),Wi=!!Uu,Vu=Uu=null,n.current=c,nC(c),O_(),it=L,pt=k,Hr.transition=b}else n.current=c;if(Rl&&(Rl=!1,So=n,Al=v),b=n.pendingLanes,b===0&&(Co=null),M_(c.stateNode),wr(n,At()),s!==null)for(f=n.onRecoverableError,c=0;c<s.length;c++)v=s[c],f(v.value,{componentStack:v.stack,digest:v.digest});if(Pl)throw Pl=!1,n=Fd,Fd=null,n;return(Al&1)!==0&&n.tag!==0&&Ka(),b=n.pendingLanes,(b&1)!==0?n===$d?oi++:(oi=0,$d=n):oi=0,wo(),null}function Ka(){if(So!==null){var n=kp(Al),s=Hr.transition,c=pt;try{if(Hr.transition=null,pt=16>n?16:n,So===null)var f=!1;else{if(n=So,So=null,Al=0,(it&6)!==0)throw Error(t(331));var v=it;for(it|=4,_e=n.current;_e!==null;){var b=_e,k=b.child;if((_e.flags&16)!==0){var L=b.deletions;if(L!==null){for(var W=0;W<L.length;W++){var ne=L[W];for(_e=ne;_e!==null;){var me=_e;switch(me.tag){case 0:case 11:case 15:ti(8,me,b)}var ge=me.child;if(ge!==null)ge.return=me,_e=ge;else for(;_e!==null;){me=_e;var he=me.sibling,be=me.return;if(Cg(me),me===ne){_e=null;break}if(he!==null){he.return=be,_e=he;break}_e=be}}}var Ce=b.alternate;if(Ce!==null){var Ne=Ce.child;if(Ne!==null){Ce.child=null;do{var Tt=Ne.sibling;Ne.sibling=null,Ne=Tt}while(Ne!==null)}}_e=b}}if((b.subtreeFlags&2064)!==0&&k!==null)k.return=b,_e=k;else e:for(;_e!==null;){if(b=_e,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:ti(9,b,b.return)}var Y=b.sibling;if(Y!==null){Y.return=b.return,_e=Y;break e}_e=b.return}}var G=n.current;for(_e=G;_e!==null;){k=_e;var te=k.child;if((k.subtreeFlags&2064)!==0&&te!==null)te.return=k,_e=te;else e:for(k=G;_e!==null;){if(L=_e,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:El(9,L)}}catch(Pe){Rt(L,L.return,Pe)}if(L===k){_e=null;break e}var ve=L.sibling;if(ve!==null){ve.return=L.return,_e=ve;break e}_e=L.return}}if(it=v,wo(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Li,n)}catch{}f=!0}return f}finally{pt=c,Hr.transition=s}}return!1}function zg(n,s,c){s=qa(c,s),s=og(n,s,1),n=_o(n,s,1),s=ur(),n!==null&&(Ns(n,1,s),wr(n,s))}function Rt(n,s,c){if(n.tag===3)zg(n,n,c);else for(;s!==null;){if(s.tag===3){zg(s,n,c);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Co===null||!Co.has(f))){n=qa(c,n),n=ag(s,n,1),s=_o(s,n,1),n=ur(),s!==null&&(Ns(s,1,n),wr(s,n));break}}s=s.return}}function cC(n,s,c){var f=n.pingCache;f!==null&&f.delete(s),s=ur(),n.pingedLanes|=n.suspendedLanes&c,Ht===n&&(Qt&c)===c&&(Lt===4||Lt===3&&(Qt&130023424)===Qt&&500>At()-Md?na(n,0):Id|=c),wr(n,s)}function Bg(n,s){s===0&&((n.mode&1)===0?s=1:(s=Bi,Bi<<=1,(Bi&130023424)===0&&(Bi=4194304)));var c=ur();n=Qn(n,s),n!==null&&(Ns(n,s,c),wr(n,c))}function uC(n){var s=n.memoizedState,c=0;s!==null&&(c=s.retryLane),Bg(n,c)}function dC(n,s){var c=0;switch(n.tag){case 13:var f=n.stateNode,v=n.memoizedState;v!==null&&(c=v.retryLane);break;case 19:f=n.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(s),Bg(n,c)}var Ug;Ug=function(n,s,c){if(n!==null)if(n.memoizedProps!==s.pendingProps||gr.current)xr=!0;else{if((n.lanes&c)===0&&(s.flags&128)===0)return xr=!1,Qj(n,s,c);xr=(n.flags&131072)!==0}else xr=!1,St&&(s.flags&1048576)!==0&&bm(s,cl,s.index);switch(s.lanes=0,s.tag){case 2:var f=s.type;Cl(n,s),n=s.pendingProps;var v=Ma(s,tr.current);Ua(s,c),v=fd(null,s,f,n,v,c);var b=pd();return s.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,vr(f)?(b=!0,sl(s)):b=!1,s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,sd(s),v.updater=_l,s.stateNode=v,v._reactInternals=s,wd(s,f,n,c),s=Cd(null,s,f,!0,b,c)):(s.tag=0,St&&b&&Yu(s),cr(null,s,v,c),s=s.child),s;case 16:f=s.elementType;e:{switch(Cl(n,s),n=s.pendingProps,v=f._init,f=v(f._payload),s.type=f,v=s.tag=fC(f),n=nn(f,n),v){case 0:s=jd(null,s,f,n,c);break e;case 1:s=pg(null,s,f,n,c);break e;case 11:s=cg(null,s,f,n,c);break e;case 14:s=ug(null,s,f,nn(f.type,n),c);break e}throw Error(t(306,f,""))}return s;case 0:return f=s.type,v=s.pendingProps,v=s.elementType===f?v:nn(f,v),jd(n,s,f,v,c);case 1:return f=s.type,v=s.pendingProps,v=s.elementType===f?v:nn(f,v),pg(n,s,f,v,c);case 3:e:{if(mg(s),n===null)throw Error(t(387));f=s.pendingProps,b=s.memoizedState,v=b.element,Rm(n,s),ml(s,f,null,c);var k=s.memoizedState;if(f=k.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){v=qa(Error(t(423)),s),s=gg(n,s,f,c,v);break e}else if(f!==v){v=qa(Error(t(424)),s),s=gg(n,s,f,c,v);break e}else for(Dr=vo(s.stateNode.containerInfo.firstChild),Or=s,St=!0,rn=null,c=Nm(s,null,f,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(La(),f===v){s=eo(n,s,c);break e}cr(n,s,f,c)}s=s.child}return s;case 5:return Om(s),n===null&&Zu(s),f=s.type,v=s.pendingProps,b=n!==null?n.memoizedProps:null,k=v.children,qu(f,v)?k=null:b!==null&&qu(f,b)&&(s.flags|=32),fg(n,s),cr(n,s,k,c),s.child;case 6:return n===null&&Zu(s),null;case 13:return vg(n,s,c);case 4:return id(s,s.stateNode.containerInfo),f=s.pendingProps,n===null?s.child=za(s,null,f,c):cr(n,s,f,c),s.child;case 11:return f=s.type,v=s.pendingProps,v=s.elementType===f?v:nn(f,v),cg(n,s,f,v,c);case 7:return cr(n,s,s.pendingProps,c),s.child;case 8:return cr(n,s,s.pendingProps.children,c),s.child;case 12:return cr(n,s,s.pendingProps.children,c),s.child;case 10:e:{if(f=s.type._context,v=s.pendingProps,b=s.memoizedProps,k=v.value,xt(hl,f._currentValue),f._currentValue=k,b!==null)if(tn(b.value,k)){if(b.children===v.children&&!gr.current){s=eo(n,s,c);break e}}else for(b=s.child,b!==null&&(b.return=s);b!==null;){var L=b.dependencies;if(L!==null){k=b.child;for(var W=L.firstContext;W!==null;){if(W.context===f){if(b.tag===1){W=Zn(-1,c&-c),W.tag=2;var ne=b.updateQueue;if(ne!==null){ne=ne.shared;var me=ne.pending;me===null?W.next=W:(W.next=me.next,me.next=W),ne.pending=W}}b.lanes|=c,W=b.alternate,W!==null&&(W.lanes|=c),od(b.return,c,s),L.lanes|=c;break}W=W.next}}else if(b.tag===10)k=b.type===s.type?null:b.child;else if(b.tag===18){if(k=b.return,k===null)throw Error(t(341));k.lanes|=c,L=k.alternate,L!==null&&(L.lanes|=c),od(k,c,s),k=b.sibling}else k=b.child;if(k!==null)k.return=b;else for(k=b;k!==null;){if(k===s){k=null;break}if(b=k.sibling,b!==null){b.return=k.return,k=b;break}k=k.return}b=k}cr(n,s,v.children,c),s=s.child}return s;case 9:return v=s.type,f=s.pendingProps.children,Ua(s,c),v=qr(v),f=f(v),s.flags|=1,cr(n,s,f,c),s.child;case 14:return f=s.type,v=nn(f,s.pendingProps),v=nn(f.type,v),ug(n,s,f,v,c);case 15:return dg(n,s,s.type,s.pendingProps,c);case 17:return f=s.type,v=s.pendingProps,v=s.elementType===f?v:nn(f,v),Cl(n,s),s.tag=1,vr(f)?(n=!0,sl(s)):n=!1,Ua(s,c),rg(s,f,v),wd(s,f,v,c),Cd(null,s,f,!0,n,c);case 19:return yg(n,s,c);case 22:return hg(n,s,c)}throw Error(t(156,s.tag))};function Vg(n,s){return _p(n,s)}function hC(n,s,c,f){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(n,s,c,f){return new hC(n,s,c,f)}function qd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function fC(n){if(typeof n=="function")return qd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ue)return 11;if(n===se)return 14}return 2}function No(n,s){var c=n.alternate;return c===null?(c=Gr(n.tag,s,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=s,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&14680064,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,s=n.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c}function Il(n,s,c,f,v,b){var k=2;if(f=n,typeof n=="function")qd(n)&&(k=1);else if(typeof n=="string")k=5;else e:switch(n){case B:return aa(c.children,v,b,s);case F:k=8,v|=8;break;case H:return n=Gr(12,c,s,v|2),n.elementType=H,n.lanes=b,n;case z:return n=Gr(13,c,s,v),n.elementType=z,n.lanes=b,n;case V:return n=Gr(19,c,s,v),n.elementType=V,n.lanes=b,n;case re:return Ml(c,v,b,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Z:k=10;break e;case ae:k=9;break e;case ue:k=11;break e;case se:k=14;break e;case X:k=16,f=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Gr(k,c,s,v),s.elementType=n,s.type=f,s.lanes=b,s}function aa(n,s,c,f){return n=Gr(7,n,f,s),n.lanes=c,n}function Ml(n,s,c,f){return n=Gr(22,n,f,s),n.elementType=re,n.lanes=c,n.stateNode={isHidden:!1},n}function Wd(n,s,c){return n=Gr(6,n,null,s),n.lanes=c,n}function Hd(n,s,c){return s=Gr(4,n.children!==null?n.children:[],n.key,s),s.lanes=c,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function pC(n,s,c,f,v){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yu(0),this.expirationTimes=yu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yu(0),this.identifierPrefix=f,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Gd(n,s,c,f,v,b,k,L,W){return n=new pC(n,s,c,L,W),s===1?(s=1,b===!0&&(s|=8)):s=0,b=Gr(3,null,null,s),n.current=b,b.stateNode=n,b.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},sd(b),n}function mC(n,s,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:f==null?null:""+f,children:n,containerInfo:s,implementation:c}}function qg(n){if(!n)return yo;n=n._reactInternals;e:{if(Go(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(vr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var c=n.type;if(vr(c))return xm(n,c,s)}return s}function Wg(n,s,c,f,v,b,k,L,W){return n=Gd(c,f,!0,n,v,b,k,L,W),n.context=qg(null),c=n.current,f=ur(),v=Eo(c),b=Zn(f,v),b.callback=s??null,_o(c,b,v),n.current.lanes=v,Ns(n,v,f),wr(n,f),n}function Fl(n,s,c,f){var v=s.current,b=ur(),k=Eo(v);return c=qg(c),s.context===null?s.context=c:s.pendingContext=c,s=Zn(b,k),s.payload={element:n},f=f===void 0?null:f,f!==null&&(s.callback=f),n=_o(v,s,k),n!==null&&(sn(n,v,k,b),pl(n,v,k)),k}function $l(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Hg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<s?c:s}}function Kd(n,s){Hg(n,s),(n=n.alternate)&&Hg(n,s)}function gC(){return null}var Gg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Jd(n){this._internalRoot=n}Ll.prototype.render=Jd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Fl(n,s,null,null)},Ll.prototype.unmount=Jd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ra(function(){Fl(null,n,null,null)}),s[Kn]=null}};function Ll(n){this._internalRoot=n}Ll.prototype.unstable_scheduleHydration=function(n){if(n){var s=Rp();n={blockedOn:null,target:n,priority:s};for(var c=0;c<po.length&&s!==0&&s<po[c].priority;c++);po.splice(c,0,n),c===0&&Op(n)}};function Yd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function zl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Kg(){}function vC(n,s,c,f,v){if(v){if(typeof f=="function"){var b=f;f=function(){var ne=$l(k);b.call(ne)}}var k=Wg(s,f,n,0,null,!1,!1,"",Kg);return n._reactRootContainer=k,n[Kn]=k.current,Us(n.nodeType===8?n.parentNode:n),ra(),k}for(;v=n.lastChild;)n.removeChild(v);if(typeof f=="function"){var L=f;f=function(){var ne=$l(W);L.call(ne)}}var W=Gd(n,0,!1,null,null,!1,!1,"",Kg);return n._reactRootContainer=W,n[Kn]=W.current,Us(n.nodeType===8?n.parentNode:n),ra(function(){Fl(s,W,c,f)}),W}function Bl(n,s,c,f,v){var b=c._reactRootContainer;if(b){var k=b;if(typeof v=="function"){var L=v;v=function(){var W=$l(k);L.call(W)}}Fl(s,k,n,v)}else k=vC(c,s,n,v,f);return $l(k)}Np=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var c=ks(s.pendingLanes);c!==0&&(wu(s,c|1),wr(s,At()),(it&6)===0&&(Ga=At()+500,wo()))}break;case 13:ra(function(){var f=Qn(n,1);if(f!==null){var v=ur();sn(f,n,1,v)}}),Kd(n,1)}},bu=function(n){if(n.tag===13){var s=Qn(n,134217728);if(s!==null){var c=ur();sn(s,n,134217728,c)}Kd(n,134217728)}},Pp=function(n){if(n.tag===13){var s=Eo(n),c=Qn(n,s);if(c!==null){var f=ur();sn(c,n,s,f)}Kd(n,s)}},Rp=function(){return pt},Ap=function(n,s){var c=pt;try{return pt=n,s()}finally{pt=c}},Ho=function(n,s,c){switch(s){case"input":if(Ge(n,c),s=c.name,c.type==="radio"&&s!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<c.length;s++){var f=c[s];if(f!==n&&f.form===n.form){var v=ol(f);if(!v)throw Error(t(90));je(f),Ge(f,v)}}}break;case"textarea":Ar(n,c);break;case"select":s=c.value,s!=null&&Vt(n,!!c.multiple,s,!1)}},ct=Bd,ht=ra;var xC={usingClientEntryPoint:!1,Events:[Ws,Da,ol,Te,dt,Bd]},ai={findFiberByHostInstance:Ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yC={bundleType:ai.bundleType,version:ai.version,rendererPackageName:ai.rendererPackageName,rendererConfig:ai.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=wp(n),n===null?null:n.stateNode},findFiberByHostInstance:ai.findFiberByHostInstance||gC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{Li=Ul.inject(yC),yn=Ul}catch{}}return br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xC,br.createPortal=function(n,s){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yd(s))throw Error(t(200));return mC(n,s,null,c)},br.createRoot=function(n,s){if(!Yd(n))throw Error(t(299));var c=!1,f="",v=Gg;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=Gd(n,1,!1,null,null,c,!1,f,v),n[Kn]=s.current,Us(n.nodeType===8?n.parentNode:n),new Jd(s)},br.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=wp(s),n=n===null?null:n.stateNode,n},br.flushSync=function(n){return ra(n)},br.hydrate=function(n,s,c){if(!zl(s))throw Error(t(200));return Bl(null,n,s,!0,c)},br.hydrateRoot=function(n,s,c){if(!Yd(n))throw Error(t(405));var f=c!=null&&c.hydratedSources||null,v=!1,b="",k=Gg;if(c!=null&&(c.unstable_strictMode===!0&&(v=!0),c.identifierPrefix!==void 0&&(b=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),s=Wg(s,null,n,1,c??null,v,!1,b,k),n[Kn]=s.current,Us(n),f)for(n=0;n<f.length;n++)c=f[n],v=c._getVersion,v=v(c._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[c,v]:s.mutableSourceEagerHydrationData.push(c,v);return new Ll(s)},br.render=function(n,s,c){if(!zl(s))throw Error(t(200));return Bl(null,n,s,!1,c)},br.unmountComponentAtNode=function(n){if(!zl(n))throw Error(t(40));return n._reactRootContainer?(ra(function(){Bl(null,null,n,!1,function(){n._reactRootContainer=null,n[Kn]=null})}),!0):!1},br.unstable_batchedUpdates=Bd,br.unstable_renderSubtreeIntoContainer=function(n,s,c,f){if(!zl(c))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Bl(n,s,c,!1,f)},br.version="18.3.1-next-f1338f8080-20240426",br}var rv;function xf(){if(rv)return Zd.exports;rv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Zd.exports=kC(),Zd.exports}var nv;function NC(){if(nv)return Vl;nv=1;var r=xf();return Vl.createRoot=r.createRoot,Vl.hydrateRoot=r.hydrateRoot,Vl}var PC=NC(),x=Mc();const fe=Ic(x),yf=Ux({__proto__:null,default:fe},[x]);var Dh=function(r,e){return Dh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])},Dh(r,e)};function Vx(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Dh(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Xr=function(){return Xr=Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++){t=arguments[a];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Xr.apply(this,arguments)};function Lo(r,e){var t={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&e.indexOf(a)<0&&(t[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(r);i<a.length;i++)e.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(r,a[i])&&(t[a[i]]=r[a[i]]);return t}function qx(r,e,t,a){var i=arguments.length,l=i<3?e:a===null?a=Object.getOwnPropertyDescriptor(e,t):a,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,e,t,a);else for(var d=r.length-1;d>=0;d--)(u=r[d])&&(l=(i<3?u(l):i>3?u(e,t,l):u(e,t))||l);return i>3&&l&&Object.defineProperty(e,t,l),l}function Wx(r,e){return function(t,a){e(t,a,r)}}function Hx(r,e,t,a,i,l){function u(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var d=a.kind,h=d==="getter"?"get":d==="setter"?"set":"value",p=!e&&r?a.static?r:r.prototype:null,g=e||(p?Object.getOwnPropertyDescriptor(p,a.name):{}),m,w=!1,y=t.length-1;y>=0;y--){var j={};for(var _ in a)j[_]=_==="access"?{}:a[_];for(var _ in a.access)j.access[_]=a.access[_];j.addInitializer=function(S){if(w)throw new TypeError("Cannot add initializers after decoration has completed");l.push(u(S||null))};var C=(0,t[y])(d==="accessor"?{get:g.get,set:g.set}:g[h],j);if(d==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(m=u(C.get))&&(g.get=m),(m=u(C.set))&&(g.set=m),(m=u(C.init))&&i.unshift(m)}else(m=u(C))&&(d==="field"?i.unshift(m):g[h]=m)}p&&Object.defineProperty(p,a.name,g),w=!0}function Gx(r,e,t){for(var a=arguments.length>2,i=0;i<e.length;i++)t=a?e[i].call(r,t):e[i].call(r);return a?t:void 0}function Kx(r){return typeof r=="symbol"?r:"".concat(r)}function Jx(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function Yx(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function Re(r,e,t,a){function i(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function d(g){try{p(a.next(g))}catch(m){u(m)}}function h(g){try{p(a.throw(g))}catch(m){u(m)}}function p(g){g.done?l(g.value):i(g.value).then(d,h)}p((a=a.apply(r,e||[])).next())})}function Xx(r,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,i,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=d(0),u.throw=d(1),u.return=d(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(p){return function(g){return h([p,g])}}function h(p){if(a)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(t=0)),t;)try{if(a=1,i&&(l=p[0]&2?i.return:p[0]?i.throw||((l=i.return)&&l.call(i),0):i.next)&&!(l=l.call(i,p[1])).done)return l;switch(i=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,i=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){t.label=p[1];break}if(p[0]===6&&t.label<l[1]){t.label=l[1],l=p;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(p);break}l[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(g){p=[6,g],i=0}finally{a=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Fc=Object.create?(function(r,e,t,a){a===void 0&&(a=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,a,i)}):(function(r,e,t,a){a===void 0&&(a=t),r[a]=e[t]});function Qx(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Fc(e,r,t)}function gc(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],a=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wf(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var a=t.call(r),i,l=[],u;try{for(;(e===void 0||e-- >0)&&!(i=a.next()).done;)l.push(i.value)}catch(d){u={error:d}}finally{try{i&&!i.done&&(t=a.return)&&t.call(a)}finally{if(u)throw u.error}}return l}function Zx(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(wf(arguments[e]));return r}function e0(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var a=Array(r),i=0,e=0;e<t;e++)for(var l=arguments[e],u=0,d=l.length;u<d;u++,i++)a[i]=l[u];return a}function bf(r,e,t){if(t||arguments.length===2)for(var a=0,i=e.length,l;a<i;a++)(l||!(a in e))&&(l||(l=Array.prototype.slice.call(e,0,a)),l[a]=e[a]);return r.concat(l||Array.prototype.slice.call(e))}function hs(r){return this instanceof hs?(this.v=r,this):new hs(r)}function t0(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=t.apply(r,e||[]),i,l=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),i[Symbol.asyncIterator]=function(){return this},i;function u(y){return function(j){return Promise.resolve(j).then(y,m)}}function d(y,j){a[y]&&(i[y]=function(_){return new Promise(function(C,S){l.push([y,_,C,S])>1||h(y,_)})},j&&(i[y]=j(i[y])))}function h(y,j){try{p(a[y](j))}catch(_){w(l[0][3],_)}}function p(y){y.value instanceof hs?Promise.resolve(y.value.v).then(g,m):w(l[0][2],y)}function g(y){h("next",y)}function m(y){h("throw",y)}function w(y,j){y(j),l.shift(),l.length&&h(l[0][0],l[0][1])}}function r0(r){var e,t;return e={},a("next"),a("throw",function(i){throw i}),a("return"),e[Symbol.iterator]=function(){return this},e;function a(i,l){e[i]=r[i]?function(u){return(t=!t)?{value:hs(r[i](u)),done:!1}:l?l(u):u}:l}}function n0(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof gc=="function"?gc(r):r[Symbol.iterator](),t={},a("next"),a("throw"),a("return"),t[Symbol.asyncIterator]=function(){return this},t);function a(l){t[l]=r[l]&&function(u){return new Promise(function(d,h){u=r[l](u),i(d,h,u.done,u.value)})}}function i(l,u,d,h){Promise.resolve(h).then(function(p){l({value:p,done:d})},u)}}function o0(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}var RC=Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e},Ih=function(r){return Ih=Object.getOwnPropertyNames||function(e){var t=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[t.length]=a);return t},Ih(r)};function a0(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t=Ih(r),a=0;a<t.length;a++)t[a]!=="default"&&Fc(e,r,t[a]);return RC(e,r),e}function s0(r){return r&&r.__esModule?r:{default:r}}function i0(r,e,t,a){if(t==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!a:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?a:t==="a"?a.call(r):a?a.value:e.get(r)}function l0(r,e,t,a,i){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}function c0(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function u0(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var a,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");a=e[Symbol.asyncDispose]}if(a===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");a=e[Symbol.dispose],t&&(i=a)}if(typeof a!="function")throw new TypeError("Object not disposable.");i&&(a=function(){try{i.call(this)}catch(l){return Promise.reject(l)}}),r.stack.push({value:e,dispose:a,async:t})}else t&&r.stack.push({async:!0});return e}var AC=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var a=new Error(t);return a.name="SuppressedError",a.error=r,a.suppressed=e,a};function d0(r){function e(l){r.error=r.hasError?new AC(l,r.error,"An error was suppressed during disposal."):l,r.hasError=!0}var t,a=0;function i(){for(;t=r.stack.pop();)try{if(!t.async&&a===1)return a=0,r.stack.push(t),Promise.resolve().then(i);if(t.dispose){var l=t.dispose.call(t.value);if(t.async)return a|=2,Promise.resolve(l).then(i,function(u){return e(u),i()})}else a|=1}catch(u){e(u)}if(a===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return i()}function h0(r,e){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,a,i,l,u){return a?e?".jsx":".js":i&&(!l||!u)?t:i+l+"."+u.toLowerCase()+"js"}):r}const TC={__extends:Vx,__assign:Xr,__rest:Lo,__decorate:qx,__param:Wx,__esDecorate:Hx,__runInitializers:Gx,__propKey:Kx,__setFunctionName:Jx,__metadata:Yx,__awaiter:Re,__generator:Xx,__createBinding:Fc,__exportStar:Qx,__values:gc,__read:wf,__spread:Zx,__spreadArrays:e0,__spreadArray:bf,__await:hs,__asyncGenerator:t0,__asyncDelegator:r0,__asyncValues:n0,__makeTemplateObject:o0,__importStar:a0,__importDefault:s0,__classPrivateFieldGet:i0,__classPrivateFieldSet:l0,__classPrivateFieldIn:c0,__addDisposableResource:u0,__disposeResources:d0,__rewriteRelativeImportExtension:h0},OC=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:u0,get __assign(){return Xr},__asyncDelegator:r0,__asyncGenerator:t0,__asyncValues:n0,__await:hs,__awaiter:Re,__classPrivateFieldGet:i0,__classPrivateFieldIn:c0,__classPrivateFieldSet:l0,__createBinding:Fc,__decorate:qx,__disposeResources:d0,__esDecorate:Hx,__exportStar:Qx,__extends:Vx,__generator:Xx,__importDefault:s0,__importStar:a0,__makeTemplateObject:o0,__metadata:Yx,__param:Wx,__propKey:Kx,__read:wf,__rest:Lo,__rewriteRelativeImportExtension:h0,__runInitializers:Gx,__setFunctionName:Jx,__spread:Zx,__spreadArray:bf,__spreadArrays:e0,__values:gc,default:TC},Symbol.toStringTag,{value:"Module"})),DC=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class _f extends Error{constructor(e,t="FunctionsError",a){super(e),this.name=t,this.context=a}}class IC extends _f{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ov extends _f{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class av extends _f{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Mh;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Mh||(Mh={}));class MC{constructor(e,{headers:t={},customFetch:a,region:i=Mh.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=DC(a)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Re(this,arguments,void 0,function*(t,a={}){var i;let l,u;try{const{headers:d,method:h,body:p,signal:g,timeout:m}=a;let w={},{region:y}=a;y||(y=this.region);const j=new URL(`${this.url}/${t}`);y&&y!=="any"&&(w["x-region"]=y,j.searchParams.set("forceFunctionRegion",y));let _;p&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",_=p):typeof p=="string"?(w["Content-Type"]="text/plain",_=p):typeof FormData<"u"&&p instanceof FormData?_=p:(w["Content-Type"]="application/json",_=JSON.stringify(p)):_=p;let C=g;m&&(u=new AbortController,l=setTimeout(()=>u.abort(),m),g?(C=u.signal,g.addEventListener("abort",()=>u.abort())):C=u.signal);const S=yield this.fetch(j.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),d),body:_,signal:C}).catch(R=>{throw new IC(R)}),E=S.headers.get("x-relay-error");if(E&&E==="true")throw new ov(S);if(!S.ok)throw new av(S);let N=((i=S.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),D;return N==="application/json"?D=yield S.json():N==="application/octet-stream"||N==="application/pdf"?D=yield S.blob():N==="text/event-stream"?D=S:N==="multipart/form-data"?D=yield S.formData():D=yield S.text(),{data:D,error:null,response:S}}catch(d){return{data:null,error:d,response:d instanceof av||d instanceof ov?d.context:void 0}}finally{l&&clearTimeout(l)}})}}var ar={};const ms=bC(OC);var ql={},Wl={},Hl={},Gl={},Kl={},Jl={},sv;function f0(){if(sv)return Jl;sv=1,Object.defineProperty(Jl,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Jl.default=r,Jl}var iv;function p0(){if(iv)return Kl;iv=1,Object.defineProperty(Kl,"__esModule",{value:!0});const e=ms.__importDefault(f0());class t{constructor(i){var l,u;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(l=i.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=i.signal,this.isMaybeSingle=(u=i.isMaybeSingle)!==null&&u!==void 0?u:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,l){return this.headers=new Headers(this.headers),this.headers.set(i,l),this}then(i,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var p,g,m,w;let y=null,j=null,_=null,C=h.status,S=h.statusText;if(h.ok){if(this.method!=="HEAD"){const R=await h.text();R===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?j=R:j=JSON.parse(R))}const N=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),D=(m=h.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");N&&D&&D.length>1&&(_=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(y={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,_=null,C=406,S="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const N=await h.text();try{y=JSON.parse(N),Array.isArray(y)&&h.status===404&&(j=[],y=null,C=200,S="OK")}catch{h.status===404&&N===""?(C=204,S="No Content"):y={message:N}}if(y&&this.isMaybeSingle&&(!((w=y?.details)===null||w===void 0)&&w.includes("0 rows"))&&(y=null,C=200,S="OK"),y&&this.shouldThrowOnError)throw new e.default(y)}return{error:y,data:j,count:_,status:C,statusText:S}});return this.shouldThrowOnError||(d=d.catch(h=>{var p,g,m;return{error:{message:`${(p=h?.name)!==null&&p!==void 0?p:"FetchError"}: ${h?.message}`,details:`${(g=h?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(m=h?.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,l)}returns(){return this}overrideTypes(){return this}}return Kl.default=t,Kl}var lv;function m0(){if(lv)return Gl;lv=1,Object.defineProperty(Gl,"__esModule",{value:!0});const e=ms.__importDefault(p0());class t extends e.default{select(i){let l=!1;const u=(i??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:l=!0,nullsFirst:u,foreignTable:d,referencedTable:h=d}={}){const p=h?`${h}.order`:"order",g=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${g?`${g},`:""}${i}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${i}`),this}range(i,l,{foreignTable:u,referencedTable:d=u}={}){const h=typeof d>"u"?"offset":`${d}.offset`,p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${i}`),this.url.searchParams.set(p,`${l-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:l=!1,settings:u=!1,buffers:d=!1,wal:h=!1,format:p="text"}={}){var g;const m=[i?"analyze":null,l?"verbose":null,u?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),w=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${w}"; options=${m};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Gl.default=t,Gl}var cv;function jf(){if(cv)return Hl;cv=1,Object.defineProperty(Hl,"__esModule",{value:!0});const e=ms.__importDefault(m0()),t=new RegExp("[,()]");class a extends e.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}in(l,u){const d=Array.from(new Set(u)).map(h=>typeof h=="string"&&t.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:d,type:h}={}){let p="";h==="plain"?p="pl":h==="phrase"?p="ph":h==="websearch"&&(p="w");const g=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${p}fts${g}.${u}`),this}match(l){return Object.entries(l).forEach(([u,d])=>{this.url.searchParams.append(u,`eq.${d}`)}),this}not(l,u,d){return this.url.searchParams.append(l,`not.${u}.${d}`),this}or(l,{foreignTable:u,referencedTable:d=u}={}){const h=d?`${d}.or`:"or";return this.url.searchParams.append(h,`(${l})`),this}filter(l,u,d){return this.url.searchParams.append(l,`${u}.${d}`),this}}return Hl.default=a,Hl}var uv;function g0(){if(uv)return Wl;uv=1,Object.defineProperty(Wl,"__esModule",{value:!0});const e=ms.__importDefault(jf());class t{constructor(i,{headers:l={},schema:u,fetch:d}){this.url=i,this.headers=new Headers(l),this.schema=u,this.fetch=d}select(i,l){const{head:u=!1,count:d}=l??{},h=u?"HEAD":"GET";let p=!1;const g=(i??"*").split("").map(m=>/\s/.test(m)&&!p?"":(m==='"'&&(p=!p),m)).join("");return this.url.searchParams.set("select",g),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:l,defaultToNull:u=!0}={}){var d;const h="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((g,m)=>g.concat(Object.keys(m)),[]);if(p.length>0){const g=[...new Set(p)].map(m=>`"${m}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(i,{onConflict:l,ignoreDuplicates:u=!1,count:d,defaultToNull:h=!0}={}){var p;const g="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const m=i.reduce((w,y)=>w.concat(Object.keys(y)),[]);if(m.length>0){const w=[...new Set(m)].map(y=>`"${y}"`);this.url.searchParams.set("columns",w.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(i,{count:l}={}){var u;const d="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:i}={}){var l;const u="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return Wl.default=t,Wl}var dv;function FC(){if(dv)return ql;dv=1,Object.defineProperty(ql,"__esModule",{value:!0});const r=ms,e=r.__importDefault(g0()),t=r.__importDefault(jf());class a{constructor(l,{headers:u={},schema:d,fetch:h}={}){this.url=l,this.headers=new Headers(u),this.schemaName=d,this.fetch=h}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new a(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:d=!1,get:h=!1,count:p}={}){var g;let m;const w=new URL(`${this.url}/rpc/${l}`);let y;d||h?(m=d?"HEAD":"GET",Object.entries(u).filter(([_,C])=>C!==void 0).map(([_,C])=>[_,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([_,C])=>{w.searchParams.append(_,C)})):(m="POST",y=u);const j=new Headers(this.headers);return p&&j.set("Prefer",`count=${p}`),new t.default({method:m,url:w,headers:j,schema:this.schemaName,body:y,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return ql.default=a,ql}var hv;function $C(){if(hv)return ar;hv=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.PostgrestError=ar.PostgrestBuilder=ar.PostgrestTransformBuilder=ar.PostgrestFilterBuilder=ar.PostgrestQueryBuilder=ar.PostgrestClient=void 0;const r=ms,e=r.__importDefault(FC());ar.PostgrestClient=e.default;const t=r.__importDefault(g0());ar.PostgrestQueryBuilder=t.default;const a=r.__importDefault(jf());ar.PostgrestFilterBuilder=a.default;const i=r.__importDefault(m0());ar.PostgrestTransformBuilder=i.default;const l=r.__importDefault(p0());ar.PostgrestBuilder=l.default;const u=r.__importDefault(f0());return ar.PostgrestError=u.default,ar.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:l.default,PostgrestError:u.default},ar}var v0=$C();const x0=Ic(v0),LC=Ux({__proto__:null,default:x0},[v0]),{PostgrestClient:zC,PostgrestQueryBuilder:LM,PostgrestFilterBuilder:zM,PostgrestTransformBuilder:BM,PostgrestBuilder:UM,PostgrestError:VM}=x0||LC;class BC{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const a=t.node,i=parseInt(a.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const a=this.getWebSocketConstructor();return new a(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const UC="2.81.1",VC=`realtime-js/${UC}`,y0="1.0.0",qC="2.0.0",fv=y0,Fh=1e4,WC=1e3,HC=100;var da;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(da||(da={}));var Bt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Bt||(Bt={}));var Jr;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Jr||(Jr={}));var $h;(function(r){r.websocket="websocket"})($h||($h={}));var ha;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(ha||(ha={}));class GC{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,t){if(this._isArrayBuffer(e.payload))return t(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let a=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(a))}_binaryEncodePush(e){const{join_ref:t,ref:a,event:i,topic:l,payload:u}=e,d=this.META_LENGTH+t.length+a.length+l.length+i.length,h=new ArrayBuffer(this.HEADER_LENGTH+d);let p=new DataView(h),g=0;p.setUint8(g++,this.KINDS.push),p.setUint8(g++,t.length),p.setUint8(g++,a.length),p.setUint8(g++,l.length),p.setUint8(g++,i.length),Array.from(t,w=>p.setUint8(g++,w.charCodeAt(0))),Array.from(a,w=>p.setUint8(g++,w.charCodeAt(0))),Array.from(l,w=>p.setUint8(g++,w.charCodeAt(0))),Array.from(i,w=>p.setUint8(g++,w.charCodeAt(0)));var m=new Uint8Array(h.byteLength+u.byteLength);return m.set(new Uint8Array(h),0),m.set(new Uint8Array(u),h.byteLength),m.buffer}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,a;const{join_ref:i,ref:l,topic:u}=e,d=e.payload.event,h=(a=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&a!==void 0?a:new ArrayBuffer(0),p=this.USER_BROADCAST_PUSH_META_LENGTH+i.length+l.length+u.length+d.length,g=new ArrayBuffer(this.HEADER_LENGTH+p);let m=new DataView(g),w=0;m.setUint8(w++,this.KINDS.userBroadcastPush),m.setUint8(w++,i.length),m.setUint8(w++,l.length),m.setUint8(w++,u.length),m.setUint8(w++,d.length),m.setUint8(w++,this.BINARY_ENCODING),Array.from(i,j=>m.setUint8(w++,j.charCodeAt(0))),Array.from(l,j=>m.setUint8(w++,j.charCodeAt(0))),Array.from(u,j=>m.setUint8(w++,j.charCodeAt(0))),Array.from(d,j=>m.setUint8(w++,j.charCodeAt(0)));var y=new Uint8Array(g.byteLength+h.byteLength);return y.set(new Uint8Array(g),0),y.set(new Uint8Array(h),g.byteLength),y.buffer}_encodeJsonUserBroadcastPush(e){var t,a;const{join_ref:i,ref:l,topic:u}=e,d=e.payload.event,h=(a=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&a!==void 0?a:{},g=new TextEncoder().encode(JSON.stringify(h)).buffer,m=this.USER_BROADCAST_PUSH_META_LENGTH+i.length+l.length+u.length+d.length,w=new ArrayBuffer(this.HEADER_LENGTH+m);let y=new DataView(w),j=0;y.setUint8(j++,this.KINDS.userBroadcastPush),y.setUint8(j++,i.length),y.setUint8(j++,l.length),y.setUint8(j++,u.length),y.setUint8(j++,d.length),y.setUint8(j++,this.JSON_ENCODING),Array.from(i,C=>y.setUint8(j++,C.charCodeAt(0))),Array.from(l,C=>y.setUint8(j++,C.charCodeAt(0))),Array.from(u,C=>y.setUint8(j++,C.charCodeAt(0))),Array.from(d,C=>y.setUint8(j++,C.charCodeAt(0)));var _=new Uint8Array(w.byteLength+g.byteLength);return _.set(new Uint8Array(w),0),_.set(new Uint8Array(g),w.byteLength),_.buffer}decode(e,t){if(this._isArrayBuffer(e)){let a=this._binaryDecode(e);return t(a)}if(typeof e=="string"){const a=JSON.parse(e),[i,l,u,d,h]=a;return t({join_ref:i,ref:l,topic:u,event:d,payload:h})}return t({})}_binaryDecode(e){const t=new DataView(e),a=t.getUint8(0),i=new TextDecoder;switch(a){case this.KINDS.push:return this._decodePush(e,t,i);case this.KINDS.reply:return this._decodeReply(e,t,i);case this.KINDS.broadcast:return this._decodeBroadcast(e,t,i);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,i)}}_decodePush(e,t,a){const i=t.getUint8(1),l=t.getUint8(2),u=t.getUint8(3);let d=this.HEADER_LENGTH+this.META_LENGTH-1;const h=a.decode(e.slice(d,d+i));d=d+i;const p=a.decode(e.slice(d,d+l));d=d+l;const g=a.decode(e.slice(d,d+u));d=d+u;const m=JSON.parse(a.decode(e.slice(d,e.byteLength)));return{join_ref:h,ref:null,topic:p,event:g,payload:m}}_decodeReply(e,t,a){const i=t.getUint8(1),l=t.getUint8(2),u=t.getUint8(3),d=t.getUint8(4);let h=this.HEADER_LENGTH+this.META_LENGTH;const p=a.decode(e.slice(h,h+i));h=h+i;const g=a.decode(e.slice(h,h+l));h=h+l;const m=a.decode(e.slice(h,h+u));h=h+u;const w=a.decode(e.slice(h,h+d));h=h+d;const y=JSON.parse(a.decode(e.slice(h,e.byteLength))),j={status:w,response:y};return{join_ref:p,ref:g,topic:m,event:Jr.reply,payload:j}}_decodeBroadcast(e,t,a){const i=t.getUint8(1),l=t.getUint8(2);let u=this.HEADER_LENGTH+2;const d=a.decode(e.slice(u,u+i));u=u+i;const h=a.decode(e.slice(u,u+l));u=u+l;const p=JSON.parse(a.decode(e.slice(u,e.byteLength)));return{join_ref:null,ref:null,topic:d,event:h,payload:p}}_decodeUserBroadcast(e,t,a){const i=t.getUint8(1),l=t.getUint8(2),u=t.getUint8(3),d=t.getUint8(4);let h=this.HEADER_LENGTH+4;const p=a.decode(e.slice(h,h+i));h=h+i;const g=a.decode(e.slice(h,h+l));h=h+l;const m=a.decode(e.slice(h,h+u));h=h+u;const w=e.slice(h,e.byteLength),y=d===this.JSON_ENCODING?JSON.parse(a.decode(w)):w,j={type:this.BROADCAST,event:g,payload:y};return u>0&&(j.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST,payload:j}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}}class w0{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var yt;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(yt||(yt={}));const pv=(r,e,t={})=>{var a;const i=(a=t.skipTypes)!==null&&a!==void 0?a:[];return e?Object.keys(e).reduce((l,u)=>(l[u]=KC(u,r,e,i),l),{}):{}},KC=(r,e,t,a)=>{const i=e.find(d=>d.name===r),l=i?.type,u=t[r];return l&&!a.includes(l)?b0(l,u):Lh(u)},b0=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return QC(e,t)}switch(r){case yt.bool:return JC(e);case yt.float4:case yt.float8:case yt.int2:case yt.int4:case yt.int8:case yt.numeric:case yt.oid:return YC(e);case yt.json:case yt.jsonb:return XC(e);case yt.timestamp:return ZC(e);case yt.abstime:case yt.date:case yt.daterange:case yt.int4range:case yt.int8range:case yt.money:case yt.reltime:case yt.text:case yt.time:case yt.timestamptz:case yt.timetz:case yt.tsrange:case yt.tstzrange:return Lh(e);default:return Lh(e)}},Lh=r=>r,JC=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},YC=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},XC=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},QC=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,a=r[t];if(r[0]==="{"&&a==="}"){let l;const u=r.slice(1,t);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(d=>b0(e,d))}return r},ZC=r=>typeof r=="string"?r.replace(" ","T"):r,_0=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class rh{constructor(e,t,a={},i=Fh){this.channel=e,this.event=t,this.payload=a,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var a;return this._hasReceived(e)&&t((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(a=>a.status===e).forEach(a=>a.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var mv;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(mv||(mv={}));class hi{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},i=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hi.syncState(this.state,i,l,u),this.pendingDiffs.forEach(h=>{this.state=hi.syncDiff(this.state,h,l,u)}),this.pendingDiffs=[],d()}),this.channel._on(a.diff,{},i=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=hi.syncDiff(this.state,i,l,u),d())}),this.onJoin((i,l,u)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:l,newPresences:u})}),this.onLeave((i,l,u)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,a,i){const l=this.cloneDeep(e),u=this.transformState(t),d={},h={};return this.map(l,(p,g)=>{u[p]||(h[p]=g)}),this.map(u,(p,g)=>{const m=l[p];if(m){const w=g.map(C=>C.presence_ref),y=m.map(C=>C.presence_ref),j=g.filter(C=>y.indexOf(C.presence_ref)<0),_=m.filter(C=>w.indexOf(C.presence_ref)<0);j.length>0&&(d[p]=j),_.length>0&&(h[p]=_)}else d[p]=g}),this.syncDiff(l,{joins:d,leaves:h},a,i)}static syncDiff(e,t,a,i){const{joins:l,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return a||(a=()=>{}),i||(i=()=>{}),this.map(l,(d,h)=>{var p;const g=(p=e[d])!==null&&p!==void 0?p:[];if(e[d]=this.cloneDeep(h),g.length>0){const m=e[d].map(y=>y.presence_ref),w=g.filter(y=>m.indexOf(y.presence_ref)<0);e[d].unshift(...w)}a(d,g,h)}),this.map(u,(d,h)=>{let p=e[d];if(!p)return;const g=h.map(m=>m.presence_ref);p=p.filter(m=>g.indexOf(m.presence_ref)<0),e[d]=p,i(d,p,h),p.length===0&&delete e[d]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(a=>t(a,e[a]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,a)=>{const i=e[a];return"metas"in i?t[a]=i.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[a]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var gv;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(gv||(gv={}));var fi;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(fi||(fi={}));var oo;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(oo||(oo={}));class Cf{constructor(e,t={config:{}},a){var i,l;if(this.topic=e,this.params=t,this.socket=a,this.bindings={},this.state=Bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new rh(this,Jr.join,this.params,this.timeout),this.rejoinTimer=new w0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bt.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jr.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new hi(this),this.broadcastEndpointURL=_0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var a,i,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Bt.closed){const{config:{broadcast:u,presence:d,private:h}}=this.params,p=(i=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(y=>y.filter))!==null&&i!==void 0?i:[],g=!!this.bindings[fi.PRESENCE]&&this.bindings[fi.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,m={},w={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:g}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(y=>e?.(oo.CHANNEL_ERROR,y)),this._onClose(()=>e?.(oo.CLOSED)),this.updateJoinPayload(Object.assign({config:w},m)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var j;if(this.socket.setAuth(),y===void 0){e?.(oo.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,C=(j=_?.length)!==null&&j!==void 0?j:0,S=[];for(let E=0;E<C;E++){const N=_[E],{filter:{event:D,schema:R,table:O,filter:B}}=N,F=y&&y[E];if(F&&F.event===D&&F.schema===R&&F.table===O&&F.filter===B)S.push(Object.assign(Object.assign({},N),{id:F.id}));else{this.unsubscribe(),this.state=Bt.errored,e?.(oo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(oo.SUBSCRIBED);return}}).receive("error",y=>{this.state=Bt.errored,e?.(oo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e?.(oo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,a){return this.state===Bt.joined&&e===fi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,a)}async httpSend(e,t,a={}){var i;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(i=a.timeout)!==null&&i!==void 0?i:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const p=await d.json();h=p.error||p.message||h}catch{}return Promise.reject(new Error(h))}async send(e,t={}){var a,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(a=t.timeout)!==null&&a!==void 0?a:this.timeout);return await((i=p.body)===null||i===void 0?void 0:i.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,d,h;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Bt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jr.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(i=>{a=new rh(this,Jr.leave,{},e),a.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bt.closed,this.bindings={}}async _fetchWithTimeout(e,t,a){const i=new AbortController,l=setTimeout(()=>i.abort(),a),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(l),u}_push(e,t,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new rh(this,e,t,a);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>HC){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,a){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,a){var i,l;const u=e.toLocaleLowerCase(),{close:d,error:h,leave:p,join:g}=Jr;if(a&&[d,h,p,g].indexOf(u)>=0&&a!==this._joinRef())return;let w=this._onMessage(u,t,a);if(t&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var j,_,C;return((j=y.filter)===null||j===void 0?void 0:j.event)==="*"||((C=(_=y.filter)===null||_===void 0?void 0:_.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===u}).map(y=>y.callback(w,a)):(l=this.bindings[u])===null||l===void 0||l.filter(y=>{var j,_,C,S,E,N;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in y){const D=y.id,R=(j=y.filter)===null||j===void 0?void 0:j.event;return D&&((_=t.ids)===null||_===void 0?void 0:_.includes(D))&&(R==="*"||R?.toLocaleLowerCase()===((C=t.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const D=(E=(S=y?.filter)===null||S===void 0?void 0:S.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return D==="*"||D===((N=t?.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===u}).map(y=>{if(typeof w=="object"&&"ids"in w){const j=w.data,{schema:_,table:C,commit_timestamp:S,type:E,errors:N}=j;w=Object.assign(Object.assign({},{schema:_,table:C,commit_timestamp:S,eventType:E,new:{},old:{},errors:N}),this._getPayloadRecords(j))}y.callback(w,a)})}_isClosed(){return this.state===Bt.closed}_isJoined(){return this.state===Bt.joined}_isJoining(){return this.state===Bt.joining}_isLeaving(){return this.state===Bt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,a){const i=e.toLocaleLowerCase(),l={type:i,filter:t,callback:a};return this.bindings[i]?this.bindings[i].push(l):this.bindings[i]=[l],this}_off(e,t){const a=e.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(i=>{var l;return!(((l=i.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===a&&Cf.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const a in e)if(e[a]!==t[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Jr.close,{},e)}_onError(e){this._on(Jr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=pv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=pv(e.columns,e.old_record)),t}}const nh=()=>{},Yl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},eS=[1e3,2e3,5e3,1e4],tS=1e4,rS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nS{constructor(e,t){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Fh,this.transport=null,this.heartbeatIntervalMs=Yl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=nh,this.ref=0,this.reconnectTimer=null,this.vsn=fv,this.logger=nh,this.conn=null,this.sendBuffer=[],this.serializer=new GC,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...l)=>i(...l):(...l)=>fetch(...l),!(!((a=t?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${$h.websocket}`,this.httpEndpoint=_0(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=BC.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,a){this.logger(e,t,a)}connectionState(){switch(this.conn&&this.conn.readyState){case da.connecting:return ha.Connecting;case da.open:return ha.Open;case da.closing:return ha.Closing;default:return ha.Closed}}isConnected(){return this.connectionState()===ha.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const a=`realtime:${e}`,i=this.getChannels().find(l=>l.topic===a);if(i)return i;{const l=new Cf(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:a,payload:i,ref:l}=e,u=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${t} ${a} (${l})`,i),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(WC,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Yl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(a=>a.topic===e&&(a._isJoined()||a._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:i,payload:l,ref:u}=t,d=u?`(${u})`:"",h=l.status||"";this.log("receive",`${h} ${a} ${i} ${d}`.trim(),l),this.channels.filter(p=>p._isMember(a)).forEach(p=>p._trigger(i,l,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===da.open||this.conn.readyState===da.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Jr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const a=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${a}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const a=new Blob([rS],{type:"application/javascript"});t=URL.createObjectURL(a)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(a=>{const i={access_token:t,version:VC};t&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(Jr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(a=>{try{a(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(a){this.log("error",`error triggering ${e} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new w0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Yl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,a,i,l,u,d,h,p,g,m,w,y;switch(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(a=e?.timeout)!==null&&a!==void 0?a:Fh,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:Yl.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:nh,this.vsn=(h=e?.vsn)!==null&&h!==void 0?h:fv,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e?.reconnectAfterMs)!==null&&p!==void 0?p:(j=>eS[j-1]||tS),this.vsn){case y0:this.encode=(g=e?.encode)!==null&&g!==void 0?g:((j,_)=>_(JSON.stringify(j))),this.decode=(m=e?.decode)!==null&&m!==void 0?m:((j,_)=>_(JSON.parse(j)));break;case qC:this.encode=(w=e?.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(y=e?.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Sf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Pt(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class oS extends Sf{constructor(e,t,a){super(e),this.name="StorageApiError",this.status=t,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class zh extends Sf{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Ef=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),aS=()=>Response,Bh=r=>{if(Array.isArray(r))return r.map(t=>Bh(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,a])=>{const i=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[i]=Bh(a)}),e},sS=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},oh=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},iS=(r,e,t)=>Re(void 0,void 0,void 0,function*(){const a=yield aS();r instanceof a&&!t?.noResolveJson?r.json().then(i=>{const l=r.status||500,u=i?.statusCode||l+"";e(new oS(oh(i),l,u))}).catch(i=>{e(new zh(oh(i),i))}):e(new zh(oh(r),r))}),lS=(r,e,t,a)=>{const i={method:r,headers:e?.headers||{}};return r==="GET"||!a?i:(sS(a)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(a)):i.body=a,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function Ni(r,e,t,a,i,l){return Re(this,void 0,void 0,function*(){return new Promise((u,d)=>{r(t,lS(e,a,i,l)).then(h=>{if(!h.ok)throw h;return a?.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>iS(h,d,a))})})}function vi(r,e,t,a){return Re(this,void 0,void 0,function*(){return Ni(r,"GET",e,t,a)})}function dn(r,e,t,a,i){return Re(this,void 0,void 0,function*(){return Ni(r,"POST",e,a,i,t)})}function Uh(r,e,t,a,i){return Re(this,void 0,void 0,function*(){return Ni(r,"PUT",e,a,i,t)})}function cS(r,e,t,a){return Re(this,void 0,void 0,function*(){return Ni(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),a)})}function kf(r,e,t,a,i){return Re(this,void 0,void 0,function*(){return Ni(r,"DELETE",e,a,i,t)})}class uS{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Re(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Pt(e))return{data:null,error:e};throw e}})}}var j0;class dS{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[j0]="BlobDownloadBuilder",this.promise=null}asStream(){return new uS(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Re(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Pt(e))return{data:null,error:e};throw e}})}}j0=Symbol.toStringTag;const hS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class fS{constructor(e,t={},a,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=a,this.fetch=Ef(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,a,i){return Re(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},vv),i);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&a instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),h&&l.append("metadata",this.encodeMetadata(h)),l.append("",a)):typeof FormData<"u"&&a instanceof FormData?(l=a,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),h&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(h))):(l=a,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),i?.headers&&(d=Object.assign(Object.assign({},d),i.headers));const p=this._removeEmptyFolders(t),g=this._getFinalPath(p),m=yield(e=="PUT"?Uh:dn)(this.fetch,`${this.url}/object/${g}`,l,Object.assign({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:m.Id,fullPath:m.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Pt(l))return{data:null,error:l};throw l}})}upload(e,t,a){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,a)})}uploadToSignedUrl(e,t,a,i){return Re(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",t);try{let h;const p=Object.assign({upsert:vv.upsert},i),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&a instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",a)):typeof FormData<"u"&&a instanceof FormData?(h=a,h.append("cacheControl",p.cacheControl)):(h=a,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType);const m=yield Uh(this.fetch,d.toString(),h,{headers:g});return{data:{path:l,fullPath:m.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Pt(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,t){return Re(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const l=yield dn(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:i}),u=new URL(this.url+l.url),d=u.searchParams.get("token");if(!d)throw new Sf("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:d},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Pt(a))return{data:null,error:a};throw a}})}update(e,t,a){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,a)})}move(e,t,a){return Re(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:a?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Pt(i))return{data:null,error:i};throw i}})}copy(e,t,a){return Re(this,void 0,void 0,function*(){try{return{data:{path:(yield dn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:a?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Pt(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,a){return Re(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),l=yield dn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},a?.transform?{transform:a.transform}:{}),{headers:this.headers});const u=a?.download?`&download=${a.download===!0?"":a.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Pt(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,a){return Re(this,void 0,void 0,function*(){try{const i=yield dn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:i.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Pt(i))return{data:null,error:i};throw i}})}download(e,t){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(t?.transform||{}),u=l?`?${l}`:"",d=this._getFinalPath(e),h=()=>vi(this.fetch,`${this.url}/${i}/${d}${u}`,{headers:this.headers,noResolveJson:!0});return new dS(h,this.shouldThrowOnError)}info(e){return Re(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const a=yield vi(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Bh(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Pt(a))return{data:null,error:a};throw a}})}exists(e){return Re(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield cS(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Pt(a)&&a instanceof zh){const i=a.originalError;if([400,404].includes(i?.status))return{data:!1,error:a}}throw a}})}getPublicUrl(e,t){const a=this._getFinalPath(e),i=[],l=t?.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&i.push(l);const d=typeof t?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(t?.transform||{});h!==""&&i.push(h);let p=i.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${a}${p}`)}}}remove(e){return Re(this,void 0,void 0,function*(){try{return{data:yield kf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pt(t))return{data:null,error:t};throw t}})}list(e,t,a){return Re(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},hS),t),{prefix:e||""});return{data:yield dn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},a),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Pt(i))return{data:null,error:i};throw i}})}listV2(e,t){return Re(this,void 0,void 0,function*(){try{const a=Object.assign({},e);return{data:yield dn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},t),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Pt(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const C0="2.81.1",S0={"X-Client-Info":`storage-js/${C0}`};class pS{constructor(e,t={},a,i){this.shouldThrowOnError=!1;const l=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},S0),t),this.fetch=Ef(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Re(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield vi(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pt(t))return{data:null,error:t};throw t}})}getBucket(e){return Re(this,void 0,void 0,function*(){try{return{data:yield vi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pt(t))return{data:null,error:t};throw t}})}createBucket(e){return Re(this,arguments,void 0,function*(t,a={public:!1}){try{return{data:yield dn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Pt(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return Re(this,void 0,void 0,function*(){try{return{data:yield Uh(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Pt(a))return{data:null,error:a};throw a}})}emptyBucket(e){return Re(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Re(this,void 0,void 0,function*(){try{return{data:yield kf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pt(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class mS{constructor(e,t={},a){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},S0),t),this.fetch=Ef(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Re(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pt(t))return{data:null,error:t};throw t}})}listBuckets(e){return Re(this,void 0,void 0,function*(){try{const t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const a=t.toString(),i=a?`${this.url}/bucket?${a}`:`${this.url}/bucket`;return{data:yield vi(this.fetch,i,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Re(this,void 0,void 0,function*(){try{return{data:yield kf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pt(t))return{data:null,error:t};throw t}})}}const Nf={"X-Client-Info":`storage-js/${C0}`,"Content-Type":"application/json"};class E0 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Fr(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class ah extends E0{constructor(e,t,a){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gS extends E0{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var xv;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(xv||(xv={}));const Pf=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),vS=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},yv=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),xS=(r,e,t)=>Re(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!t?.noResolveJson){const i=r.status||500,l=r;if(typeof l.json=="function")l.json().then(u=>{const d=u?.statusCode||u?.code||i+"";e(new ah(yv(u),i,d))}).catch(()=>{const u=i+"",d=l.statusText||`HTTP ${i} error`;e(new ah(d,i,u))});else{const u=i+"",d=l.statusText||`HTTP ${i} error`;e(new ah(d,i,u))}}else e(new gS(yv(r),r))}),yS=(r,e,t,a)=>{const i={method:r,headers:e?.headers||{}};return a?(vS(a)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(a)):i.body=a,Object.assign(Object.assign({},i),t)):i};function wS(r,e,t,a,i,l){return Re(this,void 0,void 0,function*(){return new Promise((u,d)=>{r(t,yS(e,a,i,l)).then(h=>{if(!h.ok)throw h;if(a?.noResolveJson)return h;const p=h.headers.get("content-type");return!p||!p.includes("application/json")?{}:h.json()}).then(h=>u(h)).catch(h=>xS(h,d,a))})})}function $r(r,e,t,a,i){return Re(this,void 0,void 0,function*(){return wS(r,"POST",e,a,i,t)})}class bS{constructor(e,t={},a){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Nf),t),this.fetch=Pf(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Re(this,void 0,void 0,function*(){try{return{data:(yield $r(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fr(t))return{data:null,error:t};throw t}})}getIndex(e,t){return Re(this,void 0,void 0,function*(){try{return{data:yield $r(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Fr(a))return{data:null,error:a};throw a}})}listIndexes(e){return Re(this,void 0,void 0,function*(){try{return{data:yield $r(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fr(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return Re(this,void 0,void 0,function*(){try{return{data:(yield $r(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Fr(a))return{data:null,error:a};throw a}})}}class _S{constructor(e,t={},a){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Nf),t),this.fetch=Pf(a)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Re(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield $r(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fr(t))return{data:null,error:t};throw t}})}getVectors(e){return Re(this,void 0,void 0,function*(){try{return{data:yield $r(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fr(t))return{data:null,error:t};throw t}})}listVectors(e){return Re(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield $r(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fr(t))return{data:null,error:t};throw t}})}queryVectors(e){return Re(this,void 0,void 0,function*(){try{return{data:yield $r(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fr(t))return{data:null,error:t};throw t}})}deleteVectors(e){return Re(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield $r(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fr(t))return{data:null,error:t};throw t}})}}class jS{constructor(e,t={},a){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Nf),t),this.fetch=Pf(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Re(this,void 0,void 0,function*(){try{return{data:(yield $r(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fr(t))return{data:null,error:t};throw t}})}getBucket(e){return Re(this,void 0,void 0,function*(){try{return{data:yield $r(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fr(t))return{data:null,error:t};throw t}})}listBuckets(){return Re(this,arguments,void 0,function*(e={}){try{return{data:yield $r(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Re(this,void 0,void 0,function*(){try{return{data:(yield $r(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fr(t))return{data:null,error:t};throw t}})}}class CS extends jS{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new SS(this.url,this.headers,e,this.fetch)}}class SS extends bS{constructor(e,t,a,i){super(e,t,i),this.vectorBucketName=a}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Re(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Re(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Re(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Re(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new ES(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class ES extends _S{constructor(e,t,a,i,l){super(e,t,l),this.vectorBucketName=a,this.indexName=i}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Re(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Re(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Re(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Re(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Re(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class kS extends pS{constructor(e,t={},a,i){super(e,t,a,i)}from(e){return new fS(this.url,this.headers,e,this.fetch)}get vectors(){return new CS(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new mS(this.url+"/iceberg",this.headers,this.fetch)}}const NS="2.81.1";let ci="";typeof Deno<"u"?ci="deno":typeof document<"u"?ci="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ci="react-native":ci="node";const PS={"X-Client-Info":`supabase-js-${ci}/${NS}`},RS={headers:PS},AS={schema:"public"},TS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},OS={},DS=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),IS=()=>Headers,MS=(r,e,t)=>{const a=DS(t),i=IS();return async(l,u)=>{var d;const h=(d=await e())!==null&&d!==void 0?d:r;let p=new i(u?.headers);return p.has("apikey")||p.set("apikey",r),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),a(l,Object.assign(Object.assign({},u),{headers:p}))}};function FS(r){return r.endsWith("/")?r:r+"/"}function $S(r,e){var t,a;const{db:i,auth:l,realtime:u,global:d}=r,{db:h,auth:p,realtime:g,global:m}=e,w={db:Object.assign(Object.assign({},h),i),auth:Object.assign(Object.assign({},p),l),realtime:Object.assign(Object.assign({},g),u),storage:{},global:Object.assign(Object.assign(Object.assign({},m),d),{headers:Object.assign(Object.assign({},(t=m?.headers)!==null&&t!==void 0?t:{}),(a=d?.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return r.accessToken?w.accessToken=r.accessToken:delete w.accessToken,w}function LS(r){const e=r?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(FS(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const k0="2.81.1",os=30*1e3,Vh=3,sh=Vh*os,zS="http://localhost:9999",BS="supabase.auth.token",US={"X-Client-Info":`gotrue-js/${k0}`},qh="X-Supabase-Api-Version",N0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},VS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,qS=600*1e3;class xi extends Error{constructor(e,t,a){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=a}}function Oe(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class WS extends xi{constructor(e,t,a){super(e,t,a),this.name="AuthApiError",this.status=t,this.code=a}}function HS(r){return Oe(r)&&r.name==="AuthApiError"}class fa extends xi{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class zo extends xi{constructor(e,t,a,i){super(e,a,i),this.name=t,this.status=a}}class ln extends zo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function GS(r){return Oe(r)&&r.name==="AuthSessionMissingError"}class Ja extends zo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xl extends zo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ql extends zo{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function KS(r){return Oe(r)&&r.name==="AuthImplicitGrantRedirectError"}class wv extends zo{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Wh extends zo{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ih(r){return Oe(r)&&r.name==="AuthRetryableFetchError"}class bv extends zo{constructor(e,t,a){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=a}}class Hh extends zo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const vc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_v=` 	
\r=`.split(""),JS=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<_v.length;e+=1)r[_v[e].charCodeAt(0)]=-2;for(let e=0;e<vc.length;e+=1)r[vc[e].charCodeAt(0)]=e;return r})();function jv(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;t(vc[a]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;t(vc[a]),e.queuedBits-=6}}function P0(r,e,t){const a=JS[r];if(a>-1)for(e.queue=e.queue<<6|a,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Cv(r){const e=[],t=u=>{e.push(String.fromCodePoint(u))},a={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},l=u=>{QS(u,a,t)};for(let u=0;u<r.length;u+=1)P0(r.charCodeAt(u),i,l);return e.join("")}function YS(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function XS(r,e){for(let t=0;t<r.length;t+=1){let a=r.charCodeAt(t);if(a>55295&&a<=56319){const i=(a-55296)*1024&65535;a=(r.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}YS(a,e)}}function QS(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let a=1;a<6;a+=1)if((r>>7-a&1)===0){e.utf8seq=a;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function is(r){const e=[],t={queue:0,queuedBits:0},a=i=>{e.push(i)};for(let i=0;i<r.length;i+=1)P0(r.charCodeAt(i),t,a);return new Uint8Array(e)}function ZS(r){const e=[];return XS(r,t=>e.push(t)),new Uint8Array(e)}function pa(r){const e=[],t={queue:0,queuedBits:0},a=i=>{e.push(i)};return r.forEach(i=>jv(i,t,a)),jv(null,t,a),e.join("")}function eE(r){return Math.round(Date.now()/1e3)+r}function tE(){return Symbol("auth-callback")}const Zt=()=>typeof window<"u"&&typeof document<"u",sa={tested:!1,writable:!1},R0=()=>{if(!Zt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sa.tested)return sa.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),sa.tested=!0,sa.writable=!0}catch{sa.tested=!0,sa.writable=!1}return sa.writable};function rE(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,l)=>{e[l]=i})}catch{}return t.searchParams.forEach((a,i)=>{e[i]=a}),e}const A0=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),nE=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",as=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},ia=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ro=async(r,e)=>{await r.removeItem(e)};class $c{constructor(){this.promise=new $c.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}$c.promiseConstructor=Promise;function lh(r){const e=r.split(".");if(e.length!==3)throw new Hh("Invalid JWT structure");for(let a=0;a<e.length;a++)if(!VS.test(e[a]))throw new Hh("JWT not in base64url format");return{header:JSON.parse(Cv(e[0])),payload:JSON.parse(Cv(e[1])),signature:is(e[2]),raw:{header:e[0],payload:e[1]}}}async function oE(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function aE(r,e){return new Promise((a,i)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await r(l);if(!e(l,null,u)){a(u);return}}catch(u){if(!e(l,u)){i(u);return}}})()})}function sE(r){return("0"+r.toString(16)).substr(-2)}function iE(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=t.length;let i="";for(let l=0;l<56;l++)i+=t.charAt(Math.floor(Math.random()*a));return i}return crypto.getRandomValues(e),Array.from(e,sE).join("")}async function lE(r){const t=new TextEncoder().encode(r),a=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(a);return Array.from(i).map(l=>String.fromCharCode(l)).join("")}async function cE(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await lE(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ya(r,e,t=!1){const a=iE();let i=a;t&&(i+="/PASSWORD_RECOVERY"),await as(r,`${e}-code-verifier`,i);const l=await cE(a);return[l,a===l?"plain":"s256"]}const uE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function dE(r){const e=r.headers.get(qh);if(!e||!e.match(uE))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function hE(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function fE(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const pE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xa(r){if(!pE.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ch(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const a=t.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mE(r,e){return new Proxy(r,{get:(t,a,i)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const l=a.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,a,i)}return!e.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,a,i)}})}function Sv(r){return JSON.parse(JSON.stringify(r))}const ua=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),gE=[502,503,504];async function Ev(r){var e;if(!nE(r))throw new Wh(ua(r),0);if(gE.includes(r.status))throw new Wh(ua(r),r.status);let t;try{t=await r.json()}catch(l){throw new fa(ua(l),l)}let a;const i=dE(r);if(i&&i.getTime()>=N0["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?a=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(a=t.error_code),a){if(a==="weak_password")throw new bv(ua(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(a==="session_not_found")throw new ln}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new bv(ua(t),r.status,t.weak_password.reasons);throw new WS(ua(t),r.status||500,a)}const vE=(r,e,t,a)=>{const i={method:r,headers:e?.headers||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(a),Object.assign(Object.assign({},i),t))};async function Me(r,e,t,a){var i;const l=Object.assign({},a?.headers);l[qh]||(l[qh]=N0["2024-01-01"].name),a?.jwt&&(l.Authorization=`Bearer ${a.jwt}`);const u=(i=a?.query)!==null&&i!==void 0?i:{};a?.redirectTo&&(u.redirect_to=a.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await xE(r,e,t+d,{headers:l,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(h):{data:Object.assign({},h),error:null}}async function xE(r,e,t,a,i,l){const u=vE(e,a,i,l);let d;try{d=await r(t,Object.assign({},u))}catch(h){throw console.error(h),new Wh(ua(h),0)}if(d.ok||await Ev(d),a?.noResolveJson)return d;try{return await d.json()}catch(h){await Ev(h)}}function cn(r){var e;let t=null;bE(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=eE(r.expires_in)));const a=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:a},error:null}}function kv(r){const e=cn(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,a)=>t&&typeof a=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Do(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function yE(r){return{data:r,error:null}}function wE(r){const{action_link:e,email_otp:t,hashed_token:a,redirect_to:i,verification_type:l}=r,u=Lo(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:t,hashed_token:a,redirect_to:i,verification_type:l},h=Object.assign({},u);return{data:{properties:d,user:h},error:null}}function Nv(r){return r}function bE(r){return r.access_token&&r.refresh_token&&r.expires_in}const uh=["global","local","others"];class _E{constructor({url:e="",headers:t={},fetch:a}){this.url=e,this.headers=t,this.fetch=A0(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=uh[0]){if(uh.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${uh.join(", ")}`);try{return await Me(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Oe(a))return{data:null,error:a};throw a}}async inviteUserByEmail(e,t={}){try{return await Me(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Do})}catch(a){if(Oe(a))return{data:{user:null},error:a};throw a}}async generateLink(e){try{const{options:t}=e,a=Lo(e,["options"]),i=Object.assign(Object.assign({},a),t);return"newEmail"in a&&(i.new_email=a?.newEmail,delete i.newEmail),await Me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:wE,redirectTo:t?.redirectTo})}catch(t){if(Oe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Do})}catch(t){if(Oe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,a,i,l,u,d,h;try{const p={nextPage:null,lastPage:0,total:0},g=await Me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&a!==void 0?a:"",per_page:(l=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&l!==void 0?l:""},xform:Nv});if(g.error)throw g.error;const m=await g.json(),w=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,y=(h=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return y.length>0&&(y.forEach(j=>{const _=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(j.split(";")[1].split("=")[1]);p[`${C}Page`]=_}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},m),p),error:null}}catch(p){if(Oe(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Xa(e);try{return await Me(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Do})}catch(t){if(Oe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Xa(e);try{return await Me(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Do})}catch(a){if(Oe(a))return{data:{user:null},error:a};throw a}}async deleteUser(e,t=!1){Xa(e);try{return await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Do})}catch(a){if(Oe(a))return{data:{user:null},error:a};throw a}}async _listFactors(e){Xa(e.userId);try{const{data:t,error:a}=await Me(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:a}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Xa(e.userId),Xa(e.id);try{return{data:await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,a,i,l,u,d,h;try{const p={nextPage:null,lastPage:0,total:0},g=await Me(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&a!==void 0?a:"",per_page:(l=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&l!==void 0?l:""},xform:Nv});if(g.error)throw g.error;const m=await g.json(),w=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,y=(h=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return y.length>0&&(y.forEach(j=>{const _=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(j.split(";")[1].split("=")[1]);p[`${C}Page`]=_}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},m),p),error:null}}catch(p){if(Oe(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Me(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Me(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Oe(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(e){try{return await Me(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}}function Pv(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const Qa={debug:!!(globalThis&&R0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class T0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class jE extends T0{}async function CE(r,e,t){Qa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const a=new globalThis.AbortController;return e>0&&setTimeout(()=>{a.abort(),Qa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async i=>{if(i){Qa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,i.name);try{return await t()}finally{Qa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,i.name)}}else{if(e===0)throw Qa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new jE(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Qa.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function SE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function O0(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function EE(r){return parseInt(r,16)}function kE(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,a=>a.toString(16).padStart(2,"0")).join("")}function NE(r){var e;const{chainId:t,domain:a,expirationTime:i,issuedAt:l=new Date,nonce:u,notBefore:d,requestId:h,resources:p,scheme:g,uri:m,version:w}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const y=O0(r.address),j=g?`${g}://${a}`:a,_=r.statement?`${r.statement}
`:"",C=`${j} wants you to sign in with your Ethereum account:
${y}

${_}`;let S=`URI: ${m}
Version: ${w}
Chain ID: ${t}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(i&&(S+=`
Expiration Time: ${i.toISOString()}`),d&&(S+=`
Not Before: ${d.toISOString()}`),h&&(S+=`
Request ID: ${h}`),p){let E=`
Resources:`;for(const N of p){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);E+=`
- ${N}`}S+=E}return`${C}
${S}`}class Dt extends Error{constructor({message:e,code:t,cause:a,name:i}){var l;super(e,{cause:a}),this.__isWebAuthnError=!0,this.name=(l=i??(a instanceof Error?a.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class xc extends Dt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function PE({error:r,options:e}){var t,a,i;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Dt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Dt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Dt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((i=l.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Dt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new Dt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new Dt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return l.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Dt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new Dt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const u=window.location.hostname;if(D0(u)){if(l.rp.id!==u)return new Dt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Dt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Dt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new Dt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Dt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function RE({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Dt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new Dt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const a=window.location.hostname;if(D0(a)){if(t.rpId!==a)return new Dt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Dt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new Dt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Dt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class AE{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const TE=new AE;function OE(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:a}=r,i=Lo(r,["challenge","user","excludeCredentials"]),l=is(e).buffer,u=Object.assign(Object.assign({},t),{id:is(t.id).buffer}),d=Object.assign(Object.assign({},i),{challenge:l,user:u});if(a&&a.length>0){d.excludeCredentials=new Array(a.length);for(let h=0;h<a.length;h++){const p=a[h];d.excludeCredentials[h]=Object.assign(Object.assign({},p),{id:is(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return d}function DE(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,a=Lo(r,["challenge","allowCredentials"]),i=is(e).buffer,l=Object.assign(Object.assign({},a),{challenge:i});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let u=0;u<t.length;u++){const d=t[u];l.allowCredentials[u]=Object.assign(Object.assign({},d),{id:is(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function IE(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:pa(new Uint8Array(r.response.attestationObject)),clientDataJSON:pa(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ME(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,a=r.getClientExtensionResults(),i=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:pa(new Uint8Array(i.authenticatorData)),clientDataJSON:pa(new Uint8Array(i.clientDataJSON)),signature:pa(new Uint8Array(i.signature)),userHandle:i.userHandle?pa(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function D0(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Rv(){var r,e;return!!(Zt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function FE(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xc("Browser returned unexpected credential type",e)}:{data:null,error:new xc("Empty credential response",e)}}catch(e){return{data:null,error:PE({error:e,options:r})}}}async function $E(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xc("Browser returned unexpected credential type",e)}:{data:null,error:new xc("Empty credential response",e)}}catch(e){return{data:null,error:RE({error:e,options:r})}}}const LE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},zE={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function yc(...r){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),a={};for(const i of r)if(i)for(const l in i){const u=i[l];if(u!==void 0)if(Array.isArray(u))a[l]=u;else if(t(u))a[l]=u;else if(e(u)){const d=a[l];e(d)?a[l]=yc(d,u):a[l]=yc(u)}else a[l]=u}return a}function BE(r,e){return yc(LE,r,e||{})}function UE(r,e){return yc(zE,r,e||{})}class VE{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:a,signal:i},l){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:d};const h=i??TE.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${a}`),p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=BE(u.webauthn.credential_options.publicKey,l?.create),{data:g,error:m}=await FE({publicKey:p,signal:h});return g?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:m}}case"request":{const p=UE(u.webauthn.credential_options.publicKey,l?.request),{data:g,error:m}=await $E(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:h}));return g?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:m}}}}catch(u){return Oe(u)?{data:null,error:u}:{data:null,error:new fa("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:t,webauthn:a}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:a})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},l){if(!t)return{data:null,error:new xi("rpId is required for WebAuthn authentication")};try{if(!Rv())return{data:null,error:new fa("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:a},signal:i},{request:l});if(!u)return{data:null,error:d};const{webauthn:h}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:h.type,rpId:t,rpOrigins:a,credential_response:h.credential_response}})}catch(u){return Oe(u)?{data:null,error:u}:{data:null,error:new fa("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},l){if(!t)return{data:null,error:new xi("rpId is required for WebAuthn registration")};try{if(!Rv())return{data:null,error:new fa("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(g=>{var m;return(m=g.data)===null||m===void 0?void 0:m.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:d};const{data:h,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:t,rpOrigins:a},signal:i},{create:l});return h?this._verify({factorId:u.id,challengeId:h.challengeId,webauthn:{rpId:t,rpOrigins:a,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:p}}catch(u){return Oe(u)?{data:null,error:u}:{data:null,error:new fa("Unexpected error in register",u)}}}}SE();const qE={url:zS,storageKey:BS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:US,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Av(r,e,t){return await t()}const Za={};class yi{get jwks(){var e,t;return(t=(e=Za[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Za[this.storageKey]=Object.assign(Object.assign({},Za[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Za[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Za[this.storageKey]=Object.assign(Object.assign({},Za[this.storageKey]),{cachedAt:e})}constructor(e){var t,a,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},qE),e);if(this.storageKey=l.storageKey,this.instanceID=(t=yi.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,yi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Zt()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new _E({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=A0(l.fetch),this.lock=l.lock||Av,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:Zt()&&(!((a=globalThis?.navigator)===null||a===void 0)&&a.locks)?this.lock=CE:this.lock=Av,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new VE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:R0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Pv(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Pv(this.memoryStorage)),Zt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${k0}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},a="none";if(Zt()&&(t=rE(window.location.href),this._isImplicitGrantCallback(t)?a="implicit":await this._isPKCECallback(t)&&(a="pkce")),Zt()&&this.detectSessionInUrl&&a!=="none"){const{data:i,error:l}=await this._getSessionFromURL(t,a);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),KS(l)){const h=(e=l.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:d}=i;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Oe(t)?this._returnResult({error:t}):this._returnResult({error:new fa("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,a,i;try{const l=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:cn}),{data:u,error:d}=l;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(l){if(Oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var t,a,i;try{let l;if("email"in e){const{email:g,password:m,options:w}=e;let y=null,j=null;this.flowType==="pkce"&&([y,j]=await Ya(this.storage,this.storageKey)),l=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:g,password:m,data:(t=w?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:y,code_challenge_method:j},xform:cn})}else if("phone"in e){const{phone:g,password:m,options:w}=e;l=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:m,data:(a=w?.data)!==null&&a!==void 0?a:{},channel:(i=w?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:cn})}else throw new Xl("You must provide either an email or phone number and a password");const{data:u,error:d}=l;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(l){if(Oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:u,options:d}=e;t=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:kv})}else if("phone"in e){const{phone:l,password:u,options:d}=e;t=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:kv})}else throw new Xl("You must provide either an email or phone number and a password");const{data:a,error:i}=t;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!a||!a.session||!a.user){const l=new Ja;return this._returnResult({data:{user:null,session:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:i})}catch(t){if(Oe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,a,i,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,a,i,l,u,d,h,p,g,m,w;let y,j;if("message"in e)y=e.message,j=e.signature;else{const{chain:_,wallet:C,statement:S,options:E}=e;let N;if(Zt())if(typeof C=="object")N=C;else{const H=window;if("ethereum"in H&&typeof H.ethereum=="object"&&"request"in H.ethereum&&typeof H.ethereum.request=="function")N=H.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=C}const D=new URL((t=E?.url)!==null&&t!==void 0?t:window.location.href),R=await N.request({method:"eth_requestAccounts"}).then(H=>H).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=O0(R[0]);let B=(a=E?.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!B){const H=await N.request({method:"eth_chainId"});B=EE(H)}const F={domain:D.host,address:O,statement:S,uri:D.href,version:"1",chainId:B,nonce:(i=E?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(u=(l=E?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=E?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=E?.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(p=E?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(g=E?.signInWithEthereum)===null||g===void 0?void 0:g.resources};y=NE(F),j=await N.request({method:"personal_sign",params:[kE(y),O]})}try{const{data:_,error:C}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:j},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:cn});if(C)throw C;if(!_||!_.session||!_.user){const S=new Ja;return this._returnResult({data:{user:null,session:null},error:S})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:C})}catch(_){if(Oe(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(e){var t,a,i,l,u,d,h,p,g,m,w,y;let j,_;if("message"in e)j=e.message,_=e.signature;else{const{chain:C,wallet:S,statement:E,options:N}=e;let D;if(Zt())if(typeof S=="object")D=S;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))D=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=S}const R=new URL((t=N?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in D&&D.signIn){const O=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N?.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),E?{statement:E}:null));let B;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")B=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)B=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)j=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),_=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${R.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(i=(a=N?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((l=N?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((u=N?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((d=N?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((h=N?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((p=N?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((m=(g=N?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||m===void 0)&&m.length?["Resources",...N.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const O=await D.signMessage(new TextEncoder().encode(j),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=O}}try{const{data:C,error:S}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:pa(_)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:cn});if(S)throw S;if(!C||!C.session||!C.user){const E=new Ja;return this._returnResult({data:{user:null,session:null},error:E})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:S})}catch(C){if(Oe(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(e){const t=await ia(this.storage,`${this.storageKey}-code-verifier`),[a,i]=(t??"").split("/");try{const{data:l,error:u}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:a},xform:cn});if(await Ro(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const d=new Ja;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:i??null}),error:u})}catch(l){if(Oe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:t,provider:a,token:i,access_token:l,nonce:u}=e,d=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:i,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:cn}),{data:h,error:p}=d;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!h||!h.session||!h.user){const g=new Ja;return this._returnResult({data:{user:null,session:null},error:g})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:p})}catch(t){if(Oe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,a,i,l,u;try{if("email"in e){const{email:d,options:h}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Ya(this.storage,this.storageKey));const{error:m}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(t=h?.data)!==null&&t!==void 0?t:{},create_user:(a=h?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:h?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in e){const{phone:d,options:h}=e,{data:p,error:g}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(i=h?.data)!==null&&i!==void 0?i:{},create_user:(l=h?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(u=h?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:g})}throw new Xl("You must provide either an email or phone number.")}catch(d){if(Oe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var t,a;try{let i,l;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(a=e.options)===null||a===void 0?void 0:a.captchaToken);const{data:u,error:d}=await Me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:i,xform:cn});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,p=u.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(i){if(Oe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var t,a,i,l,u;try{let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Ya(this.storage,this.storageKey));const p=await Me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&a!==void 0?a:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:h}),headers:this.headers,xform:yE});return!((l=p.data)===null||l===void 0)&&l.url&&Zt()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(d){if(Oe(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:a}=e;if(a)throw a;if(!t)throw new ln;const{error:i}=await Me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Oe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:a,type:i,options:l}=e,{error:u}=await Me(this.fetch,"POST",t,{headers:this.headers,body:{email:a,type:i,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:a,type:i,options:l}=e,{data:u,error:d}=await Me(this.fetch,"POST",t,{headers:this.headers,body:{phone:a,type:i,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new Xl("You must provide either an email or phone number and a type")}catch(t){if(Oe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await a,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=t();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ia(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const a=e.expires_at?e.expires_at*1e3-Date.now()<sh:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",e.expires_at),!a){if(this.userStorage){const u=await ia(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=ch()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=mE(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Do}):await this._useSession(async t=>{var a,i,l;const{data:u,error:d}=t;if(d)throw d;return!(!((a=u.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ln}:await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&l!==void 0?l:void 0,xform:Do})})}catch(t){if(Oe(t))return GS(t)&&(await this._removeSession(),await Ro(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async a=>{const{data:i,error:l}=a;if(l)throw l;if(!i.session)throw new ln;const u=i.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await Ya(this.storage,this.storageKey));const{data:p,error:g}=await Me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:Do});if(g)throw g;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(a){if(Oe(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ln;const t=Date.now()/1e3;let a=t,i=!0,l=null;const{payload:u}=lh(e.access_token);if(u.exp&&(a=u.exp,i=a<=t),i){const{data:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;l={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:a-t,expires_at:a},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(t){if(Oe(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var a;if(!e){const{data:u,error:d}=t;if(d)throw d;e=(a=u.session)!==null&&a!==void 0?a:void 0}if(!e?.refresh_token)throw new ln;const{data:i,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(Oe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Zt())throw new Ql("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ql(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new wv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ql("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new wv("No code detected.");const{data:E,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:i,access_token:l,refresh_token:u,expires_in:d,expires_at:h,token_type:p}=e;if(!l||!d||!u||!p)throw new Ql("No session defined in URL");const g=Math.round(Date.now()/1e3),m=parseInt(d);let w=g+m;h&&(w=parseInt(h));const y=w-g;y*1e3<=os&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${m}s`);const j=w-m;g-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,w,g):g-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,w,g);const{data:_,error:C}=await this._getUser(l);if(C)throw C;const S={provider_token:a,provider_refresh_token:i,access_token:l,expires_in:m,expires_at:w,refresh_token:u,token_type:p,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:S,redirectType:e.type},error:null})}catch(a){if(Oe(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ia(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var a;const{data:i,error:l}=t;if(l)return this._returnResult({error:l});const u=(a=i.session)===null||a===void 0?void 0:a.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(HS(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await Ro(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=tE(),a={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:a}}}async _emitInitialSession(e){return await this._useSession(async t=>{var a,i;try{const{data:{session:l},error:u}=t;if(u)throw u;await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let a=null,i=null;this.flowType==="pkce"&&([a,i]=await Ya(this.storage,this.storageKey,!0));try{return await Me(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:a,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(Oe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:t,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(Oe(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:a,error:i}=await this._useSession(async l=>{var u,d,h,p,g;const{data:m,error:w}=l;if(w)throw w;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Me(this.fetch,"GET",y,{headers:this.headers,jwt:(g=(p=m.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return Zt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(a?.url),this._returnResult({data:{provider:e.provider,url:a?.url},error:null})}catch(a){if(Oe(a))return this._returnResult({data:{provider:e.provider,url:null},error:a});throw a}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var a;try{const{error:i,data:{session:l}}=t;if(i)throw i;const{options:u,provider:d,token:h,access_token:p,nonce:g}=e,m=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=l?.access_token)!==null&&a!==void 0?a:void 0,body:{provider:d,id_token:h,access_token:p,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:cn}),{data:w,error:y}=m;return y?this._returnResult({data:{user:null,session:null},error:y}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new Ja}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:y}))}catch(i){if(Oe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var a,i;const{data:l,error:u}=t;if(u)throw u;return await Me(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(Oe(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return await aE(async i=>(i>0&&await oE(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await Me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:cn})),(i,l)=>{const u=200*Math.pow(2,i);return l&&ih(l)&&Date.now()+u-a<os})}catch(a){if(this._debug(t,"error",a),Oe(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const a=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",a),Zt()&&!t.skipBrowserRedirect&&window.location.assign(a),{data:{provider:e,url:a},error:null}}async _recoverAndRefresh(){var e,t;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const i=await ia(this.storage,this.storageKey);if(i&&this.userStorage){let u=await ia(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:i.user},await as(this.userStorage,this.storageKey+"-user",u)),i.user=(e=u?.user)!==null&&e!==void 0?e:ch()}else if(i&&!i.user&&!i.user){const u=await ia(this.storage,this.storageKey+"-user");u&&u?.user?(i.user=u.user,await Ro(this.storage,this.storageKey+"-user"),await as(this.storage,this.storageKey,i)):i.user=ch()}if(this._debug(a,"session from storage",i),!this._isValidSession(i)){this._debug(a,"session is not valid"),i!==null&&await this._removeSession();return}const l=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<sh;if(this._debug(a,`session has${l?"":" not"} expired with margin of ${sh}s`),l){if(this.autoRefreshToken&&i.refresh_token){const{error:u}=await this._callRefreshToken(i.refresh_token);u&&(console.error(u),ih(u)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(i.access_token);!d&&u?.user?(i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(a,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(a,"error",i),console.error(i);return}finally{this._debug(a,"end")}}async _callRefreshToken(e){var t,a;if(!e)throw new ln;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new $c;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new ln;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={data:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(i,"error",l),Oe(l)){const u={data:null,error:l};return ih(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(l),l}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,a=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,t)}catch(h){l.push(h)}});if(await Promise.all(u),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),a=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&t.user&&await as(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const l=Sv(i);await as(this.storage,this.storageKey,l)}else{const i=Sv(t);await as(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ro(this.storage,this.storageKey),await Ro(this.storage,this.storageKey+"-code-verifier"),await Ro(this.storage,this.storageKey+"-user"),this.userStorage&&await Ro(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Zt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),os);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:a}}=t;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((a.expires_at*1e3-e)/os);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${os}ms, refresh threshold is ${Vh} ticks`),i<=Vh&&await this._callRefreshToken(a.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof T0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Zt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,a){const i=[`provider=${encodeURIComponent(t)}`];if(a?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&i.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[l,u]=await Ya(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});i.push(d.toString())}if(a?.queryParams){const l=new URLSearchParams(a.queryParams);i.push(l.toString())}return a?.skipBrowserRedirect&&i.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var a;const{data:i,error:l}=t;return l?this._returnResult({data:null,error:l}):await Me(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(a=i?.session)===null||a===void 0?void 0:a.access_token})})}catch(t){if(Oe(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var a,i;const{data:l,error:u}=t;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:p}=await Me(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&h.type==="totp"&&(!((i=h?.totp)===null||i===void 0)&&i.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(t){if(Oe(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var a;const{data:i,error:l}=t;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?IE(e.webauthn.credential_response):ME(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:h}=await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(a=i?.session)===null||a===void 0?void 0:a.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:h}))})}catch(t){if(Oe(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var a;const{data:i,error:l}=t;if(l)return this._returnResult({data:null,error:l});const u=await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(a=i?.session)===null||a===void 0?void 0:a.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:OE(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:DE(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Oe(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:a}=await this._challenge({factorId:e.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:a}=await this.getUser();if(a)return{data:null,error:a};const i={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t?.factors)!==null&&e!==void 0?e:[])i.all.push(l),l.status==="verified"&&i[l.factor_type].push(l);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:a},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=lh(a.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((t=(e=a.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(d="aal2");const p=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:a},error:i}=t;return i?this._returnResult({data:null,error:i}):a?await Me(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:a.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new ln})})}catch(t){if(Oe(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async a=>{const{data:{session:i},error:l}=a;if(l)return this._returnResult({data:null,error:l});if(!i)return this._returnResult({data:null,error:new ln});const u=await Me(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&Zt()&&!t?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(a){if(Oe(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(e,t){try{return await this._useSession(async a=>{const{data:{session:i},error:l}=a;if(l)return this._returnResult({data:null,error:l});if(!i)return this._returnResult({data:null,error:new ln});const u=await Me(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&Zt()&&!t?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(a){if(Oe(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(e,t={keys:[]}){let a=t.keys.find(d=>d.kid===e);if(a)return a;const i=Date.now();if(a=this.jwks.keys.find(d=>d.kid===e),a&&this.jwks_cached_at+qS>i)return a;const{data:l,error:u}=await Me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=i,a=l.keys.find(d=>d.kid===e),!a)?null:a}async getClaims(e,t={}){try{let a=e;if(!a){const{data:y,error:j}=await this.getSession();if(j||!y.session)return this._returnResult({data:null,error:j});a=y.session.access_token}const{header:i,payload:l,signature:u,raw:{header:d,payload:h}}=lh(a);t?.allowExpired||hE(l.exp);const p=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!p){const{error:y}=await this.getUser(a);if(y)throw y;return{data:{claims:l,header:i,signature:u},error:null}}const g=fE(i.alg),m=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,m,u,ZS(`${d}.${h}`)))throw new Hh("Invalid JWT signature");return{data:{claims:l,header:i,signature:u},error:null}}catch(a){if(Oe(a))return this._returnResult({data:null,error:a});throw a}}}yi.nextInstanceID={};const WE=yi;class HE extends WE{constructor(e){super(e)}}class GE{constructor(e,t,a){var i,l,u;this.supabaseUrl=e,this.supabaseKey=t;const d=LS(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,p={db:AS,realtime:OS,auth:Object.assign(Object.assign({},TS),{storageKey:h}),global:RS},g=$S(a??{},p);this.storageKey=(i=g.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=g.global.headers)!==null&&l!==void 0?l:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(m,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=g.auth)!==null&&u!==void 0?u:{},this.headers,g.global.fetch),this.fetch=MS(t,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new zC(new URL("rest/v1",d).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new kS(this.storageUrl.href,this.headers,this.fetch,a?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new MC(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,a)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:a}=await this.auth.getSession();return(t=(e=a.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:a,storage:i,userStorage:l,storageKey:u,flowType:d,lock:h,debug:p,throwOnError:g},m,w){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new HE({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),m),storageKey:u,autoRefreshToken:e,persistSession:t,detectSessionInUrl:a,storage:i,userStorage:l,flowType:d,lock:h,debug:p,throwOnError:g,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new nS(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,a)=>{this._handleTokenChanged(t,"CLIENT",a?.access_token)})}_handleTokenChanged(e,t,a){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const KE=(r,e,t)=>new GE(r,e,t);function JE(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}JE()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const YE="https://uyeubtqxwrhpuafcpgtg.supabase.co",XE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV5ZXVidHF4d3JocHVhZmNwZ3RnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzMjYwOTIsImV4cCI6MjA3ODkwMjA5Mn0.Qz1xjbBqDOpkOslxbxH7gOApFQb7heR455M9Dk15bK8",ce=KE(YE,XE,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});function Bo(){const[r,e]=x.useState({user:null,session:null,loading:!0}),[t,a]=x.useState(null);x.useEffect(()=>{ce.auth.getSession().then(({data:{session:j}})=>{e({user:j?.user??null,session:j,loading:!1}),j?.user&&i(j.user.id)});const{data:{subscription:y}}=ce.auth.onAuthStateChange((j,_)=>{e({user:_?.user??null,session:_,loading:!1}),_?.user?i(_.user.id):a(null)});return()=>y.unsubscribe()},[]);const i=async y=>{try{const{data:j,error:_}=await ce.from("profiles").select("*").eq("id",y).single();if(_)throw _;let C=[];try{const{data:S,error:E}=await ce.from("user_roles").select("role_id, roles(nome)").eq("user_id",y);E?console.error("Error loading user roles:",E):S&&(C=S.map(N=>N.roles?.nome).filter(N=>N!==null))}catch(S){console.error("Error fetching roles:",S)}a({...j,roles:C})}catch(j){console.error("Error loading user profile:",j)}},l=async(y,j,_)=>{try{const{data:C,error:S}=await ce.auth.signUp({email:y,password:j,options:{data:{nome_completo:_}}});if(S)throw S;return{data:C,error:null}}catch(C){return{data:null,error:C}}},u=async(y,j)=>{try{const{data:_,error:C}=await ce.auth.signInWithPassword({email:y,password:j});if(C)throw C;return{data:_,error:null}}catch(_){return{data:null,error:_}}},d=async()=>{try{const{error:y}=await ce.auth.signOut();if(y)throw y;return{error:null}}catch(y){return{error:y}}},h=async y=>{try{const{data:j,error:_}=await ce.auth.resetPasswordForEmail(y,{redirectTo:`${window.location.origin}/reset-password`});if(_)throw _;return{data:j,error:null}}catch(j){return{data:null,error:j}}},p=async y=>{try{const{data:j,error:_}=await ce.auth.updateUser({password:y});if(_)throw _;return{data:j,error:null}}catch(j){return{data:null,error:j}}},g=async y=>{if(!r.user)return{error:new Error("No user logged in")};try{const{error:j}=await ce.from("profiles").update(y).eq("id",r.user.id);if(j)throw j;return await i(r.user.id),{error:null}}catch(j){return{error:j}}},m=y=>t?.roles?.includes(y)??!1,w=()=>m("Administrador");return{user:r.user,session:r.session,profile:t,loading:r.loading,signUp:l,signIn:u,signOut:d,resetPassword:h,updatePassword:p,updateProfile:g,hasRole:m,isAdmin:w}}function Tv(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function io(...r){return e=>{let t=!1;const a=r.map(i=>{const l=Tv(i,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let i=0;i<a.length;i++){const l=a[i];typeof l=="function"?l():Tv(r[i],null)}}}}function lt(...r){return x.useCallback(io(...r),r)}var QE=Symbol.for("react.lazy"),wc=yf[" use ".trim().toString()];function ZE(r){return typeof r=="object"&&r!==null&&"then"in r}function I0(r){return r!=null&&typeof r=="object"&&"$$typeof"in r&&r.$$typeof===QE&&"_payload"in r&&ZE(r._payload)}function M0(r){const e=ek(r),t=x.forwardRef((a,i)=>{let{children:l,...u}=a;I0(l)&&typeof wc=="function"&&(l=wc(l._payload));const d=x.Children.toArray(l),h=d.find(rk);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return o.jsx(e,{...u,ref:i,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return o.jsx(e,{...u,ref:i,children:l})});return t.displayName=`${r}.Slot`,t}var F0=M0("Slot");function ek(r){const e=x.forwardRef((t,a)=>{let{children:i,...l}=t;if(I0(i)&&typeof wc=="function"&&(i=wc(i._payload)),x.isValidElement(i)){const u=ok(i),d=nk(l,i.props);return i.type!==x.Fragment&&(d.ref=a?io(a,u):u),x.cloneElement(i,d)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var tk=Symbol("radix.slottable");function rk(r){return x.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===tk}function nk(r,e){const t={...e};for(const a in e){const i=r[a],l=e[a];/^on[A-Z]/.test(a)?i&&l?t[a]=(...d)=>{const h=l(...d);return i(...d),h}:i&&(t[a]=i):a==="style"?t[a]={...i,...l}:a==="className"&&(t[a]=[i,l].filter(Boolean).join(" "))}return{...r,...t}}function ok(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function $0(r){var e,t,a="";if(typeof r=="string"||typeof r=="number")a+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=$0(r[e]))&&(a&&(a+=" "),a+=t)}else for(t in r)r[t]&&(a&&(a+=" "),a+=t);return a}function L0(){for(var r,e,t=0,a="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=$0(r))&&(a&&(a+=" "),a+=e);return a}const Ov=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,Dv=L0,z0=(r,e)=>t=>{var a;if(e?.variants==null)return Dv(r,t?.class,t?.className);const{variants:i,defaultVariants:l}=e,u=Object.keys(i).map(p=>{const g=t?.[p],m=l?.[p];if(g===null)return null;const w=Ov(g)||Ov(m);return i[p][w]}),d=t&&Object.entries(t).reduce((p,g)=>{let[m,w]=g;return w===void 0||(p[m]=w),p},{}),h=e==null||(a=e.compoundVariants)===null||a===void 0?void 0:a.reduce((p,g)=>{let{class:m,className:w,...y}=g;return Object.entries(y).every(j=>{let[_,C]=j;return Array.isArray(C)?C.includes({...l,...d}[_]):{...l,...d}[_]===C})?[...p,m,w]:p},[]);return Dv(r,u,h,t?.class,t?.className)},ak=(r,e)=>{const t=new Array(r.length+e.length);for(let a=0;a<r.length;a++)t[a]=r[a];for(let a=0;a<e.length;a++)t[r.length+a]=e[a];return t},sk=(r,e)=>({classGroupId:r,validator:e}),B0=(r=new Map,e=null,t)=>({nextPart:r,validators:e,classGroupId:t}),bc="-",Iv=[],ik="arbitrary..",lk=r=>{const e=uk(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:a}=r;return{getClassGroupId:u=>{if(u.startsWith("[")&&u.endsWith("]"))return ck(u);const d=u.split(bc),h=d[0]===""&&d.length>1?1:0;return U0(d,h,e)},getConflictingClassGroupIds:(u,d)=>{if(d){const h=a[u],p=t[u];return h?p?ak(p,h):h:p||Iv}return t[u]||Iv}}},U0=(r,e,t)=>{if(r.length-e===0)return t.classGroupId;const i=r[e],l=t.nextPart.get(i);if(l){const p=U0(r,e+1,l);if(p)return p}const u=t.validators;if(u===null)return;const d=e===0?r.join(bc):r.slice(e).join(bc),h=u.length;for(let p=0;p<h;p++){const g=u[p];if(g.validator(d))return g.classGroupId}},ck=r=>r.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=r.slice(1,-1),t=e.indexOf(":"),a=e.slice(0,t);return a?ik+a:void 0})(),uk=r=>{const{theme:e,classGroups:t}=r;return dk(t,e)},dk=(r,e)=>{const t=B0();for(const a in r){const i=r[a];Rf(i,t,a,e)}return t},Rf=(r,e,t,a)=>{const i=r.length;for(let l=0;l<i;l++){const u=r[l];hk(u,e,t,a)}},hk=(r,e,t,a)=>{if(typeof r=="string"){fk(r,e,t);return}if(typeof r=="function"){pk(r,e,t,a);return}mk(r,e,t,a)},fk=(r,e,t)=>{const a=r===""?e:V0(e,r);a.classGroupId=t},pk=(r,e,t,a)=>{if(gk(r)){Rf(r(a),e,t,a);return}e.validators===null&&(e.validators=[]),e.validators.push(sk(t,r))},mk=(r,e,t,a)=>{const i=Object.entries(r),l=i.length;for(let u=0;u<l;u++){const[d,h]=i[u];Rf(h,V0(e,d),t,a)}},V0=(r,e)=>{let t=r;const a=e.split(bc),i=a.length;for(let l=0;l<i;l++){const u=a[l];let d=t.nextPart.get(u);d||(d=B0(),t.nextPart.set(u,d)),t=d}return t},gk=r=>"isThemeGetter"in r&&r.isThemeGetter===!0,vk=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),a=Object.create(null);const i=(l,u)=>{t[l]=u,e++,e>r&&(e=0,a=t,t=Object.create(null))};return{get(l){let u=t[l];if(u!==void 0)return u;if((u=a[l])!==void 0)return i(l,u),u},set(l,u){l in t?t[l]=u:i(l,u)}}},Gh="!",Mv=":",xk=[],Fv=(r,e,t,a,i)=>({modifiers:r,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:a,isExternal:i}),yk=r=>{const{prefix:e,experimentalParseClassName:t}=r;let a=i=>{const l=[];let u=0,d=0,h=0,p;const g=i.length;for(let _=0;_<g;_++){const C=i[_];if(u===0&&d===0){if(C===Mv){l.push(i.slice(h,_)),h=_+1;continue}if(C==="/"){p=_;continue}}C==="["?u++:C==="]"?u--:C==="("?d++:C===")"&&d--}const m=l.length===0?i:i.slice(h);let w=m,y=!1;m.endsWith(Gh)?(w=m.slice(0,-1),y=!0):m.startsWith(Gh)&&(w=m.slice(1),y=!0);const j=p&&p>h?p-h:void 0;return Fv(l,y,w,j)};if(e){const i=e+Mv,l=a;a=u=>u.startsWith(i)?l(u.slice(i.length)):Fv(xk,!1,u,void 0,!0)}if(t){const i=a;a=l=>t({className:l,parseClassName:i})}return a},wk=r=>{const e=new Map;return r.orderSensitiveModifiers.forEach((t,a)=>{e.set(t,1e6+a)}),t=>{const a=[];let i=[];for(let l=0;l<t.length;l++){const u=t[l],d=u[0]==="[",h=e.has(u);d||h?(i.length>0&&(i.sort(),a.push(...i),i=[]),a.push(u)):i.push(u)}return i.length>0&&(i.sort(),a.push(...i)),a}},bk=r=>({cache:vk(r.cacheSize),parseClassName:yk(r),sortModifiers:wk(r),...lk(r)}),_k=/\s+/,jk=(r,e)=>{const{parseClassName:t,getClassGroupId:a,getConflictingClassGroupIds:i,sortModifiers:l}=e,u=[],d=r.trim().split(_k);let h="";for(let p=d.length-1;p>=0;p-=1){const g=d[p],{isExternal:m,modifiers:w,hasImportantModifier:y,baseClassName:j,maybePostfixModifierPosition:_}=t(g);if(m){h=g+(h.length>0?" "+h:h);continue}let C=!!_,S=a(C?j.substring(0,_):j);if(!S){if(!C){h=g+(h.length>0?" "+h:h);continue}if(S=a(j),!S){h=g+(h.length>0?" "+h:h);continue}C=!1}const E=w.length===0?"":w.length===1?w[0]:l(w).join(":"),N=y?E+Gh:E,D=N+S;if(u.indexOf(D)>-1)continue;u.push(D);const R=i(S,C);for(let O=0;O<R.length;++O){const B=R[O];u.push(N+B)}h=g+(h.length>0?" "+h:h)}return h},Ck=(...r)=>{let e=0,t,a,i="";for(;e<r.length;)(t=r[e++])&&(a=q0(t))&&(i&&(i+=" "),i+=a);return i},q0=r=>{if(typeof r=="string")return r;let e,t="";for(let a=0;a<r.length;a++)r[a]&&(e=q0(r[a]))&&(t&&(t+=" "),t+=e);return t},Sk=(r,...e)=>{let t,a,i,l;const u=h=>{const p=e.reduce((g,m)=>m(g),r());return t=bk(p),a=t.cache.get,i=t.cache.set,l=d,d(h)},d=h=>{const p=a(h);if(p)return p;const g=jk(h,t);return i(h,g),g};return l=u,(...h)=>l(Ck(...h))},Ek=[],zt=r=>{const e=t=>t[r]||Ek;return e.isThemeGetter=!0,e},W0=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,H0=/^\((?:(\w[\w-]*):)?(.+)\)$/i,kk=/^\d+\/\d+$/,Nk=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Pk=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Rk=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Ak=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Tk=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,es=r=>kk.test(r),Ke=r=>!!r&&!Number.isNaN(Number(r)),Ao=r=>!!r&&Number.isInteger(Number(r)),dh=r=>r.endsWith("%")&&Ke(r.slice(0,-1)),ro=r=>Nk.test(r),Ok=()=>!0,Dk=r=>Pk.test(r)&&!Rk.test(r),G0=()=>!1,Ik=r=>Ak.test(r),Mk=r=>Tk.test(r),Fk=r=>!Se(r)&&!Ee(r),$k=r=>gs(r,Y0,G0),Se=r=>W0.test(r),la=r=>gs(r,X0,Dk),hh=r=>gs(r,Vk,Ke),$v=r=>gs(r,K0,G0),Lk=r=>gs(r,J0,Mk),Zl=r=>gs(r,Q0,Ik),Ee=r=>H0.test(r),ii=r=>vs(r,X0),zk=r=>vs(r,qk),Lv=r=>vs(r,K0),Bk=r=>vs(r,Y0),Uk=r=>vs(r,J0),ec=r=>vs(r,Q0,!0),gs=(r,e,t)=>{const a=W0.exec(r);return a?a[1]?e(a[1]):t(a[2]):!1},vs=(r,e,t=!1)=>{const a=H0.exec(r);return a?a[1]?e(a[1]):t:!1},K0=r=>r==="position"||r==="percentage",J0=r=>r==="image"||r==="url",Y0=r=>r==="length"||r==="size"||r==="bg-size",X0=r=>r==="length",Vk=r=>r==="number",qk=r=>r==="family-name",Q0=r=>r==="shadow",Wk=()=>{const r=zt("color"),e=zt("font"),t=zt("text"),a=zt("font-weight"),i=zt("tracking"),l=zt("leading"),u=zt("breakpoint"),d=zt("container"),h=zt("spacing"),p=zt("radius"),g=zt("shadow"),m=zt("inset-shadow"),w=zt("text-shadow"),y=zt("drop-shadow"),j=zt("blur"),_=zt("perspective"),C=zt("aspect"),S=zt("ease"),E=zt("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],R=()=>[...D(),Ee,Se],O=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto","contain","none"],F=()=>[Ee,Se,h],H=()=>[es,"full","auto",...F()],Z=()=>[Ao,"none","subgrid",Ee,Se],ae=()=>["auto",{span:["full",Ao,Ee,Se]},Ao,Ee,Se],ue=()=>[Ao,"auto",Ee,Se],z=()=>["auto","min","max","fr",Ee,Se],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],se=()=>["start","end","center","stretch","center-safe","end-safe"],X=()=>["auto",...F()],re=()=>[es,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...F()],U=()=>[r,Ee,Se],I=()=>[...D(),Lv,$v,{position:[Ee,Se]}],P=()=>["no-repeat",{repeat:["","x","y","space","round"]}],A=()=>["auto","cover","contain",Bk,$k,{size:[Ee,Se]}],M=()=>[dh,ii,la],T=()=>["","none","full",p,Ee,Se],$=()=>["",Ke,ii,la],Q=()=>["solid","dashed","dotted","double"],pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],J=()=>[Ke,dh,Lv,$v],q=()=>["","none",j,Ee,Se],le=()=>["none",Ke,Ee,Se],de=()=>["none",Ke,Ee,Se],we=()=>[Ke,Ee,Se],je=()=>[es,"full",...F()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ro],breakpoint:[ro],color:[Ok],container:[ro],"drop-shadow":[ro],ease:["in","out","in-out"],font:[Fk],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ro],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ro],shadow:[ro],spacing:["px",Ke],text:[ro],"text-shadow":[ro],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",es,Se,Ee,C]}],container:["container"],columns:[{columns:[Ke,Se,Ee,d]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:R()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:H()}],"inset-x":[{"inset-x":H()}],"inset-y":[{"inset-y":H()}],start:[{start:H()}],end:[{end:H()}],top:[{top:H()}],right:[{right:H()}],bottom:[{bottom:H()}],left:[{left:H()}],visibility:["visible","invisible","collapse"],z:[{z:[Ao,"auto",Ee,Se]}],basis:[{basis:[es,"full","auto",d,...F()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ke,es,"auto","initial","none",Se]}],grow:[{grow:["",Ke,Ee,Se]}],shrink:[{shrink:["",Ke,Ee,Se]}],order:[{order:[Ao,"first","last","none",Ee,Se]}],"grid-cols":[{"grid-cols":Z()}],"col-start-end":[{col:ae()}],"col-start":[{"col-start":ue()}],"col-end":[{"col-end":ue()}],"grid-rows":[{"grid-rows":Z()}],"row-start-end":[{row:ae()}],"row-start":[{"row-start":ue()}],"row-end":[{"row-end":ue()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":z()}],"auto-rows":[{"auto-rows":z()}],gap:[{gap:F()}],"gap-x":[{"gap-x":F()}],"gap-y":[{"gap-y":F()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...se(),"normal"]}],"justify-self":[{"justify-self":["auto",...se()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...se(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...se(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...se(),"baseline"]}],"place-self":[{"place-self":["auto",...se()]}],p:[{p:F()}],px:[{px:F()}],py:[{py:F()}],ps:[{ps:F()}],pe:[{pe:F()}],pt:[{pt:F()}],pr:[{pr:F()}],pb:[{pb:F()}],pl:[{pl:F()}],m:[{m:X()}],mx:[{mx:X()}],my:[{my:X()}],ms:[{ms:X()}],me:[{me:X()}],mt:[{mt:X()}],mr:[{mr:X()}],mb:[{mb:X()}],ml:[{ml:X()}],"space-x":[{"space-x":F()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":F()}],"space-y-reverse":["space-y-reverse"],size:[{size:re()}],w:[{w:[d,"screen",...re()]}],"min-w":[{"min-w":[d,"screen","none",...re()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[u]},...re()]}],h:[{h:["screen","lh",...re()]}],"min-h":[{"min-h":["screen","lh","none",...re()]}],"max-h":[{"max-h":["screen","lh",...re()]}],"font-size":[{text:["base",t,ii,la]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Ee,hh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",dh,Se]}],"font-family":[{font:[zk,Se,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ee,Se]}],"line-clamp":[{"line-clamp":[Ke,"none",Ee,hh]}],leading:[{leading:[l,...F()]}],"list-image":[{"list-image":["none",Ee,Se]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ee,Se]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:U()}],"text-color":[{text:U()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ke,"from-font","auto",Ee,la]}],"text-decoration-color":[{decoration:U()}],"underline-offset":[{"underline-offset":[Ke,"auto",Ee,Se]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ee,Se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ee,Se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:I()}],"bg-repeat":[{bg:P()}],"bg-size":[{bg:A()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ao,Ee,Se],radial:["",Ee,Se],conic:[Ao,Ee,Se]},Uk,Lk]}],"bg-color":[{bg:U()}],"gradient-from-pos":[{from:M()}],"gradient-via-pos":[{via:M()}],"gradient-to-pos":[{to:M()}],"gradient-from":[{from:U()}],"gradient-via":[{via:U()}],"gradient-to":[{to:U()}],rounded:[{rounded:T()}],"rounded-s":[{"rounded-s":T()}],"rounded-e":[{"rounded-e":T()}],"rounded-t":[{"rounded-t":T()}],"rounded-r":[{"rounded-r":T()}],"rounded-b":[{"rounded-b":T()}],"rounded-l":[{"rounded-l":T()}],"rounded-ss":[{"rounded-ss":T()}],"rounded-se":[{"rounded-se":T()}],"rounded-ee":[{"rounded-ee":T()}],"rounded-es":[{"rounded-es":T()}],"rounded-tl":[{"rounded-tl":T()}],"rounded-tr":[{"rounded-tr":T()}],"rounded-br":[{"rounded-br":T()}],"rounded-bl":[{"rounded-bl":T()}],"border-w":[{border:$()}],"border-w-x":[{"border-x":$()}],"border-w-y":[{"border-y":$()}],"border-w-s":[{"border-s":$()}],"border-w-e":[{"border-e":$()}],"border-w-t":[{"border-t":$()}],"border-w-r":[{"border-r":$()}],"border-w-b":[{"border-b":$()}],"border-w-l":[{"border-l":$()}],"divide-x":[{"divide-x":$()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":$()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Q(),"hidden","none"]}],"divide-style":[{divide:[...Q(),"hidden","none"]}],"border-color":[{border:U()}],"border-color-x":[{"border-x":U()}],"border-color-y":[{"border-y":U()}],"border-color-s":[{"border-s":U()}],"border-color-e":[{"border-e":U()}],"border-color-t":[{"border-t":U()}],"border-color-r":[{"border-r":U()}],"border-color-b":[{"border-b":U()}],"border-color-l":[{"border-l":U()}],"divide-color":[{divide:U()}],"outline-style":[{outline:[...Q(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ke,Ee,Se]}],"outline-w":[{outline:["",Ke,ii,la]}],"outline-color":[{outline:U()}],shadow:[{shadow:["","none",g,ec,Zl]}],"shadow-color":[{shadow:U()}],"inset-shadow":[{"inset-shadow":["none",m,ec,Zl]}],"inset-shadow-color":[{"inset-shadow":U()}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:U()}],"ring-offset-w":[{"ring-offset":[Ke,la]}],"ring-offset-color":[{"ring-offset":U()}],"inset-ring-w":[{"inset-ring":$()}],"inset-ring-color":[{"inset-ring":U()}],"text-shadow":[{"text-shadow":["none",w,ec,Zl]}],"text-shadow-color":[{"text-shadow":U()}],opacity:[{opacity:[Ke,Ee,Se]}],"mix-blend":[{"mix-blend":[...pe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":pe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ke]}],"mask-image-linear-from-pos":[{"mask-linear-from":J()}],"mask-image-linear-to-pos":[{"mask-linear-to":J()}],"mask-image-linear-from-color":[{"mask-linear-from":U()}],"mask-image-linear-to-color":[{"mask-linear-to":U()}],"mask-image-t-from-pos":[{"mask-t-from":J()}],"mask-image-t-to-pos":[{"mask-t-to":J()}],"mask-image-t-from-color":[{"mask-t-from":U()}],"mask-image-t-to-color":[{"mask-t-to":U()}],"mask-image-r-from-pos":[{"mask-r-from":J()}],"mask-image-r-to-pos":[{"mask-r-to":J()}],"mask-image-r-from-color":[{"mask-r-from":U()}],"mask-image-r-to-color":[{"mask-r-to":U()}],"mask-image-b-from-pos":[{"mask-b-from":J()}],"mask-image-b-to-pos":[{"mask-b-to":J()}],"mask-image-b-from-color":[{"mask-b-from":U()}],"mask-image-b-to-color":[{"mask-b-to":U()}],"mask-image-l-from-pos":[{"mask-l-from":J()}],"mask-image-l-to-pos":[{"mask-l-to":J()}],"mask-image-l-from-color":[{"mask-l-from":U()}],"mask-image-l-to-color":[{"mask-l-to":U()}],"mask-image-x-from-pos":[{"mask-x-from":J()}],"mask-image-x-to-pos":[{"mask-x-to":J()}],"mask-image-x-from-color":[{"mask-x-from":U()}],"mask-image-x-to-color":[{"mask-x-to":U()}],"mask-image-y-from-pos":[{"mask-y-from":J()}],"mask-image-y-to-pos":[{"mask-y-to":J()}],"mask-image-y-from-color":[{"mask-y-from":U()}],"mask-image-y-to-color":[{"mask-y-to":U()}],"mask-image-radial":[{"mask-radial":[Ee,Se]}],"mask-image-radial-from-pos":[{"mask-radial-from":J()}],"mask-image-radial-to-pos":[{"mask-radial-to":J()}],"mask-image-radial-from-color":[{"mask-radial-from":U()}],"mask-image-radial-to-color":[{"mask-radial-to":U()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":D()}],"mask-image-conic-pos":[{"mask-conic":[Ke]}],"mask-image-conic-from-pos":[{"mask-conic-from":J()}],"mask-image-conic-to-pos":[{"mask-conic-to":J()}],"mask-image-conic-from-color":[{"mask-conic-from":U()}],"mask-image-conic-to-color":[{"mask-conic-to":U()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:I()}],"mask-repeat":[{mask:P()}],"mask-size":[{mask:A()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ee,Se]}],filter:[{filter:["","none",Ee,Se]}],blur:[{blur:q()}],brightness:[{brightness:[Ke,Ee,Se]}],contrast:[{contrast:[Ke,Ee,Se]}],"drop-shadow":[{"drop-shadow":["","none",y,ec,Zl]}],"drop-shadow-color":[{"drop-shadow":U()}],grayscale:[{grayscale:["",Ke,Ee,Se]}],"hue-rotate":[{"hue-rotate":[Ke,Ee,Se]}],invert:[{invert:["",Ke,Ee,Se]}],saturate:[{saturate:[Ke,Ee,Se]}],sepia:[{sepia:["",Ke,Ee,Se]}],"backdrop-filter":[{"backdrop-filter":["","none",Ee,Se]}],"backdrop-blur":[{"backdrop-blur":q()}],"backdrop-brightness":[{"backdrop-brightness":[Ke,Ee,Se]}],"backdrop-contrast":[{"backdrop-contrast":[Ke,Ee,Se]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ke,Ee,Se]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ke,Ee,Se]}],"backdrop-invert":[{"backdrop-invert":["",Ke,Ee,Se]}],"backdrop-opacity":[{"backdrop-opacity":[Ke,Ee,Se]}],"backdrop-saturate":[{"backdrop-saturate":[Ke,Ee,Se]}],"backdrop-sepia":[{"backdrop-sepia":["",Ke,Ee,Se]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":F()}],"border-spacing-x":[{"border-spacing-x":F()}],"border-spacing-y":[{"border-spacing-y":F()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ee,Se]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ke,"initial",Ee,Se]}],ease:[{ease:["linear","initial",S,Ee,Se]}],delay:[{delay:[Ke,Ee,Se]}],animate:[{animate:["none",E,Ee,Se]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[_,Ee,Se]}],"perspective-origin":[{"perspective-origin":R()}],rotate:[{rotate:le()}],"rotate-x":[{"rotate-x":le()}],"rotate-y":[{"rotate-y":le()}],"rotate-z":[{"rotate-z":le()}],scale:[{scale:de()}],"scale-x":[{"scale-x":de()}],"scale-y":[{"scale-y":de()}],"scale-z":[{"scale-z":de()}],"scale-3d":["scale-3d"],skew:[{skew:we()}],"skew-x":[{"skew-x":we()}],"skew-y":[{"skew-y":we()}],transform:[{transform:[Ee,Se,"","none","gpu","cpu"]}],"transform-origin":[{origin:R()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:je()}],"translate-x":[{"translate-x":je()}],"translate-y":[{"translate-y":je()}],"translate-z":[{"translate-z":je()}],"translate-none":["translate-none"],accent:[{accent:U()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:U()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ee,Se]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ee,Se]}],fill:[{fill:["none",...U()]}],"stroke-w":[{stroke:[Ke,ii,la,hh]}],stroke:[{stroke:["none",...U()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Hk=Sk(Wk);function Le(...r){return Hk(L0(r))}const Af=z0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),xe=x.forwardRef(({className:r,variant:e,size:t,asChild:a=!1,...i},l)=>{const u=a?F0:"button";return o.jsx(u,{ref:l,"data-slot":"button",className:Le(Af({variant:e,size:t,className:r})),...i})});xe.displayName="Button";function oe({className:r,type:e,...t}){return o.jsx("input",{type:e,"data-slot":"input",className:Le("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...t})}var Sn=xf();const Z0=Ic(Sn);var Gk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Kk=Gk.reduce((r,e)=>{const t=M0(`Primitive.${e}`),a=x.forwardRef((i,l)=>{const{asChild:u,...d}=i,h=u?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(h,{...d,ref:l})});return a.displayName=`Primitive.${e}`,{...r,[e]:a}},{}),Jk="Label",ey=x.forwardRef((r,e)=>o.jsx(Kk.label,{...r,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(r.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));ey.displayName=Jk;var Yk=ey;function K({className:r,...e}){return o.jsx(Yk,{"data-slot":"label",className:Le("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...e})}function Xk(r){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}const Qk=r=>{switch(r){case"success":return t1;case"info":return n1;case"warning":return r1;case"error":return o1;default:return null}},Zk=Array(12).fill(0),e1=({visible:r,className:e})=>fe.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":r},fe.createElement("div",{className:"sonner-spinner"},Zk.map((t,a)=>fe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),t1=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),r1=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),n1=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),o1=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),a1=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},fe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),fe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),s1=()=>{const[r,e]=fe.useState(document.hidden);return fe.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),r};let Kh=1;class i1{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:a,...i}=e,l=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Kh++,u=this.toasts.find(h=>h.id===l),d=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),u?this.toasts=this.toasts.map(h=>h.id===l?(this.publish({...h,...e,id:l,title:a}),{...h,...e,id:l,dismissible:d,title:a}):h):this.addToast({title:a,...i,dismissible:d,id:l}),l},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(a=>a({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let a;t.loading!==void 0&&(a=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let l=a!==void 0,u;const d=i.then(async p=>{if(u=["resolve",p],fe.isValidElement(p))l=!1,this.create({id:a,type:"default",message:p});else if(c1(p)&&!p.ok){l=!1;const m=typeof t.error=="function"?await t.error(`HTTP error! status: ${p.status}`):t.error,w=typeof t.description=="function"?await t.description(`HTTP error! status: ${p.status}`):t.description,j=typeof m=="object"&&!fe.isValidElement(m)?m:{message:m};this.create({id:a,type:"error",description:w,...j})}else if(p instanceof Error){l=!1;const m=typeof t.error=="function"?await t.error(p):t.error,w=typeof t.description=="function"?await t.description(p):t.description,j=typeof m=="object"&&!fe.isValidElement(m)?m:{message:m};this.create({id:a,type:"error",description:w,...j})}else if(t.success!==void 0){l=!1;const m=typeof t.success=="function"?await t.success(p):t.success,w=typeof t.description=="function"?await t.description(p):t.description,j=typeof m=="object"&&!fe.isValidElement(m)?m:{message:m};this.create({id:a,type:"success",description:w,...j})}}).catch(async p=>{if(u=["reject",p],t.error!==void 0){l=!1;const g=typeof t.error=="function"?await t.error(p):t.error,m=typeof t.description=="function"?await t.description(p):t.description,y=typeof g=="object"&&!fe.isValidElement(g)?g:{message:g};this.create({id:a,type:"error",description:m,...y})}}).finally(()=>{l&&(this.dismiss(a),a=void 0),t.finally==null||t.finally.call(t)}),h=()=>new Promise((p,g)=>d.then(()=>u[0]==="reject"?g(u[1]):p(u[1])).catch(g));return typeof a!="string"&&typeof a!="number"?{unwrap:h}:Object.assign(a,{unwrap:h})},this.custom=(e,t)=>{const a=t?.id||Kh++;return this.create({jsx:e(a),id:a,...t}),a},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const jr=new i1,l1=(r,e)=>{const t=e?.id||Kh++;return jr.addToast({title:r,...e,id:t}),t},c1=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",u1=l1,d1=()=>jr.toasts,h1=()=>jr.getActiveToasts(),ee=Object.assign(u1,{success:jr.success,info:jr.info,warning:jr.warning,error:jr.error,custom:jr.custom,message:jr.message,promise:jr.promise,dismiss:jr.dismiss,loading:jr.loading},{getHistory:d1,getToasts:h1});Xk("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function tc(r){return r.label!==void 0}const f1=3,p1="24px",m1="16px",zv=4e3,g1=356,v1=14,x1=45,y1=200;function Cn(...r){return r.filter(Boolean).join(" ")}function w1(r){const[e,t]=r.split("-"),a=[];return e&&a.push(e),t&&a.push(t),a}const b1=r=>{var e,t,a,i,l,u,d,h,p;const{invert:g,toast:m,unstyled:w,interacting:y,setHeights:j,visibleToasts:_,heights:C,index:S,toasts:E,expanded:N,removeToast:D,defaultRichColors:R,closeButton:O,style:B,cancelButtonStyle:F,actionButtonStyle:H,className:Z="",descriptionClassName:ae="",duration:ue,position:z,gap:V,expandByDefault:se,classNames:X,icons:re,closeButtonAriaLabel:U="Close toast"}=r,[I,P]=fe.useState(null),[A,M]=fe.useState(null),[T,$]=fe.useState(!1),[Q,pe]=fe.useState(!1),[J,q]=fe.useState(!1),[le,de]=fe.useState(!1),[we,je]=fe.useState(!1),[ye,Ae]=fe.useState(0),[ze,$e]=fe.useState(0),Ge=fe.useRef(m.duration||ue||zv),Ct=fe.useRef(null),st=fe.useRef(null),bt=S===0,Vt=S+1<=_,at=m.type,It=m.dismissible!==!1,Ar=m.className||"",Ca=m.descriptionClassName||"",Wn=fe.useMemo(()=>C.findIndex(Te=>Te.toastId===m.id)||0,[C,m.id]),zr=fe.useMemo(()=>{var Te;return(Te=m.closeButton)!=null?Te:O},[m.closeButton,O]),hr=fe.useMemo(()=>m.duration||ue||zv,[m.duration,ue]),Br=fe.useRef(0),lr=fe.useRef(0),Jt=fe.useRef(0),Zr=fe.useRef(null),[Sa,Ea]=z.split("-"),co=fe.useMemo(()=>C.reduce((Te,dt,ct)=>ct>=Wn?Te:Te+dt.height,0),[C,Wn]),Hn=s1(),Wo=m.invert||g,vn=at==="loading";lr.current=fe.useMemo(()=>Wn*V+co,[Wn,co]),fe.useEffect(()=>{Ge.current=hr},[hr]),fe.useEffect(()=>{$(!0)},[]),fe.useEffect(()=>{const Te=st.current;if(Te){const dt=Te.getBoundingClientRect().height;return $e(dt),j(ct=>[{toastId:m.id,height:dt,position:m.position},...ct]),()=>j(ct=>ct.filter(ht=>ht.toastId!==m.id))}},[j,m.id]),fe.useLayoutEffect(()=>{if(!T)return;const Te=st.current,dt=Te.style.height;Te.style.height="auto";const ct=Te.getBoundingClientRect().height;Te.style.height=dt,$e(ct),j(ht=>ht.find(gt=>gt.toastId===m.id)?ht.map(gt=>gt.toastId===m.id?{...gt,height:ct}:gt):[{toastId:m.id,height:ct,position:m.position},...ht])},[T,m.title,m.description,j,m.id,m.jsx,m.action,m.cancel]);const fr=fe.useCallback(()=>{pe(!0),Ae(lr.current),j(Te=>Te.filter(dt=>dt.toastId!==m.id)),setTimeout(()=>{D(m)},y1)},[m,D,j,lr]);fe.useEffect(()=>{if(m.promise&&at==="loading"||m.duration===1/0||m.type==="loading")return;let Te;return N||y||Hn?(()=>{if(Jt.current<Br.current){const ht=new Date().getTime()-Br.current;Ge.current=Ge.current-ht}Jt.current=new Date().getTime()})():(()=>{Ge.current!==1/0&&(Br.current=new Date().getTime(),Te=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),fr()},Ge.current))})(),()=>clearTimeout(Te)},[N,y,m,at,Hn,fr]),fe.useEffect(()=>{m.delete&&(fr(),m.onDismiss==null||m.onDismiss.call(m,m))},[fr,m.delete]);function Ho(){var Te;if(re?.loading){var dt;return fe.createElement("div",{className:Cn(X?.loader,m==null||(dt=m.classNames)==null?void 0:dt.loader,"sonner-loader"),"data-visible":at==="loading"},re.loading)}return fe.createElement(e1,{className:Cn(X?.loader,m==null||(Te=m.classNames)==null?void 0:Te.loader),visible:at==="loading"})}const xn=m.icon||re?.[at]||Qk(at);var vt,Mt;return fe.createElement("li",{tabIndex:0,ref:st,className:Cn(Z,Ar,X?.toast,m==null||(e=m.classNames)==null?void 0:e.toast,X?.default,X?.[at],m==null||(t=m.classNames)==null?void 0:t[at]),"data-sonner-toast":"","data-rich-colors":(vt=m.richColors)!=null?vt:R,"data-styled":!(m.jsx||m.unstyled||w),"data-mounted":T,"data-promise":!!m.promise,"data-swiped":we,"data-removed":Q,"data-visible":Vt,"data-y-position":Sa,"data-x-position":Ea,"data-index":S,"data-front":bt,"data-swiping":J,"data-dismissible":It,"data-type":at,"data-invert":Wo,"data-swipe-out":le,"data-swipe-direction":A,"data-expanded":!!(N||se&&T),"data-testid":m.testId,style:{"--index":S,"--toasts-before":S,"--z-index":E.length-S,"--offset":`${Q?ye:lr.current}px`,"--initial-height":se?"auto":`${ze}px`,...B,...m.style},onDragEnd:()=>{q(!1),P(null),Zr.current=null},onPointerDown:Te=>{Te.button!==2&&(vn||!It||(Ct.current=new Date,Ae(lr.current),Te.target.setPointerCapture(Te.pointerId),Te.target.tagName!=="BUTTON"&&(q(!0),Zr.current={x:Te.clientX,y:Te.clientY})))},onPointerUp:()=>{var Te,dt,ct;if(le||!It)return;Zr.current=null;const ht=Number(((Te=st.current)==null?void 0:Te.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ft=Number(((dt=st.current)==null?void 0:dt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),gt=new Date().getTime()-((ct=Ct.current)==null?void 0:ct.getTime()),Ze=I==="x"?ht:Ft,Yt=Math.abs(Ze)/gt;if(Math.abs(Ze)>=x1||Yt>.11){Ae(lr.current),m.onDismiss==null||m.onDismiss.call(m,m),M(I==="x"?ht>0?"right":"left":Ft>0?"down":"up"),fr(),de(!0);return}else{var mt,Et;(mt=st.current)==null||mt.style.setProperty("--swipe-amount-x","0px"),(Et=st.current)==null||Et.style.setProperty("--swipe-amount-y","0px")}je(!1),q(!1),P(null)},onPointerMove:Te=>{var dt,ct,ht;if(!Zr.current||!It||((dt=window.getSelection())==null?void 0:dt.toString().length)>0)return;const gt=Te.clientY-Zr.current.y,Ze=Te.clientX-Zr.current.x;var Yt;const mt=(Yt=r.swipeDirections)!=null?Yt:w1(z);!I&&(Math.abs(Ze)>1||Math.abs(gt)>1)&&P(Math.abs(Ze)>Math.abs(gt)?"x":"y");let Et={x:0,y:0};const pr=qt=>1/(1.5+Math.abs(qt)/20);if(I==="y"){if(mt.includes("top")||mt.includes("bottom"))if(mt.includes("top")&&gt<0||mt.includes("bottom")&&gt>0)Et.y=gt;else{const qt=gt*pr(gt);Et.y=Math.abs(qt)<Math.abs(gt)?qt:gt}}else if(I==="x"&&(mt.includes("left")||mt.includes("right")))if(mt.includes("left")&&Ze<0||mt.includes("right")&&Ze>0)Et.x=Ze;else{const qt=Ze*pr(Ze);Et.x=Math.abs(qt)<Math.abs(Ze)?qt:Ze}(Math.abs(Et.x)>0||Math.abs(Et.y)>0)&&je(!0),(ct=st.current)==null||ct.style.setProperty("--swipe-amount-x",`${Et.x}px`),(ht=st.current)==null||ht.style.setProperty("--swipe-amount-y",`${Et.y}px`)}},zr&&!m.jsx&&at!=="loading"?fe.createElement("button",{"aria-label":U,"data-disabled":vn,"data-close-button":!0,onClick:vn||!It?()=>{}:()=>{fr(),m.onDismiss==null||m.onDismiss.call(m,m)},className:Cn(X?.closeButton,m==null||(a=m.classNames)==null?void 0:a.closeButton)},(Mt=re?.close)!=null?Mt:a1):null,(at||m.icon||m.promise)&&m.icon!==null&&(re?.[at]!==null||m.icon)?fe.createElement("div",{"data-icon":"",className:Cn(X?.icon,m==null||(i=m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Ho():null,m.type!=="loading"?xn:null):null,fe.createElement("div",{"data-content":"",className:Cn(X?.content,m==null||(l=m.classNames)==null?void 0:l.content)},fe.createElement("div",{"data-title":"",className:Cn(X?.title,m==null||(u=m.classNames)==null?void 0:u.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?fe.createElement("div",{"data-description":"",className:Cn(ae,Ca,X?.description,m==null||(d=m.classNames)==null?void 0:d.description)},typeof m.description=="function"?m.description():m.description):null),fe.isValidElement(m.cancel)?m.cancel:m.cancel&&tc(m.cancel)?fe.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||F,onClick:Te=>{tc(m.cancel)&&It&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,Te),fr())},className:Cn(X?.cancelButton,m==null||(h=m.classNames)==null?void 0:h.cancelButton)},m.cancel.label):null,fe.isValidElement(m.action)?m.action:m.action&&tc(m.action)?fe.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||H,onClick:Te=>{tc(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,Te),!Te.defaultPrevented&&fr())},className:Cn(X?.actionButton,m==null||(p=m.classNames)==null?void 0:p.actionButton)},m.action.label):null)};function Bv(){if(typeof window>"u"||typeof document>"u")return"ltr";const r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}function _1(r,e){const t={};return[r,e].forEach((a,i)=>{const l=i===1,u=l?"--mobile-offset":"--offset",d=l?m1:p1;function h(p){["top","right","bottom","left"].forEach(g=>{t[`${u}-${g}`]=typeof p=="number"?`${p}px`:p})}typeof a=="number"||typeof a=="string"?h(a):typeof a=="object"?["top","right","bottom","left"].forEach(p=>{a[p]===void 0?t[`${u}-${p}`]=d:t[`${u}-${p}`]=typeof a[p]=="number"?`${a[p]}px`:a[p]}):h(d)}),t}const j1=fe.forwardRef(function(e,t){const{id:a,invert:i,position:l="bottom-right",hotkey:u=["altKey","KeyT"],expand:d,closeButton:h,className:p,offset:g,mobileOffset:m,theme:w="light",richColors:y,duration:j,style:_,visibleToasts:C=f1,toastOptions:S,dir:E=Bv(),gap:N=v1,icons:D,containerAriaLabel:R="Notifications"}=e,[O,B]=fe.useState([]),F=fe.useMemo(()=>a?O.filter(T=>T.toasterId===a):O.filter(T=>!T.toasterId),[O,a]),H=fe.useMemo(()=>Array.from(new Set([l].concat(F.filter(T=>T.position).map(T=>T.position)))),[F,l]),[Z,ae]=fe.useState([]),[ue,z]=fe.useState(!1),[V,se]=fe.useState(!1),[X,re]=fe.useState(w!=="system"?w:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=fe.useRef(null),I=u.join("+").replace(/Key/g,"").replace(/Digit/g,""),P=fe.useRef(null),A=fe.useRef(!1),M=fe.useCallback(T=>{B($=>{var Q;return(Q=$.find(pe=>pe.id===T.id))!=null&&Q.delete||jr.dismiss(T.id),$.filter(({id:pe})=>pe!==T.id)})},[]);return fe.useEffect(()=>jr.subscribe(T=>{if(T.dismiss){requestAnimationFrame(()=>{B($=>$.map(Q=>Q.id===T.id?{...Q,delete:!0}:Q))});return}setTimeout(()=>{Z0.flushSync(()=>{B($=>{const Q=$.findIndex(pe=>pe.id===T.id);return Q!==-1?[...$.slice(0,Q),{...$[Q],...T},...$.slice(Q+1)]:[T,...$]})})})}),[O]),fe.useEffect(()=>{if(w!=="system"){re(w);return}if(w==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?re("dark"):re("light")),typeof window>"u")return;const T=window.matchMedia("(prefers-color-scheme: dark)");try{T.addEventListener("change",({matches:$})=>{re($?"dark":"light")})}catch{T.addListener(({matches:Q})=>{try{re(Q?"dark":"light")}catch(pe){console.error(pe)}})}},[w]),fe.useEffect(()=>{O.length<=1&&z(!1)},[O]),fe.useEffect(()=>{const T=$=>{var Q;if(u.every(q=>$[q]||$.code===q)){var J;z(!0),(J=U.current)==null||J.focus()}$.code==="Escape"&&(document.activeElement===U.current||(Q=U.current)!=null&&Q.contains(document.activeElement))&&z(!1)};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[u]),fe.useEffect(()=>{if(U.current)return()=>{P.current&&(P.current.focus({preventScroll:!0}),P.current=null,A.current=!1)}},[U.current]),fe.createElement("section",{ref:t,"aria-label":`${R} ${I}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},H.map((T,$)=>{var Q;const[pe,J]=T.split("-");return F.length?fe.createElement("ol",{key:T,dir:E==="auto"?Bv():E,tabIndex:-1,ref:U,className:p,"data-sonner-toaster":!0,"data-sonner-theme":X,"data-y-position":pe,"data-x-position":J,style:{"--front-toast-height":`${((Q=Z[0])==null?void 0:Q.height)||0}px`,"--width":`${g1}px`,"--gap":`${N}px`,..._,..._1(g,m)},onBlur:q=>{A.current&&!q.currentTarget.contains(q.relatedTarget)&&(A.current=!1,P.current&&(P.current.focus({preventScroll:!0}),P.current=null))},onFocus:q=>{q.target instanceof HTMLElement&&q.target.dataset.dismissible==="false"||A.current||(A.current=!0,P.current=q.relatedTarget)},onMouseEnter:()=>z(!0),onMouseMove:()=>z(!0),onMouseLeave:()=>{V||z(!1)},onDragEnd:()=>z(!1),onPointerDown:q=>{q.target instanceof HTMLElement&&q.target.dataset.dismissible==="false"||se(!0)},onPointerUp:()=>se(!1)},F.filter(q=>!q.position&&$===0||q.position===T).map((q,le)=>{var de,we;return fe.createElement(b1,{key:q.id,icons:D,index:le,toast:q,defaultRichColors:y,duration:(de=S?.duration)!=null?de:j,className:S?.className,descriptionClassName:S?.descriptionClassName,invert:i,visibleToasts:C,closeButton:(we=S?.closeButton)!=null?we:h,interacting:V,position:T,style:S?.style,unstyled:S?.unstyled,classNames:S?.classNames,cancelButtonStyle:S?.cancelButtonStyle,actionButtonStyle:S?.actionButtonStyle,closeButtonAriaLabel:S?.closeButtonAriaLabel,removeToast:M,toasts:F.filter(je=>je.position==q.position),heights:Z.filter(je=>je.position==q.position),setHeights:ae,expandByDefault:d,gap:N,expanded:ue,swipeDirections:e.swipeDirections})})):null}))});/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),S1=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),Uv=r=>{const e=S1(r);return e.charAt(0).toUpperCase()+e.slice(1)},ty=(...r)=>r.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var E1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=x.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:i="",children:l,iconNode:u,...d},h)=>x.createElement("svg",{ref:h,...E1,width:e,height:e,stroke:r,strokeWidth:a?Number(t)*24/Number(e):t,className:ty("lucide",i),...d},[...u.map(([p,g])=>x.createElement(p,g)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=(r,e)=>{const t=x.forwardRef(({className:a,...i},l)=>x.createElement(k1,{ref:l,iconNode:e,className:ty(`lucide-${C1(Uv(r))}`,`lucide-${r}`,a),...i}));return t.displayName=Uv(r),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Uo=Qe("arrow-left",N1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],R1=Qe("arrow-right",P1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],T1=Qe("bell",A1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Jh=Qe("calculator",O1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Yh=Qe("calendar",D1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ry=Qe("check",I1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Tf=Qe("chevron-down",M1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],$1=Qe("chevron-up",F1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"M16 2v2",key:"scm5qe"}],["path",{d:"M7 22v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1waht3"}],["path",{d:"M8 2v2",key:"pbkmx"}],["circle",{cx:"12",cy:"11",r:"3",key:"itu57m"}],["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",key:"12vinp"}]],z1=Qe("contact",L1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],U1=Qe("credit-card",B1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ny=Qe("dollar-sign",V1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Lc=Qe("download",q1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],xs=Qe("ellipsis-vertical",W1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],G1=Qe("eye",H1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_c=Qe("file-text",K1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Y1=Qe("grip-vertical",J1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Q1=Qe("house",X1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M6 5v11",key:"mdvv1e"}],["path",{d:"M12 5v6",key:"14ar3b"}],["path",{d:"M18 5v14",key:"7ji314"}]],Xh=Qe("kanban",Z1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],tN=Qe("layout-dashboard",eN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ft=Qe("loader-circle",rN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],oN=Qe("log-out",nN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],sN=Qe("menu",aN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],lN=Qe("moon",iN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ys=Qe("plus",cN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Pi=Qe("save",uN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],zc=Qe("search",dN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fN=Qe("settings",hN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],mN=Qe("shield",pN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],vN=Qe("sparkles",gN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Bc=Qe("square-pen",xN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],wN=Qe("sun",yN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Uc=Qe("trash-2",bN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],jN=Qe("trending-up",_N);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],SN=Qe("upload",CN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Vc=Qe("user",EN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Qh=Qe("users",kN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],oy=Qe("x",NN);function PN({onSuccess:r,onToggleSignup:e}){const[t,a]=x.useState(""),[i,l]=x.useState(""),[u,d]=x.useState(!1),{signIn:h}=Bo(),p=async g=>{if(g.preventDefault(),!t||!i){ee.error("Preencha todos os campos");return}d(!0);try{const{error:m}=await h(t,i);if(m){m.message.includes("Invalid login credentials")?ee.error("Email ou senha incorretos"):ee.error("Erro ao fazer login: "+m.message);return}ee.success("Login realizado com sucesso!"),r?.()}catch(m){ee.error("Erro inesperado ao fazer login"),console.error(m)}finally{d(!1)}};return o.jsxs("form",{onSubmit:p,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"email",children:"Email"}),o.jsx(oe,{id:"email",type:"email",placeholder:"seu@email.com",value:t,onChange:g=>a(g.target.value),disabled:u,required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"password",children:"Senha"}),o.jsx(oe,{id:"password",type:"password",placeholder:"",value:i,onChange:g=>l(g.target.value),disabled:u,required:!0})]}),o.jsx(xe,{type:"submit",className:"w-full",disabled:u,children:u?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Entrando..."]}):"Entrar"}),e&&o.jsxs("div",{className:"text-center text-sm",children:[o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["No tem uma conta?"," "]}),o.jsx("button",{type:"button",onClick:e,className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Criar conta"})]})]})}function RN({onSuccess:r,onToggleLogin:e}){const[t,a]=x.useState(""),[i,l]=x.useState(""),[u,d]=x.useState(""),[h,p]=x.useState(""),[g,m]=x.useState(!1),{signUp:w}=Bo(),y=async j=>{if(j.preventDefault(),!t||!i||!u||!h){ee.error("Preencha todos os campos");return}if(u!==h){ee.error("As senhas no coincidem");return}if(u.length<6){ee.error("A senha deve ter no mnimo 6 caracteres");return}m(!0);try{const{error:_}=await w(i,u,t);if(_){_.message.includes("already registered")?ee.error("Este email j est cadastrado"):ee.error("Erro ao criar conta: "+_.message);return}ee.success("Conta criada com sucesso! Verifique seu email para confirmar."),r?.()}catch(_){ee.error("Erro inesperado ao criar conta"),console.error(_)}finally{m(!1)}};return o.jsxs("form",{onSubmit:y,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"fullName",children:"Nome Completo"}),o.jsx(oe,{id:"fullName",type:"text",placeholder:"Seu nome completo",value:t,onChange:j=>a(j.target.value),disabled:g,required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"email",children:"Email"}),o.jsx(oe,{id:"email",type:"email",placeholder:"seu@email.com",value:i,onChange:j=>l(j.target.value),disabled:g,required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"password",children:"Senha"}),o.jsx(oe,{id:"password",type:"password",placeholder:"Mnimo 6 caracteres",value:u,onChange:j=>d(j.target.value),disabled:g,required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"confirmPassword",children:"Confirmar Senha"}),o.jsx(oe,{id:"confirmPassword",type:"password",placeholder:"Digite a senha novamente",value:h,onChange:j=>p(j.target.value),disabled:g,required:!0})]}),o.jsx(xe,{type:"submit",className:"w-full",disabled:g,children:g?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Criando conta..."]}):"Criar Conta"}),e&&o.jsxs("div",{className:"text-center text-sm",children:[o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["J tem uma conta?"," "]}),o.jsx("button",{type:"button",onClick:e,className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Fazer login"})]})]})}function qe({className:r,...e}){return o.jsx("div",{"data-slot":"card",className:Le("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",r),...e})}function Je({className:r,...e}){return o.jsx("div",{"data-slot":"card-header",className:Le("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...e})}function Ye({className:r,...e}){return o.jsx("h4",{"data-slot":"card-title",className:Le("leading-none",r),...e})}function fs({className:r,...e}){return o.jsx("p",{"data-slot":"card-description",className:Le("text-muted-foreground",r),...e})}function We({className:r,...e}){return o.jsx("div",{"data-slot":"card-content",className:Le("px-6 [&:last-child]:pb-6",r),...e})}function AN({onSuccess:r}){const[e,t]=x.useState("login");return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-4",children:o.jsxs(qe,{className:"w-full max-w-md",children:[o.jsxs(Je,{className:"text-center",children:[o.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-blue-600 rounded-xl flex items-center justify-center",children:o.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),o.jsx(Ye,{className:"text-2xl",children:e==="login"?"Bem-vindo de volta":"Criar nova conta"}),o.jsx(fs,{children:e==="login"?"Entre com suas credenciais para acessar o sistema":"Preencha os dados abaixo para criar sua conta"})]}),o.jsx(We,{children:e==="login"?o.jsx(PN,{onSuccess:r,onToggleSignup:()=>t("signup")}):o.jsx(RN,{onSuccess:()=>t("login"),onToggleLogin:()=>t("login")})})]})})}function TN({currentRoute:r,onNavigate:e,isMobileOpen:t,onMobileClose:a}){const{profile:i}=Bo(),[l,u]=x.useState({settings:!1,calculations:!1}),d=w=>{u(y=>({...y,[w]:!y[w]}))},h=i?.roles?.includes("Administrador")||!1,p=[{id:"dashboard",label:"Dashboard Geral",icon:tN,route:"dashboard",adminOnly:!1},{id:"crm",label:"Pipeline",icon:Xh,route:"crm",adminOnly:!1},{id:"contacts",label:"Contatos",icon:z1,route:"contacts",adminOnly:!1},{id:"calculations",label:"Clculo Revisional",icon:Jh,adminOnly:!1,submenu:[{id:"calculations",label:"Lista de Casos",route:"calculations"},{id:"upload-contratos",label:"Upload de Contratos",route:"upload-contratos"}]},{id:"peticoes",label:"Gerao de Peties",icon:_c,route:"peticoes",adminOnly:!1},{id:"users",label:"Usurios",icon:Qh,route:"users",adminOnly:!0},{id:"permissions",label:"Permisses",icon:mN,route:"permissions",adminOnly:!0},{id:"settings",label:"Configuraes",icon:fN,adminOnly:!0,submenu:[{id:"settings-general",label:"Opes Gerais",route:"settings-general"},{id:"settings-funnel",label:"Funil e Cards",route:"settings-funnel"}]}],g=({item:w})=>{const y=r===w.route,j=w.submenu&&w.submenu.length>0,_=l[w.id];return w.adminOnly&&!h?null:j?o.jsxs("div",{className:"px-2",children:[o.jsxs("button",{onClick:()=>d(w.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-300 dark:text-gray-300 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-white transition-colors",children:[o.jsx(w.icon,{className:"w-5 h-5 flex-shrink-0"}),o.jsx("span",{className:"flex-1 text-left",children:w.label}),o.jsx(Tf,{className:`w-4 h-4 transition-transform ${_?"rotate-180":""}`})]}),_&&o.jsx("div",{className:"mt-1 space-y-1",children:w.submenu.map(C=>o.jsx("button",{onClick:()=>e(C.route),className:`w-full flex items-center gap-3 pl-12 pr-4 py-2.5 rounded-lg text-sm transition-colors ${r===C.route?"bg-[#3D96FF] text-white":"text-gray-600 hover:bg-gray-300 hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-white"}`,children:C.label},C.id))})]}):o.jsx("div",{className:"px-2",children:o.jsxs("button",{onClick:()=>e(w.route),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${y?"bg-[#3D96FF] text-white":"text-gray-700 hover:bg-gray-300 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-white"}`,children:[o.jsx(w.icon,{className:"w-5 h-5 flex-shrink-0"}),o.jsx("span",{children:w.label})]})})},m=o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"p-4 border-b border-gray-300 dark:border-gray-800",children:o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{className:"text-gray-900 dark:text-white font-semibold",children:"Octoapps"})})}),o.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:p.map(w=>o.jsx(g,{item:w},w.id))}),o.jsx("div",{className:"p-4 border-t border-gray-300 dark:border-gray-800",children:o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:i?.nome_completo||"Usurio"})})]});return o.jsxs(o.Fragment,{children:[o.jsx("aside",{className:"hidden lg:flex lg:flex-col w-64 bg-[#DDDDDD] dark:bg-black border-r border-gray-300 dark:border-gray-800",children:m}),t&&o.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:a}),o.jsxs("aside",{className:"absolute left-0 top-0 bottom-0 w-64 bg-[#DDDDDD] dark:bg-black border-r border-gray-300 dark:border-gray-800 flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b border-gray-300 dark:border-gray-800 flex items-center justify-between",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{className:"text-gray-900 dark:text-white font-semibold",children:"Octoapps"})}),o.jsx("button",{onClick:a,className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white",children:o.jsx(oy,{className:"w-5 h-5"})})]}),o.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:p.map(w=>o.jsx(g,{item:w},w.id))}),o.jsx("div",{className:"p-4 border-t border-gray-300 dark:border-gray-800",children:o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:currentUser})})]})]})]})}function ke(r,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(r?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function ON(r,e){const t=x.createContext(e),a=l=>{const{children:u,...d}=l,h=x.useMemo(()=>d,Object.values(d));return o.jsx(t.Provider,{value:h,children:u})};a.displayName=r+"Provider";function i(l){const u=x.useContext(t);if(u)return u;if(e!==void 0)return e;throw new Error(`\`${l}\` must be used within \`${r}\``)}return[a,i]}function mn(r,e=[]){let t=[];function a(l,u){const d=x.createContext(u),h=t.length;t=[...t,u];const p=m=>{const{scope:w,children:y,...j}=m,_=w?.[r]?.[h]||d,C=x.useMemo(()=>j,Object.values(j));return o.jsx(_.Provider,{value:C,children:y})};p.displayName=l+"Provider";function g(m,w){const y=w?.[r]?.[h]||d,j=x.useContext(y);if(j)return j;if(u!==void 0)return u;throw new Error(`\`${m}\` must be used within \`${l}\``)}return[p,g]}const i=()=>{const l=t.map(u=>x.createContext(u));return function(d){const h=d?.[r]||l;return x.useMemo(()=>({[`__scope${r}`]:{...d,[r]:h}}),[d,h])}};return i.scopeName=r,[a,DN(i,...e)]}function DN(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const a=r.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(l){const u=a.reduce((d,{useScope:h,scopeName:p})=>{const m=h(l)[`__scope${p}`];return{...d,...m}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:u}),[u])}};return t.scopeName=e.scopeName,t}var ir=globalThis?.document?x.useLayoutEffect:()=>{},IN=yf[" useInsertionEffect ".trim().toString()]||ir;function Mo({prop:r,defaultProp:e,onChange:t=()=>{},caller:a}){const[i,l,u]=MN({defaultProp:e,onChange:t}),d=r!==void 0,h=d?r:i;{const g=x.useRef(r!==void 0);x.useEffect(()=>{const m=g.current;m!==d&&console.warn(`${a} is changing from ${m?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=d},[d,a])}const p=x.useCallback(g=>{if(d){const m=FN(g)?g(r):g;m!==r&&u.current?.(m)}else l(g)},[d,r,l,u]);return[h,p]}function MN({defaultProp:r,onChange:e}){const[t,a]=x.useState(r),i=x.useRef(t),l=x.useRef(e);return IN(()=>{l.current=e},[e]),x.useEffect(()=>{i.current!==t&&(l.current?.(t),i.current=t)},[t,i]),[t,a,l]}function FN(r){return typeof r=="function"}function $N(r){const e=LN(r),t=x.forwardRef((a,i)=>{const{children:l,...u}=a,d=x.Children.toArray(l),h=d.find(BN);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return o.jsx(e,{...u,ref:i,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return o.jsx(e,{...u,ref:i,children:l})});return t.displayName=`${r}.Slot`,t}function LN(r){const e=x.forwardRef((t,a)=>{const{children:i,...l}=t;if(x.isValidElement(i)){const u=VN(i),d=UN(l,i.props);return i.type!==x.Fragment&&(d.ref=a?io(a,u):u),x.cloneElement(i,d)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var zN=Symbol("radix.slottable");function BN(r){return x.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===zN}function UN(r,e){const t={...e};for(const a in e){const i=r[a],l=e[a];/^on[A-Z]/.test(a)?i&&l?t[a]=(...d)=>{const h=l(...d);return i(...d),h}:i&&(t[a]=i):a==="style"?t[a]={...i,...l}:a==="className"&&(t[a]=[i,l].filter(Boolean).join(" "))}return{...r,...t}}function VN(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var qN=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ue=qN.reduce((r,e)=>{const t=$N(`Primitive.${e}`),a=x.forwardRef((i,l)=>{const{asChild:u,...d}=i,h=u?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(h,{...d,ref:l})});return a.displayName=`Primitive.${e}`,{...r,[e]:a}},{});function ay(r,e){r&&Sn.flushSync(()=>r.dispatchEvent(e))}function Vv(r){const e=WN(r),t=x.forwardRef((a,i)=>{const{children:l,...u}=a,d=x.Children.toArray(l),h=d.find(GN);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return o.jsx(e,{...u,ref:i,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return o.jsx(e,{...u,ref:i,children:l})});return t.displayName=`${r}.Slot`,t}function WN(r){const e=x.forwardRef((t,a)=>{const{children:i,...l}=t;if(x.isValidElement(i)){const u=JN(i),d=KN(l,i.props);return i.type!==x.Fragment&&(d.ref=a?io(a,u):u),x.cloneElement(i,d)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var HN=Symbol("radix.slottable");function GN(r){return x.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===HN}function KN(r,e){const t={...e};for(const a in e){const i=r[a],l=e[a];/^on[A-Z]/.test(a)?i&&l?t[a]=(...d)=>{const h=l(...d);return i(...d),h}:i&&(t[a]=i):a==="style"?t[a]={...i,...l}:a==="className"&&(t[a]=[i,l].filter(Boolean).join(" "))}return{...r,...t}}function JN(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function Of(r){const e=r+"CollectionProvider",[t,a]=mn(e),[i,l]=t(e,{collectionRef:{current:null},itemMap:new Map}),u=_=>{const{scope:C,children:S}=_,E=fe.useRef(null),N=fe.useRef(new Map).current;return o.jsx(i,{scope:C,itemMap:N,collectionRef:E,children:S})};u.displayName=e;const d=r+"CollectionSlot",h=Vv(d),p=fe.forwardRef((_,C)=>{const{scope:S,children:E}=_,N=l(d,S),D=lt(C,N.collectionRef);return o.jsx(h,{ref:D,children:E})});p.displayName=d;const g=r+"CollectionItemSlot",m="data-radix-collection-item",w=Vv(g),y=fe.forwardRef((_,C)=>{const{scope:S,children:E,...N}=_,D=fe.useRef(null),R=lt(C,D),O=l(g,S);return fe.useEffect(()=>(O.itemMap.set(D,{ref:D,...N}),()=>void O.itemMap.delete(D))),o.jsx(w,{[m]:"",ref:R,children:E})});y.displayName=g;function j(_){const C=l(r+"CollectionConsumer",_);return fe.useCallback(()=>{const E=C.collectionRef.current;if(!E)return[];const N=Array.from(E.querySelectorAll(`[${m}]`));return Array.from(C.itemMap.values()).sort((O,B)=>N.indexOf(O.ref.current)-N.indexOf(B.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:u,Slot:p,ItemSlot:y},j,a]}var YN=x.createContext(void 0);function qc(r){const e=x.useContext(YN);return r||e||"ltr"}function Pn(r){const e=x.useRef(r);return x.useEffect(()=>{e.current=r}),x.useMemo(()=>(...t)=>e.current?.(...t),[])}function XN(r,e=globalThis?.document){const t=Pn(r);x.useEffect(()=>{const a=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",a,{capture:!0}),()=>e.removeEventListener("keydown",a,{capture:!0})},[t,e])}var QN="DismissableLayer",Zh="dismissableLayer.update",ZN="dismissableLayer.pointerDownOutside",eP="dismissableLayer.focusOutside",qv,sy=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wc=x.forwardRef((r,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:l,onInteractOutside:u,onDismiss:d,...h}=r,p=x.useContext(sy),[g,m]=x.useState(null),w=g?.ownerDocument??globalThis?.document,[,y]=x.useState({}),j=lt(e,B=>m(B)),_=Array.from(p.layers),[C]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),S=_.indexOf(C),E=g?_.indexOf(g):-1,N=p.layersWithOutsidePointerEventsDisabled.size>0,D=E>=S,R=nP(B=>{const F=B.target,H=[...p.branches].some(Z=>Z.contains(F));!D||H||(i?.(B),u?.(B),B.defaultPrevented||d?.())},w),O=oP(B=>{const F=B.target;[...p.branches].some(Z=>Z.contains(F))||(l?.(B),u?.(B),B.defaultPrevented||d?.())},w);return XN(B=>{E===p.layers.size-1&&(a?.(B),!B.defaultPrevented&&d&&(B.preventDefault(),d()))},w),x.useEffect(()=>{if(g)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(qv=w.body.style.pointerEvents,w.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),Wv(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(w.body.style.pointerEvents=qv)}},[g,w,t,p]),x.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),Wv())},[g,p]),x.useEffect(()=>{const B=()=>y({});return document.addEventListener(Zh,B),()=>document.removeEventListener(Zh,B)},[]),o.jsx(Ue.div,{...h,ref:j,style:{pointerEvents:N?D?"auto":"none":void 0,...r.style},onFocusCapture:ke(r.onFocusCapture,O.onFocusCapture),onBlurCapture:ke(r.onBlurCapture,O.onBlurCapture),onPointerDownCapture:ke(r.onPointerDownCapture,R.onPointerDownCapture)})});Wc.displayName=QN;var tP="DismissableLayerBranch",rP=x.forwardRef((r,e)=>{const t=x.useContext(sy),a=x.useRef(null),i=lt(e,a);return x.useEffect(()=>{const l=a.current;if(l)return t.branches.add(l),()=>{t.branches.delete(l)}},[t.branches]),o.jsx(Ue.div,{...r,ref:i})});rP.displayName=tP;function nP(r,e=globalThis?.document){const t=Pn(r),a=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const l=d=>{if(d.target&&!a.current){let h=function(){iy(ZN,t,p,{discrete:!0})};const p={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=h,e.addEventListener("click",i.current,{once:!0})):h()}else e.removeEventListener("click",i.current);a.current=!1},u=window.setTimeout(()=>{e.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(u),e.removeEventListener("pointerdown",l),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>a.current=!0}}function oP(r,e=globalThis?.document){const t=Pn(r),a=x.useRef(!1);return x.useEffect(()=>{const i=l=>{l.target&&!a.current&&iy(eP,t,{originalEvent:l},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function Wv(){const r=new CustomEvent(Zh);document.dispatchEvent(r)}function iy(r,e,t,{discrete:a}){const i=t.originalEvent.target,l=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(r,e,{once:!0}),a?ay(i,l):i.dispatchEvent(l)}var fh=0;function Df(){x.useEffect(()=>{const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",r[0]??Hv()),document.body.insertAdjacentElement("beforeend",r[1]??Hv()),fh++,()=>{fh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),fh--}},[])}function Hv(){const r=document.createElement("span");return r.setAttribute("data-radix-focus-guard",""),r.tabIndex=0,r.style.outline="none",r.style.opacity="0",r.style.position="fixed",r.style.pointerEvents="none",r}var ph="focusScope.autoFocusOnMount",mh="focusScope.autoFocusOnUnmount",Gv={bubbles:!1,cancelable:!0},aP="FocusScope",Hc=x.forwardRef((r,e)=>{const{loop:t=!1,trapped:a=!1,onMountAutoFocus:i,onUnmountAutoFocus:l,...u}=r,[d,h]=x.useState(null),p=Pn(i),g=Pn(l),m=x.useRef(null),w=lt(e,_=>h(_)),y=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(a){let _=function(N){if(y.paused||!d)return;const D=N.target;d.contains(D)?m.current=D:To(m.current,{select:!0})},C=function(N){if(y.paused||!d)return;const D=N.relatedTarget;D!==null&&(d.contains(D)||To(m.current,{select:!0}))},S=function(N){if(document.activeElement===document.body)for(const R of N)R.removedNodes.length>0&&To(d)};document.addEventListener("focusin",_),document.addEventListener("focusout",C);const E=new MutationObserver(S);return d&&E.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",C),E.disconnect()}}},[a,d,y.paused]),x.useEffect(()=>{if(d){Jv.add(y);const _=document.activeElement;if(!d.contains(_)){const S=new CustomEvent(ph,Gv);d.addEventListener(ph,p),d.dispatchEvent(S),S.defaultPrevented||(sP(dP(ly(d)),{select:!0}),document.activeElement===_&&To(d))}return()=>{d.removeEventListener(ph,p),setTimeout(()=>{const S=new CustomEvent(mh,Gv);d.addEventListener(mh,g),d.dispatchEvent(S),S.defaultPrevented||To(_??document.body,{select:!0}),d.removeEventListener(mh,g),Jv.remove(y)},0)}}},[d,p,g,y]);const j=x.useCallback(_=>{if(!t&&!a||y.paused)return;const C=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,S=document.activeElement;if(C&&S){const E=_.currentTarget,[N,D]=iP(E);N&&D?!_.shiftKey&&S===D?(_.preventDefault(),t&&To(N,{select:!0})):_.shiftKey&&S===N&&(_.preventDefault(),t&&To(D,{select:!0})):S===E&&_.preventDefault()}},[t,a,y.paused]);return o.jsx(Ue.div,{tabIndex:-1,...u,ref:w,onKeyDown:j})});Hc.displayName=aP;function sP(r,{select:e=!1}={}){const t=document.activeElement;for(const a of r)if(To(a,{select:e}),document.activeElement!==t)return}function iP(r){const e=ly(r),t=Kv(e,r),a=Kv(e.reverse(),r);return[t,a]}function ly(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const i=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||i?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Kv(r,e){for(const t of r)if(!lP(t,{upTo:e}))return t}function lP(r,{upTo:e}){if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e!==void 0&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}function cP(r){return r instanceof HTMLInputElement&&"select"in r}function To(r,{select:e=!1}={}){if(r&&r.focus){const t=document.activeElement;r.focus({preventScroll:!0}),r!==t&&cP(r)&&e&&r.select()}}var Jv=uP();function uP(){let r=[];return{add(e){const t=r[0];e!==t&&t?.pause(),r=Yv(r,e),r.unshift(e)},remove(e){r=Yv(r,e),r[0]?.resume()}}}function Yv(r,e){const t=[...r],a=t.indexOf(e);return a!==-1&&t.splice(a,1),t}function dP(r){return r.filter(e=>e.tagName!=="A")}var hP=yf[" useId ".trim().toString()]||(()=>{}),fP=0;function kn(r){const[e,t]=x.useState(hP());return ir(()=>{t(a=>a??String(fP++))},[r]),r||(e?`radix-${e}`:"")}const pP=["top","right","bottom","left"],Fo=Math.min,Mr=Math.max,jc=Math.round,rc=Math.floor,Nn=r=>({x:r,y:r}),mP={left:"right",right:"left",bottom:"top",top:"bottom"},gP={start:"end",end:"start"};function ef(r,e,t){return Mr(r,Fo(e,t))}function ao(r,e){return typeof r=="function"?r(e):r}function so(r){return r.split("-")[0]}function ws(r){return r.split("-")[1]}function If(r){return r==="x"?"y":"x"}function Mf(r){return r==="y"?"height":"width"}const vP=new Set(["top","bottom"]);function En(r){return vP.has(so(r))?"y":"x"}function Ff(r){return If(En(r))}function xP(r,e,t){t===void 0&&(t=!1);const a=ws(r),i=Ff(r),l=Mf(i);let u=i==="x"?a===(t?"end":"start")?"right":"left":a==="start"?"bottom":"top";return e.reference[l]>e.floating[l]&&(u=Cc(u)),[u,Cc(u)]}function yP(r){const e=Cc(r);return[tf(r),e,tf(e)]}function tf(r){return r.replace(/start|end/g,e=>gP[e])}const Xv=["left","right"],Qv=["right","left"],wP=["top","bottom"],bP=["bottom","top"];function _P(r,e,t){switch(r){case"top":case"bottom":return t?e?Qv:Xv:e?Xv:Qv;case"left":case"right":return e?wP:bP;default:return[]}}function jP(r,e,t,a){const i=ws(r);let l=_P(so(r),t==="start",a);return i&&(l=l.map(u=>u+"-"+i),e&&(l=l.concat(l.map(tf)))),l}function Cc(r){return r.replace(/left|right|bottom|top/g,e=>mP[e])}function CP(r){return{top:0,right:0,bottom:0,left:0,...r}}function cy(r){return typeof r!="number"?CP(r):{top:r,right:r,bottom:r,left:r}}function Sc(r){const{x:e,y:t,width:a,height:i}=r;return{width:a,height:i,top:t,left:e,right:e+a,bottom:t+i,x:e,y:t}}function Zv(r,e,t){let{reference:a,floating:i}=r;const l=En(e),u=Ff(e),d=Mf(u),h=so(e),p=l==="y",g=a.x+a.width/2-i.width/2,m=a.y+a.height/2-i.height/2,w=a[d]/2-i[d]/2;let y;switch(h){case"top":y={x:g,y:a.y-i.height};break;case"bottom":y={x:g,y:a.y+a.height};break;case"right":y={x:a.x+a.width,y:m};break;case"left":y={x:a.x-i.width,y:m};break;default:y={x:a.x,y:a.y}}switch(ws(e)){case"start":y[u]-=w*(t&&p?-1:1);break;case"end":y[u]+=w*(t&&p?-1:1);break}return y}const SP=async(r,e,t)=>{const{placement:a="bottom",strategy:i="absolute",middleware:l=[],platform:u}=t,d=l.filter(Boolean),h=await(u.isRTL==null?void 0:u.isRTL(e));let p=await u.getElementRects({reference:r,floating:e,strategy:i}),{x:g,y:m}=Zv(p,a,h),w=a,y={},j=0;for(let _=0;_<d.length;_++){const{name:C,fn:S}=d[_],{x:E,y:N,data:D,reset:R}=await S({x:g,y:m,initialPlacement:a,placement:w,strategy:i,middlewareData:y,rects:p,platform:u,elements:{reference:r,floating:e}});g=E??g,m=N??m,y={...y,[C]:{...y[C],...D}},R&&j<=50&&(j++,typeof R=="object"&&(R.placement&&(w=R.placement),R.rects&&(p=R.rects===!0?await u.getElementRects({reference:r,floating:e,strategy:i}):R.rects),{x:g,y:m}=Zv(p,w,h)),_=-1)}return{x:g,y:m,placement:w,strategy:i,middlewareData:y}};async function wi(r,e){var t;e===void 0&&(e={});const{x:a,y:i,platform:l,rects:u,elements:d,strategy:h}=r,{boundary:p="clippingAncestors",rootBoundary:g="viewport",elementContext:m="floating",altBoundary:w=!1,padding:y=0}=ao(e,r),j=cy(y),C=d[w?m==="floating"?"reference":"floating":m],S=Sc(await l.getClippingRect({element:(t=await(l.isElement==null?void 0:l.isElement(C)))==null||t?C:C.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(d.floating)),boundary:p,rootBoundary:g,strategy:h})),E=m==="floating"?{x:a,y:i,width:u.floating.width,height:u.floating.height}:u.reference,N=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d.floating)),D=await(l.isElement==null?void 0:l.isElement(N))?await(l.getScale==null?void 0:l.getScale(N))||{x:1,y:1}:{x:1,y:1},R=Sc(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:E,offsetParent:N,strategy:h}):E);return{top:(S.top-R.top+j.top)/D.y,bottom:(R.bottom-S.bottom+j.bottom)/D.y,left:(S.left-R.left+j.left)/D.x,right:(R.right-S.right+j.right)/D.x}}const EP=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:a,placement:i,rects:l,platform:u,elements:d,middlewareData:h}=e,{element:p,padding:g=0}=ao(r,e)||{};if(p==null)return{};const m=cy(g),w={x:t,y:a},y=Ff(i),j=Mf(y),_=await u.getDimensions(p),C=y==="y",S=C?"top":"left",E=C?"bottom":"right",N=C?"clientHeight":"clientWidth",D=l.reference[j]+l.reference[y]-w[y]-l.floating[j],R=w[y]-l.reference[y],O=await(u.getOffsetParent==null?void 0:u.getOffsetParent(p));let B=O?O[N]:0;(!B||!await(u.isElement==null?void 0:u.isElement(O)))&&(B=d.floating[N]||l.floating[j]);const F=D/2-R/2,H=B/2-_[j]/2-1,Z=Fo(m[S],H),ae=Fo(m[E],H),ue=Z,z=B-_[j]-ae,V=B/2-_[j]/2+F,se=ef(ue,V,z),X=!h.arrow&&ws(i)!=null&&V!==se&&l.reference[j]/2-(V<ue?Z:ae)-_[j]/2<0,re=X?V<ue?V-ue:V-z:0;return{[y]:w[y]+re,data:{[y]:se,centerOffset:V-se-re,...X&&{alignmentOffset:re}},reset:X}}}),kP=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,a;const{placement:i,middlewareData:l,rects:u,initialPlacement:d,platform:h,elements:p}=e,{mainAxis:g=!0,crossAxis:m=!0,fallbackPlacements:w,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:_=!0,...C}=ao(r,e);if((t=l.arrow)!=null&&t.alignmentOffset)return{};const S=so(i),E=En(d),N=so(d)===d,D=await(h.isRTL==null?void 0:h.isRTL(p.floating)),R=w||(N||!_?[Cc(d)]:yP(d)),O=j!=="none";!w&&O&&R.push(...jP(d,_,j,D));const B=[d,...R],F=await wi(e,C),H=[];let Z=((a=l.flip)==null?void 0:a.overflows)||[];if(g&&H.push(F[S]),m){const V=xP(i,u,D);H.push(F[V[0]],F[V[1]])}if(Z=[...Z,{placement:i,overflows:H}],!H.every(V=>V<=0)){var ae,ue;const V=(((ae=l.flip)==null?void 0:ae.index)||0)+1,se=B[V];if(se&&(!(m==="alignment"?E!==En(se):!1)||Z.every(U=>En(U.placement)===E?U.overflows[0]>0:!0)))return{data:{index:V,overflows:Z},reset:{placement:se}};let X=(ue=Z.filter(re=>re.overflows[0]<=0).sort((re,U)=>re.overflows[1]-U.overflows[1])[0])==null?void 0:ue.placement;if(!X)switch(y){case"bestFit":{var z;const re=(z=Z.filter(U=>{if(O){const I=En(U.placement);return I===E||I==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(I=>I>0).reduce((I,P)=>I+P,0)]).sort((U,I)=>U[1]-I[1])[0])==null?void 0:z[0];re&&(X=re);break}case"initialPlacement":X=d;break}if(i!==X)return{reset:{placement:X}}}return{}}}};function ex(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function tx(r){return pP.some(e=>r[e]>=0)}const NP=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:t}=e,{strategy:a="referenceHidden",...i}=ao(r,e);switch(a){case"referenceHidden":{const l=await wi(e,{...i,elementContext:"reference"}),u=ex(l,t.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:tx(u)}}}case"escaped":{const l=await wi(e,{...i,altBoundary:!0}),u=ex(l,t.floating);return{data:{escapedOffsets:u,escaped:tx(u)}}}default:return{}}}}},uy=new Set(["left","top"]);async function PP(r,e){const{placement:t,platform:a,elements:i}=r,l=await(a.isRTL==null?void 0:a.isRTL(i.floating)),u=so(t),d=ws(t),h=En(t)==="y",p=uy.has(u)?-1:1,g=l&&h?-1:1,m=ao(e,r);let{mainAxis:w,crossAxis:y,alignmentAxis:j}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return d&&typeof j=="number"&&(y=d==="end"?j*-1:j),h?{x:y*g,y:w*p}:{x:w*p,y:y*g}}const RP=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,a;const{x:i,y:l,placement:u,middlewareData:d}=e,h=await PP(e,r);return u===((t=d.offset)==null?void 0:t.placement)&&(a=d.arrow)!=null&&a.alignmentOffset?{}:{x:i+h.x,y:l+h.y,data:{...h,placement:u}}}}},AP=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:a,placement:i}=e,{mainAxis:l=!0,crossAxis:u=!1,limiter:d={fn:C=>{let{x:S,y:E}=C;return{x:S,y:E}}},...h}=ao(r,e),p={x:t,y:a},g=await wi(e,h),m=En(so(i)),w=If(m);let y=p[w],j=p[m];if(l){const C=w==="y"?"top":"left",S=w==="y"?"bottom":"right",E=y+g[C],N=y-g[S];y=ef(E,y,N)}if(u){const C=m==="y"?"top":"left",S=m==="y"?"bottom":"right",E=j+g[C],N=j-g[S];j=ef(E,j,N)}const _=d.fn({...e,[w]:y,[m]:j});return{..._,data:{x:_.x-t,y:_.y-a,enabled:{[w]:l,[m]:u}}}}}},TP=function(r){return r===void 0&&(r={}),{options:r,fn(e){const{x:t,y:a,placement:i,rects:l,middlewareData:u}=e,{offset:d=0,mainAxis:h=!0,crossAxis:p=!0}=ao(r,e),g={x:t,y:a},m=En(i),w=If(m);let y=g[w],j=g[m];const _=ao(d,e),C=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(h){const N=w==="y"?"height":"width",D=l.reference[w]-l.floating[N]+C.mainAxis,R=l.reference[w]+l.reference[N]-C.mainAxis;y<D?y=D:y>R&&(y=R)}if(p){var S,E;const N=w==="y"?"width":"height",D=uy.has(so(i)),R=l.reference[m]-l.floating[N]+(D&&((S=u.offset)==null?void 0:S[m])||0)+(D?0:C.crossAxis),O=l.reference[m]+l.reference[N]+(D?0:((E=u.offset)==null?void 0:E[m])||0)-(D?C.crossAxis:0);j<R?j=R:j>O&&(j=O)}return{[w]:y,[m]:j}}}},OP=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,a;const{placement:i,rects:l,platform:u,elements:d}=e,{apply:h=()=>{},...p}=ao(r,e),g=await wi(e,p),m=so(i),w=ws(i),y=En(i)==="y",{width:j,height:_}=l.floating;let C,S;m==="top"||m==="bottom"?(C=m,S=w===(await(u.isRTL==null?void 0:u.isRTL(d.floating))?"start":"end")?"left":"right"):(S=m,C=w==="end"?"top":"bottom");const E=_-g.top-g.bottom,N=j-g.left-g.right,D=Fo(_-g[C],E),R=Fo(j-g[S],N),O=!e.middlewareData.shift;let B=D,F=R;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(F=N),(a=e.middlewareData.shift)!=null&&a.enabled.y&&(B=E),O&&!w){const Z=Mr(g.left,0),ae=Mr(g.right,0),ue=Mr(g.top,0),z=Mr(g.bottom,0);y?F=j-2*(Z!==0||ae!==0?Z+ae:Mr(g.left,g.right)):B=_-2*(ue!==0||z!==0?ue+z:Mr(g.top,g.bottom))}await h({...e,availableWidth:F,availableHeight:B});const H=await u.getDimensions(d.floating);return j!==H.width||_!==H.height?{reset:{rects:!0}}:{}}}};function Gc(){return typeof window<"u"}function bs(r){return dy(r)?(r.nodeName||"").toLowerCase():"#document"}function Lr(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function Vn(r){var e;return(e=(dy(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function dy(r){return Gc()?r instanceof Node||r instanceof Lr(r).Node:!1}function hn(r){return Gc()?r instanceof Element||r instanceof Lr(r).Element:!1}function Rn(r){return Gc()?r instanceof HTMLElement||r instanceof Lr(r).HTMLElement:!1}function rx(r){return!Gc()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof Lr(r).ShadowRoot}const DP=new Set(["inline","contents"]);function Ri(r){const{overflow:e,overflowX:t,overflowY:a,display:i}=fn(r);return/auto|scroll|overlay|hidden|clip/.test(e+a+t)&&!DP.has(i)}const IP=new Set(["table","td","th"]);function MP(r){return IP.has(bs(r))}const FP=[":popover-open",":modal"];function Kc(r){return FP.some(e=>{try{return r.matches(e)}catch{return!1}})}const $P=["transform","translate","scale","rotate","perspective"],LP=["transform","translate","scale","rotate","perspective","filter"],zP=["paint","layout","strict","content"];function $f(r){const e=Lf(),t=hn(r)?fn(r):r;return $P.some(a=>t[a]?t[a]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||LP.some(a=>(t.willChange||"").includes(a))||zP.some(a=>(t.contain||"").includes(a))}function BP(r){let e=$o(r);for(;Rn(e)&&!ps(e);){if($f(e))return e;if(Kc(e))return null;e=$o(e)}return null}function Lf(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const UP=new Set(["html","body","#document"]);function ps(r){return UP.has(bs(r))}function fn(r){return Lr(r).getComputedStyle(r)}function Jc(r){return hn(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function $o(r){if(bs(r)==="html")return r;const e=r.assignedSlot||r.parentNode||rx(r)&&r.host||Vn(r);return rx(e)?e.host:e}function hy(r){const e=$o(r);return ps(e)?r.ownerDocument?r.ownerDocument.body:r.body:Rn(e)&&Ri(e)?e:hy(e)}function bi(r,e,t){var a;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=hy(r),l=i===((a=r.ownerDocument)==null?void 0:a.body),u=Lr(i);if(l){const d=rf(u);return e.concat(u,u.visualViewport||[],Ri(i)?i:[],d&&t?bi(d):[])}return e.concat(i,bi(i,[],t))}function rf(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function fy(r){const e=fn(r);let t=parseFloat(e.width)||0,a=parseFloat(e.height)||0;const i=Rn(r),l=i?r.offsetWidth:t,u=i?r.offsetHeight:a,d=jc(t)!==l||jc(a)!==u;return d&&(t=l,a=u),{width:t,height:a,$:d}}function zf(r){return hn(r)?r:r.contextElement}function ls(r){const e=zf(r);if(!Rn(e))return Nn(1);const t=e.getBoundingClientRect(),{width:a,height:i,$:l}=fy(e);let u=(l?jc(t.width):t.width)/a,d=(l?jc(t.height):t.height)/i;return(!u||!Number.isFinite(u))&&(u=1),(!d||!Number.isFinite(d))&&(d=1),{x:u,y:d}}const VP=Nn(0);function py(r){const e=Lr(r);return!Lf()||!e.visualViewport?VP:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function qP(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==Lr(r)?!1:e}function ma(r,e,t,a){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=r.getBoundingClientRect(),l=zf(r);let u=Nn(1);e&&(a?hn(a)&&(u=ls(a)):u=ls(r));const d=qP(l,t,a)?py(l):Nn(0);let h=(i.left+d.x)/u.x,p=(i.top+d.y)/u.y,g=i.width/u.x,m=i.height/u.y;if(l){const w=Lr(l),y=a&&hn(a)?Lr(a):a;let j=w,_=rf(j);for(;_&&a&&y!==j;){const C=ls(_),S=_.getBoundingClientRect(),E=fn(_),N=S.left+(_.clientLeft+parseFloat(E.paddingLeft))*C.x,D=S.top+(_.clientTop+parseFloat(E.paddingTop))*C.y;h*=C.x,p*=C.y,g*=C.x,m*=C.y,h+=N,p+=D,j=Lr(_),_=rf(j)}}return Sc({width:g,height:m,x:h,y:p})}function Yc(r,e){const t=Jc(r).scrollLeft;return e?e.left+t:ma(Vn(r)).left+t}function my(r,e){const t=r.getBoundingClientRect(),a=t.left+e.scrollLeft-Yc(r,t),i=t.top+e.scrollTop;return{x:a,y:i}}function WP(r){let{elements:e,rect:t,offsetParent:a,strategy:i}=r;const l=i==="fixed",u=Vn(a),d=e?Kc(e.floating):!1;if(a===u||d&&l)return t;let h={scrollLeft:0,scrollTop:0},p=Nn(1);const g=Nn(0),m=Rn(a);if((m||!m&&!l)&&((bs(a)!=="body"||Ri(u))&&(h=Jc(a)),Rn(a))){const y=ma(a);p=ls(a),g.x=y.x+a.clientLeft,g.y=y.y+a.clientTop}const w=u&&!m&&!l?my(u,h):Nn(0);return{width:t.width*p.x,height:t.height*p.y,x:t.x*p.x-h.scrollLeft*p.x+g.x+w.x,y:t.y*p.y-h.scrollTop*p.y+g.y+w.y}}function HP(r){return Array.from(r.getClientRects())}function GP(r){const e=Vn(r),t=Jc(r),a=r.ownerDocument.body,i=Mr(e.scrollWidth,e.clientWidth,a.scrollWidth,a.clientWidth),l=Mr(e.scrollHeight,e.clientHeight,a.scrollHeight,a.clientHeight);let u=-t.scrollLeft+Yc(r);const d=-t.scrollTop;return fn(a).direction==="rtl"&&(u+=Mr(e.clientWidth,a.clientWidth)-i),{width:i,height:l,x:u,y:d}}const nx=25;function KP(r,e){const t=Lr(r),a=Vn(r),i=t.visualViewport;let l=a.clientWidth,u=a.clientHeight,d=0,h=0;if(i){l=i.width,u=i.height;const g=Lf();(!g||g&&e==="fixed")&&(d=i.offsetLeft,h=i.offsetTop)}const p=Yc(a);if(p<=0){const g=a.ownerDocument,m=g.body,w=getComputedStyle(m),y=g.compatMode==="CSS1Compat"&&parseFloat(w.marginLeft)+parseFloat(w.marginRight)||0,j=Math.abs(a.clientWidth-m.clientWidth-y);j<=nx&&(l-=j)}else p<=nx&&(l+=p);return{width:l,height:u,x:d,y:h}}const JP=new Set(["absolute","fixed"]);function YP(r,e){const t=ma(r,!0,e==="fixed"),a=t.top+r.clientTop,i=t.left+r.clientLeft,l=Rn(r)?ls(r):Nn(1),u=r.clientWidth*l.x,d=r.clientHeight*l.y,h=i*l.x,p=a*l.y;return{width:u,height:d,x:h,y:p}}function ox(r,e,t){let a;if(e==="viewport")a=KP(r,t);else if(e==="document")a=GP(Vn(r));else if(hn(e))a=YP(e,t);else{const i=py(r);a={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Sc(a)}function gy(r,e){const t=$o(r);return t===e||!hn(t)||ps(t)?!1:fn(t).position==="fixed"||gy(t,e)}function XP(r,e){const t=e.get(r);if(t)return t;let a=bi(r,[],!1).filter(d=>hn(d)&&bs(d)!=="body"),i=null;const l=fn(r).position==="fixed";let u=l?$o(r):r;for(;hn(u)&&!ps(u);){const d=fn(u),h=$f(u);!h&&d.position==="fixed"&&(i=null),(l?!h&&!i:!h&&d.position==="static"&&!!i&&JP.has(i.position)||Ri(u)&&!h&&gy(r,u))?a=a.filter(g=>g!==u):i=d,u=$o(u)}return e.set(r,a),a}function QP(r){let{element:e,boundary:t,rootBoundary:a,strategy:i}=r;const u=[...t==="clippingAncestors"?Kc(e)?[]:XP(e,this._c):[].concat(t),a],d=u[0],h=u.reduce((p,g)=>{const m=ox(e,g,i);return p.top=Mr(m.top,p.top),p.right=Fo(m.right,p.right),p.bottom=Fo(m.bottom,p.bottom),p.left=Mr(m.left,p.left),p},ox(e,d,i));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function ZP(r){const{width:e,height:t}=fy(r);return{width:e,height:t}}function eR(r,e,t){const a=Rn(e),i=Vn(e),l=t==="fixed",u=ma(r,!0,l,e);let d={scrollLeft:0,scrollTop:0};const h=Nn(0);function p(){h.x=Yc(i)}if(a||!a&&!l)if((bs(e)!=="body"||Ri(i))&&(d=Jc(e)),a){const y=ma(e,!0,l,e);h.x=y.x+e.clientLeft,h.y=y.y+e.clientTop}else i&&p();l&&!a&&i&&p();const g=i&&!a&&!l?my(i,d):Nn(0),m=u.left+d.scrollLeft-h.x-g.x,w=u.top+d.scrollTop-h.y-g.y;return{x:m,y:w,width:u.width,height:u.height}}function gh(r){return fn(r).position==="static"}function ax(r,e){if(!Rn(r)||fn(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return Vn(r)===t&&(t=t.ownerDocument.body),t}function vy(r,e){const t=Lr(r);if(Kc(r))return t;if(!Rn(r)){let i=$o(r);for(;i&&!ps(i);){if(hn(i)&&!gh(i))return i;i=$o(i)}return t}let a=ax(r,e);for(;a&&MP(a)&&gh(a);)a=ax(a,e);return a&&ps(a)&&gh(a)&&!$f(a)?t:a||BP(r)||t}const tR=async function(r){const e=this.getOffsetParent||vy,t=this.getDimensions,a=await t(r.floating);return{reference:eR(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function rR(r){return fn(r).direction==="rtl"}const nR={convertOffsetParentRelativeRectToViewportRelativeRect:WP,getDocumentElement:Vn,getClippingRect:QP,getOffsetParent:vy,getElementRects:tR,getClientRects:HP,getDimensions:ZP,getScale:ls,isElement:hn,isRTL:rR};function xy(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function oR(r,e){let t=null,a;const i=Vn(r);function l(){var d;clearTimeout(a),(d=t)==null||d.disconnect(),t=null}function u(d,h){d===void 0&&(d=!1),h===void 0&&(h=1),l();const p=r.getBoundingClientRect(),{left:g,top:m,width:w,height:y}=p;if(d||e(),!w||!y)return;const j=rc(m),_=rc(i.clientWidth-(g+w)),C=rc(i.clientHeight-(m+y)),S=rc(g),N={rootMargin:-j+"px "+-_+"px "+-C+"px "+-S+"px",threshold:Mr(0,Fo(1,h))||1};let D=!0;function R(O){const B=O[0].intersectionRatio;if(B!==h){if(!D)return u();B?u(!1,B):a=setTimeout(()=>{u(!1,1e-7)},1e3)}B===1&&!xy(p,r.getBoundingClientRect())&&u(),D=!1}try{t=new IntersectionObserver(R,{...N,root:i.ownerDocument})}catch{t=new IntersectionObserver(R,N)}t.observe(r)}return u(!0),l}function aR(r,e,t,a){a===void 0&&(a={});const{ancestorScroll:i=!0,ancestorResize:l=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:h=!1}=a,p=zf(r),g=i||l?[...p?bi(p):[],...bi(e)]:[];g.forEach(S=>{i&&S.addEventListener("scroll",t,{passive:!0}),l&&S.addEventListener("resize",t)});const m=p&&d?oR(p,t):null;let w=-1,y=null;u&&(y=new ResizeObserver(S=>{let[E]=S;E&&E.target===p&&y&&(y.unobserve(e),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var N;(N=y)==null||N.observe(e)})),t()}),p&&!h&&y.observe(p),y.observe(e));let j,_=h?ma(r):null;h&&C();function C(){const S=ma(r);_&&!xy(_,S)&&t(),_=S,j=requestAnimationFrame(C)}return t(),()=>{var S;g.forEach(E=>{i&&E.removeEventListener("scroll",t),l&&E.removeEventListener("resize",t)}),m?.(),(S=y)==null||S.disconnect(),y=null,h&&cancelAnimationFrame(j)}}const sR=RP,iR=AP,lR=kP,cR=OP,uR=NP,sx=EP,dR=TP,hR=(r,e,t)=>{const a=new Map,i={platform:nR,...t},l={...i.platform,_c:a};return SP(r,e,{...i,platform:l})};var fR=typeof document<"u",pR=function(){},dc=fR?x.useLayoutEffect:pR;function Ec(r,e){if(r===e)return!0;if(typeof r!=typeof e)return!1;if(typeof r=="function"&&r.toString()===e.toString())return!0;let t,a,i;if(r&&e&&typeof r=="object"){if(Array.isArray(r)){if(t=r.length,t!==e.length)return!1;for(a=t;a--!==0;)if(!Ec(r[a],e[a]))return!1;return!0}if(i=Object.keys(r),t=i.length,t!==Object.keys(e).length)return!1;for(a=t;a--!==0;)if(!{}.hasOwnProperty.call(e,i[a]))return!1;for(a=t;a--!==0;){const l=i[a];if(!(l==="_owner"&&r.$$typeof)&&!Ec(r[l],e[l]))return!1}return!0}return r!==r&&e!==e}function yy(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function ix(r,e){const t=yy(r);return Math.round(e*t)/t}function vh(r){const e=x.useRef(r);return dc(()=>{e.current=r}),e}function mR(r){r===void 0&&(r={});const{placement:e="bottom",strategy:t="absolute",middleware:a=[],platform:i,elements:{reference:l,floating:u}={},transform:d=!0,whileElementsMounted:h,open:p}=r,[g,m]=x.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[w,y]=x.useState(a);Ec(w,a)||y(a);const[j,_]=x.useState(null),[C,S]=x.useState(null),E=x.useCallback(U=>{U!==O.current&&(O.current=U,_(U))},[]),N=x.useCallback(U=>{U!==B.current&&(B.current=U,S(U))},[]),D=l||j,R=u||C,O=x.useRef(null),B=x.useRef(null),F=x.useRef(g),H=h!=null,Z=vh(h),ae=vh(i),ue=vh(p),z=x.useCallback(()=>{if(!O.current||!B.current)return;const U={placement:e,strategy:t,middleware:w};ae.current&&(U.platform=ae.current),hR(O.current,B.current,U).then(I=>{const P={...I,isPositioned:ue.current!==!1};V.current&&!Ec(F.current,P)&&(F.current=P,Sn.flushSync(()=>{m(P)}))})},[w,e,t,ae,ue]);dc(()=>{p===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,m(U=>({...U,isPositioned:!1})))},[p]);const V=x.useRef(!1);dc(()=>(V.current=!0,()=>{V.current=!1}),[]),dc(()=>{if(D&&(O.current=D),R&&(B.current=R),D&&R){if(Z.current)return Z.current(D,R,z);z()}},[D,R,z,Z,H]);const se=x.useMemo(()=>({reference:O,floating:B,setReference:E,setFloating:N}),[E,N]),X=x.useMemo(()=>({reference:D,floating:R}),[D,R]),re=x.useMemo(()=>{const U={position:t,left:0,top:0};if(!X.floating)return U;const I=ix(X.floating,g.x),P=ix(X.floating,g.y);return d?{...U,transform:"translate("+I+"px, "+P+"px)",...yy(X.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:I,top:P}},[t,d,X.floating,g.x,g.y]);return x.useMemo(()=>({...g,update:z,refs:se,elements:X,floatingStyles:re}),[g,z,se,X,re])}const gR=r=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:r,fn(t){const{element:a,padding:i}=typeof r=="function"?r(t):r;return a&&e(a)?a.current!=null?sx({element:a.current,padding:i}).fn(t):{}:a?sx({element:a,padding:i}).fn(t):{}}}},vR=(r,e)=>({...sR(r),options:[r,e]}),xR=(r,e)=>({...iR(r),options:[r,e]}),yR=(r,e)=>({...dR(r),options:[r,e]}),wR=(r,e)=>({...lR(r),options:[r,e]}),bR=(r,e)=>({...cR(r),options:[r,e]}),_R=(r,e)=>({...uR(r),options:[r,e]}),jR=(r,e)=>({...gR(r),options:[r,e]});var CR="Arrow",wy=x.forwardRef((r,e)=>{const{children:t,width:a=10,height:i=5,...l}=r;return o.jsx(Ue.svg,{...l,ref:e,width:a,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:r.asChild?t:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});wy.displayName=CR;var SR=wy;function Bf(r){const[e,t]=x.useState(void 0);return ir(()=>{if(r){t({width:r.offsetWidth,height:r.offsetHeight});const a=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const l=i[0];let u,d;if("borderBoxSize"in l){const h=l.borderBoxSize,p=Array.isArray(h)?h[0]:h;u=p.inlineSize,d=p.blockSize}else u=r.offsetWidth,d=r.offsetHeight;t({width:u,height:d})});return a.observe(r,{box:"border-box"}),()=>a.unobserve(r)}else t(void 0)},[r]),e}var Uf="Popper",[by,Xc]=mn(Uf),[ER,_y]=by(Uf),jy=r=>{const{__scopePopper:e,children:t}=r,[a,i]=x.useState(null);return o.jsx(ER,{scope:e,anchor:a,onAnchorChange:i,children:t})};jy.displayName=Uf;var Cy="PopperAnchor",Sy=x.forwardRef((r,e)=>{const{__scopePopper:t,virtualRef:a,...i}=r,l=_y(Cy,t),u=x.useRef(null),d=lt(e,u),h=x.useRef(null);return x.useEffect(()=>{const p=h.current;h.current=a?.current||u.current,p!==h.current&&l.onAnchorChange(h.current)}),a?null:o.jsx(Ue.div,{...i,ref:d})});Sy.displayName=Cy;var Vf="PopperContent",[kR,NR]=by(Vf),Ey=x.forwardRef((r,e)=>{const{__scopePopper:t,side:a="bottom",sideOffset:i=0,align:l="center",alignOffset:u=0,arrowPadding:d=0,avoidCollisions:h=!0,collisionBoundary:p=[],collisionPadding:g=0,sticky:m="partial",hideWhenDetached:w=!1,updatePositionStrategy:y="optimized",onPlaced:j,..._}=r,C=_y(Vf,t),[S,E]=x.useState(null),N=lt(e,J=>E(J)),[D,R]=x.useState(null),O=Bf(D),B=O?.width??0,F=O?.height??0,H=a+(l!=="center"?"-"+l:""),Z=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},ae=Array.isArray(p)?p:[p],ue=ae.length>0,z={padding:Z,boundary:ae.filter(RR),altBoundary:ue},{refs:V,floatingStyles:se,placement:X,isPositioned:re,middlewareData:U}=mR({strategy:"fixed",placement:H,whileElementsMounted:(...J)=>aR(...J,{animationFrame:y==="always"}),elements:{reference:C.anchor},middleware:[vR({mainAxis:i+F,alignmentAxis:u}),h&&xR({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?yR():void 0,...z}),h&&wR({...z}),bR({...z,apply:({elements:J,rects:q,availableWidth:le,availableHeight:de})=>{const{width:we,height:je}=q.reference,ye=J.floating.style;ye.setProperty("--radix-popper-available-width",`${le}px`),ye.setProperty("--radix-popper-available-height",`${de}px`),ye.setProperty("--radix-popper-anchor-width",`${we}px`),ye.setProperty("--radix-popper-anchor-height",`${je}px`)}}),D&&jR({element:D,padding:d}),AR({arrowWidth:B,arrowHeight:F}),w&&_R({strategy:"referenceHidden",...z})]}),[I,P]=Py(X),A=Pn(j);ir(()=>{re&&A?.()},[re,A]);const M=U.arrow?.x,T=U.arrow?.y,$=U.arrow?.centerOffset!==0,[Q,pe]=x.useState();return ir(()=>{S&&pe(window.getComputedStyle(S).zIndex)},[S]),o.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:re?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[U.transformOrigin?.x,U.transformOrigin?.y].join(" "),...U.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:r.dir,children:o.jsx(kR,{scope:t,placedSide:I,onArrowChange:R,arrowX:M,arrowY:T,shouldHideArrow:$,children:o.jsx(Ue.div,{"data-side":I,"data-align":P,..._,ref:N,style:{..._.style,animation:re?void 0:"none"}})})})});Ey.displayName=Vf;var ky="PopperArrow",PR={top:"bottom",right:"left",bottom:"top",left:"right"},Ny=x.forwardRef(function(e,t){const{__scopePopper:a,...i}=e,l=NR(ky,a),u=PR[l.placedSide];return o.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:o.jsx(SR,{...i,ref:t,style:{...i.style,display:"block"}})})});Ny.displayName=ky;function RR(r){return r!==null}var AR=r=>({name:"transformOrigin",options:r,fn(e){const{placement:t,rects:a,middlewareData:i}=e,u=i.arrow?.centerOffset!==0,d=u?0:r.arrowWidth,h=u?0:r.arrowHeight,[p,g]=Py(t),m={start:"0%",center:"50%",end:"100%"}[g],w=(i.arrow?.x??0)+d/2,y=(i.arrow?.y??0)+h/2;let j="",_="";return p==="bottom"?(j=u?m:`${w}px`,_=`${-h}px`):p==="top"?(j=u?m:`${w}px`,_=`${a.floating.height+h}px`):p==="right"?(j=`${-h}px`,_=u?m:`${y}px`):p==="left"&&(j=`${a.floating.width+h}px`,_=u?m:`${y}px`),{data:{x:j,y:_}}}});function Py(r){const[e,t="center"]=r.split("-");return[e,t]}var Ry=jy,Ay=Sy,Ty=Ey,Oy=Ny,TR="Portal",Qc=x.forwardRef((r,e)=>{const{container:t,...a}=r,[i,l]=x.useState(!1);ir(()=>l(!0),[]);const u=t||i&&globalThis?.document?.body;return u?Z0.createPortal(o.jsx(Ue.div,{...a,ref:e}),u):null});Qc.displayName=TR;function OR(r,e){return x.useReducer((t,a)=>e[t][a]??t,r)}var qn=r=>{const{present:e,children:t}=r,a=DR(e),i=typeof t=="function"?t({present:a.isPresent}):x.Children.only(t),l=lt(a.ref,IR(i));return typeof t=="function"||a.isPresent?x.cloneElement(i,{ref:l}):null};qn.displayName="Presence";function DR(r){const[e,t]=x.useState(),a=x.useRef(null),i=x.useRef(r),l=x.useRef("none"),u=r?"mounted":"unmounted",[d,h]=OR(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const p=nc(a.current);l.current=d==="mounted"?p:"none"},[d]),ir(()=>{const p=a.current,g=i.current;if(g!==r){const w=l.current,y=nc(p);r?h("MOUNT"):y==="none"||p?.display==="none"?h("UNMOUNT"):h(g&&w!==y?"ANIMATION_OUT":"UNMOUNT"),i.current=r}},[r,h]),ir(()=>{if(e){let p;const g=e.ownerDocument.defaultView??window,m=y=>{const _=nc(a.current).includes(CSS.escape(y.animationName));if(y.target===e&&_&&(h("ANIMATION_END"),!i.current)){const C=e.style.animationFillMode;e.style.animationFillMode="forwards",p=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=C)})}},w=y=>{y.target===e&&(l.current=nc(a.current))};return e.addEventListener("animationstart",w),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{g.clearTimeout(p),e.removeEventListener("animationstart",w),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:x.useCallback(p=>{a.current=p?getComputedStyle(p):null,t(p)},[])}}function nc(r){return r?.animationName||"none"}function IR(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var xh="rovingFocusGroup.onEntryFocus",MR={bubbles:!1,cancelable:!0},Ai="RovingFocusGroup",[nf,Dy,FR]=Of(Ai),[$R,Zc]=mn(Ai,[FR]),[LR,zR]=$R(Ai),Iy=x.forwardRef((r,e)=>o.jsx(nf.Provider,{scope:r.__scopeRovingFocusGroup,children:o.jsx(nf.Slot,{scope:r.__scopeRovingFocusGroup,children:o.jsx(BR,{...r,ref:e})})}));Iy.displayName=Ai;var BR=x.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,orientation:a,loop:i=!1,dir:l,currentTabStopId:u,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:h,onEntryFocus:p,preventScrollOnEntryFocus:g=!1,...m}=r,w=x.useRef(null),y=lt(e,w),j=qc(l),[_,C]=Mo({prop:u,defaultProp:d??null,onChange:h,caller:Ai}),[S,E]=x.useState(!1),N=Pn(p),D=Dy(t),R=x.useRef(!1),[O,B]=x.useState(0);return x.useEffect(()=>{const F=w.current;if(F)return F.addEventListener(xh,N),()=>F.removeEventListener(xh,N)},[N]),o.jsx(LR,{scope:t,orientation:a,dir:j,loop:i,currentTabStopId:_,onItemFocus:x.useCallback(F=>C(F),[C]),onItemShiftTab:x.useCallback(()=>E(!0),[]),onFocusableItemAdd:x.useCallback(()=>B(F=>F+1),[]),onFocusableItemRemove:x.useCallback(()=>B(F=>F-1),[]),children:o.jsx(Ue.div,{tabIndex:S||O===0?-1:0,"data-orientation":a,...m,ref:y,style:{outline:"none",...r.style},onMouseDown:ke(r.onMouseDown,()=>{R.current=!0}),onFocus:ke(r.onFocus,F=>{const H=!R.current;if(F.target===F.currentTarget&&H&&!S){const Z=new CustomEvent(xh,MR);if(F.currentTarget.dispatchEvent(Z),!Z.defaultPrevented){const ae=D().filter(X=>X.focusable),ue=ae.find(X=>X.active),z=ae.find(X=>X.id===_),se=[ue,z,...ae].filter(Boolean).map(X=>X.ref.current);$y(se,g)}}R.current=!1}),onBlur:ke(r.onBlur,()=>E(!1))})})}),My="RovingFocusGroupItem",Fy=x.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,focusable:a=!0,active:i=!1,tabStopId:l,children:u,...d}=r,h=kn(),p=l||h,g=zR(My,t),m=g.currentTabStopId===p,w=Dy(t),{onFocusableItemAdd:y,onFocusableItemRemove:j,currentTabStopId:_}=g;return x.useEffect(()=>{if(a)return y(),()=>j()},[a,y,j]),o.jsx(nf.ItemSlot,{scope:t,id:p,focusable:a,active:i,children:o.jsx(Ue.span,{tabIndex:m?0:-1,"data-orientation":g.orientation,...d,ref:e,onMouseDown:ke(r.onMouseDown,C=>{a?g.onItemFocus(p):C.preventDefault()}),onFocus:ke(r.onFocus,()=>g.onItemFocus(p)),onKeyDown:ke(r.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){g.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const S=qR(C,g.orientation,g.dir);if(S!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let N=w().filter(D=>D.focusable).map(D=>D.ref.current);if(S==="last")N.reverse();else if(S==="prev"||S==="next"){S==="prev"&&N.reverse();const D=N.indexOf(C.currentTarget);N=g.loop?WR(N,D+1):N.slice(D+1)}setTimeout(()=>$y(N))}}),children:typeof u=="function"?u({isCurrentTabStop:m,hasTabStop:_!=null}):u})})});Fy.displayName=My;var UR={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function VR(r,e){return e!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function qR(r,e,t){const a=VR(r.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return UR[a]}function $y(r,e=!1){const t=document.activeElement;for(const a of r)if(a===t||(a.focus({preventScroll:e}),document.activeElement!==t))return}function WR(r,e){return r.map((t,a)=>r[(e+a)%r.length])}var Ly=Iy,zy=Fy;function HR(r){const e=GR(r),t=x.forwardRef((a,i)=>{const{children:l,...u}=a,d=x.Children.toArray(l),h=d.find(JR);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return o.jsx(e,{...u,ref:i,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return o.jsx(e,{...u,ref:i,children:l})});return t.displayName=`${r}.Slot`,t}function GR(r){const e=x.forwardRef((t,a)=>{const{children:i,...l}=t;if(x.isValidElement(i)){const u=XR(i),d=YR(l,i.props);return i.type!==x.Fragment&&(d.ref=a?io(a,u):u),x.cloneElement(i,d)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var KR=Symbol("radix.slottable");function JR(r){return x.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===KR}function YR(r,e){const t={...e};for(const a in e){const i=r[a],l=e[a];/^on[A-Z]/.test(a)?i&&l?t[a]=(...d)=>{const h=l(...d);return i(...d),h}:i&&(t[a]=i):a==="style"?t[a]={...i,...l}:a==="className"&&(t[a]=[i,l].filter(Boolean).join(" "))}return{...r,...t}}function XR(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var QR=function(r){if(typeof document>"u")return null;var e=Array.isArray(r)?r[0]:r;return e.ownerDocument.body},ts=new WeakMap,oc=new WeakMap,ac={},yh=0,By=function(r){return r&&(r.host||By(r.parentNode))},ZR=function(r,e){return e.map(function(t){if(r.contains(t))return t;var a=By(t);return a&&r.contains(a)?a:(console.error("aria-hidden",t,"in not contained inside",r,". Doing nothing"),null)}).filter(function(t){return!!t})},eA=function(r,e,t,a){var i=ZR(e,Array.isArray(r)?r:[r]);ac[t]||(ac[t]=new WeakMap);var l=ac[t],u=[],d=new Set,h=new Set(i),p=function(m){!m||d.has(m)||(d.add(m),p(m.parentNode))};i.forEach(p);var g=function(m){!m||h.has(m)||Array.prototype.forEach.call(m.children,function(w){if(d.has(w))g(w);else try{var y=w.getAttribute(a),j=y!==null&&y!=="false",_=(ts.get(w)||0)+1,C=(l.get(w)||0)+1;ts.set(w,_),l.set(w,C),u.push(w),_===1&&j&&oc.set(w,!0),C===1&&w.setAttribute(t,"true"),j||w.setAttribute(a,"true")}catch(S){console.error("aria-hidden: cannot operate on ",w,S)}})};return g(e),d.clear(),yh++,function(){u.forEach(function(m){var w=ts.get(m)-1,y=l.get(m)-1;ts.set(m,w),l.set(m,y),w||(oc.has(m)||m.removeAttribute(a),oc.delete(m)),y||m.removeAttribute(t)}),yh--,yh||(ts=new WeakMap,ts=new WeakMap,oc=new WeakMap,ac={})}},qf=function(r,e,t){t===void 0&&(t="data-aria-hidden");var a=Array.from(Array.isArray(r)?r:[r]),i=QR(r);return i?(a.push.apply(a,Array.from(i.querySelectorAll("[aria-live], script"))),eA(a,i,t,"aria-hidden")):function(){return null}},hc="right-scroll-bar-position",fc="width-before-scroll-bar",tA="with-scroll-bars-hidden",rA="--removed-body-scroll-bar-size";function wh(r,e){return typeof r=="function"?r(e):r&&(r.current=e),r}function nA(r,e){var t=x.useState(function(){return{value:r,callback:e,facade:{get current(){return t.value},set current(a){var i=t.value;i!==a&&(t.value=a,t.callback(a,i))}}}})[0];return t.callback=e,t.facade}var oA=typeof window<"u"?x.useLayoutEffect:x.useEffect,lx=new WeakMap;function aA(r,e){var t=nA(null,function(a){return r.forEach(function(i){return wh(i,a)})});return oA(function(){var a=lx.get(t);if(a){var i=new Set(a),l=new Set(r),u=t.current;i.forEach(function(d){l.has(d)||wh(d,null)}),l.forEach(function(d){i.has(d)||wh(d,u)})}lx.set(t,r)},[r]),t}function sA(r){return r}function iA(r,e){e===void 0&&(e=sA);var t=[],a=!1,i={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:r},useMedium:function(l){var u=e(l,a);return t.push(u),function(){t=t.filter(function(d){return d!==u})}},assignSyncMedium:function(l){for(a=!0;t.length;){var u=t;t=[],u.forEach(l)}t={push:function(d){return l(d)},filter:function(){return t}}},assignMedium:function(l){a=!0;var u=[];if(t.length){var d=t;t=[],d.forEach(l),u=t}var h=function(){var g=u;u=[],g.forEach(l)},p=function(){return Promise.resolve().then(h)};p(),t={push:function(g){u.push(g),p()},filter:function(g){return u=u.filter(g),t}}}};return i}function lA(r){r===void 0&&(r={});var e=iA(null);return e.options=Xr({async:!0,ssr:!1},r),e}var Uy=function(r){var e=r.sideCar,t=Lo(r,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=e.read();if(!a)throw new Error("Sidecar medium not found");return x.createElement(a,Xr({},t))};Uy.isSideCarExport=!0;function cA(r,e){return r.useMedium(e),Uy}var Vy=lA(),bh=function(){},eu=x.forwardRef(function(r,e){var t=x.useRef(null),a=x.useState({onScrollCapture:bh,onWheelCapture:bh,onTouchMoveCapture:bh}),i=a[0],l=a[1],u=r.forwardProps,d=r.children,h=r.className,p=r.removeScrollBar,g=r.enabled,m=r.shards,w=r.sideCar,y=r.noRelative,j=r.noIsolation,_=r.inert,C=r.allowPinchZoom,S=r.as,E=S===void 0?"div":S,N=r.gapMode,D=Lo(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=w,O=aA([t,e]),B=Xr(Xr({},D),i);return x.createElement(x.Fragment,null,g&&x.createElement(R,{sideCar:Vy,removeScrollBar:p,shards:m,noRelative:y,noIsolation:j,inert:_,setCallbacks:l,allowPinchZoom:!!C,lockRef:t,gapMode:N}),u?x.cloneElement(x.Children.only(d),Xr(Xr({},B),{ref:O})):x.createElement(E,Xr({},B,{className:h,ref:O}),d))});eu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};eu.classNames={fullWidth:fc,zeroRight:hc};var uA=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function dA(){if(!document)return null;var r=document.createElement("style");r.type="text/css";var e=uA();return e&&r.setAttribute("nonce",e),r}function hA(r,e){r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}function fA(r){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(r)}var pA=function(){var r=0,e=null;return{add:function(t){r==0&&(e=dA())&&(hA(e,t),fA(e)),r++},remove:function(){r--,!r&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},mA=function(){var r=pA();return function(e,t){x.useEffect(function(){return r.add(e),function(){r.remove()}},[e&&t])}},qy=function(){var r=mA(),e=function(t){var a=t.styles,i=t.dynamic;return r(a,i),null};return e},gA={left:0,top:0,right:0,gap:0},_h=function(r){return parseInt(r||"",10)||0},vA=function(r){var e=window.getComputedStyle(document.body),t=e[r==="padding"?"paddingLeft":"marginLeft"],a=e[r==="padding"?"paddingTop":"marginTop"],i=e[r==="padding"?"paddingRight":"marginRight"];return[_h(t),_h(a),_h(i)]},xA=function(r){if(r===void 0&&(r="margin"),typeof window>"u")return gA;var e=vA(r),t=document.documentElement.clientWidth,a=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,a-t+e[2]-e[0])}},yA=qy(),cs="data-scroll-locked",wA=function(r,e,t,a){var i=r.left,l=r.top,u=r.right,d=r.gap;return t===void 0&&(t="margin"),`
  .`.concat(tA,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(d,"px ").concat(a,`;
  }
  body[`).concat(cs,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(a,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(a,`;
    `),t==="padding"&&"padding-right: ".concat(d,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hc,` {
    right: `).concat(d,"px ").concat(a,`;
  }
  
  .`).concat(fc,` {
    margin-right: `).concat(d,"px ").concat(a,`;
  }
  
  .`).concat(hc," .").concat(hc,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(fc," .").concat(fc,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(cs,`] {
    `).concat(rA,": ").concat(d,`px;
  }
`)},cx=function(){var r=parseInt(document.body.getAttribute(cs)||"0",10);return isFinite(r)?r:0},bA=function(){x.useEffect(function(){return document.body.setAttribute(cs,(cx()+1).toString()),function(){var r=cx()-1;r<=0?document.body.removeAttribute(cs):document.body.setAttribute(cs,r.toString())}},[])},_A=function(r){var e=r.noRelative,t=r.noImportant,a=r.gapMode,i=a===void 0?"margin":a;bA();var l=x.useMemo(function(){return xA(i)},[i]);return x.createElement(yA,{styles:wA(l,!e,i,t?"":"!important")})},of=!1;if(typeof window<"u")try{var sc=Object.defineProperty({},"passive",{get:function(){return of=!0,!0}});window.addEventListener("test",sc,sc),window.removeEventListener("test",sc,sc)}catch{of=!1}var rs=of?{passive:!1}:!1,jA=function(r){return r.tagName==="TEXTAREA"},Wy=function(r,e){if(!(r instanceof Element))return!1;var t=window.getComputedStyle(r);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!jA(r)&&t[e]==="visible")},CA=function(r){return Wy(r,"overflowY")},SA=function(r){return Wy(r,"overflowX")},ux=function(r,e){var t=e.ownerDocument,a=e;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var i=Hy(r,a);if(i){var l=Gy(r,a),u=l[1],d=l[2];if(u>d)return!0}a=a.parentNode}while(a&&a!==t.body);return!1},EA=function(r){var e=r.scrollTop,t=r.scrollHeight,a=r.clientHeight;return[e,t,a]},kA=function(r){var e=r.scrollLeft,t=r.scrollWidth,a=r.clientWidth;return[e,t,a]},Hy=function(r,e){return r==="v"?CA(e):SA(e)},Gy=function(r,e){return r==="v"?EA(e):kA(e)},NA=function(r,e){return r==="h"&&e==="rtl"?-1:1},PA=function(r,e,t,a,i){var l=NA(r,window.getComputedStyle(e).direction),u=l*a,d=t.target,h=e.contains(d),p=!1,g=u>0,m=0,w=0;do{if(!d)break;var y=Gy(r,d),j=y[0],_=y[1],C=y[2],S=_-C-l*j;(j||S)&&Hy(r,d)&&(m+=S,w+=j);var E=d.parentNode;d=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!h&&d!==document.body||h&&(e.contains(d)||e===d));return(g&&Math.abs(m)<1||!g&&Math.abs(w)<1)&&(p=!0),p},ic=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},dx=function(r){return[r.deltaX,r.deltaY]},hx=function(r){return r&&"current"in r?r.current:r},RA=function(r,e){return r[0]===e[0]&&r[1]===e[1]},AA=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},TA=0,ns=[];function OA(r){var e=x.useRef([]),t=x.useRef([0,0]),a=x.useRef(),i=x.useState(TA++)[0],l=x.useState(qy)[0],u=x.useRef(r);x.useEffect(function(){u.current=r},[r]),x.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(i));var _=bf([r.lockRef.current],(r.shards||[]).map(hx),!0).filter(Boolean);return _.forEach(function(C){return C.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),_.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(i))})}}},[r.inert,r.lockRef.current,r.shards]);var d=x.useCallback(function(_,C){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!u.current.allowPinchZoom;var S=ic(_),E=t.current,N="deltaX"in _?_.deltaX:E[0]-S[0],D="deltaY"in _?_.deltaY:E[1]-S[1],R,O=_.target,B=Math.abs(N)>Math.abs(D)?"h":"v";if("touches"in _&&B==="h"&&O.type==="range")return!1;var F=ux(B,O);if(!F)return!0;if(F?R=B:(R=B==="v"?"h":"v",F=ux(B,O)),!F)return!1;if(!a.current&&"changedTouches"in _&&(N||D)&&(a.current=R),!R)return!0;var H=a.current||R;return PA(H,C,_,H==="h"?N:D)},[]),h=x.useCallback(function(_){var C=_;if(!(!ns.length||ns[ns.length-1]!==l)){var S="deltaY"in C?dx(C):ic(C),E=e.current.filter(function(R){return R.name===C.type&&(R.target===C.target||C.target===R.shadowParent)&&RA(R.delta,S)})[0];if(E&&E.should){C.cancelable&&C.preventDefault();return}if(!E){var N=(u.current.shards||[]).map(hx).filter(Boolean).filter(function(R){return R.contains(C.target)}),D=N.length>0?d(C,N[0]):!u.current.noIsolation;D&&C.cancelable&&C.preventDefault()}}},[]),p=x.useCallback(function(_,C,S,E){var N={name:_,delta:C,target:S,should:E,shadowParent:DA(S)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(D){return D!==N})},1)},[]),g=x.useCallback(function(_){t.current=ic(_),a.current=void 0},[]),m=x.useCallback(function(_){p(_.type,dx(_),_.target,d(_,r.lockRef.current))},[]),w=x.useCallback(function(_){p(_.type,ic(_),_.target,d(_,r.lockRef.current))},[]);x.useEffect(function(){return ns.push(l),r.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:w}),document.addEventListener("wheel",h,rs),document.addEventListener("touchmove",h,rs),document.addEventListener("touchstart",g,rs),function(){ns=ns.filter(function(_){return _!==l}),document.removeEventListener("wheel",h,rs),document.removeEventListener("touchmove",h,rs),document.removeEventListener("touchstart",g,rs)}},[]);var y=r.removeScrollBar,j=r.inert;return x.createElement(x.Fragment,null,j?x.createElement(l,{styles:AA(i)}):null,y?x.createElement(_A,{noRelative:r.noRelative,gapMode:r.gapMode}):null)}function DA(r){for(var e=null;r!==null;)r instanceof ShadowRoot&&(e=r.host,r=r.host),r=r.parentNode;return e}const IA=cA(Vy,OA);var tu=x.forwardRef(function(r,e){return x.createElement(eu,Xr({},r,{ref:e,sideCar:IA}))});tu.classNames=eu.classNames;var af=["Enter"," "],MA=["ArrowDown","PageUp","Home"],Ky=["ArrowUp","PageDown","End"],FA=[...MA,...Ky],$A={ltr:[...af,"ArrowRight"],rtl:[...af,"ArrowLeft"]},LA={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ti="Menu",[_i,zA,BA]=Of(Ti),[ya,Jy]=mn(Ti,[BA,Xc,Zc]),ru=Xc(),Yy=Zc(),[UA,wa]=ya(Ti),[VA,Oi]=ya(Ti),Xy=r=>{const{__scopeMenu:e,open:t=!1,children:a,dir:i,onOpenChange:l,modal:u=!0}=r,d=ru(e),[h,p]=x.useState(null),g=x.useRef(!1),m=Pn(l),w=qc(i);return x.useEffect(()=>{const y=()=>{g.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>g.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),o.jsx(Ry,{...d,children:o.jsx(UA,{scope:e,open:t,onOpenChange:m,content:h,onContentChange:p,children:o.jsx(VA,{scope:e,onClose:x.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:g,dir:w,modal:u,children:a})})})};Xy.displayName=Ti;var qA="MenuAnchor",Wf=x.forwardRef((r,e)=>{const{__scopeMenu:t,...a}=r,i=ru(t);return o.jsx(Ay,{...i,...a,ref:e})});Wf.displayName=qA;var Hf="MenuPortal",[WA,Qy]=ya(Hf,{forceMount:void 0}),Zy=r=>{const{__scopeMenu:e,forceMount:t,children:a,container:i}=r,l=wa(Hf,e);return o.jsx(WA,{scope:e,forceMount:t,children:o.jsx(qn,{present:t||l.open,children:o.jsx(Qc,{asChild:!0,container:i,children:a})})})};Zy.displayName=Hf;var Qr="MenuContent",[HA,Gf]=ya(Qr),ew=x.forwardRef((r,e)=>{const t=Qy(Qr,r.__scopeMenu),{forceMount:a=t.forceMount,...i}=r,l=wa(Qr,r.__scopeMenu),u=Oi(Qr,r.__scopeMenu);return o.jsx(_i.Provider,{scope:r.__scopeMenu,children:o.jsx(qn,{present:a||l.open,children:o.jsx(_i.Slot,{scope:r.__scopeMenu,children:u.modal?o.jsx(GA,{...i,ref:e}):o.jsx(KA,{...i,ref:e})})})})}),GA=x.forwardRef((r,e)=>{const t=wa(Qr,r.__scopeMenu),a=x.useRef(null),i=lt(e,a);return x.useEffect(()=>{const l=a.current;if(l)return qf(l)},[]),o.jsx(Kf,{...r,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:ke(r.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),KA=x.forwardRef((r,e)=>{const t=wa(Qr,r.__scopeMenu);return o.jsx(Kf,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),JA=HR("MenuContent.ScrollLock"),Kf=x.forwardRef((r,e)=>{const{__scopeMenu:t,loop:a=!1,trapFocus:i,onOpenAutoFocus:l,onCloseAutoFocus:u,disableOutsidePointerEvents:d,onEntryFocus:h,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:w,onDismiss:y,disableOutsideScroll:j,..._}=r,C=wa(Qr,t),S=Oi(Qr,t),E=ru(t),N=Yy(t),D=zA(t),[R,O]=x.useState(null),B=x.useRef(null),F=lt(e,B,C.onContentChange),H=x.useRef(0),Z=x.useRef(""),ae=x.useRef(0),ue=x.useRef(null),z=x.useRef("right"),V=x.useRef(0),se=j?tu:x.Fragment,X=j?{as:JA,allowPinchZoom:!0}:void 0,re=I=>{const P=Z.current+I,A=D().filter(J=>!J.disabled),M=document.activeElement,T=A.find(J=>J.ref.current===M)?.textValue,$=A.map(J=>J.textValue),Q=iT($,P,T),pe=A.find(J=>J.textValue===Q)?.ref.current;(function J(q){Z.current=q,window.clearTimeout(H.current),q!==""&&(H.current=window.setTimeout(()=>J(""),1e3))})(P),pe&&setTimeout(()=>pe.focus())};x.useEffect(()=>()=>window.clearTimeout(H.current),[]),Df();const U=x.useCallback(I=>z.current===ue.current?.side&&cT(I,ue.current?.area),[]);return o.jsx(HA,{scope:t,searchRef:Z,onItemEnter:x.useCallback(I=>{U(I)&&I.preventDefault()},[U]),onItemLeave:x.useCallback(I=>{U(I)||(B.current?.focus(),O(null))},[U]),onTriggerLeave:x.useCallback(I=>{U(I)&&I.preventDefault()},[U]),pointerGraceTimerRef:ae,onPointerGraceIntentChange:x.useCallback(I=>{ue.current=I},[]),children:o.jsx(se,{...X,children:o.jsx(Hc,{asChild:!0,trapped:i,onMountAutoFocus:ke(l,I=>{I.preventDefault(),B.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:u,children:o.jsx(Wc,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:w,onDismiss:y,children:o.jsx(Ly,{asChild:!0,...N,dir:S.dir,orientation:"vertical",loop:a,currentTabStopId:R,onCurrentTabStopIdChange:O,onEntryFocus:ke(h,I=>{S.isUsingKeyboardRef.current||I.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(Ty,{role:"menu","aria-orientation":"vertical","data-state":gw(C.open),"data-radix-menu-content":"",dir:S.dir,...E,..._,ref:F,style:{outline:"none",..._.style},onKeyDown:ke(_.onKeyDown,I=>{const A=I.target.closest("[data-radix-menu-content]")===I.currentTarget,M=I.ctrlKey||I.altKey||I.metaKey,T=I.key.length===1;A&&(I.key==="Tab"&&I.preventDefault(),!M&&T&&re(I.key));const $=B.current;if(I.target!==$||!FA.includes(I.key))return;I.preventDefault();const pe=D().filter(J=>!J.disabled).map(J=>J.ref.current);Ky.includes(I.key)&&pe.reverse(),aT(pe)}),onBlur:ke(r.onBlur,I=>{I.currentTarget.contains(I.target)||(window.clearTimeout(H.current),Z.current="")}),onPointerMove:ke(r.onPointerMove,ji(I=>{const P=I.target,A=V.current!==I.clientX;if(I.currentTarget.contains(P)&&A){const M=I.clientX>V.current?"right":"left";z.current=M,V.current=I.clientX}}))})})})})})})});ew.displayName=Qr;var YA="MenuGroup",Jf=x.forwardRef((r,e)=>{const{__scopeMenu:t,...a}=r;return o.jsx(Ue.div,{role:"group",...a,ref:e})});Jf.displayName=YA;var XA="MenuLabel",tw=x.forwardRef((r,e)=>{const{__scopeMenu:t,...a}=r;return o.jsx(Ue.div,{...a,ref:e})});tw.displayName=XA;var kc="MenuItem",fx="menu.itemSelect",nu=x.forwardRef((r,e)=>{const{disabled:t=!1,onSelect:a,...i}=r,l=x.useRef(null),u=Oi(kc,r.__scopeMenu),d=Gf(kc,r.__scopeMenu),h=lt(e,l),p=x.useRef(!1),g=()=>{const m=l.current;if(!t&&m){const w=new CustomEvent(fx,{bubbles:!0,cancelable:!0});m.addEventListener(fx,y=>a?.(y),{once:!0}),ay(m,w),w.defaultPrevented?p.current=!1:u.onClose()}};return o.jsx(rw,{...i,ref:h,disabled:t,onClick:ke(r.onClick,g),onPointerDown:m=>{r.onPointerDown?.(m),p.current=!0},onPointerUp:ke(r.onPointerUp,m=>{p.current||m.currentTarget?.click()}),onKeyDown:ke(r.onKeyDown,m=>{const w=d.searchRef.current!=="";t||w&&m.key===" "||af.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});nu.displayName=kc;var rw=x.forwardRef((r,e)=>{const{__scopeMenu:t,disabled:a=!1,textValue:i,...l}=r,u=Gf(kc,t),d=Yy(t),h=x.useRef(null),p=lt(e,h),[g,m]=x.useState(!1),[w,y]=x.useState("");return x.useEffect(()=>{const j=h.current;j&&y((j.textContent??"").trim())},[l.children]),o.jsx(_i.ItemSlot,{scope:t,disabled:a,textValue:i??w,children:o.jsx(zy,{asChild:!0,...d,focusable:!a,children:o.jsx(Ue.div,{role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...l,ref:p,onPointerMove:ke(r.onPointerMove,ji(j=>{a?u.onItemLeave(j):(u.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ke(r.onPointerLeave,ji(j=>u.onItemLeave(j))),onFocus:ke(r.onFocus,()=>m(!0)),onBlur:ke(r.onBlur,()=>m(!1))})})})}),QA="MenuCheckboxItem",nw=x.forwardRef((r,e)=>{const{checked:t=!1,onCheckedChange:a,...i}=r;return o.jsx(lw,{scope:r.__scopeMenu,checked:t,children:o.jsx(nu,{role:"menuitemcheckbox","aria-checked":Nc(t)?"mixed":t,...i,ref:e,"data-state":Xf(t),onSelect:ke(i.onSelect,()=>a?.(Nc(t)?!0:!t),{checkForDefaultPrevented:!1})})})});nw.displayName=QA;var ow="MenuRadioGroup",[ZA,eT]=ya(ow,{value:void 0,onValueChange:()=>{}}),aw=x.forwardRef((r,e)=>{const{value:t,onValueChange:a,...i}=r,l=Pn(a);return o.jsx(ZA,{scope:r.__scopeMenu,value:t,onValueChange:l,children:o.jsx(Jf,{...i,ref:e})})});aw.displayName=ow;var sw="MenuRadioItem",iw=x.forwardRef((r,e)=>{const{value:t,...a}=r,i=eT(sw,r.__scopeMenu),l=t===i.value;return o.jsx(lw,{scope:r.__scopeMenu,checked:l,children:o.jsx(nu,{role:"menuitemradio","aria-checked":l,...a,ref:e,"data-state":Xf(l),onSelect:ke(a.onSelect,()=>i.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});iw.displayName=sw;var Yf="MenuItemIndicator",[lw,tT]=ya(Yf,{checked:!1}),cw=x.forwardRef((r,e)=>{const{__scopeMenu:t,forceMount:a,...i}=r,l=tT(Yf,t);return o.jsx(qn,{present:a||Nc(l.checked)||l.checked===!0,children:o.jsx(Ue.span,{...i,ref:e,"data-state":Xf(l.checked)})})});cw.displayName=Yf;var rT="MenuSeparator",uw=x.forwardRef((r,e)=>{const{__scopeMenu:t,...a}=r;return o.jsx(Ue.div,{role:"separator","aria-orientation":"horizontal",...a,ref:e})});uw.displayName=rT;var nT="MenuArrow",dw=x.forwardRef((r,e)=>{const{__scopeMenu:t,...a}=r,i=ru(t);return o.jsx(Oy,{...i,...a,ref:e})});dw.displayName=nT;var oT="MenuSub",[qM,hw]=ya(oT),ui="MenuSubTrigger",fw=x.forwardRef((r,e)=>{const t=wa(ui,r.__scopeMenu),a=Oi(ui,r.__scopeMenu),i=hw(ui,r.__scopeMenu),l=Gf(ui,r.__scopeMenu),u=x.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:h}=l,p={__scopeMenu:r.__scopeMenu},g=x.useCallback(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return x.useEffect(()=>g,[g]),x.useEffect(()=>{const m=d.current;return()=>{window.clearTimeout(m),h(null)}},[d,h]),o.jsx(Wf,{asChild:!0,...p,children:o.jsx(rw,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":gw(t.open),...r,ref:io(e,i.onTriggerChange),onClick:m=>{r.onClick?.(m),!(r.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:ke(r.onPointerMove,ji(m=>{l.onItemEnter(m),!m.defaultPrevented&&!r.disabled&&!t.open&&!u.current&&(l.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{t.onOpenChange(!0),g()},100))})),onPointerLeave:ke(r.onPointerLeave,ji(m=>{g();const w=t.content?.getBoundingClientRect();if(w){const y=t.content?.dataset.side,j=y==="right",_=j?-5:5,C=w[j?"left":"right"],S=w[j?"right":"left"];l.onPointerGraceIntentChange({area:[{x:m.clientX+_,y:m.clientY},{x:C,y:w.top},{x:S,y:w.top},{x:S,y:w.bottom},{x:C,y:w.bottom}],side:y}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>l.onPointerGraceIntentChange(null),300)}else{if(l.onTriggerLeave(m),m.defaultPrevented)return;l.onPointerGraceIntentChange(null)}})),onKeyDown:ke(r.onKeyDown,m=>{const w=l.searchRef.current!=="";r.disabled||w&&m.key===" "||$A[a.dir].includes(m.key)&&(t.onOpenChange(!0),t.content?.focus(),m.preventDefault())})})})});fw.displayName=ui;var pw="MenuSubContent",mw=x.forwardRef((r,e)=>{const t=Qy(Qr,r.__scopeMenu),{forceMount:a=t.forceMount,...i}=r,l=wa(Qr,r.__scopeMenu),u=Oi(Qr,r.__scopeMenu),d=hw(pw,r.__scopeMenu),h=x.useRef(null),p=lt(e,h);return o.jsx(_i.Provider,{scope:r.__scopeMenu,children:o.jsx(qn,{present:a||l.open,children:o.jsx(_i.Slot,{scope:r.__scopeMenu,children:o.jsx(Kf,{id:d.contentId,"aria-labelledby":d.triggerId,...i,ref:p,align:"start",side:u.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{u.isUsingKeyboardRef.current&&h.current?.focus(),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:ke(r.onFocusOutside,g=>{g.target!==d.trigger&&l.onOpenChange(!1)}),onEscapeKeyDown:ke(r.onEscapeKeyDown,g=>{u.onClose(),g.preventDefault()}),onKeyDown:ke(r.onKeyDown,g=>{const m=g.currentTarget.contains(g.target),w=LA[u.dir].includes(g.key);m&&w&&(l.onOpenChange(!1),d.trigger?.focus(),g.preventDefault())})})})})})});mw.displayName=pw;function gw(r){return r?"open":"closed"}function Nc(r){return r==="indeterminate"}function Xf(r){return Nc(r)?"indeterminate":r?"checked":"unchecked"}function aT(r){const e=document.activeElement;for(const t of r)if(t===e||(t.focus(),document.activeElement!==e))return}function sT(r,e){return r.map((t,a)=>r[(e+a)%r.length])}function iT(r,e,t){const i=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,l=t?r.indexOf(t):-1;let u=sT(r,Math.max(l,0));i.length===1&&(u=u.filter(p=>p!==t));const h=u.find(p=>p.toLowerCase().startsWith(i.toLowerCase()));return h!==t?h:void 0}function lT(r,e){const{x:t,y:a}=r;let i=!1;for(let l=0,u=e.length-1;l<e.length;u=l++){const d=e[l],h=e[u],p=d.x,g=d.y,m=h.x,w=h.y;g>a!=w>a&&t<(m-p)*(a-g)/(w-g)+p&&(i=!i)}return i}function cT(r,e){if(!e)return!1;const t={x:r.clientX,y:r.clientY};return lT(t,e)}function ji(r){return e=>e.pointerType==="mouse"?r(e):void 0}var uT=Xy,dT=Wf,hT=Zy,fT=ew,pT=Jf,mT=tw,gT=nu,vT=nw,xT=aw,yT=iw,wT=cw,bT=uw,_T=dw,jT=fw,CT=mw,ou="DropdownMenu",[ST]=mn(ou,[Jy]),dr=Jy(),[ET,vw]=ST(ou),xw=r=>{const{__scopeDropdownMenu:e,children:t,dir:a,open:i,defaultOpen:l,onOpenChange:u,modal:d=!0}=r,h=dr(e),p=x.useRef(null),[g,m]=Mo({prop:i,defaultProp:l??!1,onChange:u,caller:ou});return o.jsx(ET,{scope:e,triggerId:kn(),triggerRef:p,contentId:kn(),open:g,onOpenChange:m,onOpenToggle:x.useCallback(()=>m(w=>!w),[m]),modal:d,children:o.jsx(uT,{...h,open:g,onOpenChange:m,dir:a,modal:d,children:t})})};xw.displayName=ou;var yw="DropdownMenuTrigger",ww=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,disabled:a=!1,...i}=r,l=vw(yw,t),u=dr(t);return o.jsx(dT,{asChild:!0,...u,children:o.jsx(Ue.button,{type:"button",id:l.triggerId,"aria-haspopup":"menu","aria-expanded":l.open,"aria-controls":l.open?l.contentId:void 0,"data-state":l.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...i,ref:io(e,l.triggerRef),onPointerDown:ke(r.onPointerDown,d=>{!a&&d.button===0&&d.ctrlKey===!1&&(l.onOpenToggle(),l.open||d.preventDefault())}),onKeyDown:ke(r.onKeyDown,d=>{a||(["Enter"," "].includes(d.key)&&l.onOpenToggle(),d.key==="ArrowDown"&&l.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});ww.displayName=yw;var kT="DropdownMenuPortal",bw=r=>{const{__scopeDropdownMenu:e,...t}=r,a=dr(e);return o.jsx(hT,{...a,...t})};bw.displayName=kT;var _w="DropdownMenuContent",jw=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...a}=r,i=vw(_w,t),l=dr(t),u=x.useRef(!1);return o.jsx(fT,{id:i.contentId,"aria-labelledby":i.triggerId,...l,...a,ref:e,onCloseAutoFocus:ke(r.onCloseAutoFocus,d=>{u.current||i.triggerRef.current?.focus(),u.current=!1,d.preventDefault()}),onInteractOutside:ke(r.onInteractOutside,d=>{const h=d.detail.originalEvent,p=h.button===0&&h.ctrlKey===!0,g=h.button===2||p;(!i.modal||g)&&(u.current=!0)}),style:{...r.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jw.displayName=_w;var NT="DropdownMenuGroup",PT=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...a}=r,i=dr(t);return o.jsx(pT,{...i,...a,ref:e})});PT.displayName=NT;var RT="DropdownMenuLabel",AT=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...a}=r,i=dr(t);return o.jsx(mT,{...i,...a,ref:e})});AT.displayName=RT;var TT="DropdownMenuItem",Cw=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...a}=r,i=dr(t);return o.jsx(gT,{...i,...a,ref:e})});Cw.displayName=TT;var OT="DropdownMenuCheckboxItem",DT=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...a}=r,i=dr(t);return o.jsx(vT,{...i,...a,ref:e})});DT.displayName=OT;var IT="DropdownMenuRadioGroup",MT=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...a}=r,i=dr(t);return o.jsx(xT,{...i,...a,ref:e})});MT.displayName=IT;var FT="DropdownMenuRadioItem",$T=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...a}=r,i=dr(t);return o.jsx(yT,{...i,...a,ref:e})});$T.displayName=FT;var LT="DropdownMenuItemIndicator",zT=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...a}=r,i=dr(t);return o.jsx(wT,{...i,...a,ref:e})});zT.displayName=LT;var BT="DropdownMenuSeparator",Sw=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...a}=r,i=dr(t);return o.jsx(bT,{...i,...a,ref:e})});Sw.displayName=BT;var UT="DropdownMenuArrow",VT=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...a}=r,i=dr(t);return o.jsx(_T,{...i,...a,ref:e})});VT.displayName=UT;var qT="DropdownMenuSubTrigger",WT=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...a}=r,i=dr(t);return o.jsx(jT,{...i,...a,ref:e})});WT.displayName=qT;var HT="DropdownMenuSubContent",GT=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...a}=r,i=dr(t);return o.jsx(CT,{...i,...a,ref:e,style:{...r.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});GT.displayName=HT;var KT=xw,JT=ww,YT=bw,XT=jw,QT=Cw,ZT=Sw;function An({...r}){return o.jsx(KT,{"data-slot":"dropdown-menu",...r})}function Tn({...r}){return o.jsx(JT,{"data-slot":"dropdown-menu-trigger",...r})}function On({className:r,sideOffset:e=4,...t}){return o.jsx(YT,{children:o.jsx(XT,{"data-slot":"dropdown-menu-content",sideOffset:e,className:Le("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",r),...t})})}function wt({className:r,inset:e,variant:t="default",...a}){return o.jsx(QT,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":t,className:Le("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...a})}function px({className:r,...e}){return o.jsx(ZT,{"data-slot":"dropdown-menu-separator",className:Le("bg-border -mx-1 my-1 h-px",r),...e})}const e2=z0("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function sr({className:r,variant:e,asChild:t=!1,...a}){const i=t?F0:"span";return o.jsx(i,{"data-slot":"badge",className:Le(e2({variant:e}),r),...a})}const t2=[{id:1,text:"Nova oportunidade criada no Pipeline",read:!1,time:"h 5 min"},{id:2,text:"Clculo revisional finalizado",read:!1,time:"h 15 min"},{id:3,text:"Petio exportada com sucesso",read:!0,time:"h 1 hora"},{id:4,text:"Novo contato adicionado",read:!0,time:"h 2 horas"}];function r2({theme:r,onThemeToggle:e,onMobileMenuToggle:t}){const[a,i]=x.useState(t2),{signOut:l,user:u,profile:d}=Bo(),h=a.filter(g=>!g.read).length,p=()=>{i(g=>g.map(m=>({...m,read:!0})))};return o.jsxs("header",{className:"h-16 border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-950 flex items-center justify-between px-4 lg:px-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:t,className:"lg:hidden text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:o.jsx(sN,{className:"w-6 h-6"})}),o.jsx("h1",{className:"hidden sm:block text-gray-900 dark:text-white",children:"Legal Manager"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(An,{children:[o.jsx(Tn,{asChild:!0,children:o.jsxs(xe,{variant:"ghost",size:"icon",className:"relative",children:[o.jsx(T1,{className:"w-5 h-5"}),h>0&&o.jsx(sr,{variant:"destructive",className:"absolute -top-1 -right-1 w-5 h-5 flex items-center justify-center p-0 text-xs",children:h})]})}),o.jsxs(On,{align:"end",className:"w-80",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx("span",{className:"text-sm",children:"Notificaes"}),o.jsx(xe,{variant:"ghost",size:"sm",className:"h-auto p-0 text-xs",onClick:p,children:"Marcar todas como lidas"})]}),o.jsx("div",{className:"max-h-80 overflow-y-auto",children:a.map(g=>o.jsx(wt,{className:`flex flex-col items-start gap-1 p-3 ${g.read?"":"bg-blue-50 dark:bg-blue-950/20"}`,children:o.jsxs("div",{className:"flex items-start gap-2 w-full",children:[!g.read&&o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-1.5 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm",children:g.text}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:g.time})]})]})},g.id))}),o.jsx("div",{className:"border-t p-2",children:o.jsx(xe,{variant:"ghost",className:"w-full text-sm",children:"Ver todas"})})]})]}),o.jsx(xe,{variant:"ghost",size:"icon",onClick:e,children:r==="light"?o.jsx(wN,{className:"w-5 h-5"}):o.jsx(lN,{className:"w-5 h-5"})}),o.jsxs(An,{children:[o.jsx(Tn,{asChild:!0,children:o.jsxs(xe,{variant:"ghost",className:"gap-2",children:[o.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center",children:o.jsx(Vc,{className:"w-4 h-4"})}),o.jsx("span",{className:"hidden sm:inline",children:d?.nome_completo||u?.email||"Usurio"})]})}),o.jsx(On,{align:"end",children:o.jsxs(wt,{onClick:()=>l(),children:[o.jsx(oN,{className:"w-4 h-4 mr-2"}),"Sair"]})})]})]})]})}function mx(){const r=[{title:"Oportunidades Ativas",value:"42",change:"+12%",icon:Xh,color:"text-blue-600 dark:text-blue-400"},{title:"Contatos",value:"186",change:"+8%",icon:Qh,color:"text-green-600 dark:text-green-400"},{title:"Clculos este ms",value:"23",change:"+15%",icon:Jh,color:"text-purple-600 dark:text-purple-400"},{title:"Peties Geradas",value:"18",change:"+5%",icon:_c,color:"text-orange-600 dark:text-orange-400"}];return o.jsxs("div",{className:"p-4 lg:p-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-gray-900 dark:text-white mb-2",children:"Dashboard Geral"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Viso geral das atividades do sistema"})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6 mb-8",children:r.map((e,t)=>o.jsxs(qe,{children:[o.jsxs(Je,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Ye,{className:"text-sm text-gray-600 dark:text-gray-400",children:e.title}),o.jsx(e.icon,{className:`w-5 h-5 ${e.color}`})]}),o.jsxs(We,{children:[o.jsx("div",{className:"text-2xl text-gray-900 dark:text-white mb-1",children:e.value}),o.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:[e.change," vs. ms anterior"]})]})]},t))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Oportunidades por Etapa"})}),o.jsx(We,{children:o.jsx("div",{className:"space-y-4",children:[{stage:"Lead",count:12,color:"bg-gray-400"},{stage:"Qualificao",count:8,color:"bg-blue-500"},{stage:"Proposta",count:15,color:"bg-yellow-500"},{stage:"Negociao",count:5,color:"bg-orange-500"},{stage:"Fechamento",count:2,color:"bg-green-500"}].map((e,t)=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-24 text-sm text-gray-600 dark:text-gray-400",children:e.stage}),o.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-800 rounded-full h-6 overflow-hidden",children:o.jsx("div",{className:`${e.color} h-full flex items-center justify-end pr-2`,style:{width:`${e.count/15*100}%`},children:o.jsx("span",{className:"text-xs text-white",children:e.count})})})]},t))})})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Atividades Recentes"})}),o.jsx(We,{children:o.jsx("div",{className:"space-y-4",children:[{text:"Nova oportunidade criada - Cliente ABC",time:"h 5 min",icon:Xh},{text:"Clculo de financiamento finalizado",time:"h 15 min",icon:Jh},{text:"Petio exportada com sucesso",time:"h 1 hora",icon:_c},{text:"Novo contato adicionado - Joo Silva",time:"h 2 horas",icon:Qh},{text:"Reunio agendada para amanh",time:"h 3 horas",icon:jN}].map((e,t)=>o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx(e.icon,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:e.text}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.time})]})]},t))})})]})]})]})}function gx(r,[e,t]){return Math.min(t,Math.max(e,r))}function n2(r){const e=o2(r),t=x.forwardRef((a,i)=>{const{children:l,...u}=a,d=x.Children.toArray(l),h=d.find(s2);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return o.jsx(e,{...u,ref:i,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return o.jsx(e,{...u,ref:i,children:l})});return t.displayName=`${r}.Slot`,t}function o2(r){const e=x.forwardRef((t,a)=>{const{children:i,...l}=t;if(x.isValidElement(i)){const u=l2(i),d=i2(l,i.props);return i.type!==x.Fragment&&(d.ref=a?io(a,u):u),x.cloneElement(i,d)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var a2=Symbol("radix.slottable");function s2(r){return x.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===a2}function i2(r,e){const t={...e};for(const a in e){const i=r[a],l=e[a];/^on[A-Z]/.test(a)?i&&l?t[a]=(...d)=>{const h=l(...d);return i(...d),h}:i&&(t[a]=i):a==="style"?t[a]={...i,...l}:a==="className"&&(t[a]=[i,l].filter(Boolean).join(" "))}return{...r,...t}}function l2(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function Qf(r){const e=x.useRef({value:r,previous:r});return x.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}var Ew=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),c2="VisuallyHidden",u2=x.forwardRef((r,e)=>o.jsx(Ue.span,{...r,ref:e,style:{...Ew,...r.style}}));u2.displayName=c2;var d2=[" ","Enter","ArrowUp","ArrowDown"],h2=[" ","Enter"],ga="Select",[au,su,f2]=Of(ga),[_s]=mn(ga,[f2,Xc]),iu=Xc(),[p2,Vo]=_s(ga),[m2,g2]=_s(ga),kw=r=>{const{__scopeSelect:e,children:t,open:a,defaultOpen:i,onOpenChange:l,value:u,defaultValue:d,onValueChange:h,dir:p,name:g,autoComplete:m,disabled:w,required:y,form:j}=r,_=iu(e),[C,S]=x.useState(null),[E,N]=x.useState(null),[D,R]=x.useState(!1),O=qc(p),[B,F]=Mo({prop:a,defaultProp:i??!1,onChange:l,caller:ga}),[H,Z]=Mo({prop:u,defaultProp:d,onChange:h,caller:ga}),ae=x.useRef(null),ue=C?j||!!C.closest("form"):!0,[z,V]=x.useState(new Set),se=Array.from(z).map(X=>X.props.value).join(";");return o.jsx(Ry,{..._,children:o.jsxs(p2,{required:y,scope:e,trigger:C,onTriggerChange:S,valueNode:E,onValueNodeChange:N,valueNodeHasChildren:D,onValueNodeHasChildrenChange:R,contentId:kn(),value:H,onValueChange:Z,open:B,onOpenChange:F,dir:O,triggerPointerDownPosRef:ae,disabled:w,children:[o.jsx(au.Provider,{scope:e,children:o.jsx(m2,{scope:r.__scopeSelect,onNativeOptionAdd:x.useCallback(X=>{V(re=>new Set(re).add(X))},[]),onNativeOptionRemove:x.useCallback(X=>{V(re=>{const U=new Set(re);return U.delete(X),U})},[]),children:t})}),ue?o.jsxs(Jw,{"aria-hidden":!0,required:y,tabIndex:-1,name:g,autoComplete:m,value:H,onChange:X=>Z(X.target.value),disabled:w,form:j,children:[H===void 0?o.jsx("option",{value:""}):null,Array.from(z)]},se):null]})})};kw.displayName=ga;var Nw="SelectTrigger",Pw=x.forwardRef((r,e)=>{const{__scopeSelect:t,disabled:a=!1,...i}=r,l=iu(t),u=Vo(Nw,t),d=u.disabled||a,h=lt(e,u.onTriggerChange),p=su(t),g=x.useRef("touch"),[m,w,y]=Xw(_=>{const C=p().filter(N=>!N.disabled),S=C.find(N=>N.value===u.value),E=Qw(C,_,S);E!==void 0&&u.onValueChange(E.value)}),j=_=>{d||(u.onOpenChange(!0),y()),_&&(u.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return o.jsx(Ay,{asChild:!0,...l,children:o.jsx(Ue.button,{type:"button",role:"combobox","aria-controls":u.contentId,"aria-expanded":u.open,"aria-required":u.required,"aria-autocomplete":"none",dir:u.dir,"data-state":u.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":Yw(u.value)?"":void 0,...i,ref:h,onClick:ke(i.onClick,_=>{_.currentTarget.focus(),g.current!=="mouse"&&j(_)}),onPointerDown:ke(i.onPointerDown,_=>{g.current=_.pointerType;const C=_.target;C.hasPointerCapture(_.pointerId)&&C.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(j(_),_.preventDefault())}),onKeyDown:ke(i.onKeyDown,_=>{const C=m.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&w(_.key),!(C&&_.key===" ")&&d2.includes(_.key)&&(j(),_.preventDefault())})})})});Pw.displayName=Nw;var Rw="SelectValue",Aw=x.forwardRef((r,e)=>{const{__scopeSelect:t,className:a,style:i,children:l,placeholder:u="",...d}=r,h=Vo(Rw,t),{onValueNodeHasChildrenChange:p}=h,g=l!==void 0,m=lt(e,h.onValueNodeChange);return ir(()=>{p(g)},[p,g]),o.jsx(Ue.span,{...d,ref:m,style:{pointerEvents:"none"},children:Yw(h.value)?o.jsx(o.Fragment,{children:u}):l})});Aw.displayName=Rw;var v2="SelectIcon",Tw=x.forwardRef((r,e)=>{const{__scopeSelect:t,children:a,...i}=r;return o.jsx(Ue.span,{"aria-hidden":!0,...i,ref:e,children:a||""})});Tw.displayName=v2;var x2="SelectPortal",Ow=r=>o.jsx(Qc,{asChild:!0,...r});Ow.displayName=x2;var va="SelectContent",Dw=x.forwardRef((r,e)=>{const t=Vo(va,r.__scopeSelect),[a,i]=x.useState();if(ir(()=>{i(new DocumentFragment)},[]),!t.open){const l=a;return l?Sn.createPortal(o.jsx(Iw,{scope:r.__scopeSelect,children:o.jsx(au.Slot,{scope:r.__scopeSelect,children:o.jsx("div",{children:r.children})})}),l):null}return o.jsx(Mw,{...r,ref:e})});Dw.displayName=va;var un=10,[Iw,qo]=_s(va),y2="SelectContentImpl",w2=n2("SelectContent.RemoveScroll"),Mw=x.forwardRef((r,e)=>{const{__scopeSelect:t,position:a="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:l,onPointerDownOutside:u,side:d,sideOffset:h,align:p,alignOffset:g,arrowPadding:m,collisionBoundary:w,collisionPadding:y,sticky:j,hideWhenDetached:_,avoidCollisions:C,...S}=r,E=Vo(va,t),[N,D]=x.useState(null),[R,O]=x.useState(null),B=lt(e,J=>D(J)),[F,H]=x.useState(null),[Z,ae]=x.useState(null),ue=su(t),[z,V]=x.useState(!1),se=x.useRef(!1);x.useEffect(()=>{if(N)return qf(N)},[N]),Df();const X=x.useCallback(J=>{const[q,...le]=ue().map(je=>je.ref.current),[de]=le.slice(-1),we=document.activeElement;for(const je of J)if(je===we||(je?.scrollIntoView({block:"nearest"}),je===q&&R&&(R.scrollTop=0),je===de&&R&&(R.scrollTop=R.scrollHeight),je?.focus(),document.activeElement!==we))return},[ue,R]),re=x.useCallback(()=>X([F,N]),[X,F,N]);x.useEffect(()=>{z&&re()},[z,re]);const{onOpenChange:U,triggerPointerDownPosRef:I}=E;x.useEffect(()=>{if(N){let J={x:0,y:0};const q=de=>{J={x:Math.abs(Math.round(de.pageX)-(I.current?.x??0)),y:Math.abs(Math.round(de.pageY)-(I.current?.y??0))}},le=de=>{J.x<=10&&J.y<=10?de.preventDefault():N.contains(de.target)||U(!1),document.removeEventListener("pointermove",q),I.current=null};return I.current!==null&&(document.addEventListener("pointermove",q),document.addEventListener("pointerup",le,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",le,{capture:!0})}}},[N,U,I]),x.useEffect(()=>{const J=()=>U(!1);return window.addEventListener("blur",J),window.addEventListener("resize",J),()=>{window.removeEventListener("blur",J),window.removeEventListener("resize",J)}},[U]);const[P,A]=Xw(J=>{const q=ue().filter(we=>!we.disabled),le=q.find(we=>we.ref.current===document.activeElement),de=Qw(q,J,le);de&&setTimeout(()=>de.ref.current.focus())}),M=x.useCallback((J,q,le)=>{const de=!se.current&&!le;(E.value!==void 0&&E.value===q||de)&&(H(J),de&&(se.current=!0))},[E.value]),T=x.useCallback(()=>N?.focus(),[N]),$=x.useCallback((J,q,le)=>{const de=!se.current&&!le;(E.value!==void 0&&E.value===q||de)&&ae(J)},[E.value]),Q=a==="popper"?sf:Fw,pe=Q===sf?{side:d,sideOffset:h,align:p,alignOffset:g,arrowPadding:m,collisionBoundary:w,collisionPadding:y,sticky:j,hideWhenDetached:_,avoidCollisions:C}:{};return o.jsx(Iw,{scope:t,content:N,viewport:R,onViewportChange:O,itemRefCallback:M,selectedItem:F,onItemLeave:T,itemTextRefCallback:$,focusSelectedItem:re,selectedItemText:Z,position:a,isPositioned:z,searchRef:P,children:o.jsx(tu,{as:w2,allowPinchZoom:!0,children:o.jsx(Hc,{asChild:!0,trapped:E.open,onMountAutoFocus:J=>{J.preventDefault()},onUnmountAutoFocus:ke(i,J=>{E.trigger?.focus({preventScroll:!0}),J.preventDefault()}),children:o.jsx(Wc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:J=>J.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:o.jsx(Q,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:J=>J.preventDefault(),...S,...pe,onPlaced:()=>V(!0),ref:B,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:ke(S.onKeyDown,J=>{const q=J.ctrlKey||J.altKey||J.metaKey;if(J.key==="Tab"&&J.preventDefault(),!q&&J.key.length===1&&A(J.key),["ArrowUp","ArrowDown","Home","End"].includes(J.key)){let de=ue().filter(we=>!we.disabled).map(we=>we.ref.current);if(["ArrowUp","End"].includes(J.key)&&(de=de.slice().reverse()),["ArrowUp","ArrowDown"].includes(J.key)){const we=J.target,je=de.indexOf(we);de=de.slice(je+1)}setTimeout(()=>X(de)),J.preventDefault()}})})})})})})});Mw.displayName=y2;var b2="SelectItemAlignedPosition",Fw=x.forwardRef((r,e)=>{const{__scopeSelect:t,onPlaced:a,...i}=r,l=Vo(va,t),u=qo(va,t),[d,h]=x.useState(null),[p,g]=x.useState(null),m=lt(e,B=>g(B)),w=su(t),y=x.useRef(!1),j=x.useRef(!0),{viewport:_,selectedItem:C,selectedItemText:S,focusSelectedItem:E}=u,N=x.useCallback(()=>{if(l.trigger&&l.valueNode&&d&&p&&_&&C&&S){const B=l.trigger.getBoundingClientRect(),F=p.getBoundingClientRect(),H=l.valueNode.getBoundingClientRect(),Z=S.getBoundingClientRect();if(l.dir!=="rtl"){const we=Z.left-F.left,je=H.left-we,ye=B.left-je,Ae=B.width+ye,ze=Math.max(Ae,F.width),$e=window.innerWidth-un,Ge=gx(je,[un,Math.max(un,$e-ze)]);d.style.minWidth=Ae+"px",d.style.left=Ge+"px"}else{const we=F.right-Z.right,je=window.innerWidth-H.right-we,ye=window.innerWidth-B.right-je,Ae=B.width+ye,ze=Math.max(Ae,F.width),$e=window.innerWidth-un,Ge=gx(je,[un,Math.max(un,$e-ze)]);d.style.minWidth=Ae+"px",d.style.right=Ge+"px"}const ae=w(),ue=window.innerHeight-un*2,z=_.scrollHeight,V=window.getComputedStyle(p),se=parseInt(V.borderTopWidth,10),X=parseInt(V.paddingTop,10),re=parseInt(V.borderBottomWidth,10),U=parseInt(V.paddingBottom,10),I=se+X+z+U+re,P=Math.min(C.offsetHeight*5,I),A=window.getComputedStyle(_),M=parseInt(A.paddingTop,10),T=parseInt(A.paddingBottom,10),$=B.top+B.height/2-un,Q=ue-$,pe=C.offsetHeight/2,J=C.offsetTop+pe,q=se+X+J,le=I-q;if(q<=$){const we=ae.length>0&&C===ae[ae.length-1].ref.current;d.style.bottom="0px";const je=p.clientHeight-_.offsetTop-_.offsetHeight,ye=Math.max(Q,pe+(we?T:0)+je+re),Ae=q+ye;d.style.height=Ae+"px"}else{const we=ae.length>0&&C===ae[0].ref.current;d.style.top="0px";const ye=Math.max($,se+_.offsetTop+(we?M:0)+pe)+le;d.style.height=ye+"px",_.scrollTop=q-$+_.offsetTop}d.style.margin=`${un}px 0`,d.style.minHeight=P+"px",d.style.maxHeight=ue+"px",a?.(),requestAnimationFrame(()=>y.current=!0)}},[w,l.trigger,l.valueNode,d,p,_,C,S,l.dir,a]);ir(()=>N(),[N]);const[D,R]=x.useState();ir(()=>{p&&R(window.getComputedStyle(p).zIndex)},[p]);const O=x.useCallback(B=>{B&&j.current===!0&&(N(),E?.(),j.current=!1)},[N,E]);return o.jsx(j2,{scope:t,contentWrapper:d,shouldExpandOnScrollRef:y,onScrollButtonChange:O,children:o.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:D},children:o.jsx(Ue.div,{...i,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Fw.displayName=b2;var _2="SelectPopperPosition",sf=x.forwardRef((r,e)=>{const{__scopeSelect:t,align:a="start",collisionPadding:i=un,...l}=r,u=iu(t);return o.jsx(Ty,{...u,...l,ref:e,align:a,collisionPadding:i,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});sf.displayName=_2;var[j2,Zf]=_s(va,{}),lf="SelectViewport",$w=x.forwardRef((r,e)=>{const{__scopeSelect:t,nonce:a,...i}=r,l=qo(lf,t),u=Zf(lf,t),d=lt(e,l.onViewportChange),h=x.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),o.jsx(au.Slot,{scope:t,children:o.jsx(Ue.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ke(i.onScroll,p=>{const g=p.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:w}=u;if(w?.current&&m){const y=Math.abs(h.current-g.scrollTop);if(y>0){const j=window.innerHeight-un*2,_=parseFloat(m.style.minHeight),C=parseFloat(m.style.height),S=Math.max(_,C);if(S<j){const E=S+y,N=Math.min(j,E),D=E-N;m.style.height=N+"px",m.style.bottom==="0px"&&(g.scrollTop=D>0?D:0,m.style.justifyContent="flex-end")}}}h.current=g.scrollTop})})})]})});$w.displayName=lf;var Lw="SelectGroup",[C2,S2]=_s(Lw),E2=x.forwardRef((r,e)=>{const{__scopeSelect:t,...a}=r,i=kn();return o.jsx(C2,{scope:t,id:i,children:o.jsx(Ue.div,{role:"group","aria-labelledby":i,...a,ref:e})})});E2.displayName=Lw;var zw="SelectLabel",k2=x.forwardRef((r,e)=>{const{__scopeSelect:t,...a}=r,i=S2(zw,t);return o.jsx(Ue.div,{id:i.id,...a,ref:e})});k2.displayName=zw;var Pc="SelectItem",[N2,Bw]=_s(Pc),Uw=x.forwardRef((r,e)=>{const{__scopeSelect:t,value:a,disabled:i=!1,textValue:l,...u}=r,d=Vo(Pc,t),h=qo(Pc,t),p=d.value===a,[g,m]=x.useState(l??""),[w,y]=x.useState(!1),j=lt(e,E=>h.itemRefCallback?.(E,a,i)),_=kn(),C=x.useRef("touch"),S=()=>{i||(d.onValueChange(a),d.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(N2,{scope:t,value:a,disabled:i,textId:_,isSelected:p,onItemTextChange:x.useCallback(E=>{m(N=>N||(E?.textContent??"").trim())},[]),children:o.jsx(au.ItemSlot,{scope:t,value:a,disabled:i,textValue:g,children:o.jsx(Ue.div,{role:"option","aria-labelledby":_,"data-highlighted":w?"":void 0,"aria-selected":p&&w,"data-state":p?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...u,ref:j,onFocus:ke(u.onFocus,()=>y(!0)),onBlur:ke(u.onBlur,()=>y(!1)),onClick:ke(u.onClick,()=>{C.current!=="mouse"&&S()}),onPointerUp:ke(u.onPointerUp,()=>{C.current==="mouse"&&S()}),onPointerDown:ke(u.onPointerDown,E=>{C.current=E.pointerType}),onPointerMove:ke(u.onPointerMove,E=>{C.current=E.pointerType,i?h.onItemLeave?.():C.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ke(u.onPointerLeave,E=>{E.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:ke(u.onKeyDown,E=>{h.searchRef?.current!==""&&E.key===" "||(h2.includes(E.key)&&S(),E.key===" "&&E.preventDefault())})})})})});Uw.displayName=Pc;var di="SelectItemText",Vw=x.forwardRef((r,e)=>{const{__scopeSelect:t,className:a,style:i,...l}=r,u=Vo(di,t),d=qo(di,t),h=Bw(di,t),p=g2(di,t),[g,m]=x.useState(null),w=lt(e,S=>m(S),h.onItemTextChange,S=>d.itemTextRefCallback?.(S,h.value,h.disabled)),y=g?.textContent,j=x.useMemo(()=>o.jsx("option",{value:h.value,disabled:h.disabled,children:y},h.value),[h.disabled,h.value,y]),{onNativeOptionAdd:_,onNativeOptionRemove:C}=p;return ir(()=>(_(j),()=>C(j)),[_,C,j]),o.jsxs(o.Fragment,{children:[o.jsx(Ue.span,{id:h.textId,...l,ref:w}),h.isSelected&&u.valueNode&&!u.valueNodeHasChildren?Sn.createPortal(l.children,u.valueNode):null]})});Vw.displayName=di;var qw="SelectItemIndicator",Ww=x.forwardRef((r,e)=>{const{__scopeSelect:t,...a}=r;return Bw(qw,t).isSelected?o.jsx(Ue.span,{"aria-hidden":!0,...a,ref:e}):null});Ww.displayName=qw;var cf="SelectScrollUpButton",Hw=x.forwardRef((r,e)=>{const t=qo(cf,r.__scopeSelect),a=Zf(cf,r.__scopeSelect),[i,l]=x.useState(!1),u=lt(e,a.onScrollButtonChange);return ir(()=>{if(t.viewport&&t.isPositioned){let d=function(){const p=h.scrollTop>0;l(p)};const h=t.viewport;return d(),h.addEventListener("scroll",d),()=>h.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),i?o.jsx(Kw,{...r,ref:u,onAutoScroll:()=>{const{viewport:d,selectedItem:h}=t;d&&h&&(d.scrollTop=d.scrollTop-h.offsetHeight)}}):null});Hw.displayName=cf;var uf="SelectScrollDownButton",Gw=x.forwardRef((r,e)=>{const t=qo(uf,r.__scopeSelect),a=Zf(uf,r.__scopeSelect),[i,l]=x.useState(!1),u=lt(e,a.onScrollButtonChange);return ir(()=>{if(t.viewport&&t.isPositioned){let d=function(){const p=h.scrollHeight-h.clientHeight,g=Math.ceil(h.scrollTop)<p;l(g)};const h=t.viewport;return d(),h.addEventListener("scroll",d),()=>h.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),i?o.jsx(Kw,{...r,ref:u,onAutoScroll:()=>{const{viewport:d,selectedItem:h}=t;d&&h&&(d.scrollTop=d.scrollTop+h.offsetHeight)}}):null});Gw.displayName=uf;var Kw=x.forwardRef((r,e)=>{const{__scopeSelect:t,onAutoScroll:a,...i}=r,l=qo("SelectScrollButton",t),u=x.useRef(null),d=su(t),h=x.useCallback(()=>{u.current!==null&&(window.clearInterval(u.current),u.current=null)},[]);return x.useEffect(()=>()=>h(),[h]),ir(()=>{d().find(g=>g.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[d]),o.jsx(Ue.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:ke(i.onPointerDown,()=>{u.current===null&&(u.current=window.setInterval(a,50))}),onPointerMove:ke(i.onPointerMove,()=>{l.onItemLeave?.(),u.current===null&&(u.current=window.setInterval(a,50))}),onPointerLeave:ke(i.onPointerLeave,()=>{h()})})}),P2="SelectSeparator",R2=x.forwardRef((r,e)=>{const{__scopeSelect:t,...a}=r;return o.jsx(Ue.div,{"aria-hidden":!0,...a,ref:e})});R2.displayName=P2;var df="SelectArrow",A2=x.forwardRef((r,e)=>{const{__scopeSelect:t,...a}=r,i=iu(t),l=Vo(df,t),u=qo(df,t);return l.open&&u.position==="popper"?o.jsx(Oy,{...i,...a,ref:e}):null});A2.displayName=df;var T2="SelectBubbleInput",Jw=x.forwardRef(({__scopeSelect:r,value:e,...t},a)=>{const i=x.useRef(null),l=lt(a,i),u=Qf(e);return x.useEffect(()=>{const d=i.current;if(!d)return;const h=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(u!==e&&g){const m=new Event("change",{bubbles:!0});g.call(d,e),d.dispatchEvent(m)}},[u,e]),o.jsx(Ue.select,{...t,style:{...Ew,...t.style},ref:l,defaultValue:e})});Jw.displayName=T2;function Yw(r){return r===""||r===void 0}function Xw(r){const e=Pn(r),t=x.useRef(""),a=x.useRef(0),i=x.useCallback(u=>{const d=t.current+u;e(d),(function h(p){t.current=p,window.clearTimeout(a.current),p!==""&&(a.current=window.setTimeout(()=>h(""),1e3))})(d)},[e]),l=x.useCallback(()=>{t.current="",window.clearTimeout(a.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(a.current),[]),[t,i,l]}function Qw(r,e,t){const i=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,l=t?r.indexOf(t):-1;let u=O2(r,Math.max(l,0));i.length===1&&(u=u.filter(p=>p!==t));const h=u.find(p=>p.textValue.toLowerCase().startsWith(i.toLowerCase()));return h!==t?h:void 0}function O2(r,e){return r.map((t,a)=>r[(e+a)%r.length])}var D2=kw,I2=Pw,M2=Aw,F2=Tw,$2=Ow,L2=Dw,z2=$w,B2=Uw,U2=Vw,V2=Ww,q2=Hw,W2=Gw;function et({...r}){return o.jsx(D2,{"data-slot":"select",...r})}function tt({...r}){return o.jsx(M2,{"data-slot":"select-value",...r})}function rt({className:r,size:e="default",children:t,...a}){return o.jsxs(I2,{"data-slot":"select-trigger","data-size":e,className:Le("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...a,children:[t,o.jsx(F2,{asChild:!0,children:o.jsx(Tf,{className:"size-4 opacity-50"})})]})}function nt({className:r,children:e,position:t="popper",...a}){return o.jsx($2,{children:o.jsxs(L2,{"data-slot":"select-content",className:Le("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:t,...a,children:[o.jsx(H2,{}),o.jsx(z2,{className:Le("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),o.jsx(G2,{})]})})}function ie({className:r,children:e,...t}){return o.jsxs(B2,{"data-slot":"select-item",className:Le("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",r),...t,children:[o.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:o.jsx(V2,{children:o.jsx(ry,{className:"size-4"})})}),o.jsx(U2,{children:e})]})}function H2({className:r,...e}){return o.jsx(q2,{"data-slot":"select-scroll-up-button",className:Le("flex cursor-default items-center justify-center py-1",r),...e,children:o.jsx($1,{className:"size-4"})})}function G2({className:r,...e}){return o.jsx(W2,{"data-slot":"select-scroll-down-button",className:Le("flex cursor-default items-center justify-center py-1",r),...e,children:o.jsx(Tf,{className:"size-4"})})}var lu="Switch",[K2]=mn(lu),[J2,Y2]=K2(lu),Zw=x.forwardRef((r,e)=>{const{__scopeSwitch:t,name:a,checked:i,defaultChecked:l,required:u,disabled:d,value:h="on",onCheckedChange:p,form:g,...m}=r,[w,y]=x.useState(null),j=lt(e,N=>y(N)),_=x.useRef(!1),C=w?g||!!w.closest("form"):!0,[S,E]=Mo({prop:i,defaultProp:l??!1,onChange:p,caller:lu});return o.jsxs(J2,{scope:t,checked:S,disabled:d,children:[o.jsx(Ue.button,{type:"button",role:"switch","aria-checked":S,"aria-required":u,"data-state":nb(S),"data-disabled":d?"":void 0,disabled:d,value:h,...m,ref:j,onClick:ke(r.onClick,N=>{E(D=>!D),C&&(_.current=N.isPropagationStopped(),_.current||N.stopPropagation())})}),C&&o.jsx(rb,{control:w,bubbles:!_.current,name:a,value:h,checked:S,required:u,disabled:d,form:g,style:{transform:"translateX(-100%)"}})]})});Zw.displayName=lu;var eb="SwitchThumb",tb=x.forwardRef((r,e)=>{const{__scopeSwitch:t,...a}=r,i=Y2(eb,t);return o.jsx(Ue.span,{"data-state":nb(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:e})});tb.displayName=eb;var X2="SwitchBubbleInput",rb=x.forwardRef(({__scopeSwitch:r,control:e,checked:t,bubbles:a=!0,...i},l)=>{const u=x.useRef(null),d=lt(u,l),h=Qf(t),p=Bf(e);return x.useEffect(()=>{const g=u.current;if(!g)return;const m=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(m,"checked").set;if(h!==t&&y){const j=new Event("click",{bubbles:a});y.call(g,t),g.dispatchEvent(j)}},[h,t,a]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:d,style:{...i.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});rb.displayName=X2;function nb(r){return r?"checked":"unchecked"}var Q2=Zw,Z2=tb;function jh({className:r,...e}){return o.jsx(Q2,{"data-slot":"switch",className:Le("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...e,children:o.jsx(Z2,{"data-slot":"switch-thumb",className:Le("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function eO(){const[r,e]=x.useState({language:"pt-BR",timezone:"America/Sao_Paulo",currency:"BRL",emailNotifications:!0,pushNotifications:!1,weeklyReports:!0}),[t,a]=x.useState(!1),i=async()=>{a(!0),await new Promise(l=>setTimeout(l,1e3)),a(!1),ee.success("Configuraes salvas com sucesso!")};return o.jsx("div",{className:"h-full flex flex-col p-4 lg:p-8",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-gray-900 dark:text-white mb-2",children:"Configuraes Gerais"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure idioma, fuso horrio, moeda e preferncias de notificaes"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(qe,{children:[o.jsxs(Je,{children:[o.jsx(Ye,{children:"Preferncias Regionais"}),o.jsx(fs,{children:"Defina o idioma, fuso horrio e moeda padro do sistema"})]}),o.jsxs(We,{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"language",children:"Idioma"}),o.jsxs(et,{value:r.language,onValueChange:l=>e(u=>({...u,language:l})),children:[o.jsx(rt,{id:"language",children:o.jsx(tt,{})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"pt-BR",children:"Portugus (Brasil)"}),o.jsx(ie,{value:"en-US",children:"English (US)"}),o.jsx(ie,{value:"es-ES",children:"Espaol"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"timezone",children:"Fuso Horrio"}),o.jsxs(et,{value:r.timezone,onValueChange:l=>e(u=>({...u,timezone:l})),children:[o.jsx(rt,{id:"timezone",children:o.jsx(tt,{})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"America/Sao_Paulo",children:"Braslia (GMT-3)"}),o.jsx(ie,{value:"America/Manaus",children:"Manaus (GMT-4)"}),o.jsx(ie,{value:"America/Rio_Branco",children:"Rio Branco (GMT-5)"})]})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"currency",children:"Moeda"}),o.jsxs(et,{value:r.currency,onValueChange:l=>e(u=>({...u,currency:l})),children:[o.jsx(rt,{id:"currency",children:o.jsx(tt,{})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"BRL",children:"Real (R$)"}),o.jsx(ie,{value:"USD",children:"Dlar ($)"}),o.jsx(ie,{value:"EUR",children:"Euro ()"})]})]})]})]})]}),o.jsxs(qe,{children:[o.jsxs(Je,{children:[o.jsx(Ye,{children:"Notificaes"}),o.jsx(fs,{children:"Escolha como e quando voc deseja receber notificaes"})]}),o.jsxs(We,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(K,{htmlFor:"email-notifications",children:"Notificaes por E-mail"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Receba atualizaes importantes por e-mail"})]}),o.jsx(jh,{id:"email-notifications",checked:r.emailNotifications,onCheckedChange:l=>e(u=>({...u,emailNotifications:l}))})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(K,{htmlFor:"push-notifications",children:"Notificaes Push"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Receba notificaes em tempo real no navegador"})]}),o.jsx(jh,{id:"push-notifications",checked:r.pushNotifications,onCheckedChange:l=>e(u=>({...u,pushNotifications:l}))})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(K,{htmlFor:"weekly-reports",children:"Relatrios Semanais"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Receba um resumo semanal das atividades"})]}),o.jsx(jh,{id:"weekly-reports",checked:r.weeklyReports,onCheckedChange:l=>e(u=>({...u,weeklyReports:l}))})]})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsxs(xe,{onClick:i,disabled:t,className:"gap-2",children:[o.jsx(Pi,{className:"w-4 h-4"}),t?"Salvando...":"Salvar Configuraes"]})})]})]})})}var cu="Checkbox",[tO]=mn(cu),[rO,ep]=tO(cu);function nO(r){const{__scopeCheckbox:e,checked:t,children:a,defaultChecked:i,disabled:l,form:u,name:d,onCheckedChange:h,required:p,value:g="on",internal_do_not_use_render:m}=r,[w,y]=Mo({prop:t,defaultProp:i??!1,onChange:h,caller:cu}),[j,_]=x.useState(null),[C,S]=x.useState(null),E=x.useRef(!1),N=j?!!u||!!j.closest("form"):!0,D={checked:w,disabled:l,setChecked:y,control:j,setControl:_,name:d,form:u,value:g,hasConsumerStoppedPropagationRef:E,required:p,defaultChecked:Io(i)?!1:i,isFormControl:N,bubbleInput:C,setBubbleInput:S};return o.jsx(rO,{scope:e,...D,children:oO(m)?m(D):a})}var ob="CheckboxTrigger",ab=x.forwardRef(({__scopeCheckbox:r,onKeyDown:e,onClick:t,...a},i)=>{const{control:l,value:u,disabled:d,checked:h,required:p,setControl:g,setChecked:m,hasConsumerStoppedPropagationRef:w,isFormControl:y,bubbleInput:j}=ep(ob,r),_=lt(i,g),C=x.useRef(h);return x.useEffect(()=>{const S=l?.form;if(S){const E=()=>m(C.current);return S.addEventListener("reset",E),()=>S.removeEventListener("reset",E)}},[l,m]),o.jsx(Ue.button,{type:"button",role:"checkbox","aria-checked":Io(h)?"mixed":h,"aria-required":p,"data-state":db(h),"data-disabled":d?"":void 0,disabled:d,value:u,...a,ref:_,onKeyDown:ke(e,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:ke(t,S=>{m(E=>Io(E)?!0:!E),j&&y&&(w.current=S.isPropagationStopped(),w.current||S.stopPropagation())})})});ab.displayName=ob;var sb=x.forwardRef((r,e)=>{const{__scopeCheckbox:t,name:a,checked:i,defaultChecked:l,required:u,disabled:d,value:h,onCheckedChange:p,form:g,...m}=r;return o.jsx(nO,{__scopeCheckbox:t,checked:i,defaultChecked:l,disabled:d,required:u,onCheckedChange:p,name:a,form:g,value:h,internal_do_not_use_render:({isFormControl:w})=>o.jsxs(o.Fragment,{children:[o.jsx(ab,{...m,ref:e,__scopeCheckbox:t}),w&&o.jsx(ub,{__scopeCheckbox:t})]})})});sb.displayName=cu;var ib="CheckboxIndicator",lb=x.forwardRef((r,e)=>{const{__scopeCheckbox:t,forceMount:a,...i}=r,l=ep(ib,t);return o.jsx(qn,{present:a||Io(l.checked)||l.checked===!0,children:o.jsx(Ue.span,{"data-state":db(l.checked),"data-disabled":l.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...r.style}})})});lb.displayName=ib;var cb="CheckboxBubbleInput",ub=x.forwardRef(({__scopeCheckbox:r,...e},t)=>{const{control:a,hasConsumerStoppedPropagationRef:i,checked:l,defaultChecked:u,required:d,disabled:h,name:p,value:g,form:m,bubbleInput:w,setBubbleInput:y}=ep(cb,r),j=lt(t,y),_=Qf(l),C=Bf(a);x.useEffect(()=>{const E=w;if(!E)return;const N=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(N,"checked").set,O=!i.current;if(_!==l&&R){const B=new Event("click",{bubbles:O});E.indeterminate=Io(l),R.call(E,Io(l)?!1:l),E.dispatchEvent(B)}},[w,_,l,i]);const S=x.useRef(Io(l)?!1:l);return o.jsx(Ue.input,{type:"checkbox","aria-hidden":!0,defaultChecked:u??S.current,required:d,disabled:h,name:p,value:g,form:m,...e,tabIndex:-1,ref:j,style:{...e.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});ub.displayName=cb;function oO(r){return typeof r=="function"}function Io(r){return r==="indeterminate"}function db(r){return Io(r)?"indeterminate":r?"checked":"unchecked"}function hf({className:r,...e}){return o.jsx(sb,{"data-slot":"checkbox",className:Le("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...e,children:o.jsx(lb,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:o.jsx(ry,{className:"size-3.5"})})})}function aO(r){const e=sO(r),t=x.forwardRef((a,i)=>{const{children:l,...u}=a,d=x.Children.toArray(l),h=d.find(lO);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return o.jsx(e,{...u,ref:i,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return o.jsx(e,{...u,ref:i,children:l})});return t.displayName=`${r}.Slot`,t}function sO(r){const e=x.forwardRef((t,a)=>{const{children:i,...l}=t;if(x.isValidElement(i)){const u=uO(i),d=cO(l,i.props);return i.type!==x.Fragment&&(d.ref=a?io(a,u):u),x.cloneElement(i,d)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var iO=Symbol("radix.slottable");function lO(r){return x.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===iO}function cO(r,e){const t={...e};for(const a in e){const i=r[a],l=e[a];/^on[A-Z]/.test(a)?i&&l?t[a]=(...d)=>{const h=l(...d);return i(...d),h}:i&&(t[a]=i):a==="style"?t[a]={...i,...l}:a==="className"&&(t[a]=[i,l].filter(Boolean).join(" "))}return{...r,...t}}function uO(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var uu="Dialog",[hb,fb]=mn(uu),[dO,gn]=hb(uu),pb=r=>{const{__scopeDialog:e,children:t,open:a,defaultOpen:i,onOpenChange:l,modal:u=!0}=r,d=x.useRef(null),h=x.useRef(null),[p,g]=Mo({prop:a,defaultProp:i??!1,onChange:l,caller:uu});return o.jsx(dO,{scope:e,triggerRef:d,contentRef:h,contentId:kn(),titleId:kn(),descriptionId:kn(),open:p,onOpenChange:g,onOpenToggle:x.useCallback(()=>g(m=>!m),[g]),modal:u,children:t})};pb.displayName=uu;var mb="DialogTrigger",gb=x.forwardRef((r,e)=>{const{__scopeDialog:t,...a}=r,i=gn(mb,t),l=lt(e,i.triggerRef);return o.jsx(Ue.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":np(i.open),...a,ref:l,onClick:ke(r.onClick,i.onOpenToggle)})});gb.displayName=mb;var tp="DialogPortal",[hO,vb]=hb(tp,{forceMount:void 0}),xb=r=>{const{__scopeDialog:e,forceMount:t,children:a,container:i}=r,l=gn(tp,e);return o.jsx(hO,{scope:e,forceMount:t,children:x.Children.map(a,u=>o.jsx(qn,{present:t||l.open,children:o.jsx(Qc,{asChild:!0,container:i,children:u})}))})};xb.displayName=tp;var Rc="DialogOverlay",yb=x.forwardRef((r,e)=>{const t=vb(Rc,r.__scopeDialog),{forceMount:a=t.forceMount,...i}=r,l=gn(Rc,r.__scopeDialog);return l.modal?o.jsx(qn,{present:a||l.open,children:o.jsx(pO,{...i,ref:e})}):null});yb.displayName=Rc;var fO=aO("DialogOverlay.RemoveScroll"),pO=x.forwardRef((r,e)=>{const{__scopeDialog:t,...a}=r,i=gn(Rc,t);return o.jsx(tu,{as:fO,allowPinchZoom:!0,shards:[i.contentRef],children:o.jsx(Ue.div,{"data-state":np(i.open),...a,ref:e,style:{pointerEvents:"auto",...a.style}})})}),xa="DialogContent",wb=x.forwardRef((r,e)=>{const t=vb(xa,r.__scopeDialog),{forceMount:a=t.forceMount,...i}=r,l=gn(xa,r.__scopeDialog);return o.jsx(qn,{present:a||l.open,children:l.modal?o.jsx(mO,{...i,ref:e}):o.jsx(gO,{...i,ref:e})})});wb.displayName=xa;var mO=x.forwardRef((r,e)=>{const t=gn(xa,r.__scopeDialog),a=x.useRef(null),i=lt(e,t.contentRef,a);return x.useEffect(()=>{const l=a.current;if(l)return qf(l)},[]),o.jsx(bb,{...r,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ke(r.onCloseAutoFocus,l=>{l.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:ke(r.onPointerDownOutside,l=>{const u=l.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0;(u.button===2||d)&&l.preventDefault()}),onFocusOutside:ke(r.onFocusOutside,l=>l.preventDefault())})}),gO=x.forwardRef((r,e)=>{const t=gn(xa,r.__scopeDialog),a=x.useRef(!1),i=x.useRef(!1);return o.jsx(bb,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{r.onCloseAutoFocus?.(l),l.defaultPrevented||(a.current||t.triggerRef.current?.focus(),l.preventDefault()),a.current=!1,i.current=!1},onInteractOutside:l=>{r.onInteractOutside?.(l),l.defaultPrevented||(a.current=!0,l.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const u=l.target;t.triggerRef.current?.contains(u)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&i.current&&l.preventDefault()}})}),bb=x.forwardRef((r,e)=>{const{__scopeDialog:t,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:l,...u}=r,d=gn(xa,t),h=x.useRef(null),p=lt(e,h);return Df(),o.jsxs(o.Fragment,{children:[o.jsx(Hc,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:i,onUnmountAutoFocus:l,children:o.jsx(Wc,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":np(d.open),...u,ref:p,onDismiss:()=>d.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(xO,{titleId:d.titleId}),o.jsx(wO,{contentRef:h,descriptionId:d.descriptionId})]})]})}),rp="DialogTitle",_b=x.forwardRef((r,e)=>{const{__scopeDialog:t,...a}=r,i=gn(rp,t);return o.jsx(Ue.h2,{id:i.titleId,...a,ref:e})});_b.displayName=rp;var jb="DialogDescription",Cb=x.forwardRef((r,e)=>{const{__scopeDialog:t,...a}=r,i=gn(jb,t);return o.jsx(Ue.p,{id:i.descriptionId,...a,ref:e})});Cb.displayName=jb;var Sb="DialogClose",Eb=x.forwardRef((r,e)=>{const{__scopeDialog:t,...a}=r,i=gn(Sb,t);return o.jsx(Ue.button,{type:"button",...a,ref:e,onClick:ke(r.onClick,()=>i.onOpenChange(!1))})});Eb.displayName=Sb;function np(r){return r?"open":"closed"}var kb="DialogTitleWarning",[vO,Nb]=ON(kb,{contentName:xa,titleName:rp,docsSlug:"dialog"}),xO=({titleId:r})=>{const e=Nb(kb),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return x.useEffect(()=>{r&&(document.getElementById(r)||console.error(t))},[t,r]),null},yO="DialogDescriptionWarning",wO=({contentRef:r,descriptionId:e})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Nb(yO).contentName}}.`;return x.useEffect(()=>{const i=r.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(a))},[a,r,e]),null},Pb=pb,Rb=gb,Ab=xb,op=yb,Tb=wb,Ob=_b,Db=Cb,ap=Eb;function Cr({...r}){return o.jsx(Pb,{"data-slot":"dialog",...r})}function Di({...r}){return o.jsx(Rb,{"data-slot":"dialog-trigger",...r})}function bO({...r}){return o.jsx(Ab,{"data-slot":"dialog-portal",...r})}const Ib=x.forwardRef(({className:r,...e},t)=>o.jsx(op,{ref:t,"data-slot":"dialog-overlay",className:Le("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",r),...e}));Ib.displayName=op.displayName;function Sr({className:r,children:e,...t}){return o.jsxs(bO,{"data-slot":"dialog-portal",children:[o.jsx(Ib,{}),o.jsxs(Tb,{"data-slot":"dialog-content",className:Le("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",r),...t,children:[e,o.jsxs(ap,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[o.jsx(oy,{}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Er({className:r,...e}){return o.jsx("div",{"data-slot":"dialog-header",className:Le("flex flex-col gap-2 text-center sm:text-left",r),...e})}function kr({className:r,...e}){return o.jsx("div",{"data-slot":"dialog-footer",className:Le("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",r),...e})}function Nr({className:r,...e}){return o.jsx(Ob,{"data-slot":"dialog-title",className:Le("text-lg leading-none font-semibold",r),...e})}function Pr({className:r,...e}){return o.jsx(Db,{"data-slot":"dialog-description",className:Le("text-muted-foreground text-sm",r),...e})}var _O=Symbol("radix.slottable");function jO(r){const e=({children:t})=>o.jsx(o.Fragment,{children:t});return e.displayName=`${r}.Slottable`,e.__radixId=_O,e}var Mb="AlertDialog",[CO]=mn(Mb,[fb]),lo=fb(),Fb=r=>{const{__scopeAlertDialog:e,...t}=r,a=lo(e);return o.jsx(Pb,{...a,...t,modal:!0})};Fb.displayName=Mb;var SO="AlertDialogTrigger",EO=x.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...a}=r,i=lo(t);return o.jsx(Rb,{...i,...a,ref:e})});EO.displayName=SO;var kO="AlertDialogPortal",$b=r=>{const{__scopeAlertDialog:e,...t}=r,a=lo(e);return o.jsx(Ab,{...a,...t})};$b.displayName=kO;var NO="AlertDialogOverlay",Lb=x.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...a}=r,i=lo(t);return o.jsx(op,{...i,...a,ref:e})});Lb.displayName=NO;var us="AlertDialogContent",[PO,RO]=CO(us),AO=jO("AlertDialogContent"),zb=x.forwardRef((r,e)=>{const{__scopeAlertDialog:t,children:a,...i}=r,l=lo(t),u=x.useRef(null),d=lt(e,u),h=x.useRef(null);return o.jsx(vO,{contentName:us,titleName:Bb,docsSlug:"alert-dialog",children:o.jsx(PO,{scope:t,cancelRef:h,children:o.jsxs(Tb,{role:"alertdialog",...l,...i,ref:d,onOpenAutoFocus:ke(i.onOpenAutoFocus,p=>{p.preventDefault(),h.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[o.jsx(AO,{children:a}),o.jsx(OO,{contentRef:u})]})})})});zb.displayName=us;var Bb="AlertDialogTitle",Ub=x.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...a}=r,i=lo(t);return o.jsx(Ob,{...i,...a,ref:e})});Ub.displayName=Bb;var Vb="AlertDialogDescription",qb=x.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...a}=r,i=lo(t);return o.jsx(Db,{...i,...a,ref:e})});qb.displayName=Vb;var TO="AlertDialogAction",Wb=x.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...a}=r,i=lo(t);return o.jsx(ap,{...i,...a,ref:e})});Wb.displayName=TO;var Hb="AlertDialogCancel",Gb=x.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...a}=r,{cancelRef:i}=RO(Hb,t),l=lo(t),u=lt(e,i);return o.jsx(ap,{...l,...a,ref:u})});Gb.displayName=Hb;var OO=({contentRef:r})=>{const e=`\`${us}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${us}\` by passing a \`${Vb}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${us}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{document.getElementById(r.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,r]),null},DO=Fb,IO=$b,MO=Lb,FO=zb,$O=Wb,LO=Gb,zO=Ub,BO=qb;function Dn({...r}){return o.jsx(DO,{"data-slot":"alert-dialog",...r})}function UO({...r}){return o.jsx(IO,{"data-slot":"alert-dialog-portal",...r})}function VO({className:r,...e}){return o.jsx(MO,{"data-slot":"alert-dialog-overlay",className:Le("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",r),...e})}function In({className:r,...e}){return o.jsxs(UO,{children:[o.jsx(VO,{}),o.jsx(FO,{"data-slot":"alert-dialog-content",className:Le("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",r),...e})]})}function Mn({className:r,...e}){return o.jsx("div",{"data-slot":"alert-dialog-header",className:Le("flex flex-col gap-2 text-center sm:text-left",r),...e})}function Fn({className:r,...e}){return o.jsx("div",{"data-slot":"alert-dialog-footer",className:Le("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",r),...e})}function $n({className:r,...e}){return o.jsx(zO,{"data-slot":"alert-dialog-title",className:Le("text-lg font-semibold",r),...e})}function Ln({className:r,...e}){return o.jsx(BO,{"data-slot":"alert-dialog-description",className:Le("text-muted-foreground text-sm",r),...e})}function zn({className:r,...e}){return o.jsx($O,{className:Le(Af(),r),...e})}function Bn({className:r,...e}){return o.jsx(LO,{className:Le(Af({variant:"outline"}),r),...e})}function qO(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return x.useMemo(()=>a=>{e.forEach(i=>i(a))},e)}const du=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function js(r){const e=Object.prototype.toString.call(r);return e==="[object Window]"||e==="[object global]"}function sp(r){return"nodeType"in r}function Rr(r){var e,t;return r?js(r)?r:sp(r)&&(e=(t=r.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function ip(r){const{Document:e}=Rr(r);return r instanceof e}function Ii(r){return js(r)?!1:r instanceof Rr(r).HTMLElement}function Kb(r){return r instanceof Rr(r).SVGElement}function Cs(r){return r?js(r)?r.document:sp(r)?ip(r)?r:Ii(r)||Kb(r)?r.ownerDocument:document:document:document}const Un=du?x.useLayoutEffect:x.useEffect;function lp(r){const e=x.useRef(r);return Un(()=>{e.current=r}),x.useCallback(function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return e.current==null?void 0:e.current(...a)},[])}function WO(){const r=x.useRef(null),e=x.useCallback((a,i)=>{r.current=setInterval(a,i)},[]),t=x.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[e,t]}function Ci(r,e){e===void 0&&(e=[r]);const t=x.useRef(r);return Un(()=>{t.current!==r&&(t.current=r)},e),t}function Mi(r,e){const t=x.useRef();return x.useMemo(()=>{const a=r(t.current);return t.current=a,a},[...e])}function Ac(r){const e=lp(r),t=x.useRef(null),a=x.useCallback(i=>{i!==t.current&&e?.(i,t.current),t.current=i},[]);return[t,a]}function ff(r){const e=x.useRef();return x.useEffect(()=>{e.current=r},[r]),e.current}let Ch={};function Fi(r,e){return x.useMemo(()=>{if(e)return e;const t=Ch[r]==null?0:Ch[r]+1;return Ch[r]=t,r+"-"+t},[r,e])}function Jb(r){return function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];return a.reduce((l,u)=>{const d=Object.entries(u);for(const[h,p]of d){const g=l[h];g!=null&&(l[h]=g+r*p)}return l},{...e})}}const ds=Jb(1),Si=Jb(-1);function HO(r){return"clientX"in r&&"clientY"in r}function cp(r){if(!r)return!1;const{KeyboardEvent:e}=Rr(r.target);return e&&r instanceof e}function GO(r){if(!r)return!1;const{TouchEvent:e}=Rr(r.target);return e&&r instanceof e}function pf(r){if(GO(r)){if(r.touches&&r.touches.length){const{clientX:e,clientY:t}=r.touches[0];return{x:e,y:t}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:e,clientY:t}=r.changedTouches[0];return{x:e,y:t}}}return HO(r)?{x:r.clientX,y:r.clientY}:null}const Ei=Object.freeze({Translate:{toString(r){if(!r)return;const{x:e,y:t}=r;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:e,scaleY:t}=r;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(r){if(r)return[Ei.Translate.toString(r),Ei.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:e,duration:t,easing:a}=r;return e+" "+t+"ms "+a}}}),vx="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function KO(r){return r.matches(vx)?r:r.querySelector(vx)}const JO={display:"none"};function YO(r){let{id:e,value:t}=r;return fe.createElement("div",{id:e,style:JO},t)}function XO(r){let{id:e,announcement:t,ariaLiveType:a="assertive"}=r;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return fe.createElement("div",{id:e,style:i,role:"status","aria-live":a,"aria-atomic":!0},t)}function QO(){const[r,e]=x.useState("");return{announce:x.useCallback(a=>{a!=null&&e(a)},[]),announcement:r}}const Yb=x.createContext(null);function ZO(r){const e=x.useContext(Yb);x.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(r)},[r,e])}function eD(){const[r]=x.useState(()=>new Set),e=x.useCallback(a=>(r.add(a),()=>r.delete(a)),[r]);return[x.useCallback(a=>{let{type:i,event:l}=a;r.forEach(u=>{var d;return(d=u[i])==null?void 0:d.call(u,l)})},[r]),e]}const tD={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},rD={onDragStart(r){let{active:e}=r;return"Picked up draggable item "+e.id+"."},onDragOver(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(r){let{active:e}=r;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function nD(r){let{announcements:e=rD,container:t,hiddenTextDescribedById:a,screenReaderInstructions:i=tD}=r;const{announce:l,announcement:u}=QO(),d=Fi("DndLiveRegion"),[h,p]=x.useState(!1);if(x.useEffect(()=>{p(!0)},[]),ZO(x.useMemo(()=>({onDragStart(m){let{active:w}=m;l(e.onDragStart({active:w}))},onDragMove(m){let{active:w,over:y}=m;e.onDragMove&&l(e.onDragMove({active:w,over:y}))},onDragOver(m){let{active:w,over:y}=m;l(e.onDragOver({active:w,over:y}))},onDragEnd(m){let{active:w,over:y}=m;l(e.onDragEnd({active:w,over:y}))},onDragCancel(m){let{active:w,over:y}=m;l(e.onDragCancel({active:w,over:y}))}}),[l,e])),!h)return null;const g=fe.createElement(fe.Fragment,null,fe.createElement(YO,{id:a,value:i.draggable}),fe.createElement(XO,{id:d,announcement:u}));return t?Sn.createPortal(g,t):g}var Ut;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(Ut||(Ut={}));function Tc(){}function xx(r,e){return x.useMemo(()=>({sensor:r,options:e??{}}),[r,e])}function oD(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return x.useMemo(()=>[...e].filter(a=>a!=null),[...e])}const pn=Object.freeze({x:0,y:0});function Xb(r,e){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))}function Qb(r,e){let{data:{value:t}}=r,{data:{value:a}}=e;return t-a}function aD(r,e){let{data:{value:t}}=r,{data:{value:a}}=e;return a-t}function yx(r){let{left:e,top:t,height:a,width:i}=r;return[{x:e,y:t},{x:e+i,y:t},{x:e,y:t+a},{x:e+i,y:t+a}]}function Zb(r,e){if(!r||r.length===0)return null;const[t]=r;return t[e]}function wx(r,e,t){return e===void 0&&(e=r.left),t===void 0&&(t=r.top),{x:e+r.width*.5,y:t+r.height*.5}}const sD=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:a}=r;const i=wx(e,e.left,e.top),l=[];for(const u of a){const{id:d}=u,h=t.get(d);if(h){const p=Xb(wx(h),i);l.push({id:d,data:{droppableContainer:u,value:p}})}}return l.sort(Qb)},iD=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:a}=r;const i=yx(e),l=[];for(const u of a){const{id:d}=u,h=t.get(d);if(h){const p=yx(h),g=i.reduce((w,y,j)=>w+Xb(p[j],y),0),m=Number((g/4).toFixed(4));l.push({id:d,data:{droppableContainer:u,value:m}})}}return l.sort(Qb)};function lD(r,e){const t=Math.max(e.top,r.top),a=Math.max(e.left,r.left),i=Math.min(e.left+e.width,r.left+r.width),l=Math.min(e.top+e.height,r.top+r.height),u=i-a,d=l-t;if(a<i&&t<l){const h=e.width*e.height,p=r.width*r.height,g=u*d,m=g/(h+p-g);return Number(m.toFixed(4))}return 0}const cD=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:a}=r;const i=[];for(const l of a){const{id:u}=l,d=t.get(u);if(d){const h=lD(d,e);h>0&&i.push({id:u,data:{droppableContainer:l,value:h}})}}return i.sort(aD)};function uD(r,e,t){return{...r,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function e_(r,e){return r&&e?{x:r.left-e.left,y:r.top-e.top}:pn}function dD(r){return function(t){for(var a=arguments.length,i=new Array(a>1?a-1:0),l=1;l<a;l++)i[l-1]=arguments[l];return i.reduce((u,d)=>({...u,top:u.top+r*d.y,bottom:u.bottom+r*d.y,left:u.left+r*d.x,right:u.right+r*d.x}),{...t})}}const hD=dD(1);function fD(r){if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function pD(r,e,t){const a=fD(e);if(!a)return r;const{scaleX:i,scaleY:l,x:u,y:d}=a,h=r.left-u-(1-i)*parseFloat(t),p=r.top-d-(1-l)*parseFloat(t.slice(t.indexOf(" ")+1)),g=i?r.width/i:r.width,m=l?r.height/l:r.height;return{width:g,height:m,top:p,right:h+g,bottom:p+m,left:h}}const mD={ignoreTransform:!1};function Ss(r,e){e===void 0&&(e=mD);let t=r.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:g}=Rr(r).getComputedStyle(r);p&&(t=pD(t,p,g))}const{top:a,left:i,width:l,height:u,bottom:d,right:h}=t;return{top:a,left:i,width:l,height:u,bottom:d,right:h}}function bx(r){return Ss(r,{ignoreTransform:!0})}function gD(r){const e=r.innerWidth,t=r.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function vD(r,e){return e===void 0&&(e=Rr(r).getComputedStyle(r)),e.position==="fixed"}function xD(r,e){e===void 0&&(e=Rr(r).getComputedStyle(r));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const l=e[i];return typeof l=="string"?t.test(l):!1})}function hu(r,e){const t=[];function a(i){if(e!=null&&t.length>=e||!i)return t;if(ip(i)&&i.scrollingElement!=null&&!t.includes(i.scrollingElement))return t.push(i.scrollingElement),t;if(!Ii(i)||Kb(i)||t.includes(i))return t;const l=Rr(r).getComputedStyle(i);return i!==r&&xD(i,l)&&t.push(i),vD(i,l)?t:a(i.parentNode)}return r?a(r):t}function t_(r){const[e]=hu(r,1);return e??null}function Sh(r){return!du||!r?null:js(r)?r:sp(r)?ip(r)||r===Cs(r).scrollingElement?window:Ii(r)?r:null:null}function r_(r){return js(r)?r.scrollX:r.scrollLeft}function n_(r){return js(r)?r.scrollY:r.scrollTop}function mf(r){return{x:r_(r),y:n_(r)}}var Kt;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(Kt||(Kt={}));function o_(r){return!du||!r?!1:r===document.scrollingElement}function a_(r){const e={x:0,y:0},t=o_(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},a={x:r.scrollWidth-t.width,y:r.scrollHeight-t.height},i=r.scrollTop<=e.y,l=r.scrollLeft<=e.x,u=r.scrollTop>=a.y,d=r.scrollLeft>=a.x;return{isTop:i,isLeft:l,isBottom:u,isRight:d,maxScroll:a,minScroll:e}}const yD={x:.2,y:.2};function wD(r,e,t,a,i){let{top:l,left:u,right:d,bottom:h}=t;a===void 0&&(a=10),i===void 0&&(i=yD);const{isTop:p,isBottom:g,isLeft:m,isRight:w}=a_(r),y={x:0,y:0},j={x:0,y:0},_={height:e.height*i.y,width:e.width*i.x};return!p&&l<=e.top+_.height?(y.y=Kt.Backward,j.y=a*Math.abs((e.top+_.height-l)/_.height)):!g&&h>=e.bottom-_.height&&(y.y=Kt.Forward,j.y=a*Math.abs((e.bottom-_.height-h)/_.height)),!w&&d>=e.right-_.width?(y.x=Kt.Forward,j.x=a*Math.abs((e.right-_.width-d)/_.width)):!m&&u<=e.left+_.width&&(y.x=Kt.Backward,j.x=a*Math.abs((e.left+_.width-u)/_.width)),{direction:y,speed:j}}function bD(r){if(r===document.scrollingElement){const{innerWidth:l,innerHeight:u}=window;return{top:0,left:0,right:l,bottom:u,width:l,height:u}}const{top:e,left:t,right:a,bottom:i}=r.getBoundingClientRect();return{top:e,left:t,right:a,bottom:i,width:r.clientWidth,height:r.clientHeight}}function s_(r){return r.reduce((e,t)=>ds(e,mf(t)),pn)}function _D(r){return r.reduce((e,t)=>e+r_(t),0)}function jD(r){return r.reduce((e,t)=>e+n_(t),0)}function CD(r,e){if(e===void 0&&(e=Ss),!r)return;const{top:t,left:a,bottom:i,right:l}=e(r);t_(r)&&(i<=0||l<=0||t>=window.innerHeight||a>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const SD=[["x",["left","right"],_D],["y",["top","bottom"],jD]];class up{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=hu(t),i=s_(a);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,u,d]of SD)for(const h of u)Object.defineProperty(this,h,{get:()=>{const p=d(a),g=i[l]-p;return this.rect[h]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class pi{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...t)})},this.target=e}add(e,t,a){var i;(i=this.target)==null||i.addEventListener(e,t,a),this.listeners.push([e,t,a])}}function ED(r){const{EventTarget:e}=Rr(r);return r instanceof e?r:Cs(r)}function Eh(r,e){const t=Math.abs(r.x),a=Math.abs(r.y);return typeof e=="number"?Math.sqrt(t**2+a**2)>e:"x"in e&&"y"in e?t>e.x&&a>e.y:"x"in e?t>e.x:"y"in e?a>e.y:!1}var Yr;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(Yr||(Yr={}));function _x(r){r.preventDefault()}function kD(r){r.stopPropagation()}var ot;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(ot||(ot={}));const i_={start:[ot.Space,ot.Enter],cancel:[ot.Esc],end:[ot.Space,ot.Enter,ot.Tab]},ND=(r,e)=>{let{currentCoordinates:t}=e;switch(r.code){case ot.Right:return{...t,x:t.x+25};case ot.Left:return{...t,x:t.x-25};case ot.Down:return{...t,y:t.y+25};case ot.Up:return{...t,y:t.y-25}}};class dp{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new pi(Cs(t)),this.windowListeners=new pi(Rr(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Yr.Resize,this.handleCancel),this.windowListeners.add(Yr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Yr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,a=e.node.current;a&&CD(a),t(pn)}handleKeyDown(e){if(cp(e)){const{active:t,context:a,options:i}=this.props,{keyboardCodes:l=i_,coordinateGetter:u=ND,scrollBehavior:d="smooth"}=i,{code:h}=e;if(l.end.includes(h)){this.handleEnd(e);return}if(l.cancel.includes(h)){this.handleCancel(e);return}const{collisionRect:p}=a.current,g=p?{x:p.left,y:p.top}:pn;this.referenceCoordinates||(this.referenceCoordinates=g);const m=u(e,{active:t,context:a.current,currentCoordinates:g});if(m){const w=Si(m,g),y={x:0,y:0},{scrollableAncestors:j}=a.current;for(const _ of j){const C=e.code,{isTop:S,isRight:E,isLeft:N,isBottom:D,maxScroll:R,minScroll:O}=a_(_),B=bD(_),F={x:Math.min(C===ot.Right?B.right-B.width/2:B.right,Math.max(C===ot.Right?B.left:B.left+B.width/2,m.x)),y:Math.min(C===ot.Down?B.bottom-B.height/2:B.bottom,Math.max(C===ot.Down?B.top:B.top+B.height/2,m.y))},H=C===ot.Right&&!E||C===ot.Left&&!N,Z=C===ot.Down&&!D||C===ot.Up&&!S;if(H&&F.x!==m.x){const ae=_.scrollLeft+w.x,ue=C===ot.Right&&ae<=R.x||C===ot.Left&&ae>=O.x;if(ue&&!w.y){_.scrollTo({left:ae,behavior:d});return}ue?y.x=_.scrollLeft-ae:y.x=C===ot.Right?_.scrollLeft-R.x:_.scrollLeft-O.x,y.x&&_.scrollBy({left:-y.x,behavior:d});break}else if(Z&&F.y!==m.y){const ae=_.scrollTop+w.y,ue=C===ot.Down&&ae<=R.y||C===ot.Up&&ae>=O.y;if(ue&&!w.x){_.scrollTo({top:ae,behavior:d});return}ue?y.y=_.scrollTop-ae:y.y=C===ot.Down?_.scrollTop-R.y:_.scrollTop-O.y,y.y&&_.scrollBy({top:-y.y,behavior:d});break}}this.handleMove(e,ds(Si(m,this.referenceCoordinates),y))}}}handleMove(e,t){const{onMove:a}=this.props;e.preventDefault(),a(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}dp.activators=[{eventName:"onKeyDown",handler:(r,e,t)=>{let{keyboardCodes:a=i_,onActivation:i}=e,{active:l}=t;const{code:u}=r.nativeEvent;if(a.start.includes(u)){const d=l.activatorNode.current;return d&&r.target!==d?!1:(r.preventDefault(),i?.({event:r.nativeEvent}),!0)}return!1}}];function jx(r){return!!(r&&"distance"in r)}function Cx(r){return!!(r&&"delay"in r)}class hp{constructor(e,t,a){var i;a===void 0&&(a=ED(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:u}=l;this.props=e,this.events=t,this.document=Cs(u),this.documentListeners=new pi(this.document),this.listeners=new pi(a),this.windowListeners=new pi(Rr(u)),this.initialCoordinates=(i=pf(l))!=null?i:pn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:a}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Yr.Resize,this.handleCancel),this.windowListeners.add(Yr.DragStart,_x),this.windowListeners.add(Yr.VisibilityChange,this.handleCancel),this.windowListeners.add(Yr.ContextMenu,_x),this.documentListeners.add(Yr.Keydown,this.handleKeydown),t){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Cx(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(jx(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:a,onPending:i}=this.props;i(a,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Yr.Click,kD,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Yr.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:a,initialCoordinates:i,props:l}=this,{onMove:u,options:{activationConstraint:d}}=l;if(!i)return;const h=(t=pf(e))!=null?t:pn,p=Si(i,h);if(!a&&d){if(jx(d)){if(d.tolerance!=null&&Eh(p,d.tolerance))return this.handleCancel();if(Eh(p,d.distance))return this.handleStart()}if(Cx(d)&&Eh(p,d.tolerance))return this.handleCancel();this.handlePending(d,p);return}e.cancelable&&e.preventDefault(),u(h)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===ot.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const PD={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class fp extends hp{constructor(e){const{event:t}=e,a=Cs(t.target);super(e,PD,a)}}fp.activators=[{eventName:"onPointerDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:a}=e;return!t.isPrimary||t.button!==0?!1:(a?.({event:t}),!0)}}];const RD={move:{name:"mousemove"},end:{name:"mouseup"}};var gf;(function(r){r[r.RightClick=2]="RightClick"})(gf||(gf={}));class AD extends hp{constructor(e){super(e,RD,Cs(e.event.target))}}AD.activators=[{eventName:"onMouseDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:a}=e;return t.button===gf.RightClick?!1:(a?.({event:t}),!0)}}];const kh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class TD extends hp{constructor(e){super(e,kh)}static setup(){return window.addEventListener(kh.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(kh.move.name,e)};function e(){}}}TD.activators=[{eventName:"onTouchStart",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:a}=e;const{touches:i}=t;return i.length>1?!1:(a?.({event:t}),!0)}}];var mi;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(mi||(mi={}));var Oc;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(Oc||(Oc={}));function OD(r){let{acceleration:e,activator:t=mi.Pointer,canScroll:a,draggingRect:i,enabled:l,interval:u=5,order:d=Oc.TreeOrder,pointerCoordinates:h,scrollableAncestors:p,scrollableAncestorRects:g,delta:m,threshold:w}=r;const y=ID({delta:m,disabled:!l}),[j,_]=WO(),C=x.useRef({x:0,y:0}),S=x.useRef({x:0,y:0}),E=x.useMemo(()=>{switch(t){case mi.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case mi.DraggableRect:return i}},[t,i,h]),N=x.useRef(null),D=x.useCallback(()=>{const O=N.current;if(!O)return;const B=C.current.x*S.current.x,F=C.current.y*S.current.y;O.scrollBy(B,F)},[]),R=x.useMemo(()=>d===Oc.TreeOrder?[...p].reverse():p,[d,p]);x.useEffect(()=>{if(!l||!p.length||!E){_();return}for(const O of R){if(a?.(O)===!1)continue;const B=p.indexOf(O),F=g[B];if(!F)continue;const{direction:H,speed:Z}=wD(O,F,E,e,w);for(const ae of["x","y"])y[ae][H[ae]]||(Z[ae]=0,H[ae]=0);if(Z.x>0||Z.y>0){_(),N.current=O,j(D,u),C.current=Z,S.current=H;return}}C.current={x:0,y:0},S.current={x:0,y:0},_()},[e,D,a,_,l,u,JSON.stringify(E),JSON.stringify(y),j,p,R,g,JSON.stringify(w)])}const DD={x:{[Kt.Backward]:!1,[Kt.Forward]:!1},y:{[Kt.Backward]:!1,[Kt.Forward]:!1}};function ID(r){let{delta:e,disabled:t}=r;const a=ff(e);return Mi(i=>{if(t||!a||!i)return DD;const l={x:Math.sign(e.x-a.x),y:Math.sign(e.y-a.y)};return{x:{[Kt.Backward]:i.x[Kt.Backward]||l.x===-1,[Kt.Forward]:i.x[Kt.Forward]||l.x===1},y:{[Kt.Backward]:i.y[Kt.Backward]||l.y===-1,[Kt.Forward]:i.y[Kt.Forward]||l.y===1}}},[t,e,a])}function MD(r,e){const t=e!=null?r.get(e):void 0,a=t?t.node.current:null;return Mi(i=>{var l;return e==null?null:(l=a??i)!=null?l:null},[a,e])}function FD(r,e){return x.useMemo(()=>r.reduce((t,a)=>{const{sensor:i}=a,l=i.activators.map(u=>({eventName:u.eventName,handler:e(u.handler,a)}));return[...t,...l]},[]),[r,e])}var ki;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(ki||(ki={}));var vf;(function(r){r.Optimized="optimized"})(vf||(vf={}));const Sx=new Map;function $D(r,e){let{dragging:t,dependencies:a,config:i}=e;const[l,u]=x.useState(null),{frequency:d,measure:h,strategy:p}=i,g=x.useRef(r),m=C(),w=Ci(m),y=x.useCallback(function(S){S===void 0&&(S=[]),!w.current&&u(E=>E===null?S:E.concat(S.filter(N=>!E.includes(N))))},[w]),j=x.useRef(null),_=Mi(S=>{if(m&&!t)return Sx;if(!S||S===Sx||g.current!==r||l!=null){const E=new Map;for(let N of r){if(!N)continue;if(l&&l.length>0&&!l.includes(N.id)&&N.rect.current){E.set(N.id,N.rect.current);continue}const D=N.node.current,R=D?new up(h(D),D):null;N.rect.current=R,R&&E.set(N.id,R)}return E}return S},[r,l,t,m,h]);return x.useEffect(()=>{g.current=r},[r]),x.useEffect(()=>{m||y()},[t,m]),x.useEffect(()=>{l&&l.length>0&&u(null)},[JSON.stringify(l)]),x.useEffect(()=>{m||typeof d!="number"||j.current!==null||(j.current=setTimeout(()=>{y(),j.current=null},d))},[d,m,y,...a]),{droppableRects:_,measureDroppableContainers:y,measuringScheduled:l!=null};function C(){switch(p){case ki.Always:return!1;case ki.BeforeDragging:return t;default:return!t}}}function l_(r,e){return Mi(t=>r?t||(typeof e=="function"?e(r):r):null,[e,r])}function LD(r,e){return l_(r,e)}function zD(r){let{callback:e,disabled:t}=r;const a=lp(e),i=x.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(a)},[a,t]);return x.useEffect(()=>()=>i?.disconnect(),[i]),i}function fu(r){let{callback:e,disabled:t}=r;const a=lp(e),i=x.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(a)},[t]);return x.useEffect(()=>()=>i?.disconnect(),[i]),i}function BD(r){return new up(Ss(r),r)}function Ex(r,e,t){e===void 0&&(e=BD);const[a,i]=x.useState(null);function l(){i(h=>{if(!r)return null;if(r.isConnected===!1){var p;return(p=h??t)!=null?p:null}const g=e(r);return JSON.stringify(h)===JSON.stringify(g)?h:g})}const u=zD({callback(h){if(r)for(const p of h){const{type:g,target:m}=p;if(g==="childList"&&m instanceof HTMLElement&&m.contains(r)){l();break}}}}),d=fu({callback:l});return Un(()=>{l(),r?(d?.observe(r),u?.observe(document.body,{childList:!0,subtree:!0})):(d?.disconnect(),u?.disconnect())},[r]),a}function UD(r){const e=l_(r);return e_(r,e)}const kx=[];function VD(r){const e=x.useRef(r),t=Mi(a=>r?a&&a!==kx&&r&&e.current&&r.parentNode===e.current.parentNode?a:hu(r):kx,[r]);return x.useEffect(()=>{e.current=r},[r]),t}function qD(r){const[e,t]=x.useState(null),a=x.useRef(r),i=x.useCallback(l=>{const u=Sh(l.target);u&&t(d=>d?(d.set(u,mf(u)),new Map(d)):null)},[]);return x.useEffect(()=>{const l=a.current;if(r!==l){u(l);const d=r.map(h=>{const p=Sh(h);return p?(p.addEventListener("scroll",i,{passive:!0}),[p,mf(p)]):null}).filter(h=>h!=null);t(d.length?new Map(d):null),a.current=r}return()=>{u(r),u(l)};function u(d){d.forEach(h=>{const p=Sh(h);p?.removeEventListener("scroll",i)})}},[i,r]),x.useMemo(()=>r.length?e?Array.from(e.values()).reduce((l,u)=>ds(l,u),pn):s_(r):pn,[r,e])}function Nx(r,e){e===void 0&&(e=[]);const t=x.useRef(null);return x.useEffect(()=>{t.current=null},e),x.useEffect(()=>{const a=r!==pn;a&&!t.current&&(t.current=r),!a&&t.current&&(t.current=null)},[r]),t.current?Si(r,t.current):pn}function WD(r){x.useEffect(()=>{if(!du)return;const e=r.map(t=>{let{sensor:a}=t;return a.setup==null?void 0:a.setup()});return()=>{for(const t of e)t?.()}},r.map(e=>{let{sensor:t}=e;return t}))}function HD(r,e){return x.useMemo(()=>r.reduce((t,a)=>{let{eventName:i,handler:l}=a;return t[i]=u=>{l(u,e)},t},{}),[r,e])}function c_(r){return x.useMemo(()=>r?gD(r):null,[r])}const Px=[];function GD(r,e){e===void 0&&(e=Ss);const[t]=r,a=c_(t?Rr(t):null),[i,l]=x.useState(Px);function u(){l(()=>r.length?r.map(h=>o_(h)?a:new up(e(h),h)):Px)}const d=fu({callback:u});return Un(()=>{d?.disconnect(),u(),r.forEach(h=>d?.observe(h))},[r]),i}function KD(r){if(!r)return null;if(r.children.length>1)return r;const e=r.children[0];return Ii(e)?e:r}function JD(r){let{measure:e}=r;const[t,a]=x.useState(null),i=x.useCallback(p=>{for(const{target:g}of p)if(Ii(g)){a(m=>{const w=e(g);return m?{...m,width:w.width,height:w.height}:w});break}},[e]),l=fu({callback:i}),u=x.useCallback(p=>{const g=KD(p);l?.disconnect(),g&&l?.observe(g),a(g?e(g):null)},[e,l]),[d,h]=Ac(u);return x.useMemo(()=>({nodeRef:d,rect:t,setRef:h}),[t,d,h])}const YD=[{sensor:fp,options:{}},{sensor:dp,options:{}}],XD={current:{}},pc={draggable:{measure:bx},droppable:{measure:bx,strategy:ki.WhileDragging,frequency:vf.Optimized},dragOverlay:{measure:Ss}};class gi extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,a;return(t=(a=this.get(e))==null?void 0:a.node.current)!=null?t:void 0}}const QD={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new gi,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Tc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:pc,measureDroppableContainers:Tc,windowRect:null,measuringScheduled:!1},ZD={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Tc,draggableNodes:new Map,over:null,measureDroppableContainers:Tc},pu=x.createContext(ZD),u_=x.createContext(QD);function eI(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new gi}}}function tI(r,e){switch(e.type){case Ut.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ut.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:e.coordinates.x-r.draggable.initialCoordinates.x,y:e.coordinates.y-r.draggable.initialCoordinates.y}}};case Ut.DragEnd:case Ut.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ut.RegisterDroppable:{const{element:t}=e,{id:a}=t,i=new gi(r.droppable.containers);return i.set(a,t),{...r,droppable:{...r.droppable,containers:i}}}case Ut.SetDroppableDisabled:{const{id:t,key:a,disabled:i}=e,l=r.droppable.containers.get(t);if(!l||a!==l.key)return r;const u=new gi(r.droppable.containers);return u.set(t,{...l,disabled:i}),{...r,droppable:{...r.droppable,containers:u}}}case Ut.UnregisterDroppable:{const{id:t,key:a}=e,i=r.droppable.containers.get(t);if(!i||a!==i.key)return r;const l=new gi(r.droppable.containers);return l.delete(t),{...r,droppable:{...r.droppable,containers:l}}}default:return r}}function rI(r){let{disabled:e}=r;const{active:t,activatorEvent:a,draggableNodes:i}=x.useContext(pu),l=ff(a),u=ff(t?.id);return x.useEffect(()=>{if(!e&&!a&&l&&u!=null){if(!cp(l)||document.activeElement===l.target)return;const d=i.get(u);if(!d)return;const{activatorNode:h,node:p}=d;if(!h.current&&!p.current)return;requestAnimationFrame(()=>{for(const g of[h.current,p.current]){if(!g)continue;const m=KO(g);if(m){m.focus();break}}})}},[a,e,i,u,l]),null}function nI(r,e){let{transform:t,...a}=e;return r!=null&&r.length?r.reduce((i,l)=>l({transform:i,...a}),t):t}function oI(r){return x.useMemo(()=>({draggable:{...pc.draggable,...r?.draggable},droppable:{...pc.droppable,...r?.droppable},dragOverlay:{...pc.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function aI(r){let{activeNode:e,measure:t,initialRect:a,config:i=!0}=r;const l=x.useRef(!1),{x:u,y:d}=typeof i=="boolean"?{x:i,y:i}:i;Un(()=>{if(!u&&!d||!e){l.current=!1;return}if(l.current||!a)return;const p=e?.node.current;if(!p||p.isConnected===!1)return;const g=t(p),m=e_(g,a);if(u||(m.x=0),d||(m.y=0),l.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const w=t_(p);w&&w.scrollBy({top:m.y,left:m.x})}},[e,u,d,a,t])}const d_=x.createContext({...pn,scaleX:1,scaleY:1});var Oo;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(Oo||(Oo={}));const sI=x.memo(function(e){var t,a,i,l;let{id:u,accessibility:d,autoScroll:h=!0,children:p,sensors:g=YD,collisionDetection:m=cD,measuring:w,modifiers:y,...j}=e;const _=x.useReducer(tI,void 0,eI),[C,S]=_,[E,N]=eD(),[D,R]=x.useState(Oo.Uninitialized),O=D===Oo.Initialized,{draggable:{active:B,nodes:F,translate:H},droppable:{containers:Z}}=C,ae=B!=null?F.get(B):null,ue=x.useRef({initial:null,translated:null}),z=x.useMemo(()=>{var vt;return B!=null?{id:B,data:(vt=ae?.data)!=null?vt:XD,rect:ue}:null},[B,ae]),V=x.useRef(null),[se,X]=x.useState(null),[re,U]=x.useState(null),I=Ci(j,Object.values(j)),P=Fi("DndDescribedBy",u),A=x.useMemo(()=>Z.getEnabled(),[Z]),M=oI(w),{droppableRects:T,measureDroppableContainers:$,measuringScheduled:Q}=$D(A,{dragging:O,dependencies:[H.x,H.y],config:M.droppable}),pe=MD(F,B),J=x.useMemo(()=>re?pf(re):null,[re]),q=xn(),le=LD(pe,M.draggable.measure);aI({activeNode:B!=null?F.get(B):null,config:q.layoutShiftCompensation,initialRect:le,measure:M.draggable.measure});const de=Ex(pe,M.draggable.measure,le),we=Ex(pe?pe.parentElement:null),je=x.useRef({activatorEvent:null,active:null,activeNode:pe,collisionRect:null,collisions:null,droppableRects:T,draggableNodes:F,draggingNode:null,draggingNodeRect:null,droppableContainers:Z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ye=Z.getNodeFor((t=je.current.over)==null?void 0:t.id),Ae=JD({measure:M.dragOverlay.measure}),ze=(a=Ae.nodeRef.current)!=null?a:pe,$e=O?(i=Ae.rect)!=null?i:de:null,Ge=!!(Ae.nodeRef.current&&Ae.rect),Ct=UD(Ge?null:de),st=c_(ze?Rr(ze):null),bt=VD(O?ye??pe:null),Vt=GD(bt),at=nI(y,{transform:{x:H.x-Ct.x,y:H.y-Ct.y,scaleX:1,scaleY:1},activatorEvent:re,active:z,activeNodeRect:de,containerNodeRect:we,draggingNodeRect:$e,over:je.current.over,overlayNodeRect:Ae.rect,scrollableAncestors:bt,scrollableAncestorRects:Vt,windowRect:st}),It=J?ds(J,H):null,Ar=qD(bt),Ca=Nx(Ar),Wn=Nx(Ar,[de]),zr=ds(at,Ca),hr=$e?hD($e,at):null,Br=z&&hr?m({active:z,collisionRect:hr,droppableRects:T,droppableContainers:A,pointerCoordinates:It}):null,lr=Zb(Br,"id"),[Jt,Zr]=x.useState(null),Sa=Ge?at:ds(at,Wn),Ea=uD(Sa,(l=Jt?.rect)!=null?l:null,de),co=x.useRef(null),Hn=x.useCallback((vt,Mt)=>{let{sensor:Te,options:dt}=Mt;if(V.current==null)return;const ct=F.get(V.current);if(!ct)return;const ht=vt.nativeEvent,Ft=new Te({active:V.current,activeNode:ct,event:ht,options:dt,context:je,onAbort(Ze){if(!F.get(Ze))return;const{onDragAbort:mt}=I.current,Et={id:Ze};mt?.(Et),E({type:"onDragAbort",event:Et})},onPending(Ze,Yt,mt,Et){if(!F.get(Ze))return;const{onDragPending:qt}=I.current,mr={id:Ze,constraint:Yt,initialCoordinates:mt,offset:Et};qt?.(mr),E({type:"onDragPending",event:mr})},onStart(Ze){const Yt=V.current;if(Yt==null)return;const mt=F.get(Yt);if(!mt)return;const{onDragStart:Et}=I.current,pr={activatorEvent:ht,active:{id:Yt,data:mt.data,rect:ue}};Sn.unstable_batchedUpdates(()=>{Et?.(pr),R(Oo.Initializing),S({type:Ut.DragStart,initialCoordinates:Ze,active:Yt}),E({type:"onDragStart",event:pr}),X(co.current),U(ht)})},onMove(Ze){S({type:Ut.DragMove,coordinates:Ze})},onEnd:gt(Ut.DragEnd),onCancel:gt(Ut.DragCancel)});co.current=Ft;function gt(Ze){return async function(){const{active:mt,collisions:Et,over:pr,scrollAdjustedTranslate:qt}=je.current;let mr=null;if(mt&&qt){const{cancelDrop:Gn}=I.current;mr={activatorEvent:ht,active:mt,collisions:Et,delta:qt,over:pr},Ze===Ut.DragEnd&&typeof Gn=="function"&&await Promise.resolve(Gn(mr))&&(Ze=Ut.DragCancel)}V.current=null,Sn.unstable_batchedUpdates(()=>{S({type:Ze}),R(Oo.Uninitialized),Zr(null),X(null),U(null),co.current=null;const Gn=Ze===Ut.DragEnd?"onDragEnd":"onDragCancel";if(mr){const Es=I.current[Gn];Es?.(mr),E({type:Gn,event:mr})}})}}},[F]),Wo=x.useCallback((vt,Mt)=>(Te,dt)=>{const ct=Te.nativeEvent,ht=F.get(dt);if(V.current!==null||!ht||ct.dndKit||ct.defaultPrevented)return;const Ft={active:ht};vt(Te,Mt.options,Ft)===!0&&(ct.dndKit={capturedBy:Mt.sensor},V.current=dt,Hn(Te,Mt))},[F,Hn]),vn=FD(g,Wo);WD(g),Un(()=>{de&&D===Oo.Initializing&&R(Oo.Initialized)},[de,D]),x.useEffect(()=>{const{onDragMove:vt}=I.current,{active:Mt,activatorEvent:Te,collisions:dt,over:ct}=je.current;if(!Mt||!Te)return;const ht={active:Mt,activatorEvent:Te,collisions:dt,delta:{x:zr.x,y:zr.y},over:ct};Sn.unstable_batchedUpdates(()=>{vt?.(ht),E({type:"onDragMove",event:ht})})},[zr.x,zr.y]),x.useEffect(()=>{const{active:vt,activatorEvent:Mt,collisions:Te,droppableContainers:dt,scrollAdjustedTranslate:ct}=je.current;if(!vt||V.current==null||!Mt||!ct)return;const{onDragOver:ht}=I.current,Ft=dt.get(lr),gt=Ft&&Ft.rect.current?{id:Ft.id,rect:Ft.rect.current,data:Ft.data,disabled:Ft.disabled}:null,Ze={active:vt,activatorEvent:Mt,collisions:Te,delta:{x:ct.x,y:ct.y},over:gt};Sn.unstable_batchedUpdates(()=>{Zr(gt),ht?.(Ze),E({type:"onDragOver",event:Ze})})},[lr]),Un(()=>{je.current={activatorEvent:re,active:z,activeNode:pe,collisionRect:hr,collisions:Br,droppableRects:T,draggableNodes:F,draggingNode:ze,draggingNodeRect:$e,droppableContainers:Z,over:Jt,scrollableAncestors:bt,scrollAdjustedTranslate:zr},ue.current={initial:$e,translated:hr}},[z,pe,Br,hr,F,ze,$e,T,Z,Jt,bt,zr]),OD({...q,delta:H,draggingRect:hr,pointerCoordinates:It,scrollableAncestors:bt,scrollableAncestorRects:Vt});const fr=x.useMemo(()=>({active:z,activeNode:pe,activeNodeRect:de,activatorEvent:re,collisions:Br,containerNodeRect:we,dragOverlay:Ae,draggableNodes:F,droppableContainers:Z,droppableRects:T,over:Jt,measureDroppableContainers:$,scrollableAncestors:bt,scrollableAncestorRects:Vt,measuringConfiguration:M,measuringScheduled:Q,windowRect:st}),[z,pe,de,re,Br,we,Ae,F,Z,T,Jt,$,bt,Vt,M,Q,st]),Ho=x.useMemo(()=>({activatorEvent:re,activators:vn,active:z,activeNodeRect:de,ariaDescribedById:{draggable:P},dispatch:S,draggableNodes:F,over:Jt,measureDroppableContainers:$}),[re,vn,z,de,S,P,F,Jt,$]);return fe.createElement(Yb.Provider,{value:N},fe.createElement(pu.Provider,{value:Ho},fe.createElement(u_.Provider,{value:fr},fe.createElement(d_.Provider,{value:Ea},p)),fe.createElement(rI,{disabled:d?.restoreFocus===!1})),fe.createElement(nD,{...d,hiddenTextDescribedById:P}));function xn(){const vt=se?.autoScrollEnabled===!1,Mt=typeof h=="object"?h.enabled===!1:h===!1,Te=O&&!vt&&!Mt;return typeof h=="object"?{...h,enabled:Te}:{enabled:Te}}}),iI=x.createContext(null),Rx="button",lI="Draggable";function cI(r){let{id:e,data:t,disabled:a=!1,attributes:i}=r;const l=Fi(lI),{activators:u,activatorEvent:d,active:h,activeNodeRect:p,ariaDescribedById:g,draggableNodes:m,over:w}=x.useContext(pu),{role:y=Rx,roleDescription:j="draggable",tabIndex:_=0}=i??{},C=h?.id===e,S=x.useContext(C?d_:iI),[E,N]=Ac(),[D,R]=Ac(),O=HD(u,e),B=Ci(t);Un(()=>(m.set(e,{id:e,key:l,node:E,activatorNode:D,data:B}),()=>{const H=m.get(e);H&&H.key===l&&m.delete(e)}),[m,e]);const F=x.useMemo(()=>({role:y,tabIndex:_,"aria-disabled":a,"aria-pressed":C&&y===Rx?!0:void 0,"aria-roledescription":j,"aria-describedby":g.draggable}),[a,y,_,C,j,g.draggable]);return{active:h,activatorEvent:d,activeNodeRect:p,attributes:F,isDragging:C,listeners:a?void 0:O,node:E,over:w,setNodeRef:N,setActivatorNodeRef:R,transform:S}}function uI(){return x.useContext(u_)}const dI="Droppable",hI={timeout:25};function fI(r){let{data:e,disabled:t=!1,id:a,resizeObserverConfig:i}=r;const l=Fi(dI),{active:u,dispatch:d,over:h,measureDroppableContainers:p}=x.useContext(pu),g=x.useRef({disabled:t}),m=x.useRef(!1),w=x.useRef(null),y=x.useRef(null),{disabled:j,updateMeasurementsFor:_,timeout:C}={...hI,...i},S=Ci(_??a),E=x.useCallback(()=>{if(!m.current){m.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{p(Array.isArray(S.current)?S.current:[S.current]),y.current=null},C)},[C]),N=fu({callback:E,disabled:j||!u}),D=x.useCallback((F,H)=>{N&&(H&&(N.unobserve(H),m.current=!1),F&&N.observe(F))},[N]),[R,O]=Ac(D),B=Ci(e);return x.useEffect(()=>{!N||!R.current||(N.disconnect(),m.current=!1,N.observe(R.current))},[R,N]),x.useEffect(()=>(d({type:Ut.RegisterDroppable,element:{id:a,key:l,disabled:t,node:R,rect:w,data:B}}),()=>d({type:Ut.UnregisterDroppable,key:l,id:a})),[a]),x.useEffect(()=>{t!==g.current.disabled&&(d({type:Ut.SetDroppableDisabled,id:a,key:l,disabled:t}),g.current.disabled=t)},[a,l,t,d]),{active:u,rect:w,isOver:h?.id===a,node:R,over:h,setNodeRef:O}}function pp(r,e,t){const a=r.slice();return a.splice(t<0?a.length+t:t,0,a.splice(e,1)[0]),a}function pI(r,e){return r.reduce((t,a,i)=>{const l=e.get(a);return l&&(t[i]=l),t},Array(r.length))}function lc(r){return r!==null&&r>=0}function mI(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function gI(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const h_=r=>{let{rects:e,activeIndex:t,overIndex:a,index:i}=r;const l=pp(e,a,t),u=e[i],d=l[i];return!d||!u?null:{x:d.left-u.left,y:d.top-u.top,scaleX:d.width/u.width,scaleY:d.height/u.height}},cc={scaleX:1,scaleY:1},vI=r=>{var e;let{activeIndex:t,activeNodeRect:a,index:i,rects:l,overIndex:u}=r;const d=(e=l[t])!=null?e:a;if(!d)return null;if(i===t){const p=l[u];return p?{x:0,y:t<u?p.top+p.height-(d.top+d.height):p.top-d.top,...cc}:null}const h=xI(l,i,t);return i>t&&i<=u?{x:0,y:-d.height-h,...cc}:i<t&&i>=u?{x:0,y:d.height+h,...cc}:{x:0,y:0,...cc}};function xI(r,e,t){const a=r[e],i=r[e-1],l=r[e+1];return a?t<e?i?a.top-(i.top+i.height):l?l.top-(a.top+a.height):0:l?l.top-(a.top+a.height):i?a.top-(i.top+i.height):0:0}const f_="Sortable",p_=fe.createContext({activeIndex:-1,containerId:f_,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:h_,disabled:{draggable:!1,droppable:!1}});function yI(r){let{children:e,id:t,items:a,strategy:i=h_,disabled:l=!1}=r;const{active:u,dragOverlay:d,droppableRects:h,over:p,measureDroppableContainers:g}=uI(),m=Fi(f_,t),w=d.rect!==null,y=x.useMemo(()=>a.map(O=>typeof O=="object"&&"id"in O?O.id:O),[a]),j=u!=null,_=u?y.indexOf(u.id):-1,C=p?y.indexOf(p.id):-1,S=x.useRef(y),E=!mI(y,S.current),N=C!==-1&&_===-1||E,D=gI(l);Un(()=>{E&&j&&g(y)},[E,y,j,g]),x.useEffect(()=>{S.current=y},[y]);const R=x.useMemo(()=>({activeIndex:_,containerId:m,disabled:D,disableTransforms:N,items:y,overIndex:C,useDragOverlay:w,sortedRects:pI(y,h),strategy:i}),[_,m,D.draggable,D.droppable,N,y,C,h,w,i]);return fe.createElement(p_.Provider,{value:R},e)}const wI=r=>{let{id:e,items:t,activeIndex:a,overIndex:i}=r;return pp(t,a,i).indexOf(e)},bI=r=>{let{containerId:e,isSorting:t,wasDragging:a,index:i,items:l,newIndex:u,previousItems:d,previousContainerId:h,transition:p}=r;return!p||!a||d!==l&&i===u?!1:t?!0:u!==i&&e===h},_I={duration:200,easing:"ease"},m_="transform",jI=Ei.Transition.toString({property:m_,duration:0,easing:"linear"}),CI={roleDescription:"sortable"};function SI(r){let{disabled:e,index:t,node:a,rect:i}=r;const[l,u]=x.useState(null),d=x.useRef(t);return Un(()=>{if(!e&&t!==d.current&&a.current){const h=i.current;if(h){const p=Ss(a.current,{ignoreTransform:!0}),g={x:h.left-p.left,y:h.top-p.top,scaleX:h.width/p.width,scaleY:h.height/p.height};(g.x||g.y)&&u(g)}}t!==d.current&&(d.current=t)},[e,t,a,i]),x.useEffect(()=>{l&&u(null)},[l]),l}function EI(r){let{animateLayoutChanges:e=bI,attributes:t,disabled:a,data:i,getNewIndex:l=wI,id:u,strategy:d,resizeObserverConfig:h,transition:p=_I}=r;const{items:g,containerId:m,activeIndex:w,disabled:y,disableTransforms:j,sortedRects:_,overIndex:C,useDragOverlay:S,strategy:E}=x.useContext(p_),N=kI(a,y),D=g.indexOf(u),R=x.useMemo(()=>({sortable:{containerId:m,index:D,items:g},...i}),[m,i,D,g]),O=x.useMemo(()=>g.slice(g.indexOf(u)),[g,u]),{rect:B,node:F,isOver:H,setNodeRef:Z}=fI({id:u,data:R,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:O,...h}}),{active:ae,activatorEvent:ue,activeNodeRect:z,attributes:V,setNodeRef:se,listeners:X,isDragging:re,over:U,setActivatorNodeRef:I,transform:P}=cI({id:u,data:R,attributes:{...CI,...t},disabled:N.draggable}),A=qO(Z,se),M=!!ae,T=M&&!j&&lc(w)&&lc(C),$=!S&&re,Q=$&&T?P:null,J=T?Q??(d??E)({rects:_,activeNodeRect:z,activeIndex:w,overIndex:C,index:D}):null,q=lc(w)&&lc(C)?l({id:u,items:g,activeIndex:w,overIndex:C}):D,le=ae?.id,de=x.useRef({activeId:le,items:g,newIndex:q,containerId:m}),we=g!==de.current.items,je=e({active:ae,containerId:m,isDragging:re,isSorting:M,id:u,index:D,items:g,newIndex:de.current.newIndex,previousItems:de.current.items,previousContainerId:de.current.containerId,transition:p,wasDragging:de.current.activeId!=null}),ye=SI({disabled:!je,index:D,node:F,rect:B});return x.useEffect(()=>{M&&de.current.newIndex!==q&&(de.current.newIndex=q),m!==de.current.containerId&&(de.current.containerId=m),g!==de.current.items&&(de.current.items=g)},[M,q,m,g]),x.useEffect(()=>{if(le===de.current.activeId)return;if(le&&!de.current.activeId){de.current.activeId=le;return}const ze=setTimeout(()=>{de.current.activeId=le},50);return()=>clearTimeout(ze)},[le]),{active:ae,activeIndex:w,attributes:V,data:R,rect:B,index:D,newIndex:q,items:g,isOver:H,isSorting:M,isDragging:re,listeners:X,node:F,overIndex:C,over:U,setNodeRef:A,setActivatorNodeRef:I,setDroppableNodeRef:Z,setDraggableNodeRef:se,transform:ye??J,transition:Ae()};function Ae(){if(ye||we&&de.current.newIndex===D)return jI;if(!($&&!cp(ue)||!p)&&(M||je))return Ei.Transition.toString({...p,property:m_})}}function kI(r,e){var t,a;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(t=r?.draggable)!=null?t:e.draggable,droppable:(a=r?.droppable)!=null?a:e.droppable}}function Dc(r){if(!r)return!1;const e=r.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const NI=[ot.Down,ot.Right,ot.Up,ot.Left],PI=(r,e)=>{let{context:{active:t,collisionRect:a,droppableRects:i,droppableContainers:l,over:u,scrollableAncestors:d}}=e;if(NI.includes(r.code)){if(r.preventDefault(),!t||!a)return;const h=[];l.getEnabled().forEach(m=>{if(!m||m!=null&&m.disabled)return;const w=i.get(m.id);if(w)switch(r.code){case ot.Down:a.top<w.top&&h.push(m);break;case ot.Up:a.top>w.top&&h.push(m);break;case ot.Left:a.left>w.left&&h.push(m);break;case ot.Right:a.left<w.left&&h.push(m);break}});const p=iD({collisionRect:a,droppableRects:i,droppableContainers:h});let g=Zb(p,"id");if(g===u?.id&&p.length>1&&(g=p[1].id),g!=null){const m=l.get(t.id),w=l.get(g),y=w?i.get(w.id):null,j=w?.node.current;if(j&&y&&m&&w){const C=hu(j).some((O,B)=>d[B]!==O),S=g_(m,w),E=RI(m,w),N=C||!S?{x:0,y:0}:{x:E?a.width-y.width:0,y:E?a.height-y.height:0},D={x:y.left,y:y.top};return N.x&&N.y?D:Si(D,N)}}}};function g_(r,e){return!Dc(r)||!Dc(e)?!1:r.data.current.sortable.containerId===e.data.current.sortable.containerId}function RI(r,e){return!Dc(r)||!Dc(e)||!g_(r,e)?!1:r.data.current.sortable.index<e.data.current.sortable.index}function mu(){const[r,e]=x.useState([]),[t,a]=x.useState([]),[i,l]=x.useState(!0),[u,d]=x.useState(null),h=x.useCallback(async()=>{try{l(!0),d(null);const{data:C,error:S}=await ce.from("etapas_funil").select("*").eq("ativo",!0).order("ordem",{ascending:!0});if(S)throw S;return e(C||[]),{data:C,error:null}}catch(C){const S=C instanceof Error?C.message:"Erro ao buscar etapas";return d(S),console.error("Erro ao buscar etapas:",C),{data:null,error:S}}finally{l(!1)}},[]),p=x.useCallback(async()=>{try{const{data:C,error:S}=await ce.from("v_funil_estatisticas").select("*").order("ordem",{ascending:!0});if(S)throw S;return a(C||[]),{data:C,error:null}}catch(C){const S=C instanceof Error?C.message:"Erro ao buscar estatsticas";return console.error("Erro ao buscar estatsticas:",C),{data:null,error:S}}},[]),g=x.useCallback(async C=>{try{const{data:S,error:E}=await ce.from("etapas_funil").select("*").eq("id",C).single();if(E)throw E;return{data:S,error:null}}catch(S){const E=S instanceof Error?S.message:"Erro ao buscar etapa";return console.error("Erro ao buscar etapa:",S),{data:null,error:E}}},[]),m=x.useCallback(async C=>{try{d(null);const{data:S}=await ce.from("etapas_funil").select("ordem").eq("ativo",!0).order("ordem",{ascending:!1}).limit(1).single(),E=S?S.ordem+1:1,{data:{user:N}}=await ce.auth.getUser(),{data:D,error:R}=await ce.from("etapas_funil").insert({...C,ordem:E,criado_por:N?.id}).select().single();if(R)throw R;return await h(),{data:D,error:null}}catch(S){const E=S instanceof Error?S.message:"Erro ao criar etapa";return d(E),console.error("Erro ao criar etapa:",S),{data:null,error:E}}},[h]),w=x.useCallback(async(C,S)=>{try{d(null);const{data:E,error:N}=await ce.from("etapas_funil").update(S).eq("id",C).select().single();if(N)throw N;return await h(),{data:E,error:null}}catch(E){const N=E instanceof Error?E.message:"Erro ao atualizar etapa";return d(N),console.error("Erro ao atualizar etapa:",E),{data:null,error:N}}},[h]),y=x.useCallback(async C=>{try{d(null);const{count:S}=await ce.from("oportunidades").select("id",{count:"exact",head:!0}).eq("etapa_funil_id",C).eq("ativo",!0);if(S&&S>0)throw new Error(`No  possvel excluir esta etapa pois existem ${S} oportunidade(s) vinculada(s). Mova as oportunidades para outra etapa antes de excluir.`);const{data:E,error:N}=await ce.from("etapas_funil").update({ativo:!1}).eq("id",C).select().single();if(N)throw N;return await h(),{data:E,error:null}}catch(S){const E=S instanceof Error?S.message:"Erro ao excluir etapa";return d(E),console.error("Erro ao excluir etapa:",S),{data:null,error:E}}},[h]),j=x.useCallback(async(C,S)=>{try{d(null);const{error:E}=await ce.rpc("reordenar_etapas_funil",{etapa_id:C,nova_ordem:S});if(E)throw E;return await h(),{error:null}}catch(E){const N=E instanceof Error?E.message:"Erro ao reordenar etapas";return d(N),console.error("Erro ao reordenar etapas:",E),{error:N}}},[h]),_=x.useCallback((C,S)=>{e(E=>{const N=[...E],D=N.findIndex(O=>O.id===C);if(D===-1)return E;const[R]=N.splice(D,1);return N.splice(S-1,0,R),N.map((O,B)=>({...O,ordem:B+1}))})},[]);return x.useEffect(()=>{h()},[h]),{etapas:r,estatisticas:t,loading:i,error:u,getEtapas:h,getEstatisticas:p,getEtapaPorId:g,createEtapa:m,updateEtapa:w,deleteEtapa:y,reordenarEtapas:j,reordenarEtapasLocal:_}}const AI=r=>{const e=[];return(!r.nome||r.nome.trim().length===0)&&e.push("O nome da etapa  obrigatrio"),r.nome&&r.nome.length>100&&e.push("O nome da etapa deve ter no mximo 100 caracteres"),(!r.cor||!/^#[0-9A-Fa-f]{6}$/.test(r.cor))&&e.push("A cor deve estar no formato hexadecimal (#RRGGBB)"),(!r.tipo||!["aberta","fechada-ganha","fechada-perdida"].includes(r.tipo))&&e.push("O tipo da etapa  invlido"),e};function TI({etapa:r,onDelete:e,onEdit:t}){const{attributes:a,listeners:i,setNodeRef:l,transform:u,transition:d,isDragging:h}=EI({id:r.id}),p={transform:Ei.Transform.toString(u),transition:d,opacity:h?.5:1};return o.jsxs("div",{ref:l,style:p,className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-800",children:[o.jsx("div",{...a,...i,className:"cursor-grab active:cursor-grabbing",children:o.jsx(Y1,{className:"w-5 h-5 text-gray-400"})}),o.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:r.cor}}),o.jsx("div",{className:"flex-1",children:o.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:r.nome})}),o.jsx(xe,{variant:"ghost",size:"icon",onClick:()=>t(r),className:"text-gray-600 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:o.jsx(Bc,{className:"w-4 h-4"})}),o.jsx(xe,{variant:"ghost",size:"icon",onClick:()=>e(r.id),className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:o.jsx(Uc,{className:"w-4 h-4"})})]})}function OI(){const{etapas:r,loading:e,error:t,getEtapas:a,createEtapa:i,updateEtapa:l,deleteEtapa:u,reordenarEtapas:d}=mu(),[h,p]=x.useState(!1),[g,m]=x.useState(!1),[w,y]=x.useState(null),[j,_]=x.useState({nome:"",cor:"#3b82f6",tipo:"aberta"}),[C,S]=x.useState(!1),[E,N]=x.useState(!1),[D,R]=x.useState(null),[O,B]=x.useState(!1),[F,H]=x.useState({primary:["name","contact","value"],secondary:["actionType","date","responsible"]}),Z=[{id:"name",label:"Nome da Oportunidade"},{id:"contact",label:"Contato"},{id:"value",label:"Valor da Proposta"},{id:"actionType",label:"Tipo de Ao"},{id:"date",label:"Data de Criao"},{id:"responsible",label:"Responsvel"},{id:"origin",label:"Origem"},{id:"description",label:"Descrio"}],ae=oD(xx(fp),xx(dp,{coordinateGetter:PI}));x.useEffect(()=>{a()},[a]);const ue=async P=>{const{active:A,over:M}=P;if(!M||A.id===M.id)return;const T=r.findIndex(J=>J.id===A.id),$=r.findIndex(J=>J.id===M.id);pp(r,T,$);const Q=$+1,{error:pe}=await d(A.id,Q);pe?(ee.error("Erro ao reordenar etapas"),a()):ee.success("Etapa reordenada com sucesso!")},z=()=>{m(!1),y(null),_({nome:"",cor:"#3b82f6",tipo:"aberta"}),p(!0)},V=P=>{m(!0),y(P),_({nome:P.nome,cor:P.cor,tipo:P.tipo}),p(!0)},se=async()=>{const P=AI(j);if(P.length>0){ee.error(P[0]);return}if(S(!0),g&&w){const{error:A}=await l(w.id,{nome:j.nome,cor:j.cor,tipo:j.tipo});A?ee.error(A):(ee.success("Etapa atualizada com sucesso!"),p(!1))}else{const{error:A}=await i({nome:j.nome,cor:j.cor,tipo:j.tipo,ordem:r.length+1});A?ee.error(A):(ee.success("Etapa criada com sucesso!"),p(!1))}S(!1)},X=P=>{R(P),N(!0)},re=async()=>{if(!D)return;B(!0);const{error:P}=await u(D);P?ee.error(P):(ee.success("Etapa excluda com sucesso!"),N(!1),R(null)),B(!1)},U=(P,A)=>{H(M=>{const T=M[A],$=T.includes(P)?T.filter(Q=>Q!==P):[...T,P];return{...M,[A]:$}})},I=async()=>{await new Promise(P=>setTimeout(P,1e3)),ee.success("Configuraes de campos salvas!")};return o.jsxs("div",{className:"h-full flex flex-col p-4 lg:p-8",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Funil e Cards do Pipeline"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Personalize as etapas do funil e a exibio dos cards"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Ye,{children:"Etapas do Funil"}),o.jsx(fs,{children:"Adicione, reordene ou exclua etapas do funil de vendas"})]}),o.jsxs(xe,{variant:"outline",className:"gap-2",onClick:z,disabled:e,children:[o.jsx(ys,{className:"w-4 h-4"}),"Adicionar Etapa"]})]})}),o.jsxs(We,{children:[e&&o.jsxs("div",{className:"flex items-center justify-center py-8",children:[o.jsx(ft,{className:"w-6 h-6 animate-spin text-gray-400"}),o.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Carregando etapas..."})]}),t&&o.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:o.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:t})}),!e&&!t&&r.length===0&&o.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:'Nenhuma etapa cadastrada. Clique em "Adicionar Etapa" para comear.'}),!e&&!t&&r.length>0&&o.jsx(sI,{sensors:ae,collisionDetection:sD,onDragEnd:ue,children:o.jsx(yI,{items:r.map(P=>P.id),strategy:vI,children:o.jsx("div",{className:"space-y-2",children:r.map(P=>o.jsx(TI,{etapa:P,onDelete:X,onEdit:V},P.id))})})})]})]}),o.jsxs(qe,{children:[o.jsxs(Je,{children:[o.jsx(Ye,{children:"Configurao de Campos dos Cards"}),o.jsx(fs,{children:"Selecione os campos que sero exibidos nos cards do Kanban"})]}),o.jsxs(We,{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Campos Primrios"}),o.jsx("div",{className:"space-y-2",children:Z.slice(0,4).map(P=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(hf,{id:`primary-${P.id}`,checked:F.primary.includes(P.id),onCheckedChange:()=>U(P.id,"primary")}),o.jsx(K,{htmlFor:`primary-${P.id}`,className:"cursor-pointer",children:P.label})]},P.id))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Campos Secundrios"}),o.jsx("div",{className:"space-y-2",children:Z.slice(4).map(P=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(hf,{id:`secondary-${P.id}`,checked:F.secondary.includes(P.id),onCheckedChange:()=>U(P.id,"secondary")}),o.jsx(K,{htmlFor:`secondary-${P.id}`,className:"cursor-pointer",children:P.label})]},P.id))})]}),o.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-800 pt-6",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Preview do Card"}),o.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 max-w-sm",children:o.jsxs("div",{className:"space-y-2 text-sm",children:[F.primary.map(P=>{const A=Z.find(M=>M.id===P);return o.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:[o.jsxs("strong",{className:"text-gray-900 dark:text-white",children:[A?.label,":"]})," ","Exemplo"]},P)}),o.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-2 mt-2",children:F.secondary.map(P=>{const A=Z.find(M=>M.id===P);return o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:[A?.label,": Exemplo"]},P)})})]})})]}),o.jsx("div",{className:"flex justify-end",children:o.jsxs(xe,{onClick:I,className:"gap-2",children:[o.jsx(Pi,{className:"w-4 h-4"}),"Salvar Configuraes de Campos"]})})]})]})]})]}),o.jsx(Cr,{open:h,onOpenChange:p,children:o.jsxs(Sr,{className:"sm:max-w-[500px]",children:[o.jsxs(Er,{children:[o.jsx(Nr,{children:g?"Editar Etapa":"Nova Etapa"}),o.jsx(Pr,{children:g?"Atualize as informaes da etapa do funil":"Digite as informaes da nova etapa do funil"})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"nome",children:"Nome da Etapa *"}),o.jsx(oe,{id:"nome",value:j.nome,onChange:P=>_({...j,nome:P.target.value}),placeholder:"Ex: Anlise Tcnica",className:"mt-2"})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"cor-input",children:"Cor da Etapa"}),o.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[o.jsx("input",{type:"color",id:"cor-picker",value:j.cor,onChange:P=>_({...j,cor:P.target.value}),className:"w-8 h-8 rounded cursor-pointer",style:{border:"none",padding:0,outline:"none"}}),o.jsx(oe,{id:"cor-input",value:j.cor,onChange:P=>_({...j,cor:P.target.value}),placeholder:"#3b82f6",className:"flex-1 font-mono text-sm",maxLength:7})]})]})]}),o.jsxs(kr,{children:[o.jsx(xe,{variant:"outline",onClick:()=>p(!1),disabled:C,children:"Cancelar"}),o.jsx(xe,{onClick:se,disabled:C,children:C?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):g?"Atualizar":"Criar Etapa"})]})]})}),o.jsx(Dn,{open:E,onOpenChange:N,children:o.jsxs(In,{children:[o.jsxs(Mn,{children:[o.jsx($n,{children:"Excluir Etapa"}),o.jsx(Ln,{children:"Tem certeza que deseja excluir esta etapa? Esta ao no pode ser desfeita."})]}),o.jsxs(Fn,{children:[o.jsx(Bn,{onClick:()=>N(!1),disabled:O,children:"Cancelar"}),o.jsx(zn,{onClick:re,disabled:O,className:"bg-red-600 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700",children:O?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Excluindo..."]}):"Excluir"})]})]})})]})}function ba({className:r,...e}){return o.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:o.jsx("table",{"data-slot":"table",className:Le("w-full caption-bottom text-sm",r),...e})})}function _a({className:r,...e}){return o.jsx("thead",{"data-slot":"table-header",className:Le("[&_tr]:border-b",r),...e})}function ja({className:r,...e}){return o.jsx("tbody",{"data-slot":"table-body",className:Le("[&_tr:last-child]:border-0",r),...e})}function er({className:r,...e}){return o.jsx("tr",{"data-slot":"table-row",className:Le("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",r),...e})}function He({className:r,...e}){return o.jsx("th",{"data-slot":"table-head",className:Le("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...e})}function Be({className:r,...e}){return o.jsx("td",{"data-slot":"table-cell",className:Le("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...e})}function DI(){const[r,e]=x.useState(""),[t,a]=x.useState(!1),[i,l]=x.useState(!1),[u,d]=x.useState(!1),[h,p]=x.useState(!1),[g,m]=x.useState(null),[w,y]=x.useState({name:"",email:"",role:"",password:"",status:"active"}),[j,_]=x.useState({name:"",email:"",role:"",status:"active"}),[C,S]=x.useState([{id:"1",name:"Ana Admin",email:"ana@escritorio.com",role:"Administrador",status:"active"},{id:"2",name:"Diego Perito",email:"diego@escritorio.com",role:"Perito",status:"active"},{id:"3",name:"Maria Advogada",email:"maria@escritorio.com",role:"Advogado",status:"active"},{id:"4",name:"Carlos Assistente",email:"carlos@escritorio.com",role:"Assistente",status:"inactive"}]),E=()=>{if(!w.name||!w.email||!w.password){ee.error("Preencha todos os campos obrigatrios");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.email)){ee.error("E-mail invlido");return}if(w.password.length<6){ee.error("A senha deve ter pelo menos 6 caracteres");return}ee.success("Usurio criado com sucesso!"),a(!1),y({name:"",email:"",role:"",password:"",status:"active"})},N=H=>{C.find(ae=>ae.id===H)&&(m(H),l(!0))},D=H=>{const Z=C.find(ae=>ae.id===H);Z&&(m(H),_({name:Z.name,email:Z.email,role:Z.role,status:Z.status}),d(!0))},R=()=>{if(!j.name||!j.email||!j.role){ee.error("Preencha todos os campos obrigatrios");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j.email)){ee.error("E-mail invlido");return}S(H=>H.map(Z=>Z.id===g?{...Z,...j}:Z)),ee.success("Usurio atualizado com sucesso!"),d(!1),m(null)},O=H=>{m(H),p(!0)},B=()=>{S(H=>H.filter(Z=>Z.id!==g)),ee.success("Usurio excludo com sucesso!"),p(!1),m(null)},F=C.filter(H=>H.name.toLowerCase().includes(r.toLowerCase())||H.email.toLowerCase().includes(r.toLowerCase())||H.role.toLowerCase().includes(r.toLowerCase()));return o.jsxs("div",{className:"p-4 lg:p-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-gray-900 dark:text-white mb-2",children:"Gerenciamento de Usurios"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gerencie os usurios do sistema"})]}),o.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[o.jsxs("div",{className:"relative w-full sm:w-96",children:[o.jsx(zc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx(oe,{placeholder:"Buscar usurios...",value:r,onChange:H=>e(H.target.value),className:"pl-10"})]}),o.jsxs(Cr,{open:t,onOpenChange:a,children:[o.jsx(Di,{asChild:!0,children:o.jsxs(xe,{className:"gap-2 w-full sm:w-auto",children:[o.jsx(ys,{className:"w-4 h-4"}),"Novo Usurio"]})}),o.jsxs(Sr,{className:"sm:max-w-[500px]",children:[o.jsxs(Er,{children:[o.jsx(Nr,{children:"Novo Usurio"}),o.jsx(Pr,{children:"Preencha os dados do novo usurio"})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"name",children:"Nome Completo *"}),o.jsx(oe,{id:"name",value:w.name,onChange:H=>y(Z=>({...Z,name:H.target.value})),placeholder:"Nome do usurio"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"email",children:"E-mail *"}),o.jsx(oe,{id:"email",type:"email",value:w.email,onChange:H=>y(Z=>({...Z,email:H.target.value})),placeholder:"email@exemplo.com"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"role",children:"Perfil *"}),o.jsxs(et,{value:w.role,onValueChange:H=>y(Z=>({...Z,role:H})),children:[o.jsx(rt,{id:"role",children:o.jsx(tt,{placeholder:"Selecione o perfil"})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"Administrador",children:"Administrador"}),o.jsx(ie,{value:"Advogado",children:"Advogado"}),o.jsx(ie,{value:"Perito",children:"Perito"}),o.jsx(ie,{value:"Assistente",children:"Assistente"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"password",children:"Senha *"}),o.jsx(oe,{id:"password",type:"password",value:w.password,onChange:H=>y(Z=>({...Z,password:H.target.value})),placeholder:"Mnimo 6 caracteres"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"status",children:"Status"}),o.jsxs(et,{value:w.status,onValueChange:H=>y(Z=>({...Z,status:H})),children:[o.jsx(rt,{id:"status",children:o.jsx(tt,{})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"active",children:"Ativo"}),o.jsx(ie,{value:"inactive",children:"Inativo"})]})]})]})]}),o.jsxs(kr,{children:[o.jsx(xe,{variant:"outline",onClick:()=>a(!1),children:"Cancelar"}),o.jsx(xe,{onClick:E,children:"Criar Usurio"})]})]})]})]}),o.jsx("div",{className:"border border-gray-200 dark:border-gray-800 rounded-lg overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs(ba,{children:[o.jsx(_a,{children:o.jsxs(er,{children:[o.jsx(He,{children:"ID"}),o.jsx(He,{children:"Nome"}),o.jsx(He,{children:"E-mail"}),o.jsx(He,{children:"Perfil"}),o.jsx(He,{children:"Status"}),o.jsx(He,{className:"w-12",children:"Aes"})]})}),o.jsx(ja,{children:F.map(H=>o.jsxs(er,{children:[o.jsx(Be,{children:H.id}),o.jsx(Be,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center",children:o.jsx(Vc,{className:"w-4 h-4"})}),o.jsx("span",{className:"text-gray-900 dark:text-white",children:H.name})]})}),o.jsx(Be,{children:H.email}),o.jsx(Be,{children:o.jsx(sr,{variant:"outline",children:H.role})}),o.jsx(Be,{children:o.jsx(sr,{variant:H.status==="active"?"default":"secondary",children:H.status==="active"?"Ativo":"Inativo"})}),o.jsx(Be,{children:o.jsxs(An,{children:[o.jsx(Tn,{asChild:!0,children:o.jsx("button",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:o.jsx(xs,{className:"w-4 h-4"})})}),o.jsxs(On,{align:"end",children:[o.jsx(wt,{onClick:()=>N(H.id),children:"Visualizar"}),o.jsx(wt,{onClick:()=>D(H.id),children:"Editar"}),o.jsx(wt,{className:"text-red-600 dark:text-red-400",onClick:()=>O(H.id),children:"Excluir"})]})]})})]},H.id))})]})})}),F.length===0&&o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhum usurio encontrado"})}),o.jsx(Cr,{open:i,onOpenChange:l,children:o.jsxs(Sr,{className:"sm:max-w-[500px]",children:[o.jsxs(Er,{children:[o.jsx(Nr,{children:"Detalhes do Usurio"}),o.jsx(Pr,{children:"Visualize as informaes do usurio"})]}),o.jsx("div",{className:"space-y-4 py-4",children:g&&(()=>{const H=C.find(Z=>Z.id===g);return H?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:"ID"}),o.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:H.id})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:"Nome Completo"}),o.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:H.name})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:"E-mail"}),o.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:H.email})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:"Perfil"}),o.jsx(sr,{variant:"outline",children:H.role})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:"Status"}),o.jsx(sr,{variant:H.status==="active"?"default":"secondary",children:H.status==="active"?"Ativo":"Inativo"})]})]}):null})()}),o.jsxs(kr,{children:[o.jsx(xe,{variant:"outline",onClick:()=>l(!1),children:"Fechar"}),o.jsxs(xe,{onClick:()=>{l(!1),g&&D(g)},children:[o.jsx(Bc,{className:"w-4 h-4 mr-2"}),"Editar"]})]})]})}),o.jsx(Cr,{open:u,onOpenChange:d,children:o.jsxs(Sr,{className:"sm:max-w-[500px]",children:[o.jsxs(Er,{children:[o.jsx(Nr,{children:"Editar Usurio"}),o.jsx(Pr,{children:"Atualize os dados do usurio"})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-name",children:"Nome Completo *"}),o.jsx(oe,{id:"edit-name",value:j.name,onChange:H=>_(Z=>({...Z,name:H.target.value})),placeholder:"Nome do usurio"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-email",children:"E-mail *"}),o.jsx(oe,{id:"edit-email",type:"email",value:j.email,onChange:H=>_(Z=>({...Z,email:H.target.value})),placeholder:"email@exemplo.com"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-role",children:"Perfil *"}),o.jsxs(et,{value:j.role,onValueChange:H=>_(Z=>({...Z,role:H})),children:[o.jsx(rt,{id:"edit-role",children:o.jsx(tt,{placeholder:"Selecione o perfil"})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"Administrador",children:"Administrador"}),o.jsx(ie,{value:"Advogado",children:"Advogado"}),o.jsx(ie,{value:"Perito",children:"Perito"}),o.jsx(ie,{value:"Assistente",children:"Assistente"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-status",children:"Status"}),o.jsxs(et,{value:j.status,onValueChange:H=>_(Z=>({...Z,status:H})),children:[o.jsx(rt,{id:"edit-status",children:o.jsx(tt,{})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"active",children:"Ativo"}),o.jsx(ie,{value:"inactive",children:"Inativo"})]})]})]})]}),o.jsxs(kr,{children:[o.jsx(xe,{variant:"outline",onClick:()=>d(!1),children:"Cancelar"}),o.jsx(xe,{onClick:R,children:"Salvar Alteraes"})]})]})}),o.jsx(Dn,{open:h,onOpenChange:p,children:o.jsxs(In,{children:[o.jsxs(Mn,{children:[o.jsx($n,{children:"Excluir Usurio"}),o.jsx(Ln,{children:"Tem certeza de que deseja excluir este usurio? Esta ao no pode ser desfeita e o usurio perder acesso ao sistema."})]}),o.jsxs(Fn,{children:[o.jsx(Bn,{children:"Cancelar"}),o.jsx(zn,{onClick:B,className:"bg-red-600 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700",children:"Excluir"})]})]})})]})}function II(){const[r,e]=x.useState(!1),t=[{id:"1",name:"Ana Admin",role:"Administrador"},{id:"2",name:"Diego Perito",role:"Perito"},{id:"3",name:"Maria Advogada",role:"Advogado"}],a=[{id:"crm",name:"Pipeline"},{id:"contacts",name:"Contatos"},{id:"calculations",name:"Clculo Revisional"},{id:"petitions",name:"Gerao de Peties"}],i=["create","read","update","delete"],l={create:"Criar",read:"Ler",update:"Editar",delete:"Deletar"},[u,d]=x.useState({1:{crm:["create","read","update","delete"],contacts:["create","read","update","delete"],calculations:["create","read","update","delete"],petitions:["create","read","update","delete"]},2:{crm:["read"],contacts:["read"],calculations:["create","read","update"],petitions:["create","read"]},3:{crm:["create","read","update"],contacts:["create","read","update"],calculations:["read"],petitions:["create","read","update","delete"]}}),h=(m,w,y)=>{d(j=>{const _=j[m]||{},C=_[w]||[],S=C.includes(y);return{...j,[m]:{..._,[w]:S?C.filter(E=>E!==y):[...C,y]}}})},p=(m,w,y)=>u[m]?.[w]?.includes(y)||!1,g=async()=>{e(!0),await new Promise(m=>setTimeout(m,1e3)),e(!1),ee.success("Permisses salvas com sucesso!")};return o.jsxs("div",{className:"p-4 lg:p-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-gray-900 dark:text-white mb-2",children:"Gerenciamento de Permisses"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Defina permisses granulares por usurio e mdulo"})]}),o.jsxs(qe,{children:[o.jsxs(Je,{children:[o.jsx(Ye,{children:"Matriz de Permisses"}),o.jsx(fs,{children:"Configure as permisses de CLED - Criar, Ler, Editar, Deletar para cada mdulo e usurio"})]}),o.jsx(We,{children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs(ba,{children:[o.jsx(_a,{children:o.jsxs(er,{children:[o.jsx(He,{className:"w-48",children:"Usurio"}),a.map(m=>o.jsxs(He,{className:"text-center",children:[o.jsx("div",{children:m.name}),o.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-x-2 mt-1",children:i.map(w=>o.jsx("span",{children:l[w].charAt(0)},w))})]},m.id))]})}),o.jsx(ja,{children:t.map(m=>o.jsxs(er,{children:[o.jsx(Be,{children:o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-900 dark:text-white",children:m.name}),o.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:m.role})]})}),a.map(w=>o.jsx(Be,{children:o.jsx("div",{className:"flex items-center justify-center gap-2",children:i.map(y=>o.jsx(hf,{checked:p(m.id,w.id,y),onCheckedChange:()=>h(m.id,w.id,y),title:l[y]},y))})},w.id))]},m.id))})]})})})]}),o.jsx("div",{className:"flex justify-end mt-6",children:o.jsxs(xe,{onClick:g,disabled:r,className:"gap-2",children:[o.jsx(Pi,{className:"w-4 h-4"}),r?"Salvando...":"Salvar Permisses"]})})]})}var Nh={exports:{}},Ph,Ax;function MI(){if(Ax)return Ph;Ax=1;function r(I){return I&&typeof I=="object"&&"default"in I?I.default:I}var e=r(Mc()),t=xf();function a(I,P){for(var A=Object.getOwnPropertyNames(P),M=0;M<A.length;M++){var T=A[M],$=Object.getOwnPropertyDescriptor(P,T);$&&$.configurable&&I[T]===void 0&&Object.defineProperty(I,T,$)}return I}function i(){return(i=Object.assign||function(I){for(var P=1;P<arguments.length;P++){var A=arguments[P];for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&(I[M]=A[M])}return I}).apply(this,arguments)}function l(I,P){I.prototype=Object.create(P.prototype),a(I.prototype.constructor=I,P)}function u(I,P){if(I==null)return{};var A,M,T={},$=Object.keys(I);for(M=0;M<$.length;M++)A=$[M],0<=P.indexOf(A)||(T[A]=I[A]);return T}function d(I){if(I===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I}var h=function(I,P,A,M,T,$,Q,pe){if(!I){var J;if(P===void 0)J=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var q=[A,M,T,$,Q,pe],le=0;(J=new Error(P.replace(/%s/g,function(){return q[le++]}))).name="Invariant Violation"}throw J.framesToPop=1,J}},p=h;function g(I,P,A){if("selectionStart"in I&&"selectionEnd"in I)I.selectionStart=P,I.selectionEnd=A;else{var M=I.createTextRange();M.collapse(!0),M.moveStart("character",P),M.moveEnd("character",A-P),M.select()}}function m(I){var P=0,A=0;if("selectionStart"in I&&"selectionEnd"in I)P=I.selectionStart,A=I.selectionEnd;else{var M=document.selection.createRange();M.parentElement()===I&&(P=-M.moveStart("character",-I.value.length),A=-M.moveEnd("character",-I.value.length))}return{start:P,end:A,length:A-P}}var w={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},y="_";function j(I,P,A){var M="",T="",$=null,Q=[];if(P===void 0&&(P=y),A==null&&(A=w),!I||typeof I!="string")return{maskChar:P,formatChars:A,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};var pe=!1;return I.split("").forEach(function(J){pe=!pe&&J==="\\"||(pe||!A[J]?(Q.push(M.length),M.length===Q.length-1&&(T+=J)):$=M.length+1,M+=J,!1)}),{maskChar:P,formatChars:A,prefix:T,mask:M,lastEditablePosition:$,permanents:Q}}function _(I,P){return I.permanents.indexOf(P)!==-1}function C(I,P,A){var M=I.mask,T=I.formatChars;if(!A)return!1;if(_(I,P))return M[P]===A;var $=T[M[P]];return new RegExp($).test(A)}function S(I,P){return P.split("").every(function(A,M){return _(I,M)||!C(I,M,A)})}function E(I,P){var A=I.maskChar,M=I.prefix;if(!A){for(;P.length>M.length&&_(I,P.length-1);)P=P.slice(0,P.length-1);return P.length}for(var T=M.length,$=P.length;$>=M.length;$--){var Q=P[$];if(!_(I,$)&&C(I,$,Q)){T=$+1;break}}return T}function N(I,P){return E(I,P)===I.mask.length}function D(I,P){var A=I.maskChar,M=I.mask,T=I.prefix;if(!A){for((P=O(I,"",P,0)).length<T.length&&(P=T);P.length<M.length&&_(I,P.length);)P+=M[P.length];return P}if(P)return O(I,D(I,""),P,0);for(var $=0;$<M.length;$++)_(I,$)?P+=M[$]:P+=A;return P}function R(I,P,A,M){var T=A+M,$=I.maskChar,Q=I.mask,pe=I.prefix,J=P.split("");if($)return J.map(function(le,de){return de<A||T<=de?le:_(I,de)?Q[de]:$}).join("");for(var q=T;q<J.length;q++)_(I,q)&&(J[q]="");return A=Math.max(pe.length,A),J.splice(A,T-A),P=J.join(""),D(I,P)}function O(I,P,A,M){var T=I.mask,$=I.maskChar,Q=I.prefix,pe=A.split(""),J=N(I,P);return!$&&M>P.length&&(P+=T.slice(P.length,M)),pe.every(function(q){for(;je=q,_(I,we=M)&&je!==T[we];){if(M>=P.length&&(P+=T[M]),le=q,de=M,$&&_(I,de)&&le===$)return!0;if(++M>=T.length)return!1}var le,de,we,je;return!C(I,M,q)&&q!==$||(M<P.length?P=$||J||M<Q.length?P.slice(0,M)+q+P.slice(M+1):(P=P.slice(0,M)+q+P.slice(M),D(I,P)):$||(P+=q),++M<T.length)}),P}function B(I,P,A,M){var T=I.mask,$=I.maskChar,Q=A.split(""),pe=M;return Q.every(function(J){for(;le=J,_(I,q=M)&&le!==T[q];)if(++M>=T.length)return!1;var q,le;return(C(I,M,J)||J===$)&&M++,M<T.length}),M-pe}function F(I,P){for(var A=P;0<=A;--A)if(!_(I,A))return A;return null}function H(I,P){for(var A=I.mask,M=P;M<A.length;++M)if(!_(I,M))return M;return null}function Z(I){return I||I===0?I+"":""}function ae(I,P,A,M,T){var $=I.mask,Q=I.prefix,pe=I.lastEditablePosition,J=P,q="",le=0,de=0,we=Math.min(T.start,A.start);return A.end>T.start?de=(le=B(I,M,q=J.slice(T.start,A.end),we))?T.length:0:J.length<M.length&&(de=M.length-J.length),J=M,de&&(de===1&&!T.length&&(we=T.start===A.start?H(I,A.start):F(I,A.start)),J=R(I,J,we,de)),J=O(I,J,q,we),(we+=le)>=$.length?we=$.length:we<Q.length&&!le?we=Q.length:we>=Q.length&&we<pe&&le&&(we=H(I,we)),q||(q=null),{value:J=D(I,J),enteredString:q,selection:{start:we,end:we}}}function ue(){var I=new RegExp("windows","i"),P=new RegExp("phone","i"),A=navigator.userAgent;return I.test(A)&&P.test(A)}function z(I){return typeof I=="function"}function V(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame}function se(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame}function X(I){return(se()?V():function(){return setTimeout(I,1e3/60)})(I)}function re(I){(se()||clearTimeout)(I)}var U=(function(I){function P(M){var T=I.call(this,M)||this;T.focused=!1,T.mounted=!1,T.previousSelection=null,T.selectionDeferId=null,T.saveSelectionLoopDeferId=null,T.saveSelectionLoop=function(){T.previousSelection=T.getSelection(),T.saveSelectionLoopDeferId=X(T.saveSelectionLoop)},T.runSaveSelectionLoop=function(){T.saveSelectionLoopDeferId===null&&T.saveSelectionLoop()},T.stopSaveSelectionLoop=function(){T.saveSelectionLoopDeferId!==null&&(re(T.saveSelectionLoopDeferId),T.saveSelectionLoopDeferId=null,T.previousSelection=null)},T.getInputDOMNode=function(){if(!T.mounted)return null;var ye=t.findDOMNode(d(d(T))),Ae=typeof window<"u"&&ye instanceof window.Element;if(ye&&!Ae)return null;if(ye.nodeName!=="INPUT"&&(ye=ye.querySelector("input")),!ye)throw new Error("react-input-mask: inputComponent doesn't contain input node");return ye},T.getInputValue=function(){var ye=T.getInputDOMNode();return ye?ye.value:null},T.setInputValue=function(ye){var Ae=T.getInputDOMNode();Ae&&(T.value=ye,Ae.value=ye)},T.setCursorToEnd=function(){var ye=E(T.maskOptions,T.value),Ae=H(T.maskOptions,ye);Ae!==null&&T.setCursorPosition(Ae)},T.setSelection=function(ye,Ae,ze){ze===void 0&&(ze={});var $e=T.getInputDOMNode(),Ge=T.isFocused();$e&&Ge&&(ze.deferred||g($e,ye,Ae),T.selectionDeferId!==null&&re(T.selectionDeferId),T.selectionDeferId=X(function(){T.selectionDeferId=null,g($e,ye,Ae)}),T.previousSelection={start:ye,end:Ae,length:Math.abs(Ae-ye)})},T.getSelection=function(){return m(T.getInputDOMNode())},T.getCursorPosition=function(){return T.getSelection().start},T.setCursorPosition=function(ye){T.setSelection(ye,ye)},T.isFocused=function(){return T.focused},T.getBeforeMaskedValueChangeConfig=function(){var ye=T.maskOptions,Ae=ye.mask,ze=ye.maskChar,$e=ye.permanents,Ge=ye.formatChars;return{mask:Ae,maskChar:ze,permanents:$e,alwaysShowMask:!!T.props.alwaysShowMask,formatChars:Ge}},T.isInputAutofilled=function(ye,Ae,ze,$e){var Ge=T.getInputDOMNode();try{if(Ge.matches(":-webkit-autofill"))return!0}catch{}return!T.focused||$e.end<ze.length&&Ae.end===ye.length},T.onChange=function(ye){var Ae=d(d(T)).beforePasteState,ze=d(d(T)).previousSelection,$e=T.props.beforeMaskedValueChange,Ge=T.getInputValue(),Ct=T.value,st=T.getSelection();T.isInputAutofilled(Ge,st,Ct,ze)&&(Ct=D(T.maskOptions,""),ze={start:0,end:0,length:0}),Ae&&(ze=Ae.selection,Ct=Ae.value,st={start:ze.start+Ge.length,end:ze.start+Ge.length,length:0},Ge=Ct.slice(0,ze.start)+Ge+Ct.slice(ze.end),T.beforePasteState=null);var bt=ae(T.maskOptions,Ge,st,Ct,ze),Vt=bt.enteredString,at=bt.selection,It=bt.value;if(z($e)){var Ar=$e({value:It,selection:at},{value:Ct,selection:ze},Vt,T.getBeforeMaskedValueChangeConfig());It=Ar.value,at=Ar.selection}T.setInputValue(It),z(T.props.onChange)&&T.props.onChange(ye),T.isWindowsPhoneBrowser?T.setSelection(at.start,at.end,{deferred:!0}):T.setSelection(at.start,at.end)},T.onFocus=function(ye){var Ae=T.props.beforeMaskedValueChange,ze=T.maskOptions,$e=ze.mask,Ge=ze.prefix;if(T.focused=!0,T.mounted=!0,$e){if(T.value)E(T.maskOptions,T.value)<T.maskOptions.mask.length&&T.setCursorToEnd();else{var Ct=D(T.maskOptions,Ge),st=D(T.maskOptions,Ct),bt=E(T.maskOptions,st),Vt=H(T.maskOptions,bt),at={start:Vt,end:Vt};if(z(Ae)){var It=Ae({value:st,selection:at},{value:T.value,selection:null},null,T.getBeforeMaskedValueChangeConfig());st=It.value,at=It.selection}var Ar=st!==T.getInputValue();Ar&&T.setInputValue(st),Ar&&z(T.props.onChange)&&T.props.onChange(ye),T.setSelection(at.start,at.end)}T.runSaveSelectionLoop()}z(T.props.onFocus)&&T.props.onFocus(ye)},T.onBlur=function(ye){var Ae=T.props.beforeMaskedValueChange,ze=T.maskOptions.mask;if(T.stopSaveSelectionLoop(),T.focused=!1,ze&&!T.props.alwaysShowMask&&S(T.maskOptions,T.value)){var $e="";z(Ae)&&($e=Ae({value:$e,selection:null},{value:T.value,selection:T.previousSelection},null,T.getBeforeMaskedValueChangeConfig()).value);var Ge=$e!==T.getInputValue();Ge&&T.setInputValue($e),Ge&&z(T.props.onChange)&&T.props.onChange(ye)}z(T.props.onBlur)&&T.props.onBlur(ye)},T.onMouseDown=function(ye){if(!T.focused&&document.addEventListener){T.mouseDownX=ye.clientX,T.mouseDownY=ye.clientY,T.mouseDownTime=new Date().getTime();var Ae=function ze($e){if(document.removeEventListener("mouseup",ze),T.focused){var Ge=Math.abs($e.clientX-T.mouseDownX),Ct=Math.abs($e.clientY-T.mouseDownY),st=Math.max(Ge,Ct),bt=new Date().getTime()-T.mouseDownTime;(st<=10&&bt<=200||st<=5&&bt<=300)&&T.setCursorToEnd()}};document.addEventListener("mouseup",Ae)}z(T.props.onMouseDown)&&T.props.onMouseDown(ye)},T.onPaste=function(ye){z(T.props.onPaste)&&T.props.onPaste(ye),ye.defaultPrevented||(T.beforePasteState={value:T.getInputValue(),selection:T.getSelection()},T.setInputValue(""))},T.handleRef=function(ye){T.props.children==null&&z(T.props.inputRef)&&T.props.inputRef(ye)};var $=M.mask,Q=M.maskChar,pe=M.formatChars,J=M.alwaysShowMask,q=M.beforeMaskedValueChange,le=M.defaultValue,de=M.value;T.maskOptions=j($,Q,pe),le==null&&(le=""),de==null&&(de=le);var we=Z(de);if(T.maskOptions.mask&&(J||we)&&(we=D(T.maskOptions,we),z(q))){var je=M.value;M.value==null&&(je=le),we=q({value:we,selection:null},{value:je=Z(je),selection:null},null,T.getBeforeMaskedValueChangeConfig()).value}return T.value=we,T}l(P,I);var A=P.prototype;return A.componentDidMount=function(){this.mounted=!0,this.getInputDOMNode()&&(this.isWindowsPhoneBrowser=ue(),this.maskOptions.mask&&this.getInputValue()!==this.value&&this.setInputValue(this.value))},A.componentDidUpdate=function(){var M=this.previousSelection,T=this.props,$=T.beforeMaskedValueChange,Q=T.alwaysShowMask,pe=T.mask,J=T.maskChar,q=T.formatChars,le=this.maskOptions,de=Q||this.isFocused(),we=this.props.value!=null,je=we?Z(this.props.value):this.value,ye=M?M.start:null;if(this.maskOptions=j(pe,J,q),this.maskOptions.mask){!le.mask&&this.isFocused()&&this.runSaveSelectionLoop();var Ae=this.maskOptions.mask&&this.maskOptions.mask!==le.mask;if(le.mask||we||(je=this.getInputValue()),(Ae||this.maskOptions.mask&&(je||de))&&(je=D(this.maskOptions,je)),Ae){var ze=E(this.maskOptions,je);(ye===null||ze<ye)&&(ye=N(this.maskOptions,je)?ze:H(this.maskOptions,ze))}!this.maskOptions.mask||!S(this.maskOptions,je)||de||we&&this.props.value||(je="");var $e={start:ye,end:ye};if(z($)){var Ge=$({value:je,selection:$e},{value:this.value,selection:this.previousSelection},null,this.getBeforeMaskedValueChangeConfig());je=Ge.value,$e=Ge.selection}this.value=je;var Ct=this.getInputValue()!==this.value;Ct?(this.setInputValue(this.value),this.forceUpdate()):Ae&&this.forceUpdate();var st=!1;$e.start!=null&&$e.end!=null&&(st=!M||M.start!==$e.start||M.end!==$e.end),(st||Ct)&&this.setSelection($e.start,$e.end)}else le.mask&&(this.stopSaveSelectionLoop(),this.forceUpdate())},A.componentWillUnmount=function(){this.mounted=!1,this.selectionDeferId!==null&&re(this.selectionDeferId),this.stopSaveSelectionLoop()},A.render=function(){var M,T=this.props,$=(T.mask,T.alwaysShowMask,T.maskChar,T.formatChars,T.inputRef,T.beforeMaskedValueChange,T.children),Q=u(T,["mask","alwaysShowMask","maskChar","formatChars","inputRef","beforeMaskedValueChange","children"]);if($){z($)||p(!1);var pe=["onChange","onPaste","onMouseDown","onFocus","onBlur","value","disabled","readOnly"],J=i({},Q);pe.forEach(function(le){return delete J[le]}),M=$(J),pe.filter(function(le){return M.props[le]!=null&&M.props[le]!==Q[le]}).length&&p(!1)}else M=e.createElement("input",i({ref:this.handleRef},Q));var q={onFocus:this.onFocus,onBlur:this.onBlur};return this.maskOptions.mask&&(Q.disabled||Q.readOnly||(q.onChange=this.onChange,q.onPaste=this.onPaste,q.onMouseDown=this.onMouseDown),Q.value!=null&&(q.value=this.value)),M=e.cloneElement(M,q)},P})(e.Component);return Ph=U,Ph}var Tx;function FI(){return Tx||(Tx=1,Nh.exports=MI()),Nh.exports}var $I=FI();const uc=Ic($I);function LI({onNavigate:r}){const{user:e}=Bo(),[t,a]=x.useState(""),[i,l]=x.useState(!1),[u,d]=x.useState(!1),[h,p]=x.useState(!1),[g,m]=x.useState(null),[w,y]=x.useState(!1),[j,_]=x.useState(!0),[C,S]=x.useState({name:"",cpfCnpj:"",email:"",phone:"",status:"Lead"}),[E,N]=x.useState({name:"",cpfCnpj:"",email:"",phone:"",status:"Lead"}),[D,R]=x.useState([]);x.useEffect(()=>{O()},[]);const O=async()=>{try{_(!0);const{data:z,error:V}=await ce.from("contatos").select("*").eq("ativo",!0).order("data_criacao",{ascending:!1});if(V)throw V;R(z||[])}catch(z){console.error("Error loading contacts:",z),ee.error("Erro ao carregar contatos")}finally{_(!1)}},B=async()=>{if(!C.name||!C.email){ee.error("Preencha todos os campos obrigatrios");return}y(!0);try{const V=C.cpfCnpj.replace(/\D/g,"").length===14?"Pessoa Jurdica":"Pessoa Fsica",{data:se,error:X}=await ce.from("contatos").insert([{tipo:V,nome_completo:C.name,email:C.email,cpf_cnpj:C.cpfCnpj||null,telefone_principal:C.phone||null,status_contato:C.status,responsavel_id:e?.id||null,criado_por:e?.id||null}]).select().single();if(X)throw X;ee.success("Contato criado com sucesso!"),l(!1),S({name:"",cpfCnpj:"",email:"",phone:"",status:"Lead"}),await O()}catch(z){console.error("Error creating contact:",z),ee.error(z.message||"Erro ao criar contato")}finally{y(!1)}},F=z=>{const V=D.find(se=>se.id===z);V&&(m(z),N({name:V.nome_completo,cpfCnpj:V.cpf_cnpj||"",email:V.email||"",phone:V.telefone_principal||"",status:V.status_contato}),d(!0))},H=z=>{m(z),p(!0)},Z=async()=>{if(!E.name||!E.email){ee.error("Preencha todos os campos obrigatrios");return}y(!0);try{const V=E.cpfCnpj.replace(/\D/g,"").length===14?"Pessoa Jurdica":"Pessoa Fsica",{error:se}=await ce.from("contatos").update({tipo:V,nome_completo:E.name,email:E.email,cpf_cnpj:E.cpfCnpj||null,telefone_principal:E.phone||null,status_contato:E.status,data_atualizacao:new Date().toISOString()}).eq("id",g);if(se)throw se;ee.success("Contato atualizado com sucesso!"),d(!1),m(null),await O()}catch(z){console.error("Error updating contact:",z),ee.error(z.message||"Erro ao atualizar contato")}finally{y(!1)}},ae=async()=>{y(!0);try{const{error:z}=await ce.from("contatos").update({ativo:!1}).eq("id",g);if(z)throw z;ee.success("Contato excludo com sucesso!"),p(!1),m(null),await O()}catch(z){console.error("Error deleting contact:",z),ee.error(z.message||"Erro ao excluir contato")}finally{y(!1)}},ue=D.filter(z=>z.nome_completo.toLowerCase().includes(t.toLowerCase())||z.email&&z.email.toLowerCase().includes(t.toLowerCase())||z.cpf_cnpj&&z.cpf_cnpj.includes(t));return o.jsxs("div",{className:"p-4 lg:p-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-gray-900 dark:text-white mb-2",children:"Gesto de Contatos"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gerencie seus contatos e clientes"})]}),o.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[o.jsxs("div",{className:"relative w-full sm:w-96",children:[o.jsx(zc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx(oe,{placeholder:"Buscar contatos...",value:t,onChange:z=>a(z.target.value),className:"pl-10"})]}),o.jsxs(Cr,{open:i,onOpenChange:l,children:[o.jsx(Di,{asChild:!0,children:o.jsxs(xe,{className:"gap-2 w-full sm:w-auto",children:[o.jsx(ys,{className:"w-4 h-4"}),"Novo Contato"]})}),o.jsxs(Sr,{className:"sm:max-w-[500px]",children:[o.jsxs(Er,{children:[o.jsx(Nr,{children:"Novo Contato"}),o.jsx(Pr,{children:"Preencha os dados do contato"})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"name",children:"Nome Completo *"}),o.jsx(oe,{id:"name",value:C.name,onChange:z=>S(V=>({...V,name:z.target.value})),placeholder:"Nome do contato"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"cpfCnpj",children:"CPF/CNPJ"}),o.jsx(uc,{mask:C.cpfCnpj.replace(/\D/g,"").length<=11?"999.999.999-999":"99.999.999/9999-99",value:C.cpfCnpj,onChange:z=>S(V=>({...V,cpfCnpj:z.target.value})),formatChars:{9:"[0-9]","?":"[0-9 ]"},children:z=>o.jsx(oe,{...z,id:"cpfCnpj",placeholder:"000.000.000-00 ou 00.000.000/0000-00"})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"email",children:"E-mail *"}),o.jsx(oe,{id:"email",type:"email",value:C.email,onChange:z=>S(V=>({...V,email:z.target.value})),placeholder:"email@exemplo.com"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"phone",children:"Telefone"}),o.jsx(uc,{mask:"(99) 99999-9999",value:C.phone,onChange:z=>S(V=>({...V,phone:z.target.value})),children:z=>o.jsx(oe,{...z,id:"phone",placeholder:"(00) 00000-0000"})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"status",children:"Status *"}),o.jsxs(et,{value:C.status,onValueChange:z=>S(V=>({...V,status:z})),children:[o.jsx(rt,{id:"status",children:o.jsx(tt,{})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"Lead",children:"Lead"}),o.jsx(ie,{value:"Cliente",children:"Cliente"}),o.jsx(ie,{value:"Ativo",children:"Ativo"}),o.jsx(ie,{value:"Inativo",children:"Inativo"}),o.jsx(ie,{value:"Ex-Cliente",children:"Ex-Cliente"})]})]})]})]}),o.jsxs(kr,{children:[o.jsx(xe,{variant:"outline",onClick:()=>l(!1),disabled:w,children:"Cancelar"}),o.jsx(xe,{onClick:B,disabled:w,children:w?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):"Salvar Contato"})]})]})]})]}),o.jsx("div",{className:"border border-gray-200 dark:border-gray-800 rounded-lg overflow-hidden",children:j?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx(ft,{className:"h-8 w-8 animate-spin text-gray-400"})}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs(ba,{children:[o.jsx(_a,{children:o.jsxs(er,{children:[o.jsx(He,{children:"Nome"}),o.jsx(He,{children:"CPF/CNPJ"}),o.jsx(He,{children:"E-mail"}),o.jsx(He,{children:"Telefone"}),o.jsx(He,{children:"Status"}),o.jsx(He,{children:"Data Criao"}),o.jsx(He,{className:"w-12",children:"Aes"})]})}),o.jsx(ja,{children:ue.map(z=>o.jsxs(er,{children:[o.jsx(Be,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center",children:o.jsx(Vc,{className:"w-4 h-4"})}),o.jsx("span",{className:"text-gray-900 dark:text-white",children:z.nome_completo})]})}),o.jsx(Be,{children:z.cpf_cnpj||"-"}),o.jsx(Be,{children:z.email||"-"}),o.jsx(Be,{children:z.telefone_principal||"-"}),o.jsx(Be,{children:o.jsx(sr,{variant:z.status_contato==="Ativo"||z.status_contato==="Cliente"?"default":"secondary",children:z.status_contato})}),o.jsx(Be,{children:new Date(z.data_criacao).toLocaleDateString("pt-BR")}),o.jsx(Be,{children:o.jsxs(An,{children:[o.jsx(Tn,{asChild:!0,children:o.jsx("button",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:o.jsx(xs,{className:"w-4 h-4"})})}),o.jsxs(On,{align:"end",children:[o.jsx(wt,{onClick:()=>r("contact-details",z.id),children:"Visualizar"}),o.jsx(wt,{onClick:()=>F(z.id),children:"Editar"}),o.jsx(wt,{className:"text-red-600 dark:text-red-400",onClick:()=>H(z.id),children:"Excluir"})]})]})})]},z.id))})]})})}),!j&&ue.length===0&&o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhum contato encontrado"})}),o.jsx(Cr,{open:u,onOpenChange:d,children:o.jsxs(Sr,{className:"sm:max-w-[500px]",children:[o.jsxs(Er,{children:[o.jsx(Nr,{children:"Editar Contato"}),o.jsx(Pr,{children:"Atualize os dados do contato"})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-name",children:"Nome Completo *"}),o.jsx(oe,{id:"edit-name",value:E.name,onChange:z=>N(V=>({...V,name:z.target.value})),placeholder:"Nome do contato"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-cpfCnpj",children:"CPF/CNPJ"}),o.jsx(uc,{mask:E.cpfCnpj.replace(/\D/g,"").length<=11?"999.999.999-999":"99.999.999/9999-99",value:E.cpfCnpj,onChange:z=>N(V=>({...V,cpfCnpj:z.target.value})),formatChars:{9:"[0-9]","?":"[0-9 ]"},children:z=>o.jsx(oe,{...z,id:"edit-cpfCnpj",placeholder:"000.000.000-00 ou 00.000.000/0000-00"})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-email",children:"E-mail *"}),o.jsx(oe,{id:"edit-email",type:"email",value:E.email,onChange:z=>N(V=>({...V,email:z.target.value})),placeholder:"email@exemplo.com"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-phone",children:"Telefone"}),o.jsx(uc,{mask:"(99) 99999-9999",value:E.phone,onChange:z=>N(V=>({...V,phone:z.target.value})),children:z=>o.jsx(oe,{...z,id:"edit-phone",placeholder:"(00) 00000-0000"})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-status",children:"Status *"}),o.jsxs(et,{value:E.status,onValueChange:z=>N(V=>({...V,status:z})),children:[o.jsx(rt,{id:"edit-status",children:o.jsx(tt,{})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"Lead",children:"Lead"}),o.jsx(ie,{value:"Cliente",children:"Cliente"}),o.jsx(ie,{value:"Ativo",children:"Ativo"}),o.jsx(ie,{value:"Inativo",children:"Inativo"}),o.jsx(ie,{value:"Ex-Cliente",children:"Ex-Cliente"})]})]})]})]}),o.jsxs(kr,{children:[o.jsx(xe,{variant:"outline",onClick:()=>d(!1),disabled:w,children:"Cancelar"}),o.jsx(xe,{onClick:Z,disabled:w,children:w?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):"Salvar Alteraes"})]})]})}),o.jsx(Dn,{open:h,onOpenChange:p,children:o.jsxs(In,{children:[o.jsxs(Mn,{children:[o.jsx($n,{children:"Excluir Contato"}),o.jsx(Ln,{children:"Tem certeza que deseja excluir este contato? Esta ao no pode ser desfeita."})]}),o.jsxs(Fn,{children:[o.jsx(Bn,{onClick:()=>p(!1),disabled:w,children:"Cancelar"}),o.jsx(zn,{onClick:ae,disabled:w,className:"bg-red-600 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700",children:w?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Excluindo..."]}):"Excluir"})]})]})})]})}function zI({contactId:r,onNavigate:e}){const{etapas:t,loading:a}=mu(),{user:i,profile:l}=Bo(),[u,d]=x.useState(!1),[h,p]=x.useState(!1),[g,m]=x.useState(!1),[w,y]=x.useState(!1),[j,_]=x.useState(!1),[C,S]=x.useState(null),[E,N]=x.useState(null),[D,R]=x.useState(!0),[O,B]=x.useState(!1),[F,H]=x.useState(!1),[Z,ae]=x.useState([]),[ue,z]=x.useState(!1),[V,se]=x.useState({titulo:"",tipo_acao:"",valor_estimado:"",etapa_funil_id:"",responsavel_id:"",origem:""}),[X,re]=x.useState({titulo:"",tipo_acao:"",valor_estimado:"",etapa_funil_id:"",responsavel_id:"",origem:""});x.useEffect(()=>{r&&(U(),I())},[r]);const U=async()=>{try{R(!0);const{data:q,error:le}=await ce.from("contatos").select("*").eq("id",r).single();if(le)throw le;N(q)}catch(q){console.error("Error loading contact:",q),ee.error("Erro ao carregar contato"),e("contacts")}finally{R(!1)}},I=async()=>{try{z(!0);const{data:q,error:le}=await ce.from("oportunidades").select(`
          *,
          etapa_funil:etapa_funil_id (
            id,
            nome,
            cor
          ),
          responsavel:responsavel_id (
            id,
            nome_completo
          )
        `).eq("contato_id",r).eq("ativo",!0).order("data_criacao",{ascending:!1});if(le)throw le;ae(q||[])}catch(q){console.error("Error loading opportunities:",q),ee.error("Erro ao carregar oportunidades")}finally{z(!1)}},P=()=>{ee.success("Contato atualizado com sucesso!"),d(!1)},A=async()=>{try{if(!r)return;const{error:q}=await ce.from("contatos").update({ativo:!1}).eq("id",r);if(q)throw q;ee.success("Contato excludo com sucesso!"),p(!1),e("contacts")}catch(q){console.error("Erro ao excluir contato:",q),ee.error("Erro ao excluir contato. Tente novamente.")}},M=async()=>{try{if(!C)return;const{error:q}=await ce.from("oportunidades").update({ativo:!1}).eq("id",C);if(q)throw q;ee.success("Oportunidade excluda com sucesso!"),_(!1),S(null),await I()}catch(q){console.error("Erro ao excluir oportunidade:",q),ee.error("Erro ao excluir oportunidade. Tente novamente.")}},T=async()=>{try{if(!C)return;if(!X.titulo.trim()){ee.error("Por favor, informe o ttulo da oportunidade");return}if(!X.etapa_funil_id){ee.error("Por favor, selecione a etapa do funil");return}if(!X.responsavel_id){ee.error("Por favor, selecione o responsvel");return}H(!0);const q={titulo:X.titulo.trim(),etapa_funil_id:X.etapa_funil_id,responsavel_id:X.responsavel_id};X.tipo_acao&&(q.tipo_acao=X.tipo_acao),X.valor_estimado&&parseFloat(X.valor_estimado)>0&&(q.valor_estimado=parseFloat(X.valor_estimado)),X.origem&&(q.origem=X.origem);const{error:le}=await ce.from("oportunidades").update(q).eq("id",C);if(le)throw le;ee.success("Oportunidade atualizada com sucesso!"),y(!1),S(null),await I()}catch(q){console.error("Erro ao atualizar oportunidade:",q),ee.error("Erro ao atualizar oportunidade. Tente novamente.")}finally{H(!1)}},$=q=>{S(q),_(!0)},Q=q=>{S(q);const le=Z.find(de=>de.id===q);le&&re({titulo:le.titulo||"",tipo_acao:le.tipo_acao||"",valor_estimado:le.valor_estimado?.toString()||"",etapa_funil_id:le.etapa_funil_id||"",responsavel_id:le.responsavel_id||"",origem:le.origem||""}),y(!0)},pe=async()=>{try{if(!V.titulo.trim()){ee.error("Por favor, informe o ttulo da oportunidade");return}if(!V.etapa_funil_id){ee.error("Por favor, selecione a etapa do funil");return}if(!V.responsavel_id){ee.error("Por favor, selecione o responsvel");return}B(!0);const q={titulo:V.titulo.trim(),etapa_funil_id:V.etapa_funil_id,responsavel_id:V.responsavel_id,contato_id:r,criado_por:i?.id};V.tipo_acao&&(q.tipo_acao=V.tipo_acao),V.valor_estimado&&parseFloat(V.valor_estimado)>0&&(q.valor_estimado=parseFloat(V.valor_estimado)),V.origem&&(q.origem=V.origem);const{data:le,error:de}=await ce.from("oportunidades").insert(q).select().single();if(de)throw de;ee.success("Oportunidade criada com sucesso!"),se({titulo:"",tipo_acao:"",valor_estimado:"",etapa_funil_id:"",responsavel_id:"",origem:""}),m(!1),await I()}catch(q){console.error("Erro ao criar oportunidade:",q),ee.error("Erro ao criar oportunidade. Tente novamente.")}finally{B(!1)}};if(D)return o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsx(ft,{className:"h-8 w-8 animate-spin text-gray-400"})});if(!E)return o.jsx("div",{className:"p-4 lg:p-8",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Contato no encontrado"}),o.jsx(xe,{onClick:()=>e("contacts"),className:"mt-4",children:"Voltar para Contatos"})]})});const J=()=>{const q=[E.endereco,E.numero,E.bairro,E.cidade,E.estado].filter(Boolean);return q.length>0?q.join(", "):"-"};return o.jsxs("div",{className:"p-4 lg:p-8",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs(xe,{variant:"ghost",onClick:()=>e("contacts"),className:"gap-2 mb-4",children:[o.jsx(Uo,{className:"w-4 h-4"}),"Voltar para Contatos"]}),o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-gray-900 dark:text-white mb-2",children:E.nome_completo}),o.jsx(sr,{variant:E.status_contato==="Ativo"||E.status_contato==="Cliente"?"default":"secondary",children:E.status_contato})]}),o.jsxs(xe,{variant:"destructive",className:"gap-2",onClick:()=>p(!0),children:[o.jsx(Uc,{className:"w-4 h-4"}),"Excluir"]})]})]}),o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Informaes do Contato"})}),o.jsxs(We,{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tipo"}),o.jsx("div",{className:"text-gray-900 dark:text-white",children:E.tipo})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"CPF/CNPJ"}),o.jsx("div",{className:"text-gray-900 dark:text-white",children:E.cpf_cnpj||"-"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"E-mail"}),o.jsx("div",{className:"text-gray-900 dark:text-white",children:E.email||"-"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Telefone Principal"}),o.jsx("div",{className:"text-gray-900 dark:text-white",children:E.telefone_principal||"-"})]}),E.telefone_secundario&&o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Telefone Secundrio"}),o.jsx("div",{className:"text-gray-900 dark:text-white",children:E.telefone_secundario})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Endereo"}),o.jsx("div",{className:"text-gray-900 dark:text-white",children:J()})]}),E.observacoes&&o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Observaes"}),o.jsx("div",{className:"text-gray-900 dark:text-white",children:E.observacoes})]})]})]})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-gray-900 dark:text-white",children:"Oportunidades Vinculadas"}),o.jsxs(xe,{className:"gap-2",onClick:()=>m(!0),children:[o.jsx(ys,{className:"w-4 h-4"}),"Nova Oportunidade"]})]}),o.jsx("div",{className:"border border-gray-200 dark:border-gray-800 rounded-lg overflow-hidden",children:ue?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx(ft,{className:"h-8 w-8 animate-spin text-gray-400"})}):Z.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhuma oportunidade vinculada a este contato"})}):o.jsxs(ba,{children:[o.jsx(_a,{children:o.jsxs(er,{children:[o.jsx(He,{children:"Ttulo"}),o.jsx(He,{children:"Etapa"}),o.jsx(He,{children:"Valor"}),o.jsx(He,{children:"Responsvel"}),o.jsx(He,{className:"w-12",children:"Aes"})]})}),o.jsx(ja,{children:Z.map(q=>o.jsxs(er,{children:[o.jsx(Be,{className:"text-gray-900 dark:text-white font-medium",children:q.titulo}),o.jsx(Be,{children:o.jsx(sr,{variant:"outline",style:{backgroundColor:q.etapa_funil?.cor+"20",borderColor:q.etapa_funil?.cor},children:q.etapa_funil?.nome||"Sem etapa"})}),o.jsx(Be,{className:"text-green-600 dark:text-green-400",children:q.valor_estimado?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(q.valor_estimado):"-"}),o.jsx(Be,{children:q.responsavel?.nome_completo||"-"}),o.jsx(Be,{children:o.jsxs(An,{children:[o.jsx(Tn,{asChild:!0,children:o.jsx("button",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:o.jsx(xs,{className:"w-4 h-4"})})}),o.jsxs(On,{align:"end",children:[o.jsx(wt,{onClick:()=>e("opportunity-details",q.id),children:"Ver Processo"}),o.jsx(wt,{onClick:()=>Q(q.id),children:"Editar"}),o.jsx(wt,{className:"text-red-600 dark:text-red-400",onClick:()=>$(q.id),children:"Excluir"})]})]})})]},q.id))})]})})]}),o.jsx(Cr,{open:u,onOpenChange:d,children:o.jsxs(Sr,{className:"sm:max-w-[425px]",children:[o.jsxs(Er,{children:[o.jsx(Nr,{children:"Editar Contato"}),o.jsx(Pr,{children:"Atualize as informaes do contato."})]}),o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(K,{htmlFor:"name",children:"Nome"}),o.jsx(oe,{id:"name",value:E.name,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(K,{htmlFor:"cpf",children:"CPF"}),o.jsx(oe,{id:"cpf",value:E.cpf,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(K,{htmlFor:"email",children:"E-mail"}),o.jsx(oe,{id:"email",value:E.email,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(K,{htmlFor:"phone",children:"Telefone"}),o.jsx(oe,{id:"phone",value:E.phone,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(K,{htmlFor:"address",children:"Endereo"}),o.jsx(oe,{id:"address",value:E.address,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(K,{htmlFor:"status",children:"Status"}),o.jsxs(et,{value:E.status,onValueChange:q=>console.log(q),children:[o.jsx(rt,{className:"col-span-3",children:o.jsx(tt,{placeholder:"Selecione o status"})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"active",children:"Ativo"}),o.jsx(ie,{value:"inactive",children:"Inativo"})]})]})]})]}),o.jsxs(kr,{children:[o.jsx(xe,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancelar"}),o.jsx(xe,{type:"button",onClick:P,children:"Salvar"})]})]})}),o.jsx(Dn,{open:h,onOpenChange:p,children:o.jsxs(In,{children:[o.jsxs(Mn,{children:[o.jsx($n,{children:"Excluir Contato"}),o.jsx(Ln,{children:"Voc tem certeza que deseja excluir este contato? Esta ao no pode ser desfeita."})]}),o.jsxs(Fn,{children:[o.jsx(Bn,{onClick:()=>p(!1),children:"Cancelar"}),o.jsx(zn,{onClick:A,children:"Excluir"})]})]})}),o.jsx(Dn,{open:j,onOpenChange:_,children:o.jsxs(In,{children:[o.jsxs(Mn,{children:[o.jsx($n,{children:"Excluir Oportunidade"}),o.jsx(Ln,{children:"Voc tem certeza que deseja excluir esta oportunidade? Esta ao no pode ser desfeita."})]}),o.jsxs(Fn,{children:[o.jsx(Bn,{onClick:()=>_(!1),children:"Cancelar"}),o.jsx(zn,{onClick:M,className:"bg-red-600 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700",children:"Excluir"})]})]})}),o.jsx(Cr,{open:w,onOpenChange:y,children:o.jsxs(Sr,{className:"sm:max-w-[500px]",children:[o.jsxs(Er,{children:[o.jsx(Nr,{children:"Editar Oportunidade"}),o.jsx(Pr,{children:"Atualize os dados da oportunidade"})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit_titulo",children:"Ttulo da Oportunidade"}),o.jsx(oe,{id:"edit_titulo",placeholder:"Ex: Proposta de Consultoria",value:X.titulo,onChange:q=>re({...X,titulo:q.target.value})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit_tipo_acao",children:"Tipo de Ao"}),o.jsxs(et,{value:X.tipo_acao,onValueChange:q=>re({...X,tipo_acao:q}),children:[o.jsx(rt,{children:o.jsx(tt,{placeholder:"Selecione o tipo"})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"Revisional",children:"Revisional"}),o.jsx(ie,{value:"Carto de Crdito",children:"Carto de Crdito"}),o.jsx(ie,{value:"Emprstimo",children:"Emprstimo"}),o.jsx(ie,{value:"Financiamento Imobilirio",children:"Financiamento Imobilirio"}),o.jsx(ie,{value:"Consultoria",children:"Consultoria"}),o.jsx(ie,{value:"Outros",children:"Outros"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit_valor_estimado",children:"Valor Estimado (R$)"}),o.jsx(oe,{id:"edit_valor_estimado",type:"number",placeholder:"0.00",value:X.valor_estimado,onChange:q=>re({...X,valor_estimado:q.target.value})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit_etapa",children:"Etapa do Funil"}),o.jsxs(et,{value:X.etapa_funil_id,onValueChange:q=>re({...X,etapa_funil_id:q}),children:[o.jsx(rt,{children:o.jsx(tt,{placeholder:"Selecione a etapa"})}),o.jsx(nt,{children:a?o.jsx("div",{className:"flex items-center justify-center py-2",children:o.jsx(ft,{className:"h-4 w-4 animate-spin"})}):t.map(q=>o.jsx(ie,{value:q.id,children:q.nome},q.id))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit_responsavel",children:"Responsvel"}),o.jsxs(et,{value:X.responsavel_id,onValueChange:q=>re({...X,responsavel_id:q}),children:[o.jsx(rt,{children:o.jsx(tt,{placeholder:"Selecione o responsvel"})}),o.jsx(nt,{children:i&&o.jsx(ie,{value:i.id,children:l?.nome_completo||i.email})})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit_origem",children:"Origem"}),o.jsx(oe,{id:"edit_origem",value:X.origem,onChange:q=>re({...X,origem:q.target.value}),placeholder:"Ex: Indicao, Website, etc."})]})]}),o.jsxs(kr,{children:[o.jsx(xe,{type:"button",variant:"outline",onClick:()=>{y(!1),S(null)},children:"Cancelar"}),o.jsx(xe,{type:"button",onClick:T,disabled:F,children:F?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):"Salvar Alteraes"})]})]})}),o.jsx(Cr,{open:g,onOpenChange:m,children:o.jsxs(Sr,{className:"sm:max-w-[500px]",children:[o.jsxs(Er,{children:[o.jsx(Nr,{children:"Nova Oportunidade"}),o.jsx(Pr,{children:"Preencha os dados para criar uma nova oportunidade"})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"titulo",children:"Ttulo da Oportunidade"}),o.jsx(oe,{id:"titulo",placeholder:"Ex: Proposta de Consultoria",value:V.titulo,onChange:q=>se({...V,titulo:q.target.value})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"tipo_acao",children:"Tipo de Ao"}),o.jsxs(et,{value:V.tipo_acao,onValueChange:q=>se({...V,tipo_acao:q}),children:[o.jsx(rt,{children:o.jsx(tt,{placeholder:"Selecione o tipo"})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"Revisional",children:"Revisional"}),o.jsx(ie,{value:"Carto de Crdito",children:"Carto de Crdito"}),o.jsx(ie,{value:"Emprstimo",children:"Emprstimo"}),o.jsx(ie,{value:"Financiamento Imobilirio",children:"Financiamento Imobilirio"}),o.jsx(ie,{value:"Consultoria",children:"Consultoria"}),o.jsx(ie,{value:"Outros",children:"Outros"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"valor_estimado",children:"Valor Estimado (R$)"}),o.jsx(oe,{id:"valor_estimado",type:"number",placeholder:"0.00",value:V.valor_estimado,onChange:q=>se({...V,valor_estimado:q.target.value})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"etapa",children:"Etapa do Funil"}),o.jsxs(et,{value:V.etapa_funil_id,onValueChange:q=>se({...V,etapa_funil_id:q}),children:[o.jsx(rt,{children:o.jsx(tt,{placeholder:"Selecione a etapa"})}),o.jsx(nt,{children:a?o.jsx("div",{className:"flex items-center justify-center py-2",children:o.jsx(ft,{className:"h-4 w-4 animate-spin"})}):t.map(q=>o.jsx(ie,{value:q.id,children:q.nome},q.id))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"responsavel",children:"Responsvel"}),o.jsxs(et,{value:V.responsavel_id,onValueChange:q=>se({...V,responsavel_id:q}),children:[o.jsx(rt,{children:o.jsx(tt,{placeholder:"Selecione o responsvel"})}),o.jsx(nt,{children:i&&o.jsx(ie,{value:i.id,children:l?.nome_completo||i.email})})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"origem",children:"Origem"}),o.jsx(oe,{id:"origem",value:V.origem,onChange:q=>se({...V,origem:q.target.value}),placeholder:"Ex: Indicao, Website, etc."})]})]}),o.jsxs(kr,{children:[o.jsx(xe,{type:"button",variant:"outline",onClick:()=>{m(!1),se({titulo:"",tipo_acao:"",valor_estimado:"",etapa_funil_id:"",responsavel_id:"",origem:""})},children:"Cancelar"}),o.jsx(xe,{type:"button",onClick:pe,disabled:O,children:O?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Criando..."]}):"Criar Oportunidade"})]})]})})]})}function BI({opportunity:r,onNavigate:e,onEdit:t,onDelete:a}){const i=u=>u?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u):"R$ 0,00",l=u=>new Date(u).toLocaleDateString("pt-BR");return o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow cursor-pointer",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsx("h4",{className:"text-sm text-gray-900 dark:text-white cursor-pointer hover:text-blue-600 dark:hover:text-blue-400",onClick:()=>e("opportunity-details",r.id),children:r.titulo}),o.jsxs(An,{children:[o.jsx(Tn,{asChild:!0,children:o.jsx("button",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:o.jsx(xs,{className:"w-4 h-4"})})}),o.jsxs(On,{align:"end",children:[o.jsx(wt,{onClick:()=>e("opportunity-details",r.id),children:"Visualizar"}),o.jsx(wt,{onClick:()=>t(r.id),children:"Editar"}),o.jsx(wt,{className:"text-red-600 dark:text-red-400",onClick:()=>a(r.id),children:"Excluir"})]})]})]}),o.jsxs("div",{className:"space-y-2 text-xs",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[o.jsx(Vc,{className:"w-3 h-3"}),o.jsx("span",{children:r.contatos?.nome_completo||"Sem contato"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[o.jsx(ny,{className:"w-3 h-3"}),o.jsx("span",{className:"text-green-600 dark:text-green-400",children:i(r.valor_estimado)})]}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[o.jsx(Yh,{className:"w-3 h-3"}),o.jsx("span",{children:l(r.data_criacao)})]})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:o.jsx(sr,{variant:"secondary",className:"text-xs",children:r.tipo_acao||"Sem tipo"})})]})}function UI({onNavigate:r}){const{user:e}=Bo(),{etapas:t,loading:a}=mu(),[i,l]=x.useState(!1),[u,d]=x.useState(!1),[h,p]=x.useState(!1),[g,m]=x.useState(null),[w,y]=x.useState(!1),[j,_]=x.useState(!0),[C,S]=x.useState({titulo:"",contato_id:"",tipo_acao:"",valor_estimado:"",etapa_funil_id:"",responsavel_id:"",origem:""}),[E,N]=x.useState({titulo:"",contato_id:"",tipo_acao:"",valor_estimado:"",etapa_funil_id:"",responsavel_id:"",origem:""}),[D,R]=x.useState([]),[O,B]=x.useState([]),[F,H]=x.useState([]);x.useEffect(()=>{Z(),ae(),ue()},[]);const Z=async()=>{try{_(!0);const{data:P,error:A}=await ce.from("oportunidades").select(`
          *,
          contatos:contato_id (
            id,
            nome_completo,
            cpf_cnpj,
            email,
            telefone_principal,
            ativo
          ),
          responsavel:responsavel_id (
            id,
            nome_completo,
            avatar_url
          )
        `).eq("ativo",!0).order("ordem",{ascending:!0}).order("data_criacao",{ascending:!1});if(A)throw A;const M=(P||[]).filter(T=>T.contatos?T.contatos.ativo===!0:!0);R(M)}catch(P){console.error("Error loading opportunities:",P),ee.error("Erro ao carregar oportunidades")}finally{_(!1)}},ae=async()=>{try{const{data:P,error:A}=await ce.from("contatos").select("id, nome_completo, email").eq("ativo",!0).order("nome_completo");if(A)throw A;B(P||[])}catch(P){console.error("Error loading contacts:",P)}},ue=async()=>{try{const{data:P,error:A}=await ce.from("profiles").select("id, nome_completo, avatar_url").eq("ativo",!0).order("nome_completo");if(A)throw A;H(P||[])}catch(P){console.error("Error loading profiles:",P)}},z=async()=>{if(!C.titulo){ee.error("Preencha o nome da oportunidade");return}y(!0);try{const{data:P,error:A}=await ce.from("oportunidades").insert([{titulo:C.titulo,contato_id:C.contato_id||null,tipo_acao:C.tipo_acao||null,valor_estimado:C.valor_estimado?parseFloat(C.valor_estimado):null,etapa_funil_id:C.etapa_funil_id||null,responsavel_id:C.responsavel_id||null,origem:C.origem||null,criado_por:e?.id||null}]).select().single();if(A)throw A;ee.success("Oportunidade criada com sucesso!"),l(!1),S({titulo:"",contato_id:"",tipo_acao:"",valor_estimado:"",etapa_funil_id:"",responsavel_id:"",origem:""}),await Z()}catch(P){console.error("Error creating opportunity:",P),ee.error(P.message||"Erro ao criar oportunidade")}finally{y(!1)}},V=P=>{const A=D.find(M=>M.id===P);A&&(N({titulo:A.titulo,contato_id:A.contato_id||"",tipo_acao:A.tipo_acao||"",valor_estimado:A.valor_estimado?String(A.valor_estimado):"",etapa_funil_id:A.etapa_funil_id||"",responsavel_id:A.responsavel_id||"",origem:A.origem||""}),m(P),d(!0))},se=async()=>{if(!E.titulo){ee.error("Preencha o nome da oportunidade");return}y(!0);try{const{error:P}=await ce.from("oportunidades").update({titulo:E.titulo,contato_id:E.contato_id||null,tipo_acao:E.tipo_acao||null,valor_estimado:E.valor_estimado?parseFloat(E.valor_estimado):null,etapa_funil_id:E.etapa_funil_id||null,responsavel_id:E.responsavel_id||null,origem:E.origem||null,data_atualizacao:new Date().toISOString()}).eq("id",g);if(P)throw P;ee.success("Oportunidade atualizada com sucesso!"),d(!1),m(null),await Z()}catch(P){console.error("Error updating opportunity:",P),ee.error(P.message||"Erro ao atualizar oportunidade")}finally{y(!1)}},X=P=>{m(P),p(!0)},re=async()=>{if(g){y(!0);try{const{error:P}=await ce.from("oportunidades").delete().eq("id",g);if(P)throw P;ee.success("Oportunidade excluda com sucesso!"),p(!1),m(null),await Z()}catch(P){console.error("Error deleting opportunity:",P),ee.error(P.message||"Erro ao excluir oportunidade")}finally{y(!1)}}},U=P=>D.filter(A=>A.etapa_funil_id===P),I=P=>U(P).reduce((A,M)=>A+(M.valor_estimado||0),0);return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsx("div",{className:"p-4 lg:p-8 border-b border-gray-200 dark:border-gray-800",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-gray-900 dark:text-white mb-2",children:"Pipeline - Kanban de Oportunidades"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gerencie suas oportunidades de vendas"})]}),o.jsxs(Cr,{open:i,onOpenChange:l,children:[o.jsx(Di,{asChild:!0,children:o.jsxs(xe,{className:"gap-2",children:[o.jsx(ys,{className:"w-4 h-4"}),"Nova Oportunidade"]})}),o.jsxs(Sr,{className:"sm:max-w-[500px]",children:[o.jsxs(Er,{children:[o.jsx(Nr,{children:"Criar Nova Oportunidade"}),o.jsx(Pr,{children:"Preencha os dados da oportunidade"})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"titulo",children:"Nome da Oportunidade *"}),o.jsx(oe,{id:"titulo",value:C.titulo,onChange:P=>S(A=>({...A,titulo:P.target.value})),placeholder:"Ex: Reviso de Financiamento"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"contato_id",children:"Contato"}),o.jsxs(et,{value:C.contato_id,onValueChange:P=>S(A=>({...A,contato_id:P})),children:[o.jsx(rt,{id:"contato_id",children:o.jsx(tt,{placeholder:"Selecione um contato"})}),o.jsx(nt,{children:O.map(P=>o.jsx(ie,{value:P.id,children:P.nome_completo},P.id))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"tipo_acao",children:"Tipo de Ao"}),o.jsxs(et,{value:C.tipo_acao,onValueChange:P=>S(A=>({...A,tipo_acao:P})),children:[o.jsx(rt,{id:"tipo_acao",children:o.jsx(tt,{placeholder:"Selecione o tipo"})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"Revisional",children:"Revisional"}),o.jsx(ie,{value:"Carto de Crdito",children:"Carto de Crdito"}),o.jsx(ie,{value:"Emprstimo",children:"Emprstimo"}),o.jsx(ie,{value:"Financiamento Imobilirio",children:"Financiamento Imobilirio"}),o.jsx(ie,{value:"Consultoria",children:"Consultoria"}),o.jsx(ie,{value:"Outros",children:"Outros"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"valor_estimado",children:"Valor da Proposta (R$)"}),o.jsx(oe,{id:"valor_estimado",type:"number",value:C.valor_estimado,onChange:P=>S(A=>({...A,valor_estimado:P.target.value})),placeholder:"0,00",min:"0",step:"0.01"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"etapa_funil_id",children:"Etapa do Funil"}),o.jsxs(et,{value:C.etapa_funil_id,onValueChange:P=>S(A=>({...A,etapa_funil_id:P})),children:[o.jsx(rt,{id:"etapa_funil_id",children:o.jsx(tt,{placeholder:"Selecione a etapa"})}),o.jsx(nt,{children:t.map(P=>o.jsx(ie,{value:P.id,children:P.nome},P.id))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"responsavel_id",children:"Responsvel"}),o.jsxs(et,{value:C.responsavel_id,onValueChange:P=>S(A=>({...A,responsavel_id:P})),children:[o.jsx(rt,{id:"responsavel_id",children:o.jsx(tt,{placeholder:"Selecione o responsvel"})}),o.jsx(nt,{children:F.map(P=>o.jsx(ie,{value:P.id,children:P.nome_completo},P.id))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"origem",children:"Origem"}),o.jsx(oe,{id:"origem",value:C.origem,onChange:P=>S(A=>({...A,origem:P.target.value})),placeholder:"Ex: Indicao, Website, etc."})]})]}),o.jsxs(kr,{children:[o.jsx(xe,{variant:"outline",onClick:()=>l(!1),disabled:w,children:"Cancelar"}),o.jsx(xe,{onClick:z,disabled:w,children:w?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Criando..."]}):"Criar Oportunidade"})]})]})]})]})}),o.jsx("div",{className:"flex-1 overflow-x-auto p-4 lg:p-8",children:j||a?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(ft,{className:"h-8 w-8 animate-spin text-gray-400"})}):o.jsx("div",{className:"flex gap-4 min-w-max",children:t.map(P=>{const A=U(P.id),M=I(P.id);return o.jsxs("div",{className:"w-80 flex-shrink-0",children:[o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:P.cor}}),o.jsx("h3",{className:"text-gray-900 dark:text-white",children:P.nome}),o.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",A.length,")"]})]}),o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Total: ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(M)]})]}),o.jsxs("div",{className:"space-y-3 min-h-[200px] bg-gray-50 dark:bg-gray-900 rounded-lg p-3",children:[A.map(T=>o.jsx(BI,{opportunity:T,onNavigate:r,onEdit:V,onDelete:X},T.id)),A.length===0&&o.jsx("div",{className:"text-center text-gray-400 dark:text-gray-500 py-8",children:"Nenhuma oportunidade"})]})]},P.id)})})}),o.jsx(Cr,{open:u,onOpenChange:d,children:o.jsxs(Sr,{className:"sm:max-w-[500px]",children:[o.jsxs(Er,{children:[o.jsx(Nr,{children:"Editar Oportunidade"}),o.jsx(Pr,{children:"Atualize os dados da oportunidade"})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-titulo",children:"Nome da Oportunidade *"}),o.jsx(oe,{id:"edit-titulo",value:E.titulo,onChange:P=>N(A=>({...A,titulo:P.target.value})),placeholder:"Ex: Reviso de Financiamento"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-contato_id",children:"Contato"}),o.jsxs(et,{value:E.contato_id,onValueChange:P=>N(A=>({...A,contato_id:P})),children:[o.jsx(rt,{id:"edit-contato_id",children:o.jsx(tt,{placeholder:"Selecione um contato"})}),o.jsx(nt,{children:O.map(P=>o.jsx(ie,{value:P.id,children:P.nome_completo},P.id))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-tipo_acao",children:"Tipo de Ao"}),o.jsxs(et,{value:E.tipo_acao,onValueChange:P=>N(A=>({...A,tipo_acao:P})),children:[o.jsx(rt,{id:"edit-tipo_acao",children:o.jsx(tt,{placeholder:"Selecione o tipo"})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"Revisional",children:"Revisional"}),o.jsx(ie,{value:"Carto de Crdito",children:"Carto de Crdito"}),o.jsx(ie,{value:"Emprstimo",children:"Emprstimo"}),o.jsx(ie,{value:"Financiamento Imobilirio",children:"Financiamento Imobilirio"}),o.jsx(ie,{value:"Consultoria",children:"Consultoria"}),o.jsx(ie,{value:"Outros",children:"Outros"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-valor_estimado",children:"Valor da Proposta (R$)"}),o.jsx(oe,{id:"edit-valor_estimado",type:"number",value:E.valor_estimado,onChange:P=>N(A=>({...A,valor_estimado:P.target.value})),placeholder:"0,00",min:"0",step:"0.01"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-etapa_funil_id",children:"Etapa do Funil"}),o.jsxs(et,{value:E.etapa_funil_id,onValueChange:P=>N(A=>({...A,etapa_funil_id:P})),children:[o.jsx(rt,{id:"edit-etapa_funil_id",children:o.jsx(tt,{placeholder:"Selecione a etapa"})}),o.jsx(nt,{children:t.map(P=>o.jsx(ie,{value:P.id,children:P.nome},P.id))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-responsavel_id",children:"Responsvel"}),o.jsxs(et,{value:E.responsavel_id,onValueChange:P=>N(A=>({...A,responsavel_id:P})),children:[o.jsx(rt,{id:"edit-responsavel_id",children:o.jsx(tt,{placeholder:"Selecione o responsvel"})}),o.jsx(nt,{children:F.map(P=>o.jsx(ie,{value:P.id,children:P.nome_completo},P.id))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-origem",children:"Origem"}),o.jsx(oe,{id:"edit-origem",value:E.origem,onChange:P=>N(A=>({...A,origem:P.target.value})),placeholder:"Ex: Indicao, Website, etc."})]})]}),o.jsxs(kr,{children:[o.jsx(xe,{variant:"outline",onClick:()=>d(!1),disabled:w,children:"Cancelar"}),o.jsx(xe,{onClick:se,disabled:w,children:w?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Atualizando..."]}):"Atualizar Oportunidade"})]})]})}),o.jsx(Dn,{open:h,onOpenChange:p,children:o.jsxs(In,{children:[o.jsxs(Mn,{children:[o.jsx($n,{children:"Excluir Oportunidade"}),o.jsx(Ln,{children:"Voc tem certeza que deseja excluir esta oportunidade? Esta ao no pode ser desfeita."})]}),o.jsxs(Fn,{children:[o.jsx(Bn,{onClick:()=>p(!1),disabled:w,children:"Cancelar"}),o.jsx(zn,{onClick:re,disabled:w,className:"bg-red-600 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700",children:w?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Excluindo..."]}):"Excluir"})]})]})})]})}function mc({className:r,...e}){return o.jsx("textarea",{"data-slot":"textarea",className:Le("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...e})}var gu="Tabs",[VI]=mn(gu,[Zc]),v_=Zc(),[qI,mp]=VI(gu),x_=x.forwardRef((r,e)=>{const{__scopeTabs:t,value:a,onValueChange:i,defaultValue:l,orientation:u="horizontal",dir:d,activationMode:h="automatic",...p}=r,g=qc(d),[m,w]=Mo({prop:a,onChange:i,defaultProp:l??"",caller:gu});return o.jsx(qI,{scope:t,baseId:kn(),value:m,onValueChange:w,orientation:u,dir:g,activationMode:h,children:o.jsx(Ue.div,{dir:g,"data-orientation":u,...p,ref:e})})});x_.displayName=gu;var y_="TabsList",w_=x.forwardRef((r,e)=>{const{__scopeTabs:t,loop:a=!0,...i}=r,l=mp(y_,t),u=v_(t);return o.jsx(Ly,{asChild:!0,...u,orientation:l.orientation,dir:l.dir,loop:a,children:o.jsx(Ue.div,{role:"tablist","aria-orientation":l.orientation,...i,ref:e})})});w_.displayName=y_;var b_="TabsTrigger",__=x.forwardRef((r,e)=>{const{__scopeTabs:t,value:a,disabled:i=!1,...l}=r,u=mp(b_,t),d=v_(t),h=S_(u.baseId,a),p=E_(u.baseId,a),g=a===u.value;return o.jsx(zy,{asChild:!0,...d,focusable:!i,active:g,children:o.jsx(Ue.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":p,"data-state":g?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:h,...l,ref:e,onMouseDown:ke(r.onMouseDown,m=>{!i&&m.button===0&&m.ctrlKey===!1?u.onValueChange(a):m.preventDefault()}),onKeyDown:ke(r.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&u.onValueChange(a)}),onFocus:ke(r.onFocus,()=>{const m=u.activationMode!=="manual";!g&&!i&&m&&u.onValueChange(a)})})})});__.displayName=b_;var j_="TabsContent",C_=x.forwardRef((r,e)=>{const{__scopeTabs:t,value:a,forceMount:i,children:l,...u}=r,d=mp(j_,t),h=S_(d.baseId,a),p=E_(d.baseId,a),g=a===d.value,m=x.useRef(g);return x.useEffect(()=>{const w=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(w)},[]),o.jsx(qn,{present:i||g,children:({present:w})=>o.jsx(Ue.div,{"data-state":g?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":h,hidden:!w,id:p,tabIndex:0,...u,ref:e,style:{...r.style,animationDuration:m.current?"0s":void 0},children:w&&l})})});C_.displayName=j_;function S_(r,e){return`${r}-trigger-${e}`}function E_(r,e){return`${r}-content-${e}`}var WI=x_,HI=w_,GI=__,KI=C_;function JI({className:r,...e}){return o.jsx(WI,{"data-slot":"tabs",className:Le("flex flex-col gap-2",r),...e})}function YI({className:r,...e}){return o.jsx(HI,{"data-slot":"tabs-list",className:Le("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",r),...e})}function Rh({className:r,...e}){return o.jsx(GI,{"data-slot":"tabs-trigger",className:Le("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...e})}function Ah({className:r,...e}){return o.jsx(KI,{"data-slot":"tabs-content",className:Le("flex-1 outline-none",r),...e})}function XI(){const[r,e]=x.useState([]),[t,a]=x.useState(!1),[i,l]=x.useState(null),u=x.useCallback(async y=>{try{a(!0),l(null);const{data:j,error:_}=await ce.from("tarefas").select(`
          *,
          responsavel:responsavel_id (
            id,
            nome_completo,
            avatar_url
          ),
          contato:contato_id (
            id,
            nome_completo
          )
        `).eq("oportunidade_id",y).eq("ativo",!0).order("data_vencimento",{ascending:!1});if(_)throw _;return e(j||[]),{data:j,error:null}}catch(j){const _=j instanceof Error?j.message:"Erro ao buscar tarefas";return l(_),console.error("Erro ao buscar tarefas:",j),{data:null,error:_}}finally{a(!1)}},[]),d=x.useCallback(async y=>{try{const{data:j,error:_}=await ce.from("tarefas").select(`
          *,
          responsavel:responsavel_id (
            id,
            nome_completo,
            avatar_url
          ),
          contato:contato_id (
            id,
            nome_completo
          )
        `).eq("id",y).single();if(_)throw _;return{data:j,error:null}}catch(j){const _=j instanceof Error?j.message:"Erro ao buscar tarefa";return console.error("Erro ao buscar tarefa:",j),{data:null,error:_}}},[]),h=x.useCallback(async y=>{try{l(null);const{data:{user:j}}=await ce.auth.getUser(),{data:_,error:C}=await ce.from("tarefas").insert({...y,responsavel_id:y.responsavel_id||j?.id,criado_por:j?.id,status:y.status||"Pendente",prioridade:y.prioridade||"Mdia"}).select(`
          *,
          responsavel:responsavel_id (
            id,
            nome_completo,
            avatar_url
          )
        `).single();if(C)throw C;return y.oportunidade_id&&r.length>0&&e(S=>[_,...S]),{data:_,error:null}}catch(j){const _=j instanceof Error?j.message:"Erro ao criar tarefa";return l(_),console.error("Erro ao criar tarefa:",j),{data:null,error:_}}},[r.length]),p=x.useCallback(async(y,j)=>{try{l(null);const{data:_,error:C}=await ce.from("tarefas").update(j).eq("id",y).select(`
          *,
          responsavel:responsavel_id (
            id,
            nome_completo,
            avatar_url
          )
        `).single();if(C)throw C;return e(S=>S.map(E=>E.id===y?_:E)),{data:_,error:null}}catch(_){const C=_ instanceof Error?_.message:"Erro ao atualizar tarefa";return l(C),console.error("Erro ao atualizar tarefa:",_),{data:null,error:C}}},[]),g=x.useCallback(async y=>{try{l(null);const{data:j,error:_}=await ce.from("tarefas").update({ativo:!1}).eq("id",y).select().single();if(_)throw _;return e(C=>C.filter(S=>S.id!==y)),{data:j,error:null}}catch(j){const _=j instanceof Error?j.message:"Erro ao excluir tarefa";return l(_),console.error("Erro ao excluir tarefa:",j),{data:null,error:_}}},[]),m=x.useCallback(async y=>p(y,{status:"Concluda",progresso:100,data_conclusao:new Date().toISOString()}),[p]),w=x.useCallback(async y=>p(y,{status:"Cancelada"}),[p]);return{tasks:r,loading:t,error:i,loadTasksByOpportunity:u,getTaskById:d,createTask:h,updateTask:p,deleteTask:g,completeTask:m,cancelTask:w}}const QI=r=>({Tarefa:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300","Follow-up":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",Reunio:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",Ligao:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300","E-mail":"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300",Documento:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300","Prazo Judicial":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",Audincia:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",Outros:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"})[r];function ZI({opportunityId:r,onNavigate:e}){const{etapas:t}=mu(),{tasks:a,loading:i,createTask:l,loadTasksByOpportunity:u}=XI(),[d,h]=x.useState(!1),[p,g]=x.useState(!1),[m,w]=x.useState(!1),[y,j]=x.useState(null),[_,C]=x.useState([]),[S,E]=x.useState([]),[N,D]=x.useState(!0),[R,O]=x.useState(!1),[B,F]=x.useState("Tarefa"),[H,Z]=x.useState({titulo:"",data_vencimento:"",observacoes:""}),[ae,ue]=x.useState({titulo:"",contato_id:"",tipo_acao:"",valor_estimado:"",etapa_funil_id:"",responsavel_id:"",origem:""});x.useEffect(()=>{r&&(z(),V(),se(),u(r))},[r,u]);const z=async()=>{try{D(!0);const{data:$,error:Q}=await ce.from("oportunidades").select(`
          *,
          contatos:contato_id (
            id,
            nome_completo,
            cpf_cnpj,
            email,
            telefone_principal
          ),
          responsavel:responsavel_id (
            id,
            nome_completo,
            avatar_url
          )
        `).eq("id",r).single();if(Q)throw Q;j($)}catch($){console.error("Error loading opportunity:",$),ee.error("Erro ao carregar oportunidade"),e("crm")}finally{D(!1)}},V=async()=>{try{const{data:$,error:Q}=await ce.from("contatos").select("id, nome_completo, email, telefone_principal").eq("ativo",!0).order("nome_completo",{ascending:!0});if(Q)throw Q;C($||[])}catch($){console.error("Error loading contacts:",$)}},se=async()=>{try{const{data:$,error:Q}=await ce.from("profiles").select("id, nome_completo, email").eq("ativo",!0).order("nome_completo",{ascending:!0});if(Q)throw Q;E($||[])}catch($){console.error("Error loading profiles:",$)}},X=()=>{y&&(ue({titulo:y.titulo,contato_id:y.contato_id||"",tipo_acao:y.tipo_acao||"",valor_estimado:y.valor_estimado?.toString()||"",etapa_funil_id:y.etapa_funil_id||"",responsavel_id:y.responsavel_id||"",origem:y.origem||""}),g(!0))},re=async()=>{if(!ae.titulo){ee.error("Preencha o nome da oportunidade");return}O(!0);try{const{error:$}=await ce.from("oportunidades").update({titulo:ae.titulo,contato_id:ae.contato_id||null,tipo_acao:ae.tipo_acao||null,valor_estimado:ae.valor_estimado?parseFloat(ae.valor_estimado):null,etapa_funil_id:ae.etapa_funil_id||null,responsavel_id:ae.responsavel_id||null,origem:ae.origem||null,data_atualizacao:new Date().toISOString()}).eq("id",r);if($)throw $;ee.success("Oportunidade atualizada com sucesso!"),g(!1),await z()}catch($){console.error("Error updating opportunity:",$),ee.error($.message||"Erro ao atualizar oportunidade")}finally{O(!1)}},U=async()=>{if(r){O(!0);try{const{error:$}=await ce.from("oportunidades").delete().eq("id",r);if($)throw $;ee.success("Oportunidade excluda com sucesso!"),w(!1),e("crm")}catch($){console.error("Error deleting opportunity:",$),ee.error($.message||"Erro ao excluir oportunidade")}finally{O(!1)}}},I=async()=>{if(!H.titulo){ee.error("Preencha o ttulo da interao");return}if(!H.data_vencimento){ee.error("Preencha a data e hora");return}O(!0);try{const{error:$}=await l({titulo:H.titulo,tipo:B,oportunidade_id:r,contato_id:y?.contato_id||null,responsavel_id:"",data_vencimento:H.data_vencimento,observacoes:H.observacoes||null});if($)throw new Error($);ee.success("Interao agendada com sucesso!"),h(!1),Z({titulo:"",data_vencimento:"",observacoes:""}),r&&await u(r)}catch($){console.error("Erro ao agendar interao:",$),ee.error($.message||"Erro ao agendar interao")}finally{O(!1)}},P=$=>new Date($).toLocaleDateString("pt-BR"),A=$=>new Date($).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),M=$=>$?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format($):"R$ 0,00",T=()=>y?.etapa_funil_id&&t.find(Q=>Q.id===y.etapa_funil_id)?.nome||"Sem etapa";return N?o.jsx("div",{className:"p-4 lg:p-8 flex items-center justify-center min-h-screen",children:o.jsx(ft,{className:"h-8 w-8 animate-spin text-gray-500"})}):y?o.jsxs("div",{className:"p-4 lg:p-8",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs(xe,{variant:"ghost",onClick:()=>e("crm"),className:"gap-2 mb-4",children:[o.jsx(Uo,{className:"w-4 h-4"}),"Voltar para Pipeline"]}),o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-gray-900 dark:text-white mb-2",children:y.titulo}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(sr,{variant:"outline",children:T()}),y.tipo_acao&&o.jsx(sr,{children:y.tipo_acao})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(xe,{variant:"outline",className:"gap-2",onClick:X,children:[o.jsx(Bc,{className:"w-4 h-4"}),"Editar"]}),o.jsxs(xe,{variant:"destructive",className:"gap-2",onClick:()=>w(!0),children:[o.jsx(Uc,{className:"w-4 h-4"}),"Excluir"]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Detalhes do Cliente"})}),o.jsxs(We,{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Nome"}),o.jsx("div",{className:"text-gray-900 dark:text-white",children:y.contatos?.nome_completo||"Sem contato"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"CPF/CNPJ"}),o.jsx("div",{className:"text-gray-900 dark:text-white",children:y.contatos?.cpf_cnpj||"No informado"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tipo de Ao"}),o.jsx("div",{className:"text-gray-900 dark:text-white",children:y.tipo_acao||"No especificado"})]})]})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Informaes do Funil"})}),o.jsxs(We,{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Etapa"}),o.jsx("div",{className:"text-gray-900 dark:text-white",children:T()})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Valor da Proposta"}),o.jsx("div",{className:"text-green-600 dark:text-green-400",children:M(y.valor_estimado)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Origem"}),o.jsx("div",{className:"text-gray-900 dark:text-white",children:y.origem||"No informado"})]})]})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Informaes Gerais"})}),o.jsxs(We,{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Responsvel"}),o.jsx("div",{className:"text-gray-900 dark:text-white",children:y.responsavel?.nome_completo||"No atribudo"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Data de Criao"}),o.jsx("div",{className:"text-gray-900 dark:text-white",children:P(y.data_criacao)})]}),y.observacoes&&o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Observaes"}),o.jsx("div",{className:"text-gray-900 dark:text-white text-sm",children:y.observacoes})]})]})]})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Ye,{children:"Histrico de Interaes"}),o.jsxs(Cr,{open:d,onOpenChange:h,children:[o.jsx(Di,{asChild:!0,children:o.jsxs(xe,{className:"gap-2",children:[o.jsx(Yh,{className:"w-4 h-4"}),"Agendar Interao"]})}),o.jsxs(Sr,{className:"sm:max-w-[500px]",children:[o.jsxs(Er,{children:[o.jsx(Nr,{children:"Agendar Interao"}),o.jsx(Pr,{children:"Escolha o tipo de interao e preencha os detalhes"})]}),o.jsxs(JI,{defaultValue:"Tarefa",onValueChange:$=>F($),className:"w-full",children:[o.jsxs(YI,{className:"grid w-full grid-cols-3",children:[o.jsx(Rh,{value:"Tarefa",children:"Tarefa"}),o.jsx(Rh,{value:"Follow-up",children:"Follow-up"}),o.jsx(Rh,{value:"Reunio",children:"Reunio"})]}),o.jsxs(Ah,{value:"Tarefa",className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"task-title",children:"Ttulo da Tarefa"}),o.jsx(oe,{id:"task-title",value:H.titulo,onChange:$=>Z(Q=>({...Q,titulo:$.target.value})),placeholder:"Ex: Enviar documentao"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"task-date",children:"Data e Hora"}),o.jsx(oe,{id:"task-date",type:"datetime-local",value:H.data_vencimento,onChange:$=>Z(Q=>({...Q,data_vencimento:$.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"task-notes",children:"Observaes"}),o.jsx(mc,{id:"task-notes",value:H.observacoes,onChange:$=>Z(Q=>({...Q,observacoes:$.target.value})),placeholder:"Detalhes da tarefa..."})]})]}),o.jsxs(Ah,{value:"Follow-up",className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"followup-title",children:"Ttulo do Follow-up"}),o.jsx(oe,{id:"followup-title",value:H.titulo,onChange:$=>Z(Q=>({...Q,titulo:$.target.value})),placeholder:"Ex: Retornar contato"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"followup-date",children:"Data e Hora"}),o.jsx(oe,{id:"followup-date",type:"datetime-local",value:H.data_vencimento,onChange:$=>Z(Q=>({...Q,data_vencimento:$.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"followup-notes",children:"Observaes"}),o.jsx(mc,{id:"followup-notes",value:H.observacoes,onChange:$=>Z(Q=>({...Q,observacoes:$.target.value})),placeholder:"Detalhes do follow-up..."})]})]}),o.jsxs(Ah,{value:"Reunio",className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"meeting-title",children:"Ttulo da Reunio"}),o.jsx(oe,{id:"meeting-title",value:H.titulo,onChange:$=>Z(Q=>({...Q,titulo:$.target.value})),placeholder:"Ex: Apresentao de proposta"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"meeting-date",children:"Data e Hora"}),o.jsx(oe,{id:"meeting-date",type:"datetime-local",value:H.data_vencimento,onChange:$=>Z(Q=>({...Q,data_vencimento:$.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"meeting-notes",children:"Observaes"}),o.jsx(mc,{id:"meeting-notes",value:H.observacoes,onChange:$=>Z(Q=>({...Q,observacoes:$.target.value})),placeholder:"Detalhes da reunio..."})]})]})]}),o.jsxs(kr,{children:[o.jsx(xe,{variant:"outline",onClick:()=>h(!1),disabled:R,children:"Cancelar"}),o.jsx(xe,{onClick:I,disabled:R,children:R?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Agendando..."]}):"Agendar"})]})]})]})]})}),o.jsx(We,{children:i?o.jsxs("div",{className:"flex items-center justify-center py-8",children:[o.jsx(ft,{className:"w-6 h-6 animate-spin text-gray-400"}),o.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Carregando interaes..."})]}):a.length===0?o.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Nenhuma interao agendada ainda."}):o.jsx("div",{className:"space-y-4",children:a.map($=>o.jsxs("div",{className:"flex gap-4 pb-4 border-b border-gray-200 dark:border-gray-800 last:border-0",children:[o.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx(Yh,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(sr,{variant:"outline",className:QI($.tipo),children:$.tipo}),o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:$.data_vencimento?A($.data_vencimento):"Sem data"})]}),o.jsx("p",{className:"text-gray-900 dark:text-white mb-1",children:$.titulo}),$.observacoes&&o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:$.observacoes}),o.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Por ",$.responsavel?.nome_completo||"No atribudo"]})]})]},$.id))})})]}),o.jsx(Cr,{open:p,onOpenChange:g,children:o.jsxs(Sr,{className:"sm:max-w-[500px]",children:[o.jsxs(Er,{children:[o.jsx(Nr,{children:"Editar Oportunidade"}),o.jsx(Pr,{children:"Atualize os dados da oportunidade"})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-titulo",children:"Nome da Oportunidade *"}),o.jsx(oe,{id:"edit-titulo",value:ae.titulo,onChange:$=>ue(Q=>({...Q,titulo:$.target.value})),placeholder:"Ex: Reviso de Financiamento"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-contato_id",children:"Contato"}),o.jsxs(et,{value:ae.contato_id,onValueChange:$=>ue(Q=>({...Q,contato_id:$})),children:[o.jsx(rt,{id:"edit-contato_id",children:o.jsx(tt,{placeholder:"Selecione um contato"})}),o.jsx(nt,{children:_.map($=>o.jsx(ie,{value:$.id,children:$.nome_completo},$.id))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-tipo_acao",children:"Tipo de Ao"}),o.jsxs(et,{value:ae.tipo_acao,onValueChange:$=>ue(Q=>({...Q,tipo_acao:$})),children:[o.jsx(rt,{id:"edit-tipo_acao",children:o.jsx(tt,{placeholder:"Selecione o tipo"})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"Revisional",children:"Revisional"}),o.jsx(ie,{value:"Carto de Crdito",children:"Carto de Crdito"}),o.jsx(ie,{value:"Emprstimo",children:"Emprstimo"}),o.jsx(ie,{value:"Financiamento Imobilirio",children:"Financiamento Imobilirio"}),o.jsx(ie,{value:"Consultoria",children:"Consultoria"}),o.jsx(ie,{value:"Outros",children:"Outros"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-valor_estimado",children:"Valor da Proposta (R$)"}),o.jsx(oe,{id:"edit-valor_estimado",type:"number",value:ae.valor_estimado,onChange:$=>ue(Q=>({...Q,valor_estimado:$.target.value})),placeholder:"0,00",min:"0",step:"0.01"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-etapa_funil_id",children:"Etapa do Funil"}),o.jsxs(et,{value:ae.etapa_funil_id,onValueChange:$=>ue(Q=>({...Q,etapa_funil_id:$})),children:[o.jsx(rt,{id:"edit-etapa_funil_id",children:o.jsx(tt,{placeholder:"Selecione a etapa"})}),o.jsx(nt,{children:t.map($=>o.jsx(ie,{value:$.id,children:$.nome},$.id))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-responsavel_id",children:"Responsvel"}),o.jsxs(et,{value:ae.responsavel_id,onValueChange:$=>ue(Q=>({...Q,responsavel_id:$})),children:[o.jsx(rt,{id:"edit-responsavel_id",children:o.jsx(tt,{placeholder:"Selecione o responsvel"})}),o.jsx(nt,{children:S.map($=>o.jsx(ie,{value:$.id,children:$.nome_completo},$.id))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"edit-origem",children:"Origem"}),o.jsx(oe,{id:"edit-origem",value:ae.origem,onChange:$=>ue(Q=>({...Q,origem:$.target.value})),placeholder:"Ex: Indicao, Website, etc."})]})]}),o.jsxs(kr,{children:[o.jsx(xe,{variant:"outline",onClick:()=>g(!1),disabled:R,children:"Cancelar"}),o.jsx(xe,{onClick:re,disabled:R,children:R?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Atualizando..."]}):"Atualizar Oportunidade"})]})]})}),o.jsx(Dn,{open:m,onOpenChange:w,children:o.jsxs(In,{children:[o.jsxs(Mn,{children:[o.jsx($n,{children:"Confirmar Excluso"}),o.jsx(Ln,{children:"Tem certeza que deseja excluir esta oportunidade? Esta ao no pode ser desfeita."})]}),o.jsxs(Fn,{children:[o.jsx(Bn,{disabled:R,children:"Cancelar"}),o.jsx(zn,{onClick:U,disabled:R,className:"bg-red-600 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700",children:R?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Excluindo..."]}):"Excluir"})]})]})})]}):o.jsx("div",{className:"p-4 lg:p-8",children:o.jsx("p",{className:"text-gray-500",children:"Oportunidade no encontrada"})})}async function eM(r,e,t,a=100){const i={success:!1,rowsSaved:0,strategy:"delete-insert",batches:0,errors:[]};try{console.log(` safeSaveAmortizacao: Starting save for ${e} (${t.length} rows)`);const{data:l,error:u}=await ce.from("financiamentos_amortizacao").select("id, mes").eq("financiamento_id",r).eq("cenario",e);u?(console.error(" Error checking existing rows:",u),i.errors.push(`Check error: ${u.message}`)):console.log(`   Found ${l?.length||0} existing rows`),console.log(`  Deleting old ${e} rows...`);const{error:d,count:h}=await ce.from("financiamentos_amortizacao").delete({count:"exact"}).eq("financiamento_id",r).eq("cenario",e);d?(console.error(" Delete error:",d),i.errors.push(`Delete error: ${d.message}`)):console.log(` Deleted ${h||0} rows`);const p=t.map(w=>({...w,financiamento_id:r,cenario:e}));console.log(` Inserting ${p.length} rows in batches of ${a}...`);const g=Math.ceil(p.length/a);let m=!1;for(let w=0;w<p.length;w+=a){const y=p.slice(w,w+a),j=Math.floor(w/a)+1;if(i.batches++,console.log(`    Batch ${j}/${g}: ${y.length} rows`),m){const{error:_}=await ce.from("financiamentos_amortizacao").upsert(y,{onConflict:"financiamento_id,mes,cenario",ignoreDuplicates:!1});if(_)throw console.error(` Upsert error in batch ${j}:`,_),i.errors.push(`Batch ${j} upsert error: ${_.message}`),new Error(`Failed to upsert batch ${j}: ${_.message}`);console.log(`    Batch ${j} upserted successfully`),i.rowsSaved+=y.length}else{const{error:_}=await ce.from("financiamentos_amortizacao").insert(y);if(_)if(_.code==="23505"){console.warn(`  Duplicate key detected in batch ${j}. Switching to UPSERT strategy...`),m=!0,i.strategy="upsert";const{error:C}=await ce.from("financiamentos_amortizacao").upsert(y,{onConflict:"financiamento_id,mes,cenario",ignoreDuplicates:!1});if(C)throw console.error(` Upsert error in batch ${j}:`,C),i.errors.push(`Batch ${j} upsert error: ${C.message}`),new Error(`Failed to save batch ${j}: ${C.message}`);console.log(`    Batch ${j} saved via UPSERT`),i.rowsSaved+=y.length}else throw console.error(` Insert error in batch ${j}:`,_),i.errors.push(`Batch ${j} insert error: ${_.message}`),new Error(`Failed to insert batch ${j}: ${_.message}`);else console.log(`    Batch ${j} inserted successfully`),i.rowsSaved+=y.length}}return i.success=!0,console.log(` safeSaveAmortizacao completed: ${i.rowsSaved} rows saved using ${i.strategy}`),i}catch(l){throw console.error(" safeSaveAmortizacao failed:",l),i.success=!1,i.errors.push(l instanceof Error?l.message:String(l)),l}}function tM(r){const e=[];if(!Array.isArray(r))return e.push("Rows must be an array"),{valid:!1,errors:e};if(r.length===0)return{valid:!0,errors:[]};r.forEach((i,l)=>{(typeof i.mes!="number"||i.mes<1)&&e.push(`Row ${l}: 'mes' must be a positive number`),(!i.data||!/^\d{4}-\d{2}-\d{2}$/.test(i.data))&&e.push(`Row ${l}: 'data' must be in YYYY-MM-DD format`),typeof i.valor_corrigido!="number"&&e.push(`Row ${l}: 'valor_corrigido' must be a number`),typeof i.saldo_devedor!="number"&&e.push(`Row ${l}: 'saldo_devedor' must be a number`)});const t=r.map(i=>i.mes),a=new Set(t);t.length!==a.size&&e.push("Duplicate month values found in rows");for(let i=1;i<r.length;i++)if(r[i].mes<=r[i-1].mes){e.push(`Rows must be ordered by month (issue at index ${i})`);break}return{valid:e.length===0,errors:e}}class rM{async create(e){const{data:t,error:a}=await ce.from("financiamentos").insert({...e,criado_por:(await ce.auth.getUser()).data.user?.id,data_criacao:new Date().toISOString(),data_atualizacao:new Date().toISOString()}).select().single();if(a)throw console.error("Error creating financiamento:",a),new Error(`Erro ao criar financiamento: ${a.message}`);return t}async saveAmortizacao(e,t,a){const i=tM(a);if(!i.valid)throw console.error(" Validation errors:",i.errors),new Error(`Dados de amortizao invlidos: ${i.errors.join(", ")}`);const l=await eM(e,t,a,100);if(!l.success)throw new Error(`Erro ao salvar tabela de amortizao: ${l.errors.join(", ")}`);console.log(` Saved ${l.rowsSaved} ${t} rows using ${l.strategy} in ${l.batches} batches`)}async createHistoryRecord(e,t,a,i,l){const{data:u}=await ce.from("financiamentos_historico").select("versao").eq("financiamento_id",e).order("versao",{ascending:!1}).limit(1).single(),d=(u?.versao||0)+1,h={financiamento_id:e,versao:d,dados_anteriores:t,dados_novos:a,campos_alterados:i,motivo_alteracao:l,alterado_por:(await ce.auth.getUser()).data.user?.id,data_alteracao:new Date().toISOString()},{error:p}=await ce.from("financiamentos_historico").insert(h);p&&console.error("Error creating history record:",p)}async getById(e){const{data:t,error:a}=await ce.from("financiamentos").select("*").eq("id",e).eq("excluido",!1).single();if(a){if(a.code==="PGRST116")return null;throw console.error("Error fetching financiamento:",a),new Error(`Erro ao buscar financiamento: ${a.message}`)}return t}async getCompleto(e){const t=await this.getById(e);if(!t)return null;const[a,i,l,u]=await Promise.all([this.getAmortizacao(e,"AP01"),this.getAmortizacao(e,"AP05"),this.getAmortizacao(e,"AP03"),this.getHistorico(e)]);return{...t,amortizacao_ap01:a,amortizacao_ap05:i,amortizacao_ap03:l,historico:u}}async getAll(e){let t=ce.from("financiamentos").select("*").eq("excluido",!1).eq("ativo",!0).order("data_atualizacao",{ascending:!1});e?.status&&(t=t.eq("status",e.status)),e?.devedor&&(t=t.ilike("devedor",`%${e.devedor}%`)),e?.credor&&(t=t.ilike("credor",`%${e.credor}%`)),e?.dataInicio&&(t=t.gte("data_criacao",e.dataInicio)),e?.dataFim&&(t=t.lte("data_criacao",e.dataFim)),e?.search&&(t=t.or(`devedor.ilike.%${e.search}%,credor.ilike.%${e.search}%,contrato_num.ilike.%${e.search}%,numero_processo.ilike.%${e.search}%`));const{data:a,error:i}=await t;if(i)throw console.error("Error fetching financiamentos:",i),new Error(`Erro ao buscar financiamentos: ${i.message}`);return a||[]}async getAmortizacao(e,t){let a=ce.from("financiamentos_amortizacao").select("*").eq("financiamento_id",e).order("mes",{ascending:!0});t&&(a=a.eq("cenario",t));const{data:i,error:l}=await a;if(l)throw console.error("Error fetching amortizacao:",l),new Error(`Erro ao buscar tabela de amortizao: ${l.message}`);return i||[]}async getHistorico(e){const{data:t,error:a}=await ce.from("financiamentos_historico").select("*").eq("financiamento_id",e).order("versao",{ascending:!1});if(a)throw console.error("Error fetching historico:",a),new Error(`Erro ao buscar histrico: ${a.message}`);return t||[]}async update(e,t,a=!0){let i=null;a&&(i=await this.getById(e));const{data:l,error:u}=await ce.from("financiamentos").update({...t,data_atualizacao:new Date().toISOString()}).eq("id",e).select().single();if(u)throw console.error("Error updating financiamento:",u),new Error(`Erro ao atualizar financiamento: ${u.message}`);if(a&&i){const d=Object.keys(t);await this.createHistoryRecord(e,i,l,d,"Atualizao manual")}return l}async updateCalculatedResults(e,t){const{error:a}=await ce.from("financiamentos").update({...t,data_atualizacao:new Date().toISOString()}).eq("id",e);if(a)throw console.error("Error updating calculated results:",a),new Error(`Erro ao atualizar resultados calculados: ${a.message}`)}async updateStatus(e,t){const{error:a}=await ce.from("financiamentos").update({status:t,data_atualizacao:new Date().toISOString()}).eq("id",e);if(a)throw console.error("Error updating status:",a),new Error(`Erro ao atualizar status: ${a.message}`)}async softDelete(e){const t=(await ce.auth.getUser()).data.user?.id,{error:a}=await ce.from("financiamentos").update({excluido:!0,excluido_em:new Date().toISOString(),excluido_por:t,data_atualizacao:new Date().toISOString()}).eq("id",e);if(a)throw console.error("Error soft deleting financiamento:",a),new Error(`Erro ao excluir financiamento: ${a.message}`)}async restore(e){const{error:t}=await ce.from("financiamentos").update({excluido:!1,excluido_em:null,excluido_por:null,data_atualizacao:new Date().toISOString()}).eq("id",e);if(t)throw console.error("Error restoring financiamento:",t),new Error(`Erro ao restaurar financiamento: ${t.message}`)}async hardDelete(e){const{error:t}=await ce.from("financiamentos").delete().eq("id",e);if(t)throw console.error("Error hard deleting financiamento:",t),new Error(`Erro ao deletar permanentemente: ${t.message}`)}async exists(e){const{data:t,error:a}=await ce.from("financiamentos").select("id").eq("id",e).eq("excluido",!1).single();return!a&&t!==null}async count(e){let t=ce.from("financiamentos").select("id",{count:"exact",head:!0}).eq("excluido",!1).eq("ativo",!0);e?.status&&(t=t.eq("status",e.status)),e?.devedor&&(t=t.ilike("devedor",`%${e.devedor}%`)),e?.credor&&(t=t.ilike("credor",`%${e.credor}%`));const{count:a,error:i}=await t;return i?(console.error("Error counting financiamentos:",i),0):a||0}}const Kr=new rM;class nM{async create(e){const t=(await ce.auth.getUser()).data.user?.id,{data:a,error:i}=await ce.from("cartoes_credito").insert({...e,parcelamentos:e.parcelamentos||[],saques_especie:e.saques_especie||[],estornos_ajustes:e.estornos_ajustes||[],renegociacoes:e.renegociacoes||[],outras_tarifas:e.outras_tarifas||[],encargos_abusivos:e.encargos_abusivos||[],anuidade:e.anuidade??0,seguro:e.seguro??0,iof:e.iof??0,tarifas:e.tarifas??0,dies_mora:e.dies_mora??0,anatocismo_detectado:e.anatocismo_detectado??!1,criado_por:t,data_criacao:new Date().toISOString(),data_atualizacao:new Date().toISOString(),data_calculo:e.data_calculo||new Date().toISOString(),ativo:!0,excluido:!1,status:e.status||"Rascunho"}).select().single();if(i)throw console.error("Error creating cartao:",i),new Error(`Erro ao criar carto: ${i.message}`);return a}async createFatura(e){const{data:t,error:a}=await ce.from("cartoes_faturas").insert({...e,compras_nacionais:e.compras_nacionais??0,compras_internacionais:e.compras_internacionais??0,saques:e.saques??0,juros_rotativo:e.juros_rotativo??0,juros_parcelamento:e.juros_parcelamento??0,juros_mora:e.juros_mora??0,multa:e.multa??0,iof:e.iof??0,anuidade:e.anuidade??0,seguros:e.seguros??0,tarifas:e.tarifas??0,estornos:e.estornos??0,pagamentos:e.pagamentos??0,status_pagamento:e.status_pagamento||"Pendente",criado_em:new Date().toISOString()}).select().single();if(a)throw console.error("Error creating fatura:",a),new Error(`Erro ao criar fatura: ${a.message}`);return t}async createFaturas(e){const t=e.map(l=>({...l,compras_nacionais:l.compras_nacionais??0,compras_internacionais:l.compras_internacionais??0,saques:l.saques??0,juros_rotativo:l.juros_rotativo??0,juros_parcelamento:l.juros_parcelamento??0,juros_mora:l.juros_mora??0,multa:l.multa??0,iof:l.iof??0,anuidade:l.anuidade??0,seguros:l.seguros??0,tarifas:l.tarifas??0,estornos:l.estornos??0,pagamentos:l.pagamentos??0,status_pagamento:l.status_pagamento||"Pendente",criado_em:new Date().toISOString()})),{data:a,error:i}=await ce.from("cartoes_faturas").insert(t).select();if(i)throw console.error("Error creating faturas:",i),new Error(`Erro ao criar faturas: ${i.message}`);return a||[]}async getById(e){const{data:t,error:a}=await ce.from("cartoes_credito").select("*").eq("id",e).eq("excluido",!1).single();if(a){if(a.code==="PGRST116")return null;throw console.error("Error fetching cartao:",a),new Error(`Erro ao buscar carto: ${a.message}`)}return t}async getCompleto(e){const t=await this.getById(e);if(!t)return null;const a=await this.getFaturas(e);return{...t,faturas:a}}async getAll(e){let t=ce.from("cartoes_credito").select("*").eq("excluido",!1).eq("ativo",!0).order("data_atualizacao",{ascending:!1});e?.status&&(t=t.eq("status",e.status)),e?.devedor&&(t=t.ilike("devedor",`%${e.devedor}%`)),e?.credor&&(t=t.ilike("credor",`%${e.credor}%`)),e?.dataInicio&&(t=t.gte("data_criacao",e.dataInicio)),e?.dataFim&&(t=t.lte("data_criacao",e.dataFim)),e?.search&&(t=t.or(`devedor.ilike.%${e.search}%,credor.ilike.%${e.search}%,numero_cartao.ilike.%${e.search}%,numero_processo.ilike.%${e.search}%`));const{data:a,error:i}=await t;if(i)throw console.error("Error fetching cartoes:",i),new Error(`Erro ao buscar cartes: ${i.message}`);return a||[]}async getFaturas(e){const{data:t,error:a}=await ce.from("cartoes_faturas").select("*").eq("cartao_id",e).order("ano_referencia",{ascending:!1}).order("mes_referencia",{ascending:!1});if(a)throw console.error("Error fetching faturas:",a),new Error(`Erro ao buscar faturas: ${a.message}`);return t||[]}async getFatura(e,t,a){const{data:i,error:l}=await ce.from("cartoes_faturas").select("*").eq("cartao_id",e).eq("mes_referencia",t).eq("ano_referencia",a).single();if(l){if(l.code==="PGRST116")return null;throw console.error("Error fetching fatura:",l),new Error(`Erro ao buscar fatura: ${l.message}`)}return i}async update(e,t){const a=(await ce.auth.getUser()).data.user?.id,{data:i,error:l}=await ce.from("cartoes_credito").update({...t,data_atualizacao:new Date().toISOString(),calculado_por:t.calculado_por||a}).eq("id",e).select().single();if(l)throw console.error("Error updating cartao:",l),new Error(`Erro ao atualizar carto: ${l.message}`);return i}async updateCalculatedResults(e,t){const{error:a}=await ce.from("cartoes_credito").update({...t,data_atualizacao:new Date().toISOString()}).eq("id",e);if(a)throw console.error("Error updating calculated results:",a),new Error(`Erro ao atualizar resultados calculados: ${a.message}`)}async updateStatus(e,t){const{error:a}=await ce.from("cartoes_credito").update({status:t,data_atualizacao:new Date().toISOString()}).eq("id",e);if(a)throw console.error("Error updating status:",a),new Error(`Erro ao atualizar status: ${a.message}`)}async updateFatura(e,t){const{data:a,error:i}=await ce.from("cartoes_faturas").update(t).eq("id",e).select().single();if(i)throw console.error("Error updating fatura:",i),new Error(`Erro ao atualizar fatura: ${i.message}`);return a}async softDelete(e){const t=(await ce.auth.getUser()).data.user?.id,{error:a}=await ce.from("cartoes_credito").update({excluido:!0,excluido_em:new Date().toISOString(),excluido_por:t,data_atualizacao:new Date().toISOString()}).eq("id",e);if(a)throw console.error("Error soft deleting cartao:",a),new Error(`Erro ao excluir carto: ${a.message}`)}async restore(e){const{error:t}=await ce.from("cartoes_credito").update({excluido:!1,excluido_em:null,excluido_por:null,data_atualizacao:new Date().toISOString()}).eq("id",e);if(t)throw console.error("Error restoring cartao:",t),new Error(`Erro ao restaurar carto: ${t.message}`)}async hardDelete(e){const{error:t}=await ce.from("cartoes_credito").delete().eq("id",e);if(t)throw console.error("Error hard deleting cartao:",t),new Error(`Erro ao deletar permanentemente: ${t.message}`)}async deleteFatura(e){const{error:t}=await ce.from("cartoes_faturas").delete().eq("id",e);if(t)throw console.error("Error deleting fatura:",t),new Error(`Erro ao deletar fatura: ${t.message}`)}async exists(e){const{data:t,error:a}=await ce.from("cartoes_credito").select("id").eq("id",e).eq("excluido",!1).single();return!a&&t!==null}async count(e){let t=ce.from("cartoes_credito").select("id",{count:"exact",head:!0}).eq("excluido",!1).eq("ativo",!0);e?.status&&(t=t.eq("status",e.status)),e?.devedor&&(t=t.ilike("devedor",`%${e.devedor}%`)),e?.credor&&(t=t.ilike("credor",`%${e.credor}%`));const{count:a,error:i}=await t;return i?(console.error("Error counting cartoes:",i),0):a||0}async countFaturas(e){const{count:t,error:a}=await ce.from("cartoes_faturas").select("id",{count:"exact",head:!0}).eq("cartao_id",e);return a?(console.error("Error counting faturas:",a),0):t||0}async getTotalSaldoDevedor(e){let t=ce.from("cartoes_credito").select("saldo_devedor").eq("excluido",!1).eq("ativo",!0);e?.status&&(t=t.eq("status",e.status));const{data:a,error:i}=await t;return i||!a?(console.error("Error calculating total saldo:",i),0):a.reduce((l,u)=>l+(u.saldo_devedor||0),0)}}const _r=new nM;function oM({onNavigate:r}){const[e,t]=x.useState(""),[a,i]=x.useState(!1),[l,u]=x.useState(!1),[d,h]=x.useState(null),[p,g]=x.useState(""),[m,w]=x.useState([]),[y,j]=x.useState(!0),[_,C]=x.useState(null),S=[{id:"financiamento",title:"Reviso de Financiamento Imobilirio",description:"Analise seu financiamento imobilirio e identifique possveis irregularidades.",icon:Q1,route:"calc-financiamento"},{id:"cartao",title:"Reviso de Carto de Crdito",description:"Verifique as taxas e encargos do seu carto de crdito para garantir a conformidade.",icon:U1,route:"calc-cartao"},{id:"emprestimos",title:"Reviso Geral (Emprstimos e Financiamentos)",description:"Revise emprstimos e financiamentos em geral para assegurar a transparncia e justia.",icon:ny,route:"calc-emprestimos"},{id:"analise",title:"Anlise Prvia",description:"Verifique a viabilidade financeira e jurdica do caso em poucos minutos.",icon:_c,route:"calc-analise"}];x.useEffect(()=>{E()},[]);const E=async()=>{try{j(!0),C(null);const[z,V]=await Promise.all([Kr.getAll(),_r.getAll()]),se=[...z.map(X=>({...X,tipo:"financiamento"})),...V.map(X=>({...X,tipo:"cartao"}))];se.sort((X,re)=>{const U=new Date(X.data_atualizacao).getTime();return new Date(re.data_atualizacao).getTime()-U}),w(se)}catch(z){console.error("Error loading calculations:",z),C("Erro ao carregar casos. Tente novamente."),ee.error("Erro ao carregar casos")}finally{j(!1)}},N=z=>{h(z.id),g(z.tipo),u(!0)},D=z=>{r({financiamento:"calc-financiamento",cartao:"calc-cartao"}[z.tipo],z.id)},R=async z=>{try{if(z.tipo==="cartao"){const V=await _r.getById(z.id);if(!V){ee.error("Caso no encontrado");return}if(!V.total_juros_cobrado||!V.diferenca_restituicao){ee.warning("Este caso ainda no possui anlise calculada. Redirecionando para edio..."),r("calc-cartao",z.id);return}const se=.12,X={saldoTotal:V.saldo_devedor,taxaMediaCobrada:V.juros_rotativo,taxaMercado:se,sobretaxaPP:V.juros_rotativo-se,totalJurosCobrado:V.total_juros_cobrado||0,totalJurosDevido:V.total_juros_devido||0,diferencaRestituicao:V.diferenca_restituicao||0,totalEncargos:0,totalEncargosCobrados:V.total_juros_cobrado||0,totalEncargosDevidos:V.total_juros_devido||0,encargosAbusivos:V.encargos_abusivos||[],cetMensal:V.cet_mensal||V.taxa_efetiva_mensal||0,cetAnual:V.cet_anual||V.taxa_efetiva_anual||0,anatocismoDetectado:V.anatocismo_detectado||!1,percentualAbuso:0,mesesAnalise:24,formatted:{saldoTotal:O(V.saldo_devedor),taxaMediaCobrada:B(V.juros_rotativo),taxaMercado:B(se),sobretaxaPP:B(V.juros_rotativo-se),totalJurosCobrado:O(V.total_juros_cobrado||0),totalJurosDevido:O(V.total_juros_devido||0),diferencaRestituicao:O(V.diferenca_restituicao||0),totalEncargosCobrados:O(V.total_juros_cobrado||0),totalEncargosDevidos:O(V.total_juros_devido||0),cetMensal:B(V.cet_mensal||V.taxa_efetiva_mensal||0),cetAnual:B(V.cet_anual||V.taxa_efetiva_anual||0)}};r("calc-analise",z.id,X)}else if(z.tipo==="financiamento"){const V=await Kr.getById(z.id);if(!V){ee.error("Caso no encontrado");return}if(!V.taxa_contrato_am||!V.valor_total_pago){ee.warning("Este caso ainda no possui anlise calculada. Redirecionando para edio..."),r("calc-financiamento",z.id);return}const se={taxaContratoAM:V.taxa_contrato_am/100,taxaMercadoAM:V.taxa_mercado_am?V.taxa_mercado_am/100:0,sobretaxaPP:V.sobretaxa_pp?V.sobretaxa_pp/100:0,valorTotalPago:V.valor_total_pago||0,valorDevido:V.valor_total_devido||0,diferencaRestituicao:V.diferenca_restituicao||0,horizonteMeses:V.horizonte_meses||12,totalParcelas:V.quantidade_parcelas,formatted:{taxaContratoAM:B(V.taxa_contrato_am/100),taxaMercadoAM:B(V.taxa_mercado_am?V.taxa_mercado_am/100:0),sobretaxaPP:B(V.sobretaxa_pp?V.sobretaxa_pp/100:0),valorTotalPago:O(V.valor_total_pago||0),valorDevido:O(V.valor_total_devido||0),diferencaRestituicao:O(V.diferenca_restituicao||0)}};r("calc-analise",z.id,se)}}catch(V){console.error("Error loading case for view:",V),ee.error("Erro ao carregar dados do caso")}},O=z=>z.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),B=z=>(z*100).toLocaleString("pt-BR",{minimumFractionDigits:4,maximumFractionDigits:4})+"%",F=async()=>{if(d&&p)try{p==="financiamento"?await Kr.softDelete(d):p==="cartao"&&await _r.softDelete(d),ee.success("Caso excludo com sucesso!"),u(!1),h(null),g(""),await E()}catch(z){console.error("Error deleting calculation:",z),ee.error("Erro ao excluir caso")}},H=z=>{const V=new Date(z),se=String(V.getDate()).padStart(2,"0"),X=String(V.getMonth()+1).padStart(2,"0"),re=V.getFullYear();return`${se}/${X}/${re}`},Z=z=>z.tipo==="cartao"?"Carto de Crdito":"Financiamento Imobilirio",ae=z=>z.tipo==="cartao"?z.numero_cartao||"N/A":z.contrato_num||"N/A",ue=m.filter(z=>{const V=e.toLowerCase(),se=z.devedor.toLowerCase(),X=z.credor.toLowerCase();if(se.includes(V)||X.includes(V))return!0;if(z.tipo==="financiamento"){const re=z;return re.contrato_num&&re.contrato_num.includes(e)||re.numero_processo&&re.numero_processo.includes(e)}else if(z.tipo==="cartao"){const re=z;return re.numero_cartao&&re.numero_cartao.includes(e)||re.numero_processo&&re.numero_processo.includes(e)}return!1});return o.jsxs("div",{className:"p-4 lg:p-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-gray-900 dark:text-white mb-2",children:"Clculo Revisional"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Realize clculos e revises financeiras com preciso e segurana."})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-gray-900 dark:text-white mb-4",children:"Opes de Clculo"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:S.map(z=>{const V=z.icon;return o.jsxs("button",{onClick:()=>r(z.route),className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg p-4 text-left hover:shadow-md transition-shadow",children:[o.jsxs("div",{className:"flex items-start gap-4 mb-3",children:[o.jsx("div",{className:"bg-blue-500 dark:bg-blue-600 rounded-lg p-3 shrink-0",children:o.jsx(V,{className:"w-6 h-6 text-white"})}),o.jsx("h3",{className:"text-gray-900 dark:text-white flex-1",children:z.title})]}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:z.description})]},z.id)})})]}),o.jsx("div",{className:"mb-6",children:o.jsx("h2",{className:"text-gray-900 dark:text-white mb-4",children:"Lista de Casos"})}),o.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[o.jsxs("div",{className:"relative w-full",children:[o.jsx(zc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx(oe,{placeholder:"Pesquisar",value:e,onChange:z=>t(z.target.value),className:"pl-10"})]}),o.jsx(xe,{className:"gap-2 w-full sm:w-auto",children:"Buscar"})]}),o.jsx("div",{className:"border border-gray-200 dark:border-gray-800 rounded-lg overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs(ba,{children:[o.jsx(_a,{children:o.jsxs(er,{children:[o.jsx(He,{children:"ID"}),o.jsx(He,{children:"Nome do Cliente"}),o.jsx(He,{children:"N Contrato"}),o.jsx(He,{children:"Tipo"}),o.jsx(He,{children:"Data de Anlise"}),o.jsx(He,{children:"Status"}),o.jsx(He,{className:"w-12",children:"Aes"})]})}),o.jsx(ja,{children:y?o.jsx(er,{children:o.jsx(Be,{colSpan:7,className:"text-center py-8",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx(ft,{className:"w-5 h-5 animate-spin text-gray-400"}),o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Carregando casos..."})]})})}):ue.length===0?o.jsx(er,{children:o.jsx(Be,{colSpan:7,className:"text-center py-8",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhum caso encontrado"})})}):ue.map(z=>o.jsxs(er,{children:[o.jsx(Be,{children:z.id.substring(0,8)}),o.jsx(Be,{className:"text-gray-900 dark:text-white",children:z.devedor}),o.jsx(Be,{children:ae(z)}),o.jsx(Be,{children:o.jsx(sr,{variant:"outline",children:Z(z)})}),o.jsx(Be,{children:H(z.data_atualizacao)}),o.jsx(Be,{children:o.jsx(sr,{variant:z.status==="Concludo"?"default":"secondary",children:z.status})}),o.jsx(Be,{children:o.jsxs(An,{children:[o.jsx(Tn,{asChild:!0,children:o.jsx("button",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:o.jsx(xs,{className:"w-4 h-4"})})}),o.jsxs(On,{align:"end",children:[o.jsx(wt,{onClick:()=>R(z),children:"Visualizar"}),o.jsx(wt,{onClick:()=>D(z),children:"Editar"}),o.jsx(wt,{className:"text-red-600 dark:text-red-400",onClick:()=>N(z),children:"Excluir"})]})]})})]},z.id))})]})})}),o.jsx(Dn,{open:l,onOpenChange:u,children:o.jsxs(In,{children:[o.jsxs(Mn,{children:[o.jsx($n,{children:"Excluir Caso"}),o.jsx(Ln,{children:"Tem certeza de que deseja excluir este caso? Esta ao no pode ser desfeita."})]}),o.jsxs(Fn,{children:[o.jsx(Bn,{children:"Cancelar"}),o.jsx(zn,{onClick:F,className:"bg-red-600 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700",children:"Excluir"})]})]})})]})}const aM="modulepreload",sM=function(r){return"/"+r},Ox={},Th=function(e,t,a){let i=Promise.resolve();if(t&&t.length>0){let u=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");i=u(t.map(p=>{if(p=sM(p),p in Ox)return;Ox[p]=!0;const g=p.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${m}`))return;const w=document.createElement("link");if(w.rel=g?"stylesheet":aM,g||(w.as="script"),w.crossOrigin="",w.href=p,h&&w.setAttribute("nonce",h),document.head.appendChild(w),g)return new Promise((y,j)=>{w.addEventListener("load",y),w.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return i.then(u=>{for(const d of u||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},Ve=r=>{if(!r)return 0;let e=r.trim().replace(/R\$\s*/g,"");return/,\d{2}$/.test(e)?(e=e.replace(/\./g,"").replace(",","."),parseFloat(e)||0):(e.endsWith(",00")&&(e=e.replace(",00","")),e.includes(",")&&(e=e.replace(",",".")),e.includes(".")&&(e.startsWith("0.")||e.startsWith("-0.")||(e=e.replace(/\./g,""))),parseFloat(e)||0)},iM=(r,e=!0)=>{const t=r.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2});return e?`R$ ${t}`:t},no=r=>{if(!r)return"";const e=r.replace(/\D/g,"");if(!e)return"";const t=parseInt(e,10)/100;return iM(t)};function lM({calcId:r,onNavigate:e}){const[t,a]=x.useState(!1),[i,l]=x.useState({credor:"",devedor:"",contratoNum:"",tipoContrato:"financiamento",dataCalculo:"",valorBem:"",entrada:"",valorFinanciado:"",quantidadeParcelas:"",dataPrimeiraParcela:"",dataContrato:"",sistemaAmortizacao:"sac",indiceCorrecao:"tr",taxaMensalContrato:"",taxaAnualContrato:"",taxaMensalMercado:"0.0062",mip:"",dfi:"",tca:"",multa:"",mora:"",horizonteMeses:"12"}),u=async(y,j,_,C,S)=>{try{let E=r;if(!E){const O={credor:i.credor,devedor:i.devedor,contrato_num:i.contratoNum||null,tipo_contrato:"Financiamento",data_calculo:i.dataCalculo||new Date().toISOString().split("T")[0],valor_bem:i.valorBem?Ve(i.valorBem):null,entrada:i.entrada?Ve(i.entrada):null,valor_financiado:Ve(i.valorFinanciado),quantidade_parcelas:parseInt(i.quantidadeParcelas),data_primeira_parcela:i.dataPrimeiraParcela,data_contrato:i.dataContrato||null,sistema_amortizacao:i.sistemaAmortizacao.toUpperCase(),indice_correcao:i.indiceCorrecao.toUpperCase(),taxa_mensal_contrato:Ve(i.taxaMensalContrato),taxa_anual_contrato:i.taxaAnualContrato?Ve(i.taxaAnualContrato):null,taxa_mensal_mercado:Ve(i.taxaMensalMercado),mip_primeira_parcela:i.mip?Ve(i.mip):null,dfi_primeira_parcela:i.dfi?Ve(i.dfi):null,tca_primeira_parcela:i.tca?Ve(i.tca):null,multa_primeira_parcela:i.multa?Ve(i.multa):null,mora_primeira_parcela:i.mora?Ve(i.mora):null,horizonte_meses:parseInt(i.horizonteMeses),status:"Em Anlise"};E=(await Kr.create(O)).id}await Kr.updateCalculatedResults(E,{taxa_contrato_am:C*100,taxa_mercado_am:S*100,sobretaxa_pp:_.totais.sobretaxaPP*100,valor_total_pago:y.totais.totalPago,valor_total_devido:j.totais.totalDevido,diferenca_restituicao:_.totais.totalRestituir});const N=y.tabela.map(O=>({mes:O.mes,data:O.data,valor_original_parcela:O.valorOriginalParcela||0,valor_corrigido:O.valorCorrigido||0,juros:O.juros||0,amortizacao:O.amortizacao||0,saldo_devedor:O.saldoDevedor||0,mip:O.MIP||null,dfi:O.DFI||null,tca:O.TCA||null,multa:O.multa||null,mora:O.mora||null,total_pago:O.totalPago||null})),D=j.tabela.map(O=>({mes:O.mes,data:O.data,valor_original_parcela:O.valorOriginalParcela||0,valor_corrigido:O.valorCorrigido||0,juros:O.juros||0,amortizacao:O.amortizacao||0,saldo_devedor:O.saldoDevedor||0})),R=_.tabela.map(O=>({mes:O.mes,data:O.data,valor_original_parcela:0,valor_corrigido:0,juros:0,amortizacao:0,saldo_devedor:0,diferenca:O.diferenca||0}));return console.log(" Saving amortization tables..."),await Kr.saveAmortizacao(E,"AP01",N),await Kr.saveAmortizacao(E,"AP05",D),await Kr.saveAmortizacao(E,"AP03",R),console.log(" All amortization tables saved successfully"),E}catch(E){throw console.error("Error saving calculation results:",E),E}};x.useEffect(()=>{(async()=>{if(r){console.log(" Loading case with ID:",r);try{a(!0);const j=await Kr.getById(r);if(!j){ee.error("Caso no encontrado"),e("calculations");return}console.log(" Case loaded successfully:",j),l({credor:j.credor,devedor:j.devedor,contratoNum:j.contrato_num||"",tipoContrato:j.tipo_contrato?.toLowerCase()||"financiamento",dataCalculo:j.data_calculo||new Date().toISOString().split("T")[0],valorBem:j.valor_bem?no(String(Math.round(j.valor_bem*100))):"",entrada:j.entrada?no(String(Math.round(j.entrada*100))):"",valorFinanciado:no(String(Math.round(j.valor_financiado*100))),quantidadeParcelas:String(j.quantidade_parcelas),dataPrimeiraParcela:j.data_primeira_parcela,dataContrato:j.data_contrato||"",sistemaAmortizacao:j.sistema_amortizacao.toLowerCase(),indiceCorrecao:j.indice_correcao.toLowerCase(),taxaMensalContrato:String(j.taxa_mensal_contrato),taxaAnualContrato:j.taxa_anual_contrato?String(j.taxa_anual_contrato):"",taxaMensalMercado:String(j.taxa_mensal_mercado),mip:j.mip_primeira_parcela?no(String(Math.round(j.mip_primeira_parcela*100))):"",dfi:j.dfi_primeira_parcela?no(String(Math.round(j.dfi_primeira_parcela*100))):"",tca:j.tca_primeira_parcela?no(String(Math.round(j.tca_primeira_parcela*100))):"",multa:j.multa_primeira_parcela?no(String(Math.round(j.multa_primeira_parcela*100))):"",mora:j.mora_primeira_parcela?no(String(Math.round(j.mora_primeira_parcela*100))):"",horizonteMeses:j.horizonte_meses?String(j.horizonte_meses):"12"}),ee.success("Dados do caso carregados para edio"),console.log(" Loading state set to false")}catch(j){console.error(" Error loading case:",j),ee.error("Erro ao carregar caso"),e("calculations")}finally{a(!1),console.log(" Loading state set to false (finally block)")}}else console.log(" No calcId provided, creating new case")})()},[r,e]);const d=["valorBem","entrada","valorFinanciado","mip","dfi","tca","multa","mora"],h=(y,j)=>{if(d.includes(y)){const _=no(j);l(C=>({...C,[y]:_}))}else l(_=>({..._,[y]:j}))},p=()=>{if(!i.credor||!i.devedor)return ee.error("Preencha os nomes do credor e devedor"),!1;if(!i.valorFinanciado||!i.quantidadeParcelas)return ee.error("Preencha o valor financiado e nmero de parcelas"),!1;if(!i.dataPrimeiraParcela)return ee.error("Preencha a data do primeiro vencimento"),!1;if(!i.taxaMensalContrato)return ee.error("Preencha a taxa mensal do contrato"),!1;if(i.sistemaAmortizacao!=="sac")return ee.error("Apenas o sistema SAC est implementado no momento"),!1;if(i.indiceCorrecao!=="tr")return ee.error("Apenas o indexador TR est implementado no momento"),!1;if(i.valorBem&&i.entrada&&i.valorFinanciado){const y=Ve(i.valorBem),j=Ve(i.entrada),_=Ve(i.valorFinanciado),C=j+_;Math.abs(y-C)>1&&ee.warning(`Ateno: Valor do Bem (R$ ${y.toFixed(2)})  Entrada + Financiado (R$ ${C.toFixed(2)})`)}return i.dataContrato&&i.dataPrimeiraParcela&&i.dataContrato>=i.dataPrimeiraParcela?(ee.error("Data do Contrato deve ser anterior  Data do 1 Vencimento"),!1):!0},g=async()=>{if(console.log(" handleSave clicked"),!p()){console.log(" Validation failed");return}console.log(" Validation passed, saving..."),a(!0);try{const y={credor:i.credor,devedor:i.devedor,contrato_num:i.contratoNum||null,tipo_contrato:i.tipoContrato.toUpperCase(),data_calculo:i.dataCalculo||new Date().toISOString().split("T")[0],valor_bem:i.valorBem?Ve(i.valorBem):null,entrada:i.entrada?Ve(i.entrada):null,valor_financiado:Ve(i.valorFinanciado),quantidade_parcelas:parseInt(i.quantidadeParcelas),data_primeira_parcela:i.dataPrimeiraParcela,data_contrato:i.dataContrato||null,sistema_amortizacao:i.sistemaAmortizacao.toUpperCase(),indice_correcao:i.indiceCorrecao.toUpperCase(),taxa_mensal_contrato:Ve(i.taxaMensalContrato),taxa_anual_contrato:i.taxaAnualContrato?Ve(i.taxaAnualContrato):null,taxa_mensal_mercado:Ve(i.taxaMensalMercado),mip_primeira_parcela:i.mip?Ve(i.mip):null,dfi_primeira_parcela:i.dfi?Ve(i.dfi):null,tca_primeira_parcela:i.tca?Ve(i.tca):null,multa_primeira_parcela:i.multa?Ve(i.multa):null,mora_primeira_parcela:i.mora?Ve(i.mora):null,horizonte_meses:parseInt(i.horizonteMeses),status:"Rascunho"};let j;r?(j=(await Kr.update(r,y)).id,ee.success("Caso atualizado com sucesso!")):(j=(await Kr.create(y)).id,ee.success("Caso salvo com sucesso!"),e("calc-financiamento",j))}catch(y){ee.error("Erro ao salvar dados"),console.error(y)}finally{a(!1)}},m=async()=>{if(console.log(" handleAnalysis clicked"),!p()){console.log(" Validation failed");return}console.log(" Validation passed, starting analysis..."),a(!0);try{const{gerarCenarioAP01:y,gerarCenarioAP05:j,gerarCenarioAP03:_,formatarMoeda:C,formatarPercent:S,buscarTRComCache:E}=await Th(async()=>{const{gerarCenarioAP01:M,gerarCenarioAP05:T,gerarCenarioAP03:$,formatarMoeda:Q,formatarPercent:pe,buscarTRComCache:J}=await Promise.resolve().then(()=>zx);return{gerarCenarioAP01:M,gerarCenarioAP05:T,gerarCenarioAP03:$,formatarMoeda:Q,formatarPercent:pe,buscarTRComCache:J}},void 0),{FaixaTaxa:N,EncargosMensais:D}=await Th(async()=>{const{FaixaTaxa:M,EncargosMensais:T}=await Promise.resolve().then(()=>yM);return{FaixaTaxa:M,EncargosMensais:T}},void 0);console.log(" DEBUG - Valores do FormData (ANTES do parseNumber):"),console.log("valorFinanciado (raw):",i.valorFinanciado),console.log("taxaMensalContrato (raw):",i.taxaMensalContrato),console.log("taxaMensalMercado (raw):",i.taxaMensalMercado);const R=Ve(i.valorFinanciado),O=parseInt(i.quantidadeParcelas),B=i.dataPrimeiraParcela,F=Ve(i.taxaMensalContrato),H=Ve(i.taxaMensalMercado),Z=parseInt(i.horizonteMeses);console.log(" DEBUG - Parmetros da Anlise Prvia (DEPOIS do parseNumber):"),console.log("PV:",R),console.log("n:",O),console.log("Primeiro Venc:",B),console.log("Taxa Contrato:",F),console.log("Taxa Mercado:",H),console.log("Horizonte:",Z);const ae=new Date(B),ue=new Date(ae);ue.setMonth(ue.getMonth()+Z);const z=ue.toISOString().split("T")[0];ee.info("Buscando srie TR do Banco Central...");const V=await E(B,z);V.length===0?ee.warning("TR no disponvel. Clculo sem correo monetria (TR = 1.0)"):ee.success(`${V.length} registros de TR carregados`);const se=[{ini:B,fim:"2099-12-31",i:F}];console.log(" DEBUG - Encargos ANTES do parseNumber:"),console.log("MIP (raw):",i.mip),console.log("DFI (raw):",i.dfi),console.log("TCA (raw):",i.tca);const X=[{data:B,MIP:Ve(i.mip),DFI:Ve(i.dfi),TCA:Ve(i.tca),multa:Ve(i.multa),mora:Ve(i.mora)}];console.log(" DEBUG - Encargos DEPOIS do parseNumber:"),console.log("MIP:",X[0].MIP),console.log("DFI:",X[0].DFI),console.log("TCA:",X[0].TCA);const re=y({pv:R,n:O,primeiroVenc:B,faixasTaxa:se,trSeries:V,encargosMensais:X,horizonteMeses:Z}),U=j({pv:R,n:O,primeiroVenc:B,faixasTaxa:[{ini:B,fim:"2099-12-31",i:H}],trSeries:V,horizonteMeses:Z},H),I=_(re,U,F,H);console.log(" DEBUG - Resultados dos Cenrios:"),console.log("AP01 Total Pago:",re.totais.totalPago),console.log("AP01 Total Juros:",re.totais.totalJuros),console.log("AP01 Total Taxas:",re.totais.totalTaxas),console.log("AP01 Linhas na tabela:",re.tabela.length),console.log("AP05 Total Devido:",U.totais.totalDevido),console.log("AP05 Total Juros:",U.totais.totalJuros),console.log("AP05 Linhas na tabela:",U.tabela.length),console.log("AP03 Diferena:",I.totais.totalRestituir);const P=await u(re,U,I,F,H),A={taxaContratoAM:F,taxaMercadoAM:H,sobretaxaPP:I.totais.sobretaxaPP,valorTotalPago:re.totais.totalPago,valorDevido:U.totais.totalDevido,diferencaRestituicao:I.totais.totalRestituir,horizonteMeses:Z,totalParcelas:O,formatted:{taxaContratoAM:S(F),taxaMercadoAM:S(H),sobretaxaPP:S(I.totais.sobretaxaPP),valorTotalPago:C(re.totais.totalPago),valorDevido:C(U.totais.totalDevido),diferencaRestituicao:C(I.totais.totalRestituir)}};ee.success("Anlise prvia concluda e salva!"),setTimeout(()=>e("calc-analise",P,A),300)}catch(y){ee.error("Erro ao gerar anlise prvia"),console.error(y)}finally{a(!1)}},w=async()=>{if(console.log(" handleGenerateReport clicked"),!p()){console.log(" Validation failed");return}console.log(" Validation passed, generating report..."),a(!0);try{const{gerarCenarioAP01:y,gerarCenarioAP05:j,gerarCenarioAP03:_,formatarMoeda:C,formatarPercent:S,buscarTRComCache:E}=await Th(async()=>{const{gerarCenarioAP01:P,gerarCenarioAP05:A,gerarCenarioAP03:M,formatarMoeda:T,formatarPercent:$,buscarTRComCache:Q}=await Promise.resolve().then(()=>zx);return{gerarCenarioAP01:P,gerarCenarioAP05:A,gerarCenarioAP03:M,formatarMoeda:T,formatarPercent:$,buscarTRComCache:Q}},void 0),N=Ve(i.valorFinanciado),D=parseInt(i.quantidadeParcelas),R=i.dataPrimeiraParcela,O=Ve(i.taxaMensalContrato),B=Ve(i.taxaMensalMercado),F=parseInt(i.horizonteMeses),H=new Date(R),Z=new Date(H);Z.setMonth(Z.getMonth()+F);const ae=Z.toISOString().split("T")[0];ee.info("Buscando srie TR do Banco Central...");const ue=await E(R,ae);ue.length===0?ee.warning("TR no disponvel. Clculo sem correo monetria (TR = 1.0)"):ee.success(`${ue.length} registros de TR carregados`);const z=[{ini:R,fim:"2099-12-31",i:O}],V=[{data:i.dataPrimeiraParcela,MIP:Ve(i.mip),DFI:Ve(i.dfi),TCA:Ve(i.tca),multa:Ve(i.multa),mora:Ve(i.mora)}],se=y({pv:N,n:D,primeiroVenc:R,faixasTaxa:z,trSeries:ue,encargosMensais:V,horizonteMeses:F}),X=j({pv:N,n:D,primeiroVenc:R,faixasTaxa:[{ini:R,fim:"2099-12-31",i:B}],trSeries:ue,horizonteMeses:F},B),re=_(se,X,O,B),U=await u(se,X,re,O,B);await Kr.updateStatus(U,"Concludo");const I={credor:i.credor,devedor:i.devedor,contratoNum:i.contratoNum||"SEM-NUMERO",metodologia:"SAC com TR  AP01 (Cobrado) vs AP05 (Devido)",cards:{valorPrincipal:N,totalJuros:se.totais.totalJuros,totalTaxas:se.totais.totalTaxas,valorTotalDevido:se.totais.totalPago,totalRestituir:re.totais.totalRestituir},comparativo:{taxaContratoAM:O,taxaMercadoAM:B,sobretaxaPP:re.totais.sobretaxaPP},tabelaAmortizacao:se.tabela,formatted:{cards:{valorPrincipal:C(N),totalJuros:C(se.totais.totalJuros),totalTaxas:C(se.totais.totalTaxas),valorTotalDevido:C(se.totais.totalPago),totalRestituir:C(re.totais.totalRestituir)},comparativo:{taxaContratoAM:S(O),taxaMercadoAM:S(B),sobretaxaPP:S(re.totais.sobretaxaPP)}}};ee.success("Relatrio completo gerado e salvo!"),setTimeout(()=>e("calc-relatorio",U,I),300)}catch(y){ee.error("Erro ao gerar relatrio completo"),console.error(y)}finally{a(!1)}};return o.jsxs("div",{className:"p-4 lg:p-8",children:[o.jsxs(xe,{variant:"ghost",onClick:()=>e("calculations"),className:"gap-2 mb-6",children:[o.jsx(Uo,{className:"w-4 h-4"}),"Voltar para Lista de Casos"]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-gray-900 dark:text-white mb-2",children:"Reviso de Financiamento Imobilirio"}),!1]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Dados do Processo"})}),o.jsx(We,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"credor",children:"Credor"}),o.jsx(oe,{id:"credor",placeholder:"Nome da Instituio Financeira",value:i.credor,onChange:y=>h("credor",y.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"devedor",children:"Devedor"}),o.jsx(oe,{id:"devedor",placeholder:"Nome Completo do Devedor",value:i.devedor,onChange:y=>h("devedor",y.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"contratoNum",children:"Nmero do Contrato"}),o.jsx(oe,{id:"contratoNum",placeholder:"Nmero do contrato",value:i.contratoNum,onChange:y=>h("contratoNum",y.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"tipoContrato",children:"Tipo de Contrato"}),o.jsxs(et,{value:i.tipoContrato,onValueChange:y=>h("tipoContrato",y),children:[o.jsx(rt,{id:"tipoContrato",children:o.jsx(tt,{placeholder:"Selecione"})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"ccb",children:"CCB"}),o.jsx(ie,{value:"financiamento",children:"Financiamento"}),o.jsx(ie,{value:"sac",children:"SAC"}),o.jsx(ie,{value:"price",children:"PRICE"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"dataCalculo",children:"Data do Clculo"}),o.jsx(oe,{id:"dataCalculo",type:"date",placeholder:"Escolha a data",value:i.dataCalculo,onChange:y=>h("dataCalculo",y.target.value)})]})]})})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Dados do Imvel"})}),o.jsx(We,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"valorBem",children:"Valor do Bem"}),o.jsx(oe,{id:"valorBem",type:"text",placeholder:"Ex: R$ 432.000,00",value:i.valorBem,onChange:y=>h("valorBem",y.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"valorFinanciado",children:"Valor Financiado (PV)"}),o.jsx(oe,{id:"valorFinanciado",type:"text",placeholder:"Ex: R$ 302.400,00",value:i.valorFinanciado,onChange:y=>h("valorFinanciado",y.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"entrada",children:"Entrada"}),o.jsx(oe,{id:"entrada",type:"text",placeholder:"Ex: R$ 129.600,00",value:i.entrada,onChange:y=>h("entrada",y.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"sistemaAmort",children:"Sistema de Amortizao"}),o.jsxs(et,{value:i.sistemaAmortizacao,onValueChange:y=>h("sistemaAmortizacao",y),children:[o.jsx(rt,{id:"sistemaAmort",children:o.jsx(tt,{placeholder:"Selecione"})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"sac",children:"SAC"}),o.jsx(ie,{value:"price",children:"PRICE"}),o.jsx(ie,{value:"gauss",children:"GAUSS"}),o.jsx(ie,{value:"mqjs",children:"MQJS"}),o.jsx(ie,{value:"sac-juros-simples",children:"SAC a Juros Simples"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"indexador",children:"Indexador de Correo Monetria"}),o.jsxs(et,{value:i.indiceCorrecao,onValueChange:y=>h("indiceCorrecao",y),children:[o.jsx(rt,{id:"indexador",children:o.jsx(tt,{placeholder:"Selecione"})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"tr",children:"TR"}),o.jsx(ie,{value:"ipca",children:"IPCA"}),o.jsx(ie,{value:"inpc",children:"INPC"}),o.jsx(ie,{value:"igpm",children:"IGP-M"}),o.jsx(ie,{value:"incc",children:"INCC"})]})]})]})]})})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Parcelas"})}),o.jsx(We,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"numParcelas",children:"Nmero de Parcelas (n)"}),o.jsx(oe,{id:"numParcelas",type:"number",placeholder:"Ex: 360",value:i.quantidadeParcelas,onChange:y=>h("quantidadeParcelas",y.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"primeiroVenc",children:"Data do 1 Vencimento"}),o.jsx(oe,{id:"primeiroVenc",type:"date",value:i.dataPrimeiraParcela,onChange:y=>h("dataPrimeiraParcela",y.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"dataContrato",children:"Data do Contrato"}),o.jsx(oe,{id:"dataContrato",type:"date",value:i.dataContrato,onChange:y=>h("dataContrato",y.target.value)})]})]})})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Taxas e Juros"})}),o.jsx(We,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"taxaMensalContrato",children:"Taxa Mensal do Contrato (i)"}),o.jsx(oe,{id:"taxaMensalContrato",type:"number",step:"0.000000000001",placeholder:"Ex: 0.005654145387",value:i.taxaMensalContrato,onChange:y=>h("taxaMensalContrato",y.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"taxaAnualContrato",children:"Taxa Anual do Contrato"}),o.jsx(oe,{id:"taxaAnualContrato",type:"number",step:"0.0001",placeholder:"Ex: 0.07 (7%)",value:i.taxaAnualContrato,onChange:y=>h("taxaAnualContrato",y.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"taxaMensalMercado",children:"Taxa Mensal de Mercado"}),o.jsx(oe,{id:"taxaMensalMercado",type:"number",step:"0.0001",placeholder:"Ex: 0.0062",value:i.taxaMensalMercado,onChange:y=>h("taxaMensalMercado",y.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"mip",children:"MIP (1 parcela)"}),o.jsx(oe,{id:"mip",type:"text",placeholder:"Ex: R$ 62,54",value:i.mip,onChange:y=>h("mip",y.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"dfi",children:"DFI (1 parcela)"}),o.jsx(oe,{id:"dfi",type:"text",placeholder:"Ex: R$ 77,66",value:i.dfi,onChange:y=>h("dfi",y.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"tca",children:"TCA (1 parcela)"}),o.jsx(oe,{id:"tca",type:"text",placeholder:"Ex: R$ 25,00",value:i.tca,onChange:y=>h("tca",y.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"multa",children:"Multa (1 parcela)"}),o.jsx(oe,{id:"multa",type:"text",placeholder:"Ex: R$ 0,00",value:i.multa,onChange:y=>h("multa",y.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"mora",children:"Mora (1 parcela)"}),o.jsx(oe,{id:"mora",type:"text",placeholder:"Ex: R$ 0,00",value:i.mora,onChange:y=>h("mora",y.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"horizonteMeses",children:"Horizonte de Anlise (meses)"}),o.jsx(oe,{id:"horizonteMeses",type:"number",min:"1",max:"360",placeholder:"Ex: 12",value:i.horizonteMeses,onChange:y=>h("horizonteMeses",y.target.value)}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Quantidade de parcelas para anlise prvia. Use 360 para anlise completa do contrato."}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsx(xe,{type:"button",variant:"outline",size:"sm",onClick:()=>h("horizonteMeses","12"),className:i.horizonteMeses==="12"?"bg-primary/10":"",children:"12 meses"}),o.jsx(xe,{type:"button",variant:"outline",size:"sm",onClick:()=>h("horizonteMeses","24"),className:i.horizonteMeses==="24"?"bg-primary/10":"",children:"24 meses"}),o.jsx(xe,{type:"button",variant:"outline",size:"sm",onClick:()=>h("horizonteMeses","36"),className:i.horizonteMeses==="36"?"bg-primary/10":"",children:"36 meses"}),o.jsx(xe,{type:"button",variant:"outline",size:"sm",onClick:()=>h("horizonteMeses","360"),className:i.horizonteMeses==="360"?"bg-primary/10":"",children:"Completo (360)"})]})]})]})})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-end",children:[o.jsx(xe,{variant:"outline",onClick:()=>{console.log(" Boto Anlise Prvia clicado | disabled:",t),m()},disabled:t,children:t?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Analisando..."]}):"Iniciar Anlise Prvia"}),o.jsx(xe,{onClick:()=>{console.log(" Boto Gerar Relatrio clicado | disabled:",t),w()},disabled:t,children:t?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Gerando Relatrio..."]}):"Gerar Relatrio Completo"}),o.jsx(xe,{onClick:()=>{console.log(" Boto Salvar clicado | disabled:",t),g()},disabled:t,children:t?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):"Salvar Dados"})]})]})]})}const cM=.12;function uM(r,e){const a=(e.getTime()-r.getTime())/(1e3*60*60*24*30.44);return Math.round(Math.max(1,a))}function dM(r,e){return cM}function Dx(r,e,t){return r*Math.pow(1+e,t)}function Ix(r){console.log(" Iniciando anlise prvia agregada de carto..."),console.log(`  Credor: ${r.credor}`),console.log(`  Devedor: ${r.devedor}`);const e=r.jurosRotativo;console.log(`  Taxa do contrato: ${(e*100).toFixed(2)}% a.m.`);const t=r.taxaMercadoMensal||dM(r.data_inicio_analise,r.data_calculo);console.log(`  Taxa BACEN: ${(t*100).toFixed(2)}% a.m.`);const a=t>0?e/t-1:0,i=a*100,l=e-t;console.log(`  Sobretaxa: ${(l*100).toFixed(2)} p.p. (${i.toFixed(2)}%)`);const u=r.valor_principal||r.saldo_devedor,d=r.mesesAnalise||uM(r.data_inicio_analise,r.data_calculo);console.log(`  Capital: R$ ${u.toFixed(2)}`),console.log(`  Perodo: ${d} meses`);const h=Dx(u,e,d),p=Dx(u,t,d),g=h-u,m=p-u,w=Math.max(0,g-m);console.log(`  Juros contrato: R$ ${g.toFixed(2)}`),console.log(`  Juros BACEN: R$ ${m.toFixed(2)}`),console.log(`  Diferena (apenas juros): R$ ${w.toFixed(2)}`);let y=0;r.jurosMoraPercentual&&r.jurosMoraPercentual>0&&(y=u*r.jurosMoraPercentual*d);let j=0;r.multaPercentual&&r.multaPercentual>0&&(j=u*r.multaPercentual);const _=(r.iofValor||0)*d;console.log(`  Mora: R$ ${y.toFixed(2)}`),console.log(`  Multa: R$ ${j.toFixed(2)}`),console.log(`  IOF: R$ ${_.toFixed(2)}`);const C=g+y+j+_,S=m,E=C-S;console.log("  "),console.log(`  TOTAL ENCARGOS COBRADOS: R$ ${C.toFixed(2)}`),console.log(`  TOTAL ENCARGOS DEVIDOS: R$ ${S.toFixed(2)}`),console.log(`  DIFERENA (RESTITUIO): R$ ${E.toFixed(2)}`);let N;a<=.2?N="Dentro ou levemente acima da mdia de mercado":a<=1?N="Significativamente acima da mdia de mercado":N="Extremamente acima da mdia de mercado",console.log(`  Classificao: ${N}`);const D=[];y>0&&D.push(`Juros de Mora: R$ ${y.toFixed(2)} (${(r.jurosMoraPercentual*100).toFixed(2)}%)`),j>0&&D.push(`Multa: R$ ${j.toFixed(2)} (${(r.multaPercentual*100).toFixed(2)}%)`),_>0&&D.push(`IOF: R$ ${_.toFixed(2)}`),r.anuidade&&r.anuidade>500&&D.push(`Anuidade elevada: R$ ${r.anuidade.toFixed(2)}`),a>.5&&D.push(`Sobretaxa abusiva de ${i.toFixed(0)}% acima da mdia`),D.push("Anatocismo provvel (juros compostos sobre juros)");const R=((r.anuidade||0)+(r.seguros||0)+(r.tarifas||0))*d,O=e+R/u/d,B=Math.pow(1+O,12)-1;return console.log(`  CET Mensal: ${(O*100).toFixed(2)}%`),console.log(`  CET Anual: ${(B*100).toFixed(2)}%`),console.log(` Anlise prvia concluda!
`),{saldoTotal:u,taxaMediaCobrada:e,taxaMercado:t,sobretaxaPP:l,totalJurosCobrado:g,totalJurosDevido:m,diferencaRestituicao:E,totalEncargos:R,totalEncargosCobrados:C,totalEncargosDevidos:S,encargosAbusivos:D,cetMensal:O,cetAnual:B,anatocismoDetectado:!0,percentualAbuso:i,mesesAnalise:d,formatted:{saldoTotal:`R$ ${u.toFixed(2)}`,taxaMediaCobrada:`${(e*100).toFixed(4)}%`,taxaMercado:`${(t*100).toFixed(4)}%`,sobretaxaPP:`${(l*100).toFixed(2)} p.p.`,totalJurosCobrado:`R$ ${g.toFixed(2)}`,totalJurosDevido:`R$ ${m.toFixed(2)}`,diferencaRestituicao:`R$ ${E.toFixed(2)}`,totalEncargosCobrados:`R$ ${C.toFixed(2)}`,totalEncargosDevidos:`R$ ${S.toFixed(2)}`,cetMensal:`${(O*100).toFixed(2)}%`,cetAnual:`${(B*100).toFixed(2)}%`}}}function hM({calcId:r,onNavigate:e}){const[t,a]=x.useState(!1),[i,l]=x.useState(!1),[u,d]=x.useState(r),[h,p]=x.useState(null),[g,m]=x.useState({credor:"Banco Ita S.A.",devedor:"Maria da Silva Santos",numeroCartao:"**** **** **** 5678",numeroProcesso:"1234567-89.2024.8.26.0100",dataCalculo:"2025-01-15",saldoDevedor:"5.000,00",limiteTotal:"10.000,00",limiteDisponivel:"5.000,00",saldoAnterior:"4.800,00",saldoFinanciado:"5.000,00",dataInicioAnalise:"2023-01-01",dataUltimaFatura:"2024-12-01",dataPagamento:"2025-01-10",diaVencimento:"10",totalFatura:"5.850,00",pagamentoMinimo:"750,00",consumosDespesas:"1.200,00",anuidade:"-480,00",seguro:"25,00",iof:"35,00",tarifas:"15,00",jurosRotativo:"10,5",jurosRemuneratoriosAtraso:"",taxaJurosParcelamento:"6,99",jurosMora:"1",multaInadimplencia:"2",diesMora:"0",observacoes:"",parcelamentos:"",saquesEspecieAvance:"",valorIOF:"",estornoAjuste:"",renegociacao:"",tarifa:""});x.useEffect(()=>{r&&w(r)},[r]);const w=async R=>{try{a(!0);const O=await _r.getById(R);if(!O){ee.error("Carto no encontrado"),e("calculations");return}m({credor:O.credor||"",devedor:O.devedor||"",numeroCartao:O.numero_cartao||"",numeroProcesso:O.numero_processo||"",dataCalculo:O.data_calculo?.split("T")[0]||new Date().toISOString().split("T")[0],saldoDevedor:O.saldo_devedor?.toString()||"",limiteTotal:O.limite_total?.toString()||"",limiteDisponivel:O.limite_disponivel?.toString()||"",saldoAnterior:O.saldo_anterior?.toString()||"",saldoFinanciado:O.saldo_financiado?.toString()||"",dataInicioAnalise:O.data_inicio_analise?.split("T")[0]||"",dataUltimaFatura:O.data_ultima_fatura?.split("T")[0]||"",dataPagamento:O.data_pagamento?.split("T")[0]||"",diaVencimento:O.dia_vencimento?.toString()||"",totalFatura:O.total_fatura?.toString()||"",pagamentoMinimo:O.pagamento_minimo?.toString()||"",consumosDespesas:O.consumos_despesas?.toString()||"",anuidade:O.anuidade?.toString()||"",seguro:O.seguro?.toString()||"",iof:O.iof?.toString()||"",tarifas:O.tarifas?.toString()||"",jurosRotativo:(O.juros_rotativo*100).toFixed(4)||"",jurosRemuneratoriosAtraso:O.juros_remuneratorios_atraso?(O.juros_remuneratorios_atraso*100).toFixed(4):"",taxaJurosParcelamento:O.taxa_juros_parcelamento?(O.taxa_juros_parcelamento*100).toFixed(4):"",jurosMora:O.juros_mora?(O.juros_mora*100).toFixed(4):"",multaInadimplencia:O.multa_inadimplencia?(O.multa_inadimplencia*100).toFixed(4):"",diesMora:O.dies_mora?.toString()||"0",observacoes:O.observacoes||"",parcelamentos:"",saquesEspecieAvance:"",valorIOF:"",estornoAjuste:"",renegociacao:"",tarifa:""}),ee.success("Dados carregados com sucesso!")}catch(O){console.error("Erro ao carregar dados:",O),ee.error("Erro ao carregar dados: "+O.message)}finally{a(!1)}},y=R=>{const O=R.includes("-"),B=R.replace(/\D/g,"");if(!B)return"";let F=parseInt(B)/100;return O&&(F=-F),F.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})},j=["saldoDevedor","limiteTotal","limiteDisponivel","saldoAnterior","saldoFinanciado","totalFatura","pagamentoMinimo","consumosDespesas","anuidade","seguro","valorIOF"],_=(R,O)=>{if(j.includes(R)){const B=y(O);m(F=>({...F,[R]:B}))}else m(B=>({...B,[R]:O}))},C=()=>{if(!g.credor?.trim())return ee.error("Credor  obrigatrio"),!1;if(!g.devedor?.trim())return ee.error("Devedor  obrigatrio"),!1;const R=parseFloat(g.saldoDevedor.replace(/[^\d,.-]/g,"").replace(",","."));if(!R||R<=0)return ee.error("Saldo devedor deve ser maior que zero"),!1;const O=parseFloat(g.jurosRotativo.replace(",","."));return!O||O<=0?(ee.error("Taxa de juros rotativo  obrigatria"),!1):!0},S=()=>{const R=B=>{if(!B)return 0;const F=B.replace(/\./g,"").replace(",",".");return parseFloat(F)||0},O=B=>B?(parseFloat(B.replace(",","."))||0)/100:0;return{credor:g.credor,devedor:g.devedor,numero_cartao:g.numeroCartao||void 0,numero_processo:g.numeroProcesso||void 0,saldo_devedor:R(g.saldoDevedor),limite_total:R(g.limiteTotal)||void 0,limite_disponivel:R(g.limiteDisponivel)||void 0,saldo_anterior:R(g.saldoAnterior)||void 0,saldo_financiado:R(g.saldoFinanciado)||void 0,data_inicio_analise:g.dataInicioAnalise||void 0,data_ultima_fatura:g.dataUltimaFatura||void 0,data_pagamento:g.dataPagamento||void 0,dia_vencimento:g.diaVencimento?parseInt(g.diaVencimento):void 0,total_fatura:R(g.totalFatura)||void 0,pagamento_minimo:R(g.pagamentoMinimo)||void 0,consumos_despesas:R(g.consumosDespesas)||void 0,anuidade:R(g.anuidade)||0,seguro:R(g.seguro)||0,iof:R(g.iof)||0,tarifas:R(g.tarifas)||0,juros_rotativo:O(g.jurosRotativo),juros_remuneratorios_atraso:O(g.jurosRemuneratoriosAtraso)||void 0,taxa_juros_parcelamento:O(g.taxaJurosParcelamento)||void 0,juros_mora:O(g.jurosMora)||void 0,multa_inadimplencia:O(g.multaInadimplencia)||void 0,dies_mora:parseInt(g.diesMora)||0,observacoes:g.observacoes||void 0,parcelamentos:g.parcelamentos?[g.parcelamentos]:[],saques_especie:g.saquesEspecieAvance?[g.saquesEspecieAvance]:[],estornos_ajustes:g.estornoAjuste?[g.estornoAjuste]:[],renegociacoes:g.renegociacao?[g.renegociacao]:[],outras_tarifas:g.tarifa?[g.tarifa]:[]}},E=async()=>{if(C())try{l(!0);const R=S();if(u)await _r.update(u,R),ee.success("Dados atualizados com sucesso!");else{const O=await _r.create(R);d(O.id),ee.success("Carto criado com sucesso!")}p(new Date)}catch(R){console.error("Erro ao salvar:",R),ee.error("Erro ao salvar: "+R.message)}finally{l(!1)}},N=async()=>{if(C())try{a(!0);const R=S();let O=u;if(O)await _r.update(O,R),p(new Date);else{l(!0);const ae=await _r.create(R);O=ae.id,d(ae.id),p(new Date),l(!1),ee.success("Carto criado com sucesso!")}const B={credor:R.credor,devedor:R.devedor,data_calculo:new Date(R.data_calculo),data_inicio_analise:new Date(R.data_inicio_analise||R.data_calculo),data_ultima_fatura:new Date(R.data_ultima_fatura||R.data_calculo),saldo_devedor:R.saldo_devedor,valor_principal:R.saldo_financiado||R.saldo_devedor,jurosRotativo:R.juros_rotativo,taxaMercadoMensal:.12,jurosMoraPercentual:R.juros_mora||0,multaPercentual:R.multa_inadimplencia||0,iofValor:R.iof||0,anuidade:R.anuidade||0,seguros:R.seguro||0,tarifas:R.tarifas||0,mesesAnalise:24,prazo_meses_simulacao:24},F=Ix(B),H=(ae,ue=9999.999999)=>ae>ue?ue:ae<-ue?-ue:ae;await _r.updateCalculatedResults(O,{total_juros_cobrado:F.totalJurosCobrado,total_juros_devido:F.totalJurosDevido,diferenca_restituicao:F.diferencaRestituicao,taxa_efetiva_mensal:H(F.taxaMediaCobrada),taxa_efetiva_anual:H(F.cetAnual),cet_mensal:H(F.cetMensal),cet_anual:H(F.cetAnual),anatocismo_detectado:F.anatocismoDetectado,encargos_abusivos:F.encargosAbusivos}),await _r.updateStatus(O,"Em Anlise");const Z={saldoTotal:F.saldoTotal,taxaMediaCobrada:F.taxaMediaCobrada,taxaMercado:F.taxaMercado,sobretaxaPP:F.sobretaxaPP,totalJurosCobrado:F.totalJurosCobrado,totalJurosDevido:F.totalJurosDevido,diferencaRestituicao:F.diferencaRestituicao,totalEncargos:F.totalEncargos,totalEncargosCobrados:F.totalEncargosCobrados,totalEncargosDevidos:F.totalEncargosDevidos,encargosAbusivos:F.encargosAbusivos,cetMensal:F.cetMensal,cetAnual:F.cetAnual,anatocismoDetectado:F.anatocismoDetectado,percentualAbuso:F.percentualAbuso,mesesAnalise:F.mesesAnalise,formatted:F.formatted};ee.success("Anlise prvia concluda com sucesso!"),e("calc-analise",O,Z)}catch(R){console.error("Erro ao iniciar anlise:",R),ee.error("Erro ao iniciar anlise: "+R.message)}finally{a(!1)}},D=async()=>{if(C())try{a(!0);const R=S();let O=u;if(O)await _r.update(O,R),p(new Date);else{l(!0);const ae=await _r.create(R);O=ae.id,d(ae.id),p(new Date),l(!1),ee.success("Carto criado com sucesso!")}const B={saldoDevedor:R.saldo_devedor,jurosRotativo:R.juros_rotativo,taxaMercadoMensal:.05,jurosMoraPercentual:R.juros_mora||0,multaPercentual:R.multa_inadimplencia||0,iofValor:R.iof||0,parcelamentos:[],anuidade:R.anuidade,seguros:R.seguro,tarifas:R.tarifas,mesesAnalise:24};console.log(" Gerando relatrio completo de carto...");const F=Ix(B),H=(ae,ue=9999.999999)=>ae>ue?ue:ae<-ue?-ue:ae;await _r.updateCalculatedResults(O,{total_juros_cobrado:F.totalJurosCobrado,total_juros_devido:F.totalJurosDevido,diferenca_restituicao:F.diferencaRestituicao,taxa_efetiva_mensal:H(F.taxaMediaCobrada),taxa_efetiva_anual:H(F.cetAnual),valor_total_pago:F.totalJurosCobrado+R.saldo_devedor,valor_total_devido:F.totalJurosDevido+R.saldo_devedor,percentual_sobretaxa:H(F.percentualAbuso),cet_mensal:H(F.cetMensal),cet_anual:H(F.cetAnual),anatocismo_detectado:F.anatocismoDetectado,encargos_abusivos:F.encargosAbusivos}),await _r.updateStatus(O,"Concludo");const Z={credor:R.credor,devedor:R.devedor,contratoNum:R.numero_processo||"N/A",metodologia:"Anlise de Carto de Crdito - Juros Rotativos e Encargos",cards:{valorPrincipal:R.saldo_devedor,totalJuros:F.totalJurosCobrado,totalTaxas:F.totalEncargos,valorTotalDevido:F.totalJurosDevido+R.saldo_devedor,totalRestituir:F.diferencaRestituicao},comparativo:{taxaContratoAM:F.taxaMediaCobrada,taxaMercadoAM:F.taxaMercado,sobretaxaPP:F.sobretaxaPP},tabelaAmortizacao:[],formatted:{cards:{valorPrincipal:`R$ ${R.saldo_devedor.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,totalJuros:`R$ ${F.totalJurosCobrado.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,totalTaxas:`R$ ${F.totalEncargos.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,valorTotalDevido:`R$ ${(F.totalJurosDevido+R.saldo_devedor).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,totalRestituir:`R$ ${F.diferencaRestituicao.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`},comparativo:{taxaContratoAM:`${(F.taxaMediaCobrada*100).toFixed(2)}%`,taxaMercadoAM:`${(F.taxaMercado*100).toFixed(2)}%`,sobretaxaPP:`${F.sobretaxaPP.toFixed(2)} p.p.`}}};ee.success("Relatrio completo gerado com sucesso!"),e("calc-relatorio",O,Z)}catch(R){console.error("Erro ao gerar relatrio:",R),ee.error("Erro ao gerar relatrio: "+R.message)}finally{a(!1)}};return o.jsxs("div",{className:"p-4 lg:p-8",children:[o.jsxs(xe,{variant:"ghost",onClick:()=>e("calculations"),className:"gap-2 mb-6",children:[o.jsx(Uo,{className:"w-4 h-4"}),"Voltar para Lista de Casos"]}),o.jsx("div",{className:"mb-8",children:o.jsx("h1",{className:"text-gray-900 dark:text-white mb-2",children:"Reviso de Carto de Crdito"})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Dados do Processo"})}),o.jsx(We,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"credor",children:"Credor"}),o.jsx(oe,{id:"credor",placeholder:"Nome da Instituio Financeira",value:g.credor,onChange:R=>_("credor",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"devedor",children:"Devedor"}),o.jsx(oe,{id:"devedor",placeholder:"Nome Completo do Devedor",value:g.devedor,onChange:R=>_("devedor",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"dataCalculo",children:"Data do Clculo"}),o.jsx(oe,{id:"dataCalculo",type:"date",placeholder:"Escolha a data",value:g.dataCalculo,onChange:R=>_("dataCalculo",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"saldoDevedor",children:"Saldo Devedor"}),o.jsx(oe,{id:"saldoDevedor",type:"text",placeholder:"Valor do saldo devedor",value:g.saldoDevedor,onChange:R=>_("saldoDevedor",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"limiteTotal",children:"Limite Total do Carto"}),o.jsx(oe,{id:"limiteTotal",type:"text",placeholder:"Limite total do carto",value:g.limiteTotal,onChange:R=>_("limiteTotal",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"limiteDisponivel",children:"Limite Disponvel"}),o.jsx(oe,{id:"limiteDisponivel",type:"text",placeholder:"Limite disponvel",value:g.limiteDisponivel,onChange:R=>_("limiteDisponivel",R.target.value)})]})]})})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Dados da Fatura"})}),o.jsx(We,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"dataInicioAnalise",children:"Data de Incio de Anlise"}),o.jsx(oe,{id:"dataInicioAnalise",type:"date",placeholder:"Escolha a data",value:g.dataInicioAnalise,onChange:R=>_("dataInicioAnalise",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"dataUltimaFatura",children:"Data da ltima Fatura"}),o.jsx(oe,{id:"dataUltimaFatura",type:"date",placeholder:"Escolha a data",value:g.dataUltimaFatura,onChange:R=>_("dataUltimaFatura",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"saldoAnterior",children:"Saldo Anterior"}),o.jsx(oe,{id:"saldoAnterior",type:"text",placeholder:"Valor do saldo anterior",value:g.saldoAnterior,onChange:R=>_("saldoAnterior",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"saldoFinanciado",children:"Saldo Financiado"}),o.jsx(oe,{id:"saldoFinanciado",type:"text",placeholder:"Saldo total financiado",value:g.saldoFinanciado,onChange:R=>_("saldoFinanciado",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"dataPagamento",children:"Data de Pagamento"}),o.jsx(oe,{id:"dataPagamento",type:"date",placeholder:"Escolha a data",value:g.dataPagamento,onChange:R=>_("dataPagamento",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"parcelamentos",children:"Parcelamentos (fatura parcelada)"}),o.jsx(oe,{id:"parcelamentos",type:"text",placeholder:"Informe os ltimos do parcelamento da fatura",value:g.parcelamentos,onChange:R=>_("parcelamentos",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"saquesEspecieAvance",children:"Saques em Espcie (Cash Advance)"}),o.jsx(oe,{id:"saquesEspecieAvance",type:"text",placeholder:'ex.: "Saque R$ 400,00 - 05/07/2023"',value:g.saquesEspecieAvance,onChange:R=>_("saquesEspecieAvance",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"anuidade",children:"Anuidade"}),o.jsx(oe,{id:"anuidade",type:"text",placeholder:"Valor da anuidade cobrada na fatura",value:g.anuidade,onChange:R=>_("anuidade",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"seguro",children:"Seguro"}),o.jsx(oe,{id:"seguro",type:"text",placeholder:"Valor do seguro lanado na fatura",value:g.seguro,onChange:R=>_("seguro",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"consumosDespesas",children:"Consumos / Despesas"}),o.jsx(oe,{id:"consumosDespesas",type:"text",placeholder:"Total de consumos e despesas lanadas",value:g.consumosDespesas,onChange:R=>_("consumosDespesas",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"pagamentoMinimo",children:"Pagamento Mnimo"}),o.jsx(oe,{id:"pagamentoMinimo",type:"text",placeholder:"Valor mnimo de pagamento exigido por fatura",value:g.pagamentoMinimo,onChange:R=>_("pagamentoMinimo",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"totalFatura",children:"Total da Fatura"}),o.jsx(oe,{id:"totalFatura",type:"text",placeholder:"Valor total da fatura",value:g.totalFatura,onChange:R=>_("totalFatura",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"valorIOF",children:"Valor de IOF"}),o.jsx(oe,{id:"valorIOF",type:"text",placeholder:"Valor de IOF aplicado",value:g.valorIOF,onChange:R=>_("valorIOF",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"estornoAjuste",children:"Estorno / Ajuste"}),o.jsx(oe,{id:"estornoAjuste",type:"text",placeholder:"Valor de estornos ou ajustes realizados",value:g.estornoAjuste,onChange:R=>_("estornoAjuste",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"renegociacao",children:"Renegociao"}),o.jsx(oe,{id:"renegociacao",type:"text",placeholder:"Valor e condies de renegociaes",value:g.renegociacao,onChange:R=>_("renegociacao",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"tarifa",children:"Tarifa"}),o.jsx(oe,{id:"tarifa",type:"text",placeholder:"Valor da tarifa aplicada",value:g.tarifa,onChange:R=>_("tarifa",R.target.value)})]})]})})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Taxas e Juros"})}),o.jsx(We,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"jurosRemuneratoriosAtraso",children:"Juros Remuneratrios de Atraso %"}),o.jsx(oe,{id:"jurosRemuneratoriosAtraso",type:"text",placeholder:"Taxa de juros aplicada sobre atraso no rotativo",value:g.jurosRemuneratoriosAtraso,onChange:R=>_("jurosRemuneratoriosAtraso",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"jurosRotativo",children:"Juros do Rotativo %"}),o.jsx(oe,{id:"jurosRotativo",type:"text",placeholder:"Taxa de juros do crdito rotativo",value:g.jurosRotativo,onChange:R=>_("jurosRotativo",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"diaVencimento",children:"Dia de Vencimento da Fatura"}),o.jsx(oe,{id:"diaVencimento",type:"text",placeholder:"Ex: 10",value:g.diaVencimento,onChange:R=>_("diaVencimento",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"taxaJurosParcelamento",children:"Taxa de Juros de Parcelamento"}),o.jsx(oe,{id:"taxaJurosParcelamento",type:"text",placeholder:"Ex: 12% ou 012",value:g.taxaJurosParcelamento,onChange:R=>_("taxaJurosParcelamento",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"multaInadimplencia",children:"Multa de Inadimplncia"}),o.jsx(oe,{id:"multaInadimplencia",type:"text",placeholder:"2%",value:g.multaInadimplencia,onChange:R=>_("multaInadimplencia",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"jurosMora",children:"Juros de Mora"}),o.jsx(oe,{id:"jurosMora",type:"text",placeholder:"Taxa de juros de mora",value:g.jurosMora,onChange:R=>_("jurosMora",R.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"diesMora",children:"Dies de Mora"}),o.jsx(oe,{id:"diesMora",type:"text",placeholder:"Quantidade de dias em atraso",value:g.diesMora,onChange:R=>_("diesMora",R.target.value)})]})]})})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-between items-center",children:[o.jsxs("div",{className:"text-sm text-gray-500",children:[i&&o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(ft,{className:"w-4 h-4 animate-spin"}),"Salvando..."]}),h&&!i&&o.jsxs("span",{children:["Salvo s ",h.toLocaleTimeString("pt-BR")]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(xe,{variant:"outline",onClick:N,disabled:t||i,children:"Iniciar Anlise Prvia"}),o.jsx(xe,{onClick:D,disabled:t||i,children:"Gerar Relatrio Completo"}),o.jsx(xe,{onClick:E,disabled:t||i,children:i?o.jsxs(o.Fragment,{children:[o.jsx(ft,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Pi,{className:"w-4 h-4 mr-2"}),"Salvar Dados"]})})]})]})]})]})}class fM{async create(e){const t=(await ce.auth.getUser()).data.user?.id,{data:a,error:i}=await ce.from("emprestimos").insert({...e,outras_tarifas:e.outrasTarifas||[],encargos_irregulares:[],tac:e.tac??0,tec:e.tec??0,tarifa_cadastro:e.tarifaCadastro??0,tarifa_avaliacao_bem:e.tarifaAvaliacaoBem??0,tarifa_registro_contrato:e.tarifaRegistroContrato??0,despesas_registro:e.despesasRegistro??0,seguro_prestamista:e.seguroPrestamista??0,seguro_protecao_financeira:e.seguroProtecaoFinanceira??0,seguro_desemprego:e.seguroDesemprego??0,comissao_flat:e.comissaoFlat??0,iof_principal:e.iofPrincipal??0,iof_adicional:e.iofAdicional??0,tac_tec_irregular:!1,seguros_irregulares:!1,comissao_permanencia_irregular:!1,criado_por:t,data_criacao:new Date().toISOString(),data_atualizacao:new Date().toISOString(),data_calculo:new Date().toISOString(),ativo:!0,excluido:!1,status:"Rascunho",sistema_amortizacao:e.sistemaAmortizacao||"PRICE",indice_correcao:e.indiceCorrecao||"NENHUM"}).select().single();if(i)throw console.error("Error creating emprestimo:",i),new Error(`Erro ao criar emprstimo: ${i.message}`);return this.mapFromDatabase(a)}async getById(e){const{data:t,error:a}=await ce.from("emprestimos").select("*").eq("id",e).eq("excluido",!1).single();if(a){if(a.code==="PGRST116")return null;throw console.error("Error fetching emprestimo:",a),new Error(`Erro ao buscar emprstimo: ${a.message}`)}return this.mapFromDatabase(t)}async getCompleto(e){const t=await this.getById(e);if(!t)return null;const a=await this.getAmortizacao(e);return{...t,amortizacao:a}}async getAll(e){let t=ce.from("emprestimos").select("*").eq("excluido",!1).eq("ativo",!0).order("data_atualizacao",{ascending:!1});e?.status&&(t=t.eq("status",e.status)),e?.tipoEmprestimo&&(t=t.eq("tipo_emprestimo",e.tipoEmprestimo)),e?.devedor&&(t=t.ilike("devedor",`%${e.devedor}%`)),e?.credor&&(t=t.ilike("credor",`%${e.credor}%`)),e?.dataInicio&&(t=t.gte("data_criacao",e.dataInicio)),e?.dataFim&&(t=t.lte("data_criacao",e.dataFim)),e?.search&&(t=t.or(`devedor.ilike.%${e.search}%,credor.ilike.%${e.search}%,contrato_num.ilike.%${e.search}%,numero_processo.ilike.%${e.search}%`));const{data:a,error:i}=await t;if(i)throw console.error("Error fetching emprestimos:",i),new Error(`Erro ao buscar emprstimos: ${i.message}`);return(a||[]).map(l=>this.mapFromDatabase(l))}async getAmortizacao(e,t){let a=ce.from("emprestimos_amortizacao").select("*").eq("emprestimo_id",e).order("mes",{ascending:!0});t&&(a=a.eq("tipo_cenario",t));const{data:i,error:l}=await a;if(l)throw console.error("Error fetching amortizacao:",l),new Error(`Erro ao buscar tabela de amortizao: ${l.message}`);return(i||[]).map(u=>this.mapAmortizacaoFromDatabase(u))}async update(e,t){const a=(await ce.auth.getUser()).data.user?.id,{data:i,error:l}=await ce.from("emprestimos").update({...this.mapToDatabase(t),data_atualizacao:new Date().toISOString(),calculado_por:t.calculadoPor||a}).eq("id",e).select().single();if(l)throw console.error("Error updating emprestimo:",l),new Error(`Erro ao atualizar emprstimo: ${l.message}`);return this.mapFromDatabase(i)}async updateCalculatedResults(e,t){const{error:a}=await ce.from("emprestimos").update({...t,data_atualizacao:new Date().toISOString()}).eq("id",e);if(a)throw console.error("Error updating calculated results:",a),new Error(`Erro ao atualizar resultados calculados: ${a.message}`)}async updateStatus(e,t){const{error:a}=await ce.from("emprestimos").update({status:t,data_atualizacao:new Date().toISOString()}).eq("id",e);if(a)throw console.error("Error updating status:",a),new Error(`Erro ao atualizar status: ${a.message}`)}async softDelete(e){const t=(await ce.auth.getUser()).data.user?.id,{error:a}=await ce.from("emprestimos").update({excluido:!0,excluido_em:new Date().toISOString(),excluido_por:t,data_atualizacao:new Date().toISOString()}).eq("id",e);if(a)throw console.error("Error soft deleting emprestimo:",a),new Error(`Erro ao excluir emprstimo: ${a.message}`)}async restore(e){const{error:t}=await ce.from("emprestimos").update({excluido:!1,excluido_em:null,excluido_por:null,data_atualizacao:new Date().toISOString()}).eq("id",e);if(t)throw console.error("Error restoring emprestimo:",t),new Error(`Erro ao restaurar emprstimo: ${t.message}`)}async hardDelete(e){const{error:t}=await ce.from("emprestimos").delete().eq("id",e);if(t)throw console.error("Error hard deleting emprestimo:",t),new Error(`Erro ao deletar permanentemente: ${t.message}`)}async saveAmortizacao(e,t,a){await ce.from("emprestimos_amortizacao").delete().eq("emprestimo_id",e).eq("tipo_cenario",a);const i=t.map(u=>({emprestimo_id:e,mes:u.mes,data_vencimento:u.dataVencimento,valor_parcela:u.valorParcela,juros:u.juros,amortizacao:u.amortizacao,saldo_devedor:u.saldoDevedor,indice_correcao:u.indiceCorrecao,valor_corrigido:u.valorCorrigido,seguro_prestamista:u.seguroPrestamista||0,iof:u.iof||0,tarifas:u.tarifas||0,total_parcela:u.totalParcela,tipo_cenario:a,criado_em:new Date().toISOString()})),{error:l}=await ce.from("emprestimos_amortizacao").insert(i);if(l)throw console.error("Error saving amortizacao:",l),new Error(`Erro ao salvar tabela de amortizao: ${l.message}`)}async deleteAmortizacao(e,t){let a=ce.from("emprestimos_amortizacao").delete().eq("emprestimo_id",e);t&&(a=a.eq("tipo_cenario",t));const{error:i}=await a;if(i)throw console.error("Error deleting amortizacao:",i),new Error(`Erro ao deletar tabela de amortizao: ${i.message}`)}async exists(e){const{data:t,error:a}=await ce.from("emprestimos").select("id").eq("id",e).eq("excluido",!1).single();return!a&&t!==null}async count(e){let t=ce.from("emprestimos").select("id",{count:"exact",head:!0}).eq("excluido",!1).eq("ativo",!0);e?.status&&(t=t.eq("status",e.status)),e?.tipoEmprestimo&&(t=t.eq("tipo_emprestimo",e.tipoEmprestimo)),e?.devedor&&(t=t.ilike("devedor",`%${e.devedor}%`)),e?.credor&&(t=t.ilike("credor",`%${e.credor}%`));const{count:a,error:i}=await t;return i?(console.error("Error counting emprestimos:",i),0):a||0}async getTotalFinanciado(e){let t=ce.from("emprestimos").select("total_financiado").eq("excluido",!1).eq("ativo",!0);e?.status&&(t=t.eq("status",e.status));const{data:a,error:i}=await t;return i||!a?(console.error("Error calculating total financiado:",i),0):a.reduce((l,u)=>l+(u.total_financiado||0),0)}mapFromDatabase(e){return{id:e.id,contatoId:e.contato_id,projetoId:e.projeto_id,credor:e.credor,devedor:e.devedor,contratoNum:e.contrato_num,numeroProcesso:e.numero_processo,tipoEmprestimo:e.tipo_emprestimo,totalFinanciado:e.total_financiado,valorParcela:e.valor_parcela,quantidadeParcelas:e.quantidade_parcelas,dataContrato:e.data_contrato,dataPrimeiraParcela:e.data_primeira_parcela,dataLiberacao:e.data_liberacao,dataCalculo:e.data_calculo,sistemaAmortizacao:e.sistema_amortizacao,indiceCorrecao:e.indice_correcao,percentualIndexador:e.percentual_indexador,taxaMensalContrato:e.taxa_mensal_contrato,taxaAnualContrato:e.taxa_anual_contrato,taxaMensalMercado:e.taxa_mensal_mercado,taxaJurosMora:e.taxa_juros_mora,multaAtraso:e.multa_atraso,tac:e.tac,tec:e.tec,tarifaCadastro:e.tarifa_cadastro,tarifaAvaliacaoBem:e.tarifa_avaliacao_bem,tarifaRegistroContrato:e.tarifa_registro_contrato,despesasRegistro:e.despesas_registro,seguroPrestamista:e.seguro_prestamista,seguroProtecaoFinanceira:e.seguro_protecao_financeira,seguroDesemprego:e.seguro_desemprego,comissaoFlat:e.comissao_flat,outrasTarifas:e.outras_tarifas||[],iofPrincipal:e.iof_principal,iofAdicional:e.iof_adicional,cetMensal:e.cet_mensal,cetAnual:e.cet_anual,totalJurosCobrado:e.total_juros_cobrado,totalJurosDevido:e.total_juros_devido,totalEncargos:e.total_encargos,valorTotalPago:e.valor_total_pago,valorTotalDevido:e.valor_total_devido,diferencaRestituicao:e.diferenca_restituicao,sobretaxaPP:e.sobretaxa_pp,tacTecIrregular:e.tac_tec_irregular,segurosIrregulares:e.seguros_irregulares,comissaoPermanenciaIrregular:e.comissao_permanencia_irregular,encargosIrregulares:e.encargos_irregulares||[],observacoes:e.observacoes,status:e.status,criadoPor:e.criado_por,calculadoPor:e.calculado_por,revisadoPor:e.revisado_por,dataCriacao:e.data_criacao,dataAtualizacao:e.data_atualizacao,dataRevisao:e.data_revisao,ativo:e.ativo,excluido:e.excluido,excluidoEm:e.excluido_em,excluidoPor:e.excluido_por}}mapToDatabase(e){const t={};return e.credor!==void 0&&(t.credor=e.credor),e.devedor!==void 0&&(t.devedor=e.devedor),e.contratoNum!==void 0&&(t.contrato_num=e.contratoNum),e.numeroProcesso!==void 0&&(t.numero_processo=e.numeroProcesso),e.tipoEmprestimo!==void 0&&(t.tipo_emprestimo=e.tipoEmprestimo),e.totalFinanciado!==void 0&&(t.total_financiado=e.totalFinanciado),e.valorParcela!==void 0&&(t.valor_parcela=e.valorParcela),e.quantidadeParcelas!==void 0&&(t.quantidade_parcelas=e.quantidadeParcelas),e.dataContrato!==void 0&&(t.data_contrato=e.dataContrato),e.dataPrimeiraParcela!==void 0&&(t.data_primeira_parcela=e.dataPrimeiraParcela),e.dataLiberacao!==void 0&&(t.data_liberacao=e.dataLiberacao),e.sistemaAmortizacao!==void 0&&(t.sistema_amortizacao=e.sistemaAmortizacao),e.indiceCorrecao!==void 0&&(t.indice_correcao=e.indiceCorrecao),e.percentualIndexador!==void 0&&(t.percentual_indexador=e.percentualIndexador),e.taxaMensalContrato!==void 0&&(t.taxa_mensal_contrato=e.taxaMensalContrato),e.taxaAnualContrato!==void 0&&(t.taxa_anual_contrato=e.taxaAnualContrato),e.taxaMensalMercado!==void 0&&(t.taxa_mensal_mercado=e.taxaMensalMercado),e.taxaJurosMora!==void 0&&(t.taxa_juros_mora=e.taxaJurosMora),e.multaAtraso!==void 0&&(t.multa_atraso=e.multaAtraso),e.tac!==void 0&&(t.tac=e.tac),e.tec!==void 0&&(t.tec=e.tec),e.tarifaCadastro!==void 0&&(t.tarifa_cadastro=e.tarifaCadastro),e.tarifaAvaliacaoBem!==void 0&&(t.tarifa_avaliacao_bem=e.tarifaAvaliacaoBem),e.tarifaRegistroContrato!==void 0&&(t.tarifa_registro_contrato=e.tarifaRegistroContrato),e.despesasRegistro!==void 0&&(t.despesas_registro=e.despesasRegistro),e.seguroPrestamista!==void 0&&(t.seguro_prestamista=e.seguroPrestamista),e.seguroProtecaoFinanceira!==void 0&&(t.seguro_protecao_financeira=e.seguroProtecaoFinanceira),e.seguroDesemprego!==void 0&&(t.seguro_desemprego=e.seguroDesemprego),e.comissaoFlat!==void 0&&(t.comissao_flat=e.comissaoFlat),e.outrasTarifas!==void 0&&(t.outras_tarifas=e.outrasTarifas),e.iofPrincipal!==void 0&&(t.iof_principal=e.iofPrincipal),e.iofAdicional!==void 0&&(t.iof_adicional=e.iofAdicional),e.cetMensal!==void 0&&(t.cet_mensal=e.cetMensal),e.cetAnual!==void 0&&(t.cet_anual=e.cetAnual),e.totalJurosCobrado!==void 0&&(t.total_juros_cobrado=e.totalJurosCobrado),e.totalJurosDevido!==void 0&&(t.total_juros_devido=e.totalJurosDevido),e.totalEncargos!==void 0&&(t.total_encargos=e.totalEncargos),e.valorTotalPago!==void 0&&(t.valor_total_pago=e.valorTotalPago),e.valorTotalDevido!==void 0&&(t.valor_total_devido=e.valorTotalDevido),e.diferencaRestituicao!==void 0&&(t.diferenca_restituicao=e.diferencaRestituicao),e.sobretaxaPP!==void 0&&(t.sobretaxa_pp=e.sobretaxaPP),e.tacTecIrregular!==void 0&&(t.tac_tec_irregular=e.tacTecIrregular),e.segurosIrregulares!==void 0&&(t.seguros_irregulares=e.segurosIrregulares),e.comissaoPermanenciaIrregular!==void 0&&(t.comissao_permanencia_irregular=e.comissaoPermanenciaIrregular),e.encargosIrregulares!==void 0&&(t.encargos_irregulares=e.encargosIrregulares),e.status!==void 0&&(t.status=e.status),e.observacoes!==void 0&&(t.observacoes=e.observacoes),e.calculadoPor!==void 0&&(t.calculado_por=e.calculadoPor),e.revisadoPor!==void 0&&(t.revisado_por=e.revisadoPor),t}mapAmortizacaoFromDatabase(e){return{mes:e.mes,dataVencimento:e.data_vencimento,valorParcela:e.valor_parcela,juros:e.juros,amortizacao:e.amortizacao,saldoDevedor:e.saldo_devedor,indiceCorrecao:e.indice_correcao,valorCorrigido:e.valor_corrigido,seguroPrestamista:e.seguro_prestamista,iof:e.iof,tarifas:e.tarifas,totalParcela:e.total_parcela}}}const ca=new fM;function pM(r){vM(r);const{valorFinanciado:e,numeroParcelas:t,taxaMensalCobrada:a,taxaMensalMercado:i,dataInicio:l,encargosIniciais:u={},encargosRecorrentes:d={}}=r;console.log(" Calculando emprstimo PRICE..."),console.log(`  Valor financiado: R$ ${e.toFixed(2)}`),console.log(`  Parcelas: ${t}`),console.log(`  Taxa cobrada: ${(a*100).toFixed(2)}%`),console.log(`  Taxa mercado: ${(i*100).toFixed(2)}%`);const h=Object.values(u).reduce((_,C)=>_+(C||0),0),p=Object.values(d).reduce((_,C)=>_+(C||0),0),g=Mx({valorFinanciado:e,numeroParcelas:t,taxaMensal:a,dataInicio:l,encargosRecorrentes:p}),m=Mx({valorFinanciado:e,numeroParcelas:t,taxaMensal:i,dataInicio:l,encargosRecorrentes:p}),w=Fx({valorFinanciado:e,parcelas:g.tabela.map(_=>_.totalParcela||_.valorParcela),encargosIniciais:h}),y=Fx({valorFinanciado:e,parcelas:m.tabela.map(_=>_.totalParcela||_.valorParcela),encargosIniciais:h}),j={diferencaParcela:g.valorParcela-m.valorParcela,diferencaJuros:g.totalJuros-m.totalJuros,diferencaEncargos:g.totalEncargos-m.totalEncargos,diferencaTotal:g.totalPago-m.totalPago,taxaCobradaMensal:a,taxaMercadoMensal:i,sobretaxaPP:(a-i)*100};return console.log(" Clculo PRICE concludo!"),console.log(`  Parcela cobrada: R$ ${g.valorParcela.toFixed(2)}`),console.log(`  Parcela devida: R$ ${m.valorParcela.toFixed(2)}`),console.log(`  Diferena total: R$ ${j.diferencaTotal.toFixed(2)}`),{cenarioCobrado:g,cenarioDevido:m,comparativo:j,cet:{cetMensalCobrado:w.cetMensal,cetAnualCobrado:w.cetAnual,cetMensalDevido:y.cetMensal,cetAnualDevido:y.cetAnual}}}function Mx(r){const{valorFinanciado:e,numeroParcelas:t,taxaMensal:a,dataInicio:i,encargosRecorrentes:l=0}=r,u=mM(e,a,t),d=[];let h=e,p=0,g=0;for(let m=1;m<=t;m++){const w=h*a,y=u-w;h=Math.max(0,h-y);const j=gM(i,m-1),_=u+l;d.push({mes:m,dataVencimento:j,valorParcela:u,juros:w,amortizacao:y,saldoDevedor:h,seguroPrestamista:l,totalParcela:_}),p+=w,g+=l}return{tabela:d,valorParcela:u,totalJuros:p,totalEncargos:g,totalPago:u*t+g}}function mM(r,e,t){if(e===0)return r/t;const a=Math.pow(1+e,t);return r*(e*a)/(a-1)}function gM(r,e){const t=new Date(r+"T00:00:00");t.setMonth(t.getMonth()+e);const a=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0");return`${a}-${i}-${l}`}function Fx(r){const{valorFinanciado:e,parcelas:t,encargosIniciais:a=0,maxIteracoes:i=100,tolerancia:l=1e-6}=r;if(e<=0)throw new Error("Valor financiado deve ser maior que zero");if(t.length===0)throw new Error("Deve haver pelo menos uma parcela");const u=e-a;if(u<=0)throw new Error("Valor lquido deve ser positivo");let h=(t.reduce((g,m)=>g+m,0)/u-1)/t.length;for(let g=0;g<i;g++){let m=u,w=0;for(let j=1;j<=t.length;j++){const _=t[j-1],C=Math.pow(1+h,j);m-=_/C,w+=j*_/Math.pow(1+h,j+1)}if(Math.abs(m)<l)break;const y=h-m/w;y<-.99?h=-.99:y>10?h=10:h=y}const p=Math.pow(1+h,12)-1;return{cetMensal:h,cetAnual:p}}function $x(r){const{valorFinanciado:e,numeroParcelas:t,taxaMensalCobrada:a,taxaMensalMercado:i,taxaMensal:l,taxaMercadoMensal:u,sistemaAmortizacao:d="PRICE",encargosIniciais:h=0,encargosRecorrentes:p=0,mesesAnalise:g}=r,m=a??l,w=i??u;if(!m||!w)throw new Error("Taxa mensal cobrada e taxa de mercado so obrigatrias");console.log(" Realizando anlise prvia de emprstimo...");const j=pM({valorFinanciado:e,numeroParcelas:g||t,taxaMensalCobrada:m,taxaMensalMercado:w,dataInicio:new Date().toISOString().split("T")[0],encargosIniciais:{tac:h},encargosRecorrentes:{seguroPrestamista:p}}),_=j.cenarioCobrado.totalJuros,C=j.cenarioDevido.totalJuros,S=j.cenarioCobrado.totalEncargos+h,E=_-C,N=j.comparativo.sobretaxaPP,D=i>0?(a-i)/i*100:0,R=[];let O=!1;return h>0&&(R.push("Verificar se h cobrana de TAC/TEC (vedadas desde 30/04/2008)."),O=!0),p>0&&R.push("Verificar se seguros foram contratados com anuncia expressa."),N>2&&R.push(`Sobretaxa elevada: ${N.toFixed(2)} p.p. acima do mercado.`),console.log(" Anlise prvia concluda!"),console.log(`  Diferena (restituio): R$ ${E.toFixed(2)}`),console.log(`  CET cobrado: ${(j.cet.cetMensalCobrado*100).toFixed(2)}% a.m.`),{valorFinanciado:e,numeroParcelas:t,sistemaAmortizacao:d,taxaCobradaMensal:a,taxaMercadoMensal:i,sobretaxaPP:N,percentualAbuso:D,valorParcela:j.cenarioCobrado.valorParcela,totalJurosCobrado:_,totalJurosDevido:C,totalEncargos:S,diferencaRestituicao:E,cetMensal:j.cet.cetMensalCobrado,cetAnual:j.cet.cetAnualCobrado,encargosIrregulares:R,tacTecIrregular:O,formatted:{valorFinanciado:`R$ ${e.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,valorParcela:`R$ ${j.cenarioCobrado.valorParcela.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,taxaCobradaMensal:`${(a*100).toFixed(2)}%`,taxaMercadoMensal:`${(i*100).toFixed(2)}%`,sobretaxaPP:`${N.toFixed(2)} p.p.`,totalJurosCobrado:`R$ ${_.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,totalJurosDevido:`R$ ${C.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,diferencaRestituicao:`R$ ${E.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,cetMensal:`${(j.cet.cetMensalCobrado*100).toFixed(2)}%`,cetAnual:`${(j.cet.cetAnualCobrado*100).toFixed(2)}%`}}}function vM(r){const{valorFinanciado:e,numeroParcelas:t,taxaMensalCobrada:a,taxaMensalMercado:i,dataInicio:l}=r;if(!e||e<=0)throw new Error("Valor financiado deve ser maior que zero");if(!t||t<=0||t>600)throw new Error("Nmero de parcelas deve estar entre 1 e 600");if(!a||a<0)throw new Error("Taxa mensal cobrada deve ser maior ou igual a zero");if(a>.5)throw new Error("Taxa mensal cobrada parece invlida (>50%)");if(!i||i<0)throw new Error("Taxa mensal de mercado deve ser maior ou igual a zero");if(!l)throw new Error("Data de incio  obrigatria");if(!/^\d{4}-\d{2}-\d{2}$/.test(l))throw new Error("Data de incio deve estar no formato YYYY-MM-DD")}function xM({calcId:r,onNavigate:e}){const[t,a]=x.useState(!1),[i,l]=x.useState(!1),[u,d]=x.useState(r),[h,p]=x.useState({credor:"",devedor:"",numeroProcesso:"",contratoNum:"",tipoEmprestimo:"Pessoal",sistemaAmortizacao:"PRICE",totalFinanciado:"",quantidadeParcelas:"",dataPrimeiraParcela:"",dataContrato:"",taxaMensalContrato:"",taxaMensalMercado:"3.00",tac:"",tec:"",tarifaCadastro:"",seguroPrestamista:"",iofPrincipal:"",observacoes:""});x.useEffect(()=>{r&&g(r)},[r]);const g=async S=>{try{a(!0);const E=await ca.getById(S);if(!E){ee.error("Emprstimo no encontrado"),e("calculations");return}p({credor:E.credor||"",devedor:E.devedor||"",numeroProcesso:E.numeroProcesso||"",contratoNum:E.contratoNum||"",tipoEmprestimo:E.tipoEmprestimo,sistemaAmortizacao:E.sistemaAmortizacao,totalFinanciado:E.totalFinanciado?.toString()||"",quantidadeParcelas:E.quantidadeParcelas?.toString()||"",dataPrimeiraParcela:E.dataPrimeiraParcela?.split("T")[0]||"",dataContrato:E.dataContrato?.split("T")[0]||"",taxaMensalContrato:(E.taxaMensalContrato*100).toFixed(4)||"",taxaMensalMercado:E.taxaMensalMercado?(E.taxaMensalMercado*100).toFixed(2):"3.00",tac:E.tac?.toString()||"",tec:E.tec?.toString()||"",tarifaCadastro:E.tarifaCadastro?.toString()||"",seguroPrestamista:E.seguroPrestamista?.toString()||"",iofPrincipal:E.iofPrincipal?.toString()||"",observacoes:E.observacoes||""}),ee.success("Dados carregados com sucesso!")}catch(E){console.error("Erro ao carregar dados:",E),ee.error("Erro ao carregar dados: "+E.message)}finally{a(!1)}},m=(S,E)=>{p(N=>({...N,[S]:E}))},w=()=>{if(!h.credor?.trim())return ee.error("Credor  obrigatrio"),!1;if(!h.devedor?.trim())return ee.error("Devedor  obrigatrio"),!1;const S=parseFloat(h.totalFinanciado.replace(/[^\d,.-]/g,"").replace(",","."));if(!S||S<=0)return ee.error("Valor financiado deve ser maior que zero"),!1;const E=parseInt(h.quantidadeParcelas);if(!E||E<=0)return ee.error("Nmero de parcelas invlido"),!1;const N=parseFloat(h.taxaMensalContrato.replace(",","."));return N===void 0||N<0?(ee.error("Taxa mensal  obrigatria"),!1):h.dataPrimeiraParcela?!0:(ee.error("Data da primeira parcela  obrigatria"),!1)},y=()=>{const S=N=>N&&parseFloat(N.replace(/[^\d,.-]/g,"").replace(",","."))||0,E=N=>N?(parseFloat(N.replace(",","."))||0)/100:0;return{credor:h.credor,devedor:h.devedor,numeroProcesso:h.numeroProcesso||void 0,contratoNum:h.contratoNum||void 0,tipoEmprestimo:h.tipoEmprestimo,sistemaAmortizacao:h.sistemaAmortizacao,totalFinanciado:S(h.totalFinanciado),quantidadeParcelas:parseInt(h.quantidadeParcelas),dataPrimeiraParcela:h.dataPrimeiraParcela,dataContrato:h.dataContrato||void 0,taxaMensalContrato:E(h.taxaMensalContrato),taxaMensalMercado:E(h.taxaMensalMercado),tac:S(h.tac)||void 0,tec:S(h.tec)||void 0,tarifaCadastro:S(h.tarifaCadastro)||void 0,seguroPrestamista:S(h.seguroPrestamista)||void 0,iofPrincipal:S(h.iofPrincipal)||void 0,observacoes:h.observacoes||void 0}},j=async()=>{if(w())try{l(!0);const S=y();if(u)await ca.update(u,S),ee.success("Dados atualizados com sucesso!");else{const E=await ca.create(S);d(E.id),ee.success("Emprstimo criado com sucesso!")}}catch(S){console.error("Erro ao salvar:",S),ee.error("Erro ao salvar: "+S.message)}finally{l(!1)}},_=async()=>{if(!u){ee.error("Salve os dados antes de iniciar a anlise");return}if(w())try{a(!0);const S=y();await j(),console.log(" Executando anlise prvia de emprstimo...");const E=$x({valorFinanciado:S.totalFinanciado,numeroParcelas:S.quantidadeParcelas,taxaMensalCobrada:S.taxaMensalContrato,taxaMensalMercado:S.taxaMensalMercado,sistemaAmortizacao:S.sistemaAmortizacao,encargosIniciais:(S.tac||0)+(S.tec||0)+(S.tarifaCadastro||0),encargosRecorrentes:S.seguroPrestamista||0,mesesAnalise:12});await ca.updateCalculatedResults(u,{total_juros_cobrado:E.totalJurosCobrado,total_juros_devido:E.totalJurosDevido,diferenca_restituicao:E.diferencaRestituicao,total_encargos:E.totalEncargos,valor_total_pago:E.totalJurosCobrado+S.totalFinanciado,valor_total_devido:E.totalJurosDevido+S.totalFinanciado,sobretaxa_pp:E.sobretaxaPP,cet_mensal:E.cetMensal,cet_anual:E.cetAnual,tac_tec_irregular:E.tacTecIrregular,encargos_irregulares:E.encargosIrregulares}),await ca.updateStatus(u,"Em Anlise");const N={taxaContratoAM:E.taxaCobradaMensal,taxaMercadoAM:E.taxaMercadoMensal,sobretaxaPP:E.sobretaxaPP,valorTotalPago:E.totalJurosCobrado+S.totalFinanciado,valorDevido:E.totalJurosDevido+S.totalFinanciado,diferencaRestituicao:E.diferencaRestituicao,formatted:E.formatted};ee.success("Anlise prvia concluda com sucesso!"),e("calc-analise",u,N)}catch(S){console.error("Erro ao iniciar anlise:",S),ee.error("Erro ao iniciar anlise: "+S.message)}finally{a(!1)}},C=async()=>{if(!u){ee.error("Salve os dados antes de gerar o relatrio");return}if(w())try{a(!0);const S=y();await j(),console.log(" Gerando relatrio completo de emprstimo...");const E=$x({valorFinanciado:S.totalFinanciado,numeroParcelas:S.quantidadeParcelas,taxaMensalCobrada:S.taxaMensalContrato,taxaMensalMercado:S.taxaMensalMercado,sistemaAmortizacao:S.sistemaAmortizacao,encargosIniciais:(S.tac||0)+(S.tec||0),encargosRecorrentes:S.seguroPrestamista||0});await ca.updateCalculatedResults(u,{total_juros_cobrado:E.totalJurosCobrado,total_juros_devido:E.totalJurosDevido,diferenca_restituicao:E.diferencaRestituicao,total_encargos:E.totalEncargos,valor_total_pago:E.totalJurosCobrado+S.totalFinanciado,valor_total_devido:E.totalJurosDevido+S.totalFinanciado,sobretaxa_pp:E.sobretaxaPP,cet_mensal:E.cetMensal,cet_anual:E.cetAnual,tac_tec_irregular:E.tacTecIrregular,encargos_irregulares:E.encargosIrregulares}),await ca.updateStatus(u,"Concludo");const N={credor:S.credor,devedor:S.devedor,contratoNum:S.contratoNum||"N/A",metodologia:`Anlise de Emprstimo - Sistema ${S.sistemaAmortizacao}`,cards:{valorPrincipal:S.totalFinanciado,totalJuros:E.totalJurosCobrado,totalTaxas:E.totalEncargos,valorTotalDevido:E.totalJurosDevido+S.totalFinanciado,totalRestituir:E.diferencaRestituicao},comparativo:{taxaContratoAM:E.taxaCobradaMensal,taxaMercadoAM:E.taxaMercadoMensal,sobretaxaPP:E.sobretaxaPP},tabelaAmortizacao:[],formatted:{cards:{valorPrincipal:E.formatted?.valorFinanciado||"",totalJuros:E.formatted?.totalJurosCobrado||"",totalTaxas:`R$ ${E.totalEncargos.toFixed(2)}`,valorTotalDevido:E.formatted?.totalJurosDevido||"",totalRestituir:E.formatted?.diferencaRestituicao||""},comparativo:{taxaContratoAM:E.formatted?.taxaCobradaMensal||"",taxaMercadoAM:E.formatted?.taxaMercadoMensal||"",sobretaxaPP:E.formatted?.sobretaxaPP||""}}};ee.success("Relatrio completo gerado com sucesso!"),e("calc-relatorio",u,N)}catch(S){console.error("Erro ao gerar relatrio:",S),ee.error("Erro ao gerar relatrio: "+S.message)}finally{a(!1)}};return o.jsxs("div",{className:"p-4 lg:p-8",children:[o.jsxs(xe,{variant:"ghost",onClick:()=>e("calculations"),className:"gap-2 mb-6",children:[o.jsx(Uo,{className:"w-4 h-4"}),"Voltar para Lista de Casos"]}),o.jsx("div",{className:"mb-8",children:o.jsx("h1",{className:"text-gray-900 dark:text-white mb-2",children:"Reviso Geral (Emprstimos e Financiamentos)"})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Dados do Contrato"})}),o.jsx(We,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"credor",children:"Credor"}),o.jsx(oe,{id:"credor",placeholder:"Nome da Instituio Financeira",value:h.credor,onChange:S=>m("credor",S.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"devedor",children:"Devedor"}),o.jsx(oe,{id:"devedor",placeholder:"Nome Completo do Devedor",value:h.devedor,onChange:S=>m("devedor",S.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"tipoContrato",children:"Tipo de Contrato"}),o.jsxs(et,{children:[o.jsx(rt,{id:"tipoContrato",children:o.jsx(tt,{placeholder:"Selecione",value:h.tipoContrato})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"emprestimo-pessoal",children:"Emprstimo Pessoal"}),o.jsx(ie,{value:"emprestimo-consignado",children:"Emprstimo Consignado"}),o.jsx(ie,{value:"capital-giro",children:"Capital de Giro"}),o.jsx(ie,{value:"financiamento-veiculo",children:"Financiamento de Veculo"}),o.jsx(ie,{value:"financiamento",children:"Financiamento"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"dataCalculo",children:"Data do Clculo"}),o.jsx(oe,{id:"dataCalculo",type:"date",placeholder:"Escolha a data",value:h.dataCalculo,onChange:S=>m("dataCalculo",S.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"totalFinanciado",children:"Total Financiado"}),o.jsx(oe,{id:"totalFinanciado",type:"text",placeholder:"Valor total do emprstimo",value:h.totalFinanciado,onChange:S=>m("totalFinanciado",S.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"valorParcela",children:"Valor da Parcela"}),o.jsx(oe,{id:"valorParcela",type:"text",placeholder:"Valor da parcela mensal",value:h.valorParcela,onChange:S=>m("valorParcela",S.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"quantidadeParcelas",children:"Quantidade de Parcelas"}),o.jsx(oe,{id:"quantidadeParcelas",type:"text",placeholder:"Informe a quantidade de parcelas",value:h.quantidadeParcelas,onChange:S=>m("quantidadeParcelas",S.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"dataPrimeiraParcela",children:"Data da 1 Parcela"}),o.jsx(oe,{id:"dataPrimeiraParcela",type:"date",placeholder:"Escolha a data",value:h.dataPrimeiraParcela,onChange:S=>m("dataPrimeiraParcela",S.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"dataContrato",children:"Data do Contrato"}),o.jsx(oe,{id:"dataContrato",type:"date",placeholder:"Escolha a data",value:h.dataContrato,onChange:S=>m("dataContrato",S.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"indiceCorrecao",children:"ndice de Correo Monetria (opcional)"}),o.jsxs(et,{children:[o.jsx(rt,{id:"indiceCorrecao",children:o.jsx(tt,{placeholder:"Selecione (se houver)"})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"inpc",children:"INPC"}),o.jsx(ie,{value:"ipca",children:"IPCA"}),o.jsx(ie,{value:"tr",children:"TR"}),o.jsx(ie,{value:"igpm",children:"IGP-M"}),o.jsx(ie,{value:"selic",children:"SELIC"}),o.jsx(ie,{value:"cdi",children:"CDI"})]})]})]})]})})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Encargos Adicionais"})}),o.jsx(We,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"seguros",children:"Seguros"}),o.jsx(oe,{id:"seguros",type:"text",placeholder:"Valor total dos seguros, se aplicvel"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"outrosEncargos",children:"Outros Encargos"}),o.jsx(oe,{id:"outrosEncargos",type:"text",placeholder:"Valor de outras taxas e encargos"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"dataLiberacao",children:"Data de Liberao"}),o.jsx(oe,{id:"dataLiberacao",type:"date",placeholder:"Escolha a data"})]})]})})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Taxas e Juros"})}),o.jsx(We,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"taxaJurosMensal",children:"Taxa de Juros Mensal"}),o.jsx(oe,{id:"taxaJurosMensal",type:"text",placeholder:"Ex: 1,5% ou 0,015"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"cdi",children:"CDI (Taxa Adicional)"}),o.jsx(oe,{id:"cdi",type:"text",placeholder:"Ex: 100% do CDI"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"taxaJurosAnual",children:"Taxa de Juros Anual"}),o.jsx(oe,{id:"taxaJurosAnual",type:"text",placeholder:"Ex: 18% ou 0,18"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"jurosMora",children:"Juros de Mora %"}),o.jsx(oe,{id:"jurosMora",type:"text",placeholder:"Ex: 1%"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"tarifaTAC",children:"Tarifa TAC"}),o.jsx(oe,{id:"tarifaTAC",type:"text",placeholder:"Valor da Tarifa de Abertura de Crdito (TAC)"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"tarifaTEC",children:"Tarifa TEC"}),o.jsx(oe,{id:"tarifaTEC",type:"text",placeholder:"Valor da Tarifa de Emisso de Carn (TEC)"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"seguroProtecao",children:"Seguro Prestamista"}),o.jsx(oe,{id:"seguroProtecao",type:"text",placeholder:"Valor do seguro prestamista contratado"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"seguroProtecaoFinanceira",children:"Seguro de Proteo Financeira"}),o.jsx(oe,{id:"seguroProtecaoFinanceira",type:"text",placeholder:"Valor do seguro de proteo financeira"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"comissaoFlat",children:"Comisso Flat"}),o.jsx(oe,{id:"comissaoFlat",type:"text",placeholder:"Valor da comisso flat aplicada"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"tarifas",children:"Tarifas"}),o.jsx(oe,{id:"tarifas",type:"text",placeholder:"Outras tarifas cobradas na fatura"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"tarifaAvaliacao",children:"Tarifa de Avaliao do Bem"}),o.jsx(oe,{id:"tarifaAvaliacao",type:"text",placeholder:"Valor da avaliao do bem financiado"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"registroContrato",children:"Registro de Contrato"}),o.jsx(oe,{id:"registroContrato",type:"text",placeholder:"Valor do registro do contrato"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"tarifaCadastro",children:"Tarifa de Cadastro"}),o.jsx(oe,{id:"tarifaCadastro",type:"text",placeholder:"Valor da tarifa de cadastro"})]})]})})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-end",children:[o.jsx(xe,{variant:"outline",onClick:_,children:"Iniciar Anlise Prvia"}),o.jsx(xe,{onClick:C,children:"Gerar Relatrio Completo"}),o.jsx(xe,{onClick:j,disabled:t,children:"Salvar Dados"})]})]})]})}function Lx({calcId:r,onNavigate:e,data:t}){const a=()=>{ee.success("Anlise exportada em PDF com sucesso!")},i=O=>O!==void 0&&"anatocismoDetectado"in O,l=O=>O!==void 0&&"sistemaAmortizacao"in O,u=i(t)?"cartao":l(t)?"emprestimo":"financiamento",d=u==="cartao"?"Taxa Mdia Cobrada":"Taxa do Contrato",h=i(t)?t.formatted?.taxaMediaCobrada||"0,00%":l(t)?t.formatted?.taxaCobradaMensal||"0,00%":t?.formatted?.taxaContratoAM||"0,00%",p=i(t)?t.formatted?.taxaMercado||"0,00%":l(t)?t.formatted?.taxaMercadoMensal||"0,00%":t?.formatted?.taxaMercadoAM||"0,00%",g=t?.formatted?.sobretaxaPP||"0,00%",m=i(t)||l(t)?t.formatted?.totalJurosCobrado||"R$ 0,00":t?.formatted?.valorTotalPago||"R$ 0,00",w=i(t)||l(t)?"Total de Juros que Deveria ter Pago":"Valor que Deveria ter Pago",y=i(t)||l(t)?t.formatted?.totalJurosDevido||"R$ 0,00":t?.formatted?.valorDevido||"R$ 0,00",j=t?.formatted?.diferencaRestituicao||"R$ 0,00",_=i(t)||l(t)?t.formatted?.cetMensal||"0,00%":null,C=i(t)||l(t)?t.formatted?.cetAnual||"0,00%":null,S=()=>{if(!t)return"0%";const O=i(t)||l(t)?t.totalJurosDevido:t.valorDevido;return O===0?"0%":`${(t.diferencaRestituicao/O*100).toFixed(0)}%`},E=t&&t.sobretaxaPP>.001,N=t&&(()=>{const O=i(t)||l(t)?t.totalJurosDevido:t.valorDevido;return O>0&&t.diferencaRestituicao/O>.1})(),D=[];i(t)&&(t.anatocismoDetectado&&D.push("Anatocismo detectado (juros sobre juros)"),t.encargosAbusivos&&t.encargosAbusivos.length>0&&D.push(...t.encargosAbusivos)),l(t)&&(t.tacTecIrregular&&D.push("TAC/TEC irregular (vedada pela Resoluo CMN 3.518/2007)"),t.encargosIrregulares&&t.encargosIrregulares.length>0&&D.push(...t.encargosIrregulares));const R=D.length>0;return o.jsxs("div",{className:"p-4 lg:p-8",children:[o.jsxs(xe,{variant:"ghost",onClick:()=>e("calculations"),className:"gap-2 mb-6",children:[o.jsx(Uo,{className:"w-4 h-4"}),"Voltar para Lista de Casos"]}),o.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-gray-900 dark:text-white mb-2",children:["Anlise Prvia",u==="cartao"&&" - Carto de Crdito",u==="emprestimo"&&" - Emprstimo",u==="financiamento"&&" - Financiamento Imobilirio"]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Resumo comparativo do clculo revisional"})]}),o.jsxs(xe,{onClick:a,className:"gap-2",children:[o.jsx(Lc,{className:"w-4 h-4"}),"Exportar Anlise (PDF)"]})]}),!t&&o.jsx(qe,{className:"mb-6 border-yellow-500 dark:border-yellow-600",children:o.jsx(We,{className:"pt-6",children:o.jsx("p",{className:"text-yellow-700 dark:text-yellow-400",children:"Nenhum dado de anlise disponvel. Execute uma anlise prvia primeiro."})})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Resumo Comparativo"})}),o.jsxs(We,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:d}),o.jsx("div",{className:"text-2xl text-gray-900 dark:text-white",children:h})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Taxa Mdia do Mercado"}),o.jsx("div",{className:"text-2xl text-gray-900 dark:text-white",children:p})]}),o.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-800",children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sobretaxa"}),o.jsx("div",{className:`text-2xl ${E?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"}`,children:g})]}),_&&C&&o.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-800",children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"CET (Custo Efetivo Total)"}),o.jsxs("div",{className:"text-lg text-gray-900 dark:text-white",children:["Mensal: ",_," | Anual: ",C]})]})]})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Representatividade"})}),o.jsxs(We,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:u==="cartao"||u==="emprestimo"?"Total de Juros Cobrado":"Valor Total Pago"}),o.jsx("div",{className:"text-2xl text-gray-900 dark:text-white",children:m})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:w}),o.jsx("div",{className:"text-2xl text-gray-900 dark:text-white",children:y})]}),o.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-800",children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Diferena (Possvel Restituio)"}),o.jsx("div",{className:`text-2xl ${N?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:j})]})]})]})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Pontos de Viabilidade"})}),o.jsx(We,{children:o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:`${E?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-600"} flex-shrink-0`,children:E?"":""}),o.jsx("span",{className:"text-gray-900 dark:text-white",children:E?`Sobretaxa identificada (${g}), caracterizando possvel abusividade`:"Nenhuma sobretaxa significativa identificada"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:`${N?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-600"} flex-shrink-0`,children:N?"":""}),o.jsx("span",{className:"text-gray-900 dark:text-white",children:N?`Diferena significativa entre valores (${S()} de diferena)`:"Diferena entre valores dentro dos parmetros normais"})]}),R&&o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-red-600 dark:text-red-400 flex-shrink-0",children:""}),o.jsxs("div",{className:"text-gray-900 dark:text-white",children:[o.jsx("div",{className:"font-semibold",children:"Irregularidades detectadas:"}),o.jsx("ul",{className:"mt-1 space-y-1 pl-4",children:D.map((O,B)=>o.jsxs("li",{className:"text-sm",children:[" ",O]},B))})]})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:`${t&&t.diferencaRestituicao>1e3?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-600"} flex-shrink-0`,children:t&&t.diferencaRestituicao>1e3?"":""}),o.jsx("span",{className:"text-gray-900 dark:text-white",children:t&&t.diferencaRestituicao>1e3?`Potencial de restituio: ${j}`:"Potencial de restituio baixo ou inexistente"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:`${E&&N||R?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-600"} flex-shrink-0`,children:E&&N||R?"":""}),o.jsx("span",{className:"text-gray-900 dark:text-white",children:E&&N||R?"Caso com alta viabilidade para reviso judicial":"Recomenda-se anlise mais detalhada antes de prosseguir"})]})]})})]})]})}class gp extends Error{constructor(e,t,a){super(e),this.code=t,this.details=a,this.name="CalculationError"}}const yM=Object.freeze(Object.defineProperty({__proto__:null,CalculationError:gp},Symbol.toStringTag,{value:"Module"}));function vp(r,e){const t=[],[a,i,l]=r.split("-").map(Number);for(let u=0;u<e;u++){const d=new Date(a,i-1+u,l),h=d.getFullYear(),p=String(d.getMonth()+1).padStart(2,"0"),g=String(d.getDate()).padStart(2,"0");t.push(`${h}-${p}-${g}`)}return t}function wM(r,e,t){return r>=e&&r<=t}function bM(r,e){for(const t of e)if(wM(r,t.ini,t.fim))return t.i;throw new gp(`Nenhuma faixa de taxa encontrada para a data ${r}`,"TAXA_NAO_ENCONTRADA",{data:r,faixas:e})}function k_(r,e){if(!e||e.length===0)return 1;const t=e.find(a=>a.data===r);return t?t.fator:1}function _M(r,e){return!e||e.length===0?null:e.find(t=>t.data===r)||null}function jM(r,e){if(!e||e.length===0)return[];if(e.length===r.length)return e;if(e.length===1){const t=e[0];return r.map(a=>({data:a,MIP:t.MIP,DFI:t.DFI,TCA:t.TCA,multa:t.multa,mora:t.mora}))}return e}function ss(r){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r)}function CM(r,e=4){return`${(r*100).toFixed(e)}%`}function SM(r){const{pv:e,n:t,primeiroVenc:a,faixasTaxa:i,trSeries:l,encargosMensais:u,horizonteMeses:d}=r,h=d?Math.min(d,t):t,p=e/t,g=vp(a,h),m=jM(g,u),w=[];let y=e,j=0,_=0,C=0,S=0,E=0,N=0,D=0;for(let B=0;B<h;B++){const F=g[B],H=B+1,Z=k_(F,l),ae=y*Z,ue=bM(F,i),z=ae*ue,V=p+z,se=_M(F,m),X=se?.MIP||0,re=se?.DFI||0,U=se?.TCA||0,I=se?.multa||0,P=se?.mora||0,A=V+X+re+U+I+P,M=ae-p;w.push({mes:H,data:F,valorOriginalParcela:V,valorCorrigido:V,juros:z,amortizacao:p,saldoDevedor:M,MIP:X,DFI:re,TCA:U,multa:I,mora:P,totalPago:A}),j+=z,_+=p,C+=X,S+=re,E+=U,N+=I,D+=P,y=M}const R=C+S+E+N+D,O=_+j+R;return{tipo:"AP01",tabela:w,totais:{valorPrincipal:e,totalJuros:j,totalMIP:C,totalDFI:S,totalTCA:E,totalMulta:N,totalMora:D,totalTaxas:R,totalPago:O}}}function EM(r,e){const{pv:t,n:a,primeiroVenc:i,trSeries:l,horizonteMeses:u}=r,d=u?Math.min(u,a):a,h=t/a,p=vp(i,d),g=[];let m=t,w=0,y=0;for(let _=0;_<d;_++){const C=p[_],S=_+1,E=k_(C,l),N=m*E,D=N*e,R=h+D,O=N-h;g.push({mes:S,data:C,valorOriginalParcela:R,valorCorrigido:R,juros:D,amortizacao:h,saldoDevedor:O}),w+=D,y+=h,m=O}const j=y+w;return{tipo:"AP05",tabela:g,totais:{valorPrincipal:t,totalJuros:w,totalDevido:j}}}function kM(r,e,t,a){const i=[];let l=0;const u=Math.min(r.tabela.length,e.tabela.length);for(let h=0;h<u;h++){const p=r.tabela[h],g=e.tabela[h];if(p.totalPago===void 0)throw new gp(`totalPago no encontrado na linha ${h+1} do cenrio AP01`,"TOTAL_PAGO_AUSENTE",{linha:h+1,linhaCobrado:p});const m=p.totalPago-g.valorOriginalParcela;i.push({mes:p.mes,data:p.data,valorOriginalParcela:p.totalPago||0,valorCorrigido:g.valorOriginalParcela,juros:p.juros,amortizacao:p.amortizacao,saldoDevedor:p.saldoDevedor,diferenca:m}),l+=m}const d=t-a;return{tipo:"AP03",tabela:i,totais:{totalRestituir:l,taxaContratoAM:t,taxaMercadoAM:a,sobretaxaPP:d}}}async function N_(r,e){try{const[t,a,i]=r.split("-"),[l,u,d]=e.split("-"),h=`${i}/${a}/${t}`,p=`${d}/${u}/${l}`,g=`https://api.bcb.gov.br/dados/serie/bcdata.sgs.226/dados?formato=json&dataInicial=${h}&dataFinal=${p}`,m=new AbortController,w=setTimeout(()=>m.abort(),3e4);let y;try{if(y=await fetch(g,{signal:m.signal,mode:"cors",headers:{Accept:"application/json"}}),clearTimeout(w),!y.ok)return console.warn(`API Bacen retornou status ${y.status}. Usando TR neutra.`),[]}catch(C){return clearTimeout(w),C.name==="AbortError"?console.warn("Timeout ao buscar TR do Banco Central (>30s). Usando TR neutra."):console.error("Erro ao buscar TR do Banco Central:",C),[]}return(await y.json()).map(C=>{const[S,E,N]=C.data.split("/"),D=`${N}-${E}-${S}`,O=1+parseFloat(C.valor)/100;return{data:D,fator:O}})}catch(t){return console.error("Erro ao buscar TR do Banco Central:",t),console.warn("Continuando sem correo TR (fator = 1.0)"),[]}}const Oh=new Map;async function NM(r,e){const t=`${r}_${e}`;if(Oh.has(t))return console.log("TR carregada do cache"),Oh.get(t);console.log("Buscando TR da API do Banco Central...");const a=await N_(r,e);return a.length>0&&Oh.set(t,a),a}const zx=Object.freeze(Object.defineProperty({__proto__:null,buscarTRBancoCentral:N_,buscarTRComCache:NM,formatarMoeda:ss,formatarPercent:CM,gerarCenarioAP01:SM,gerarCenarioAP03:kM,gerarCenarioAP05:EM,gerarRangeMensal:vp},Symbol.toStringTag,{value:"Module"}));function PM({calcId:r,onNavigate:e,data:t}){const a=()=>{ee.success("Relatrio exportado em PDF com sucesso!")},i=t?.tipo||"financiamento",l={financiamento:"Financiamento Imobilirio",emprestimo:"Emprstimo",cartao:"Carto de Crdito"}[i],u={financiamento:"Relatrio detalhado de clculos financeiros para processos judiciais.",emprestimo:"Anlise detalhada de emprstimo com Sistema PRICE/SAC.",cartao:"Anlise detalhada de operaes de carto de crdito."}[i],d=m=>{const[w,y,j]=m.split("-");return`${j}/${y}/${w}`},h={credor:t?.credor||"N/A",devedor:t?.devedor||"N/A",contrato:t?.contratoNum?`Contrato n ${t.contratoNum}`:"N/A",metodologia:t?.metodologia||"N/A"},p={valorPrincipal:t?.formatted?.cards?.valorPrincipal||"R$ 0,00",totalJuros:t?.formatted?.cards?.totalJuros||"R$ 0,00",totalTaxas:t?.formatted?.cards?.totalTaxas||"R$ 0,00",valorTotalDevido:t?.formatted?.cards?.valorTotalDevido||"R$ 0,00",valorRestituir:t?.formatted?.cards?.totalRestituir||"R$ 0,00"},g={taxaContratoAM:t?.formatted?.comparativo?.taxaContratoAM||"0,00%",taxaMercadoAM:t?.formatted?.comparativo?.taxaMercadoAM||"0,00%",sobretaxaPP:t?.formatted?.comparativo?.sobretaxaPP||"0,00%"};return o.jsxs("div",{className:"p-4 lg:p-8",children:[o.jsxs(xe,{variant:"ghost",onClick:()=>e("calculations"),className:"gap-2 mb-6",children:[o.jsx(Uo,{className:"w-4 h-4"}),"Voltar para Lista de Casos"]}),o.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-gray-900 dark:text-white mb-2",children:["Relatrio Completo de Clculo - ",l]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:u})]}),o.jsxs(xe,{onClick:a,className:"gap-2",children:[o.jsx(Lc,{className:"w-4 h-4"}),"Exportar Relatrio Completo (PDF)"]})]}),!t&&o.jsx(qe,{className:"mb-6 border-yellow-500 dark:border-yellow-600",children:o.jsx(We,{className:"pt-6",children:o.jsx("p",{className:"text-yellow-700 dark:text-yellow-400",children:"Nenhum dado de relatrio disponvel. Gere um relatrio completo primeiro."})})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Dados do Credor, Devedor e do Processo"})}),o.jsx(We,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Credor"}),o.jsx("p",{className:"text-gray-900 dark:text-white",children:h.credor})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Devedor"}),o.jsx("p",{className:"text-gray-900 dark:text-white",children:h.devedor})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dados do Contrato"}),o.jsx("p",{className:"text-gray-900 dark:text-white",children:h.contrato})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Metodologia de Clculo"}),o.jsx("p",{className:"text-gray-900 dark:text-white",children:h.metodologia})]})]})})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Comparativo de Taxas"})}),o.jsxs(We,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Taxa do Contrato"}),o.jsx("p",{className:"text-2xl text-gray-900 dark:text-white",children:g.taxaContratoAM})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Taxa de Mercado"}),o.jsx("p",{className:"text-2xl text-gray-900 dark:text-white",children:g.taxaMercadoAM})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sobretaxa"}),o.jsx("p",{className:"text-2xl text-red-600 dark:text-red-400",children:g.sobretaxaPP})]})]}),(i==="emprestimo"||i==="cartao")&&t?.cetMensal&&t?.cetAnual&&o.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-800",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Custo Efetivo Total (CET)"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"CET Mensal"}),o.jsxs("p",{className:"text-xl text-gray-900 dark:text-white",children:[(t.cetMensal*100).toFixed(4),"%"]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"CET Anual"}),o.jsxs("p",{className:"text-xl text-gray-900 dark:text-white",children:[(t.cetAnual*100).toFixed(2),"%"]})]})]})]}),i==="emprestimo"&&t?.sistemaAmortizacao&&o.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-800",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sistema de Amortizao"}),o.jsx("p",{className:"text-xl text-gray-900 dark:text-white",children:t.sistemaAmortizacao})]})]})]}),(i==="emprestimo"||i==="cartao")&&t?.irregularidades&&t.irregularidades.length>0&&o.jsxs(qe,{className:"border-red-500 dark:border-red-600",children:[o.jsx(Je,{children:o.jsx(Ye,{className:"text-red-700 dark:text-red-400",children:"Irregularidades Detectadas"})}),o.jsx(We,{children:o.jsx("ul",{className:"space-y-2",children:t.irregularidades.map((m,w)=>o.jsxs("li",{className:"flex items-start gap-2 text-gray-900 dark:text-white",children:[o.jsx("span",{className:"text-red-600 dark:text-red-400 flex-shrink-0",children:""}),o.jsx("span",{children:m})]},w))})})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Detalhes de Encargos"})}),o.jsx(We,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(li,{children:"Valor Principal"}),o.jsx("div",{className:"px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-950",children:o.jsx("p",{className:"text-gray-900 dark:text-white",children:p.valorPrincipal})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(li,{children:"Total de Juros"}),o.jsx("div",{className:"px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-950",children:o.jsx("p",{className:"text-gray-900 dark:text-white",children:p.totalJuros})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(li,{children:"Total de Taxas"}),o.jsx("div",{className:"px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-950",children:o.jsx("p",{className:"text-gray-900 dark:text-white",children:p.totalTaxas})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(li,{children:"Valor Total Devido"}),o.jsx("div",{className:"px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-950",children:o.jsx("p",{className:"text-gray-900 dark:text-white",children:p.valorTotalDevido})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(li,{children:"Valor Total a Restituir"}),o.jsx("div",{className:"px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-green-50 dark:bg-green-950/20 border-green-300 dark:border-green-800",children:o.jsx("p",{className:"text-green-700 dark:text-green-400",children:p.valorRestituir})})]})]})})]}),(i==="financiamento"||i==="emprestimo")&&o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Tabela de Amortizao"})}),o.jsx(We,{children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs(ba,{children:[o.jsx(_a,{children:o.jsxs(er,{children:[o.jsx(He,{children:"Ms"}),o.jsx(He,{children:"Data"}),o.jsx(He,{children:"Valor Original"}),o.jsx(He,{children:"Valor Corrigido"}),o.jsx(He,{children:"Juros"}),o.jsx(He,{children:"Amortizao"}),o.jsx(He,{children:"Saldo Devedor"})]})}),o.jsx(ja,{children:t?.tabelaAmortizacao&&t.tabelaAmortizacao.length>0?t.tabelaAmortizacao.map(m=>o.jsxs(er,{children:[o.jsx(Be,{children:m.mes}),o.jsx(Be,{children:d(m.data)}),o.jsx(Be,{children:ss(m.valorOriginalParcela)}),o.jsx(Be,{children:ss(m.valorCorrigido)}),o.jsx(Be,{children:ss(m.juros)}),o.jsx(Be,{children:ss(m.amortizacao)}),o.jsx(Be,{children:ss(m.saldoDevedor)})]},m.mes)):o.jsx(er,{children:o.jsx(Be,{colSpan:7,className:"text-center text-gray-500 dark:text-gray-400",children:"Nenhum dado disponvel"})})})]})})})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Resumo Executivo"})}),o.jsx(We,{children:o.jsxs("p",{className:"text-gray-900 dark:text-white leading-relaxed",children:[i==="financiamento"&&o.jsxs(o.Fragment,{children:["Este relatrio apresenta o clculo revisional de financiamento imobilirio, comparando os valores efetivamente cobrados com os valores que deveriam ter sido cobrados considerando a taxa mdia de mercado. O clculo envolve o credor ",h.credor," e o devedor ",h.devedor,", referente ao contrato ",h.contratoNum||"no informado",". A anlise contempla ",t?.tabelaAmortizacao?.length||0," parcelas, utilizando a metodologia ",h.metodologia,"."]}),i==="emprestimo"&&o.jsxs(o.Fragment,{children:["Este relatrio apresenta a anlise revisional de emprstimo ",t?.sistemaAmortizacao?`utilizando o Sistema ${t.sistemaAmortizacao}`:"",", comparando os valores efetivamente cobrados com os valores devidos considerando a taxa mdia de mercado e identificando irregularidades contratuais. O clculo envolve o credor ",h.credor," e o devedor ",h.devedor,", referente ao contrato ",h.contratoNum||"no informado",". A anlise contempla ",t?.tabelaAmortizacao?.length||0," parcelas e considera os encargos iniciais, tarifas recorrentes e o Custo Efetivo Total (CET)."]}),i==="cartao"&&o.jsxs(o.Fragment,{children:["Este relatrio apresenta a anlise de operaes de carto de crdito, identificando prticas abusivas como anatocismo (juros sobre juros), encargos irregulares e sobretaxa acima do mercado. O clculo envolve o credor ",h.credor," e o devedor ",h.devedor,". A anlise contempla o Custo Efetivo Total (CET), comparao com taxas de mercado e identificao de encargos vedados pela legislao consumerista."]})]})})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Base Legal e Metodologia"})}),o.jsx(We,{children:o.jsxs("p",{className:"text-gray-900 dark:text-white leading-relaxed",children:[i==="financiamento"&&o.jsxs(o.Fragment,{children:["Os clculos so fundamentados no Cdigo Civil Brasileiro (Lei 10.406/2002), Cdigo de Defesa do Consumidor (Lei 8.078/1990, especialmente Art. 39, V e Art. 51, IV), Lei do Sistema Financeiro de Habitao (Lei 4.380/1964 e Lei 10.931/2004), e Resoluo CMN 3.932/2010 que regulamenta encargos bancrios. A metodologia empregada utiliza o Sistema de Amortizao Constante (SAC), com taxa de juros efetiva de ",t?.formatted?.comparativo?.taxaContratoAM||"no informada"," ao ms. O comparativo com a taxa mdia de mercado (",t?.formatted?.comparativo?.taxaMercadoAM||"no informada",") identifica eventual sobretaxa em desacordo com os parmetros do SFH."]}),i==="emprestimo"&&o.jsxs(o.Fragment,{children:["Os clculos so fundamentados no Cdigo Civil Brasileiro (Lei 10.406/2002), Cdigo de Defesa do Consumidor (Lei 8.078/1990, Art. 39, V - venda casada, e Art. 51, IV - vantagens exageradas), Resoluo CMN 3.518/2007 (probe TAC e TEC desde 30/04/2008), Resoluo CMN 3.919/2010 (Custo Efetivo Total - CET), e Smula 472 do STJ (vedao de cumulao de comisso de permanncia com outros encargos). A metodologia empregada utiliza o Sistema ",t?.sistemaAmortizacao||"PRICE"," de amortizao, calculando o CET mensal e anual para identificao de encargos abusivos. A taxa efetiva de ",t?.formatted?.comparativo?.taxaContratoAM||"no informada","  comparada com a taxa de mercado de ",t?.formatted?.comparativo?.taxaMercadoAM||"no informada","."]}),i==="cartao"&&o.jsx(o.Fragment,{children:"Os clculos so fundamentados no Cdigo de Defesa do Consumidor (Lei 8.078/1990, Art. 39, V e Art. 51, IV), Resoluo CMN 4.549/2017 (pagamento mnimo de 15% da fatura), Resoluo CMN 3.919/2010 (divulgao do CET), Smula 283 do STJ (juros remuneratrios), e Smula 381 do STJ (anatocismo). A anlise identifica a prtica de anatocismo (capitalizao de juros no rotativo), encargos irregulares (seguros no contratados, tarifas vedadas), e sobretaxa abusiva em relao s taxas mdias de mercado divulgadas pelo Banco Central. O CET efetivo  comparado com a taxa mdia do mercado para identificar possveis vantagens excessivas vedadas pelo CDC."})]})})]})]})]})}function li({children:r}){return o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r})}function RM({onNavigate:r}){const[e,t]=x.useState(!1),[a,i]=x.useState(null),l=async d=>{d.target.files?.[0]&&(t(!0),await new Promise(p=>setTimeout(p,2e3)),i({credor:"Banco Exemplo S.A.",devedor:"Joo Silva",numeroContrato:"123456789",valorFinanciado:"250000,00",taxaJuros:"1,85",numeroParcelas:"360",dataContrato:"15/01/2020",sistemAmortizacao:"SAC"}),t(!1),ee.success("Contrato processado com sucesso!"))},u=()=>{ee.success("Prosseguindo para clculo..."),r("calc-financiamento")};return o.jsx("div",{className:"p-4 lg:p-8",children:o.jsxs("div",{className:"w-full",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-gray-900 dark:text-white mb-2",children:"Upload de Contratos (OCR)"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Faa upload do contrato em PDF para extrao automtica de dados"})]}),o.jsxs(qe,{className:"mb-6",children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Upload de Arquivo"})}),o.jsx(We,{children:o.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-12 text-center",children:[o.jsx(SN,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Arraste um arquivo PDF ou clique para selecionar"}),o.jsx(oe,{type:"file",accept:".pdf",onChange:l,className:"hidden",id:"fileUpload"}),o.jsx(xe,{onClick:()=>document.getElementById("fileUpload")?.click(),disabled:e,children:e?"Processando...":"Selecionar Arquivo"})]})})]}),a&&o.jsxs(o.Fragment,{children:[o.jsxs(qe,{className:"mb-6",children:[o.jsxs(Je,{children:[o.jsx(Ye,{children:"Dados Extrados"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Revise e edite os dados extrados do contrato"})]}),o.jsx(We,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"credor",children:"Credor"}),o.jsx(oe,{id:"credor",defaultValue:a.credor})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"devedor",children:"Devedor"}),o.jsx(oe,{id:"devedor",defaultValue:a.devedor})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"numeroContrato",children:"N do Contrato"}),o.jsx(oe,{id:"numeroContrato",defaultValue:a.numeroContrato})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"valorFinanciado",children:"Valor Financiado (R$)"}),o.jsx(oe,{id:"valorFinanciado",defaultValue:a.valorFinanciado})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"taxaJuros",children:"Taxa de Juros (%)"}),o.jsx(oe,{id:"taxaJuros",defaultValue:a.taxaJuros})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"numeroParcelas",children:"N de Parcelas"}),o.jsx(oe,{id:"numeroParcelas",defaultValue:a.numeroParcelas})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"dataContrato",children:"Data do Contrato"}),o.jsx(oe,{id:"dataContrato",type:"date",defaultValue:a.dataContrato.split("/").reverse().join("-")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"sistemaAmortizacao",children:"Sistema de Amortizao"}),o.jsx(oe,{id:"sistemaAmortizacao",defaultValue:a.sistemAmortizacao})]})]})})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(xe,{variant:"outline",children:"Salvar Dados"}),o.jsxs(xe,{onClick:u,className:"gap-2",children:["Prosseguir para Clculo",o.jsx(R1,{className:"w-4 h-4"})]})]})]})]})})}function AM({onNavigate:r}){const[e,t]=x.useState(""),[a,i]=x.useState(!1),[l,u]=x.useState(!1),[d,h]=x.useState(null),[p,g]=x.useState(""),[m,w]=x.useState({name:"",template:""}),[y,j]=x.useState([{id:"1",name:"Petio Inicial - Revisional ABC",type:"Petio Inicial",lastEdit:"15/01/2025",status:"Concludo"},{id:"2",name:"Contestao - Caso XYZ",type:"Contestao",lastEdit:"16/01/2025",status:"Rascunho"},{id:"3",name:"Recurso - Financiamento DEF",type:"Recurso",lastEdit:"14/01/2025",status:"Concludo"}]),_=()=>{if(!p){ee.error("Selecione um modelo de petio");return}ee.success("Criando nova petio..."),i(!1),g(""),r("peticoes-editor","new")},C=D=>{ee.success(`Documento exportado em ${D.toUpperCase()} com sucesso!`)},S=D=>{h(D),u(!0)},E=()=>{j(D=>D.filter(R=>R.id!==d)),ee.success("Petio excluda com sucesso!"),u(!1),h(null)},N=y.filter(D=>D.name.toLowerCase().includes(e.toLowerCase())||D.type.toLowerCase().includes(e.toLowerCase()));return o.jsxs("div",{className:"p-4 lg:p-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-gray-900 dark:text-white mb-2",children:"Gerao de Peties"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gerencie documentos e relatrios jurdicos"})]}),o.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[o.jsxs("div",{className:"relative w-full sm:w-96",children:[o.jsx(zc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx(oe,{placeholder:"Buscar documentos...",value:e,onChange:D=>t(D.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[o.jsxs(An,{children:[o.jsx(Tn,{asChild:!0,children:o.jsxs(xe,{variant:"outline",className:"gap-2",children:[o.jsx(Lc,{className:"w-4 h-4"}),"Exportar"]})}),o.jsxs(On,{children:[o.jsx(wt,{onClick:()=>C("pdf"),children:"Exportar em PDF"}),o.jsx(wt,{onClick:()=>C("word"),children:"Exportar em Word"})]})]}),o.jsxs(Cr,{open:a,onOpenChange:i,children:[o.jsx(Di,{asChild:!0,children:o.jsxs(xe,{className:"gap-2",children:[o.jsx(ys,{className:"w-4 h-4"}),"Nova Petio"]})}),o.jsxs(Sr,{className:"sm:max-w-[400px]",children:[o.jsxs(Er,{children:[o.jsx(Nr,{children:"Nova Petio"}),o.jsx(Pr,{children:"Selecione um modelo de petio para comear"})]}),o.jsxs("div",{className:"py-4",children:[o.jsx(K,{htmlFor:"template",children:"Modelo de Petio"}),o.jsxs(et,{value:p,onValueChange:g,children:[o.jsx(rt,{id:"template",className:"mt-2",children:o.jsx(tt,{placeholder:"Selecione o modelo"})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"inicial",children:"Petio Inicial - Revisional"}),o.jsx(ie,{value:"contestacao",children:"Contestao"}),o.jsx(ie,{value:"recurso",children:"Recurso"}),o.jsx(ie,{value:"memorial",children:"Memorial"}),o.jsx(ie,{value:"blank",children:"Em Branco"})]})]})]}),o.jsxs(kr,{children:[o.jsx(xe,{variant:"outline",onClick:()=>i(!1),children:"Cancelar"}),o.jsx(xe,{onClick:_,children:"Criar"})]})]})]})]})]}),o.jsx("div",{className:"border border-gray-200 dark:border-gray-800 rounded-lg overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs(ba,{children:[o.jsx(_a,{children:o.jsxs(er,{children:[o.jsx(He,{children:"ID"}),o.jsx(He,{children:"Nome"}),o.jsx(He,{children:"Tipo"}),o.jsx(He,{children:"ltima Edio"}),o.jsx(He,{children:"Status"}),o.jsx(He,{className:"w-12",children:"Aes"})]})}),o.jsx(ja,{children:N.map(D=>o.jsxs(er,{children:[o.jsx(Be,{children:D.id}),o.jsx(Be,{className:"text-gray-900 dark:text-white",children:D.name}),o.jsx(Be,{children:o.jsx(sr,{variant:"outline",children:D.type})}),o.jsx(Be,{children:D.lastEdit}),o.jsx(Be,{children:o.jsx(sr,{variant:D.status==="Concludo"?"default":"secondary",children:D.status})}),o.jsx(Be,{children:o.jsxs(An,{children:[o.jsx(Tn,{asChild:!0,children:o.jsx("button",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:o.jsx(xs,{className:"w-4 h-4"})})}),o.jsxs(On,{align:"end",children:[o.jsx(wt,{onClick:()=>r("peticoes-editor",D.id),children:"Visualizar"}),o.jsx(wt,{onClick:()=>r("peticoes-editor",D.id),children:"Editar"}),o.jsx(px,{}),o.jsx(wt,{onClick:()=>C("pdf"),children:"Exportar PDF"}),o.jsx(wt,{onClick:()=>C("word"),children:"Exportar Word"}),o.jsx(px,{}),o.jsx(wt,{className:"text-red-600 dark:text-red-400",onClick:()=>S(D.id),children:"Excluir"})]})]})})]},D.id))})]})})}),N.length===0&&o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhum documento encontrado"})}),o.jsx(Dn,{open:l,onOpenChange:u,children:o.jsxs(In,{children:[o.jsxs(Mn,{children:[o.jsx($n,{children:"Excluir Petio"}),o.jsx(Ln,{children:"Tem certeza de que deseja excluir esta petio? Esta ao no pode ser desfeita."})]}),o.jsxs(Fn,{children:[o.jsx(Bn,{children:"Cancelar"}),o.jsx(zn,{onClick:E,className:"bg-red-600 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700",children:"Excluir"})]})]})})]})}function TM({documentId:r,onNavigate:e}){const t=r==="new",[a,i]=x.useState(!0),[l,u]=x.useState(!1),[d,h]=x.useState({name:t?"":"Petio Inicial - Revisional ABC",type:t?"":"Petio Inicial",status:t?"Rascunho":"Concludo"}),[p,g]=x.useState(`EXCELENTSSIMO SENHOR DOUTOR JUIZ DE DIREITO DA __ VARA CVEL DA COMARCA DE ________

[Nome do Autor], [nacionalidade], [estado civil], [profisso], portador do CPF n [nmero], residente e domiciliado na [endereo completo], por seu advogado que esta subscreve, com escritrio  [endereo do escritrio], onde recebe intimaes, nos termos da procurao anexa, vem, respeitosamente,  presena de Vossa Excelncia, propor a presente

AO REVISIONAL DE CONTRATO BANCRIO

em face de [Nome da Instituio Financeira], pessoa jurdica de direito privado, inscrita no CNPJ sob o n [nmero], com sede na [endereo completo], pelos fatos e fundamentos jurdicos a seguir expostos:

I - DOS FATOS

O Autor celebrou com o Ru contrato de [tipo de contrato] em [data], conforme documento anexo.

[Continuar descrevendo os fatos relevantes...]

II - DO DIREITO

[Fundamentao jurdica...]

III - DOS PEDIDOS

Diante do exposto, requer:

a) A citao do Ru para, querendo, apresentar contestao;
b) A reviso das clusulas contratuais abusivas;
c) A condenao do Ru ao pagamento das custas processuais e honorrios advocatcios;

Nestes termos,
Pede deferimento.

[Cidade], [data].

[Nome do Advogado]
OAB/[UF] n [nmero]`),[m]=x.useState({client:"Joo Silva",contract:"123456789",institution:"Banco Exemplo S.A.",value:"R$ 250.000,00"}),w=()=>{if(!d.name){ee.error("Informe o nome da petio");return}ee.success("Petio salva com sucesso!"),t&&e("peticoes")},y=()=>{ee.success("Petio gerada com dados do caso!")},j=S=>{ee.success(`Documento exportado em ${S.toUpperCase()} com sucesso!`)},_=()=>{ee.success("Petio excluda com sucesso!"),u(!1),e("peticoes")},C=()=>{i(!a),ee.info(a?"Modo de edio ativado":"Modo de visualizao ativado")};return o.jsx("div",{className:"lg:p-8 p-[32px]",children:o.jsxs("div",{className:"max-w-6xl mx-auto m-[0px]",children:[o.jsxs(xe,{variant:"ghost",onClick:()=>e("peticoes"),className:"gap-2 mb-6",children:[o.jsx(Uo,{className:"w-4 h-4"}),"Voltar para Peties"]}),o.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-gray-900 dark:text-white mb-2",children:t?"Nova Petio":a?"Visualizar Petio":"Editar Petio"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t?"Crie uma nova petio com preenchimento automtico":"Gerencie peties com preenchimento automtico"})]}),o.jsxs("div",{className:"flex gap-2",children:[!t&&o.jsxs(o.Fragment,{children:[o.jsxs(xe,{variant:"outline",onClick:C,className:"gap-2",children:[a?o.jsx(Bc,{className:"w-4 h-4"}):o.jsx(G1,{className:"w-4 h-4"}),a?"Editar":"Visualizar"]}),o.jsxs(xe,{variant:"destructive",onClick:()=>u(!0),className:"gap-2",children:[o.jsx(Uc,{className:"w-4 h-4"}),"Excluir"]})]}),(!a||t)&&o.jsxs(xe,{onClick:w,className:"gap-2",children:[o.jsx(Pi,{className:"w-4 h-4"}),t?"Salvar":"Salvar Alteraes"]}),o.jsxs(An,{children:[o.jsx(Tn,{asChild:!0,children:o.jsxs(xe,{variant:a&&!t?"default":"outline",className:"gap-2",children:[o.jsx(Lc,{className:"w-4 h-4"}),"Exportar"]})}),o.jsxs(On,{children:[o.jsx(wt,{onClick:()=>j("pdf"),children:"Exportar PDF"}),o.jsx(wt,{onClick:()=>j("word"),children:"Exportar Word"})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"lg:col-span-1",children:[o.jsxs(qe,{className:"mb-6",children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Informaes da Petio"})}),o.jsxs(We,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"petition-name",children:"Nome da Petio *"}),o.jsx(oe,{id:"petition-name",value:d.name,onChange:S=>h(E=>({...E,name:S.target.value})),placeholder:"Ex: Petio Inicial - Caso ABC",disabled:a&&!t})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"petition-type",children:"Tipo de Petio"}),o.jsxs(et,{value:d.type,onValueChange:S=>h(E=>({...E,type:S})),disabled:a&&!t,children:[o.jsx(rt,{id:"petition-type",children:o.jsx(tt,{placeholder:"Selecione o tipo"})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"Petio Inicial",children:"Petio Inicial"}),o.jsx(ie,{value:"Contestao",children:"Contestao"}),o.jsx(ie,{value:"Recurso",children:"Recurso"}),o.jsx(ie,{value:"Memorial",children:"Memorial"}),o.jsx(ie,{value:"Outro",children:"Outro"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"petition-status",children:"Status"}),o.jsxs(et,{value:d.status,onValueChange:S=>h(E=>({...E,status:S})),disabled:a&&!t,children:[o.jsx(rt,{id:"petition-status",children:o.jsx(tt,{})}),o.jsxs(nt,{children:[o.jsx(ie,{value:"Rascunho",children:"Rascunho"}),o.jsx(ie,{value:"Concludo",children:"Concludo"})]})]})]})]})]}),o.jsxs(qe,{children:[o.jsx(Je,{children:o.jsx(Ye,{children:"Dados do Caso"})}),o.jsxs(We,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Cliente"}),o.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:m.client})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"N Contrato"}),o.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:m.contract})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Instituio"}),o.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:m.institution})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Valor"}),o.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:m.value})]}),(!a||t)&&o.jsxs(xe,{onClick:y,className:"w-full gap-2 mt-4",children:[o.jsx(vN,{className:"w-4 h-4"}),"Gerar Petio"]}),o.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-800",children:o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" A IA pode sugerir trechos relevantes baseados nos dados do caso"})})]})]})]}),o.jsx("div",{className:"lg:col-span-3",children:o.jsxs(qe,{className:"h-full",children:[o.jsx(Je,{children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsx(Ye,{children:"Contedo da Petio"})})}),o.jsx(We,{children:o.jsx(mc,{value:p,onChange:S=>g(S.target.value),className:"min-h-[700px] font-mono text-sm",placeholder:"Digite ou cole o contedo da petio...",disabled:a&&!t})})]})})]}),o.jsx(Dn,{open:l,onOpenChange:u,children:o.jsxs(In,{children:[o.jsxs(Mn,{children:[o.jsx($n,{children:"Excluir Petio"}),o.jsx(Ln,{children:"Tem certeza de que deseja excluir esta petio? Esta ao no pode ser desfeita."})]}),o.jsxs(Fn,{children:[o.jsx(Bn,{children:"Cancelar"}),o.jsx(zn,{onClick:_,className:"bg-red-600 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700",children:"Excluir"})]})]})})]})})}var OM=(r,e,t,a,i,l,u,d)=>{let h=document.documentElement,p=["light","dark"];function g(y){(Array.isArray(r)?r:[r]).forEach(j=>{let _=j==="class",C=_&&l?i.map(S=>l[S]||S):i;_?(h.classList.remove(...C),h.classList.add(l&&l[y]?l[y]:y)):h.setAttribute(j,y)}),m(y)}function m(y){d&&p.includes(y)&&(h.style.colorScheme=y)}function w(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(a)g(a);else try{let y=localStorage.getItem(e)||t,j=u&&y==="system"?w():y;g(j)}catch{}},DM=x.createContext(void 0),IM={setTheme:r=>{},themes:[]},MM=()=>{var r;return(r=x.useContext(DM))!=null?r:IM};x.memo(({forcedTheme:r,storageKey:e,attribute:t,enableSystem:a,enableColorScheme:i,defaultTheme:l,value:u,themes:d,nonce:h,scriptProps:p})=>{let g=JSON.stringify([t,e,l,r,d,u,a,i]).slice(1,-1);return x.createElement("script",{...p,suppressHydrationWarning:!0,nonce:typeof window>"u"?h:"",dangerouslySetInnerHTML:{__html:`(${OM.toString()})(${g})`}})});const Bx=({...r})=>{const{theme:e="system"}=MM();return o.jsx(j1,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...r})};function FM(){const{user:r,loading:e}=Bo(),[t,a]=x.useState("dashboard"),[i,l]=x.useState("light"),[u,d]=x.useState(!1),[h,p]=x.useState(null),[g,m]=x.useState(null);x.useEffect(()=>{document.documentElement.classList.toggle("dark",i==="dark")},[i]);const w=(_,C,S)=>{console.log(" App.navigate chamado:"),console.log("  route:",_),console.log("  id:",C),console.log("  data:",S),a(_),p(C||null),m(S||null),d(!1)},y=()=>{l(_=>_==="light"?"dark":"light")};if(e)return o.jsx("div",{className:"flex h-screen items-center justify-center bg-white dark:bg-gray-900",children:o.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Carregando..."})});if(!r)return o.jsxs(o.Fragment,{children:[o.jsx(AN,{onSuccess:()=>a("dashboard")}),o.jsx(Bx,{position:"top-center"})]});const j=()=>{switch(t){case"dashboard":return o.jsx(mx,{});case"settings-general":return o.jsx(eO,{});case"settings-funnel":return o.jsx(OI,{});case"users":return o.jsx(DI,{});case"permissions":return o.jsx(II,{});case"contacts":return o.jsx(LI,{onNavigate:w});case"contact-details":return o.jsx(zI,{contactId:h,onNavigate:w});case"crm":return o.jsx(UI,{onNavigate:w});case"opportunity-details":return o.jsx(ZI,{opportunityId:h,onNavigate:w});case"calculations":return o.jsx(oM,{onNavigate:w});case"calc-financiamento":return o.jsx(lM,{calcId:h,onNavigate:w});case"calc-cartao":return o.jsx(hM,{calcId:h,onNavigate:w});case"calc-emprestimos":return o.jsx(xM,{calcId:h,onNavigate:w});case"calc-analise":return o.jsx(Lx,{calcId:h,onNavigate:w,data:g});case"calc-analise-cartao":return o.jsx(Lx,{calcId:h,onNavigate:w,data:g});case"calc-relatorio":return o.jsx(PM,{calcId:h,onNavigate:w,data:g});case"upload-contratos":return o.jsx(RM,{onNavigate:w});case"peticoes":return o.jsx(AM,{onNavigate:w});case"peticoes-editor":return o.jsx(TM,{documentId:h,onNavigate:w});default:return o.jsx(mx,{})}};return o.jsxs("div",{className:"flex h-screen overflow-hidden bg-white dark:bg-gray-900",children:[o.jsx(TN,{currentRoute:t,onNavigate:w,isMobileOpen:u,onMobileClose:()=>d(!1)}),o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[o.jsx(r2,{theme:i,onThemeToggle:y,onMobileMenuToggle:()=>d(!0)}),o.jsx("main",{className:"flex-1 overflow-y-auto bg-white dark:bg-gray-900",children:j()})]}),o.jsx(Bx,{position:"top-center"})]})}function $M(){return o.jsx(FM,{})}PC.createRoot(document.getElementById("root")).render(o.jsx($M,{}));
